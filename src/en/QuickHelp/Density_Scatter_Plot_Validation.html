<h1 class="firstHeading">1.244 FAQ-1032 Density Scatter Plot Validation</h1><p class='urlname' style='display: none'>density-dots-validation</p>
<p class='faqID'>Last Update: 12/16/2019</p>
<p><br />
</p><p>Density Dots is scatter plots to show data density,  where the points are color-mapped to the data density. The density is computed using Kernel Density Estimate
</p><p>To calculate Kernel Density Estimate, Origin uses a fast algorithm that utilizes 2D binned approximation and 2D interpolation. First 2D binning is performed on the (x, y) points to obtain a matrix with the bin counts. Then 2D Fast Fourier Transform is utilized to perform discrete convolutions for calculating density values of each grid. 4th root of density values is calculated to map the density scale to the color scale
</p><p>Origin can generate similar result to R from the same dataset
</p>
<h3><a name="Comparison_of_R_and_Origin_Results"></a><span class="mw-headline">Comparison of R and Origin Results</span></h3>
<dl><dd><a  class="image"><img alt="Density Plot Origin R Comparison.png" src="../images/Density_Scatter_Plot_Validation/800px-Density_Plot_Origin_R_Comparison.png?v=61768" width="800"   /></a></dd></dl>
<h3><a name="Reference"></a><span class="mw-headline">Reference</span></h3>
<p><b>Data</b>:<br />
1 Response Variable (y), 1 Predictor Variable (x)
<br />
100000 Observations
<br />
Generated Data
<br />
<a class="external text" href="http://blog.originlab.com/ftp/graph_gallery/DP.csv" target="_blank"><b>Data File: DP.csv</b></a>
</p><p><b>Origin Project File</b>: <a class="external text" href="http://blog.originlab.com/ftp/graph_gallery/density_dots_validation_sample.opju" target="_blank">density_dots_validation_sample.opju</a>
</p><p><b>R Codes to Generate the Graph</b>
</p>
<pre class="lt" style="font-family:monospace;">xx<span style="color: #000080;">=</span> read.<span style="color: #000080;">csv</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;DP.csv&quot;</span>,header<span style="color: #000080;">=</span>FALSE<span style="color: #000000;">&#41;</span>
as.<span style="color: #000080;">list</span><span style="color: #000000;">&#40;</span>body<span style="color: #000000;">&#40;</span>smoothScatter<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>
trace<span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;smoothScatter&quot;</span>,quote<span style="color: #000000;">&#40;</span>browser<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>,at<span style="color: #000080;">=</span><span style="color: #0000dd;">19</span><span style="color: #000000;">&#41;</span>

w<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>c<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">0.056990976577602</span>, <span style="color: #0000dd;">0.13442535086237</span><span style="color: #000000;">&#41;</span>
smoothScatter<span style="color: #000000;">&#40;</span>xx, nrpoints <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span>,nbin<span style="color: #000080;">=</span><span style="color: #0000dd;">151</span>,bandwidth<span style="color: #000080;">=</span>w<span style="color: #000000;">&#41;</span>

#Debug and run following script
#Type <span style="color: #ff00ff;">&quot;n&quot;</span> to enter line <span style="color: #0000dd;">19</span>
stopifnot<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#40;</span>nx <span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span> length<span style="color: #000000;">&#40;</span>xm<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #000080;">==</span> nrow<span style="color: #000000;">&#40;</span>dens<span style="color: #000000;">&#41;</span>,
		  <span style="color: #000000;">&#40;</span>ny <span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span> length<span style="color: #000000;">&#40;</span>ym<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #000080;">==</span> ncol<span style="color: #000000;">&#40;</span>dens<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>
ixm <span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span> 1L <span style="color: #000080;">+</span> as.<span style="color: #000080;">integer</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#40;</span>nx<span style="color: #000080;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">*</span><span style="color: #000000;">&#40;</span>x<span style="color: #000000;">&#91;</span>,<span style="color: #0000dd;">1</span><span style="color: #000000;">&#93;</span><span style="color: #000080;">-</span>xm<span style="color: #000000;">&#91;</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#93;</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">/</span><span style="color: #000000;">&#40;</span>xm<span style="color: #000000;">&#91;</span>nx<span style="color: #000000;">&#93;</span><span style="color: #000080;">-</span>xm<span style="color: #000000;">&#91;</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#93;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>
iym <span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span> 1L <span style="color: #000080;">+</span> as.<span style="color: #000080;">integer</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#40;</span>ny<span style="color: #000080;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">*</span><span style="color: #000000;">&#40;</span>x<span style="color: #000000;">&#91;</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#93;</span><span style="color: #000080;">-</span>ym<span style="color: #000000;">&#91;</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#93;</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">/</span><span style="color: #000000;">&#40;</span>ym<span style="color: #000000;">&#91;</span>ny<span style="color: #000000;">&#93;</span><span style="color: #000080;">-</span>ym<span style="color: #000000;">&#91;</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#93;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>

z<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>dens<span style="color: #000000;">&#91;</span>cbind<span style="color: #000000;">&#40;</span>ixm, iym<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#93;</span>
df<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>data.<span style="color: #000080;">frame</span><span style="color: #000000;">&#40;</span>x<span style="color: #000080;">=</span>x<span style="color: #000000;">&#91;</span>,<span style="color: #0000dd;">1</span><span style="color: #000000;">&#93;</span>,y<span style="color: #000080;">=</span>x<span style="color: #000000;">&#91;</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#93;</span>,z<span style="color: #000080;">=</span>z<span style="color: #000000;">&#41;</span>

library<span style="color: #000000;">&#40;</span>ggplot2<span style="color: #000000;">&#41;</span>
sp<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>ggplot<span style="color: #000000;">&#40;</span>df, aes<span style="color: #000000;">&#40;</span>x,y,colour<span style="color: #000080;">=</span>z<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span> <span style="color: #000080;">+</span>  geom_point<span style="color: #000000;">&#40;</span>shape<span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;.&quot;</span><span style="color: #000000;">&#41;</span> <span style="color: #000080;">+</span> 
	theme<span style="color: #000000;">&#40;</span>panel.<span style="color: #000080;">background</span> <span style="color: #000080;">=</span> element_rect<span style="color: #000000;">&#40;</span>fill <span style="color: #000080;">=</span> <span style="color: #ff00ff;">'black'</span><span style="color: #000000;">&#41;</span>,
	panel.<span style="color: #000080;">grid</span>.<span style="color: #000080;">major</span> <span style="color: #000080;">=</span> element_blank<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>,
	panel.<span style="color: #000080;">grid</span>.<span style="color: #000080;">minor</span> <span style="color: #000080;">=</span> element_blank<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>,
	panel.<span style="color: #000080;">border</span> <span style="color: #000080;">=</span> element_blank<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>
sp
cval<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>seq<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">1</span>,length.<span style="color: #000080;">out</span><span style="color: #000080;">=</span><span style="color: #0000dd;">6</span><span style="color: #000000;">&#41;</span>
sp<span style="color: #000080;">+</span>scale_color_gradientn<span style="color: #000000;">&#40;</span>values <span style="color: #000080;">=</span> cval,colours <span style="color: #000080;">=</span> rainbow<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">20</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span></pre>
<hr class='keywordshr'><p><span class='keywords'>Keywords:</span><span class='keywordsInput'>validation, compare to R</span></p>






