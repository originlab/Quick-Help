<h1 class="firstHeading">2.2.3.5.2 Algorithm for Decompostion</h1><p class='urlname' style='display: none'>TSA-TD-Decompostion-Algorithm</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Decompostion_Model"><span class="tocnumber">1</span> <span class="toctext">Decompostion Model</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Model_Fitting"><span class="tocnumber">2</span> <span class="toctext">Model Fitting</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Forecast"><span class="tocnumber">3</span> <span class="toctext">Forecast</span></a></li>
</ul>
</div>

<h2><a name="Decompostion_Model"></a><span class="mw-headline">Decompostion Model</span></h2>
<ul><li> Multiplicative: <img src="../images/Algorithm_Decomposition/math-93b69972321e4cc7427ad9336d5bf308.png?v=0" title="y_t = T_t \times S_t \times E_t" alt="y_t = T_t \times S_t \times E_t" class="tex"/></li>
<li> Additive: <img src="../images/Algorithm_Decomposition/math-543c4ab0e326cb0b9e5cb2f23e552c09.png?v=0" title="y_t = T_t + S_t + E_t" alt="y_t = T_t + S_t + E_t" class="tex"/></li></ul>
<dl><dd>where <img src="../images/Algorithm_Decomposition/math-a568bf104397bd8311073893dff24222.png?v=0" title="y_t" alt="y_t" class="tex"/> is the observation, <img src="../images/Algorithm_Decomposition/math-fe8d284cdd689b2553a5388a966b67c9.png?v=0" title="T_t" alt="T_t" class="tex"/> is the trend component, <img src="../images/Algorithm_Decomposition/math-963123d6ba15e531cac42d449320e07c.png?v=0" title="S_t" alt="S_t" class="tex"/> is the seasonal component, and <img src="../images/Algorithm_Decomposition/math-23a1daa7cd08229dfcf67f642ab33607.png?v=0" title="E_t" alt="E_t" class="tex"/> is the error.</dd></dl>
<h2><a name="Model_Fitting"></a><span class="mw-headline">Model Fitting</span></h2>
<ul><li> Calculate smoothed time series<img src="../images/Algorithm_Decomposition/math-d8e8c641f7cfcee4caded663d1244e86.png?v=0" title="\bar{T_t}" alt="\bar{T_t}" class="tex"/></li></ul>
<dl><dd>If seasonal length <img src="../images/Algorithm_Decomposition/math-6f8f57715090da2632453988d9a1501b.png?v=0" title="m" alt="m" class="tex"/> is an even number, compute <img src="../images/Algorithm_Decomposition/math-d8e8c641f7cfcee4caded663d1244e86.png?v=0" title="\bar{T_t}" alt="\bar{T_t}" class="tex"/> using <img src="../images/Algorithm_Decomposition/math-9d59e9a7e3a5c765ab140c9e5789f058.png?v=0" title="2 \times m" alt="2 \times m" class="tex"/>-MA. if <img src="../images/Algorithm_Decomposition/math-6f8f57715090da2632453988d9a1501b.png?v=0" title="m" alt="m" class="tex"/> is an odd number, compute <img src="../images/Algorithm_Decomposition/math-d8e8c641f7cfcee4caded663d1244e86.png?v=0" title="\bar{T_t}" alt="\bar{T_t}" class="tex"/> using <img src="../images/Algorithm_Decomposition/math-6f8f57715090da2632453988d9a1501b.png?v=0" title="m" alt="m" class="tex"/>-MA.</dd></dl>
<ul><li> Calculate the detrended series <img src="../images/Algorithm_Decomposition/math-c22e5c6222abad6740a8c4a9806dee41.png?v=0" title=" y_t - \bar{T_t}" alt=" y_t - \bar{T_t}" class="tex"/></li></ul>
<ul><li> Calculate the seasonal component <img src="../images/Algorithm_Decomposition/math-963123d6ba15e531cac42d449320e07c.png?v=0" title="S_t" alt="S_t" class="tex"/>.</li></ul>
<dl><dd>For each season, calculate the median of the detrended series for that season.And then the median is replicated in each season of <img src="../images/Algorithm_Decomposition/math-963123d6ba15e531cac42d449320e07c.png?v=0" title="S_t" alt="S_t" class="tex"/>. </dd>
<dd>For multiplicative model, adjust <img src="../images/Algorithm_Decomposition/math-963123d6ba15e531cac42d449320e07c.png?v=0" title="S_t" alt="S_t" class="tex"/> to average of 1. For additive model, adjust <img src="../images/Algorithm_Decomposition/math-963123d6ba15e531cac42d449320e07c.png?v=0" title="S_t" alt="S_t" class="tex"/> to average of 0.</dd></dl>
<ul><li> Seasonal adjusted data <img src="../images/Algorithm_Decomposition/math-3246d88e745ccf61ab137180a2ab2bc6.png?v=0" title="S_{adj} = y_t / S_t" alt="S_{adj} = y_t / S_t" class="tex"/> for multiplicative model, <img src="../images/Algorithm_Decomposition/math-ae0bf4613536d4d1a8dc30541db505fe.png?v=0" title="S_{adj} = y_t - S_t" alt="S_{adj} = y_t - S_t" class="tex"/> for additive model.</li></ul>
<ul><li> Trend component <img src="../images/Algorithm_Decomposition/math-fe8d284cdd689b2553a5388a966b67c9.png?v=0" title="T_t" alt="T_t" class="tex"/>: If model includes trend, perform linear regression on <img src="../images/Algorithm_Decomposition/math-d54510ddefa3dfcc37377d924f018420.png?v=0" title="S_{adj}" alt="S_{adj}" class="tex"/> to compute <img src="../images/Algorithm_Decomposition/math-fe8d284cdd689b2553a5388a966b67c9.png?v=0" title="T_t" alt="T_t" class="tex"/>. Otherwise calculate the mean of <img src="../images/Algorithm_Decomposition/math-d54510ddefa3dfcc37377d924f018420.png?v=0" title="S_{adj}" alt="S_{adj}" class="tex"/> as <img src="../images/Algorithm_Decomposition/math-fe8d284cdd689b2553a5388a966b67c9.png?v=0" title="T_t" alt="T_t" class="tex"/>.</li></ul>
<ul><li> Fitted data <img src="../images/Algorithm_Decomposition/math-59c865289d0e40c79d67a4c59e6da1bc.png?v=0" title="\hat{y_t} = T_t \times S_t" alt="\hat{y_t} = T_t \times S_t" class="tex"/> for multiplicative model, <img src="../images/Algorithm_Decomposition/math-d6d3e21a1fd8d5ea6e2cbf35f397fabd.png?v=0" title="\hat{y_t}= T_t + S_t" alt="\hat{y_t}= T_t + S_t" class="tex"/> for additive model.</li></ul>
<ul><li> Detrended data <img src="../images/Algorithm_Decomposition/math-ef682215ab5839cf247b869641bcc86b.png?v=0" title="D_t = y_t / T_t" alt="D_t = y_t / T_t" class="tex"/> for multiplicative model, <img src="../images/Algorithm_Decomposition/math-14e3cb0778483a875e2cd7767855f915.png?v=0" title="D_t = y_t - T_t" alt="D_t = y_t - T_t" class="tex"/> for additive model.</li></ul>
<ul><li> Residuals </li></ul>
<dl><dd><img src="../images/Algorithm_Decomposition/math-d7e56296f73600cb7829bd24c799140f.png?v=0" title="Residuals = \hat{y_t}- y_t" alt="Residuals = \hat{y_t}- y_t" class="tex"/></dd></dl>
<h2><a name="Forecast"></a><span class="mw-headline">Forecast</span></h2>
<p>The forecasts are calculated by computing the trend and seasonal component separately.
</p>
<ul><li> Trend component <img src="../images/Algorithm_Decomposition/math-3a7a80aaa81d6ad3e87937602d3732bd.png?v=0" title="t_t&#39;" alt="t_t&#39;" class="tex"/></li></ul>
<p>Perform linear extrapolation on the fitted trend <img src="../images/Algorithm_Decomposition/math-fe8d284cdd689b2553a5388a966b67c9.png?v=0" title="T_t" alt="T_t" class="tex"/>.
</p>
<ul><li> Seasonal component <img src="../images/Algorithm_Decomposition/math-a1bdf179050141cd33e81d31c46da5f4.png?v=0" title="s_t&#39;" alt="s_t&#39;" class="tex"/></li></ul>
<p>The forecasts begin at the end of <img src="../images/Algorithm_Decomposition/math-963123d6ba15e531cac42d449320e07c.png?v=0" title="S_t" alt="S_t" class="tex"/>. Replicate the values of the same season in <img src="../images/Algorithm_Decomposition/math-963123d6ba15e531cac42d449320e07c.png?v=0" title="S_t" alt="S_t" class="tex"/> to get <img src="../images/Algorithm_Decomposition/math-a1bdf179050141cd33e81d31c46da5f4.png?v=0" title="s_t&#39;" alt="s_t&#39;" class="tex"/>.
</p>
<ul><li> Forecasts  <img src="../images/Algorithm_Decomposition/math-2acc8c1f901be0c85f72a3e3bba62156.png?v=0" title="y_t&#39;" alt="y_t&#39;" class="tex"/>
<ul><li> Multiplicative: <img src="../images/Algorithm_Decomposition/math-3f0d88436ae6f97a1849864f6eac19f7.png?v=0" title="y_t&#39; = t_t&#39; \times s_t&#39;" alt="y_t&#39; = t_t&#39; \times s_t&#39;" class="tex"/></li>
<li> Additive: <img src="../images/Algorithm_Decomposition/math-b8b00ba5851ffe63ccb601928f651517.png?v=0" title="y_t&#39; = t_t&#39; + s_t&#39;" alt="y_t&#39; = t_t&#39; + s_t&#39;" class="tex"/></li></ul></li></ul>






