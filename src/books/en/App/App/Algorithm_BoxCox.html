<h1 class="firstHeading">2.2.3.3.2 Algorithm for Box-Cox Transformation</h1><p class='urlname' style='display: none'>TSA-Box-Cox-Algorithm</p>
<h2><a name="Box-Cox_Transformation"></a><span class="mw-headline">Box-Cox Transformation</span></h2>
<p>Box-Cox transformation is one kinds of power transformation, and it only works for positive data. The resulting of Box-Cox transformation is formulated as follows:
</p><p><img src="../images/Algorithm_BoxCox/math-fcc3c0413cb0b2b80231a6db5e541258.png?v=0" title="&#10;Y&#39;=\left\{&#10;    \begin{array}{ll}&#10;    Y^\lambda&amp;\lambda \neq 0\cr&#10;    \ln(Y)&amp;\lambda = 0&#10;    \end{array}&#10;\right.&#10;" alt="&#10;Y&#39;=\left\{&#10;    \begin{array}{ll}&#10;    Y^\lambda&amp;\lambda \neq 0\cr&#10;    \ln(Y)&amp;\lambda = 0&#10;    \end{array}&#10;\right.&#10;" class="tex"/>
</p><p>Here <img src="../images/Algorithm_BoxCox/math-c6a6eb61fd9c6c913da73b3642ca147d.png?v=0" title="\lambda" alt="\lambda" class="tex"/> is in the range of <img src="../images/Algorithm_BoxCox/math-b747b9797a8dfa8f5328f1fe223da7a5.png?v=0" title="[-5, 5]" alt="[-5, 5]" class="tex"/>.
</p>
<h3><a name="Optimal"></a><span class="mw-headline">Optimal <img src="../images/Algorithm_BoxCox/math-c6a6eb61fd9c6c913da73b3642ca147d.png?v=0" title="\lambda" alt="\lambda" class="tex"/></span></h3>
<p>Origin estimates the optimal <img src="../images/Algorithm_BoxCox/math-c6a6eb61fd9c6c913da73b3642ca147d.png?v=0" title="\lambda" alt="\lambda" class="tex"/> in the range of <img src="../images/Algorithm_BoxCox/math-b747b9797a8dfa8f5328f1fe223da7a5.png?v=0" title="[-5, 5]" alt="[-5, 5]" class="tex"/>, and the optimal <img src="../images/Algorithm_BoxCox/math-c6a6eb61fd9c6c913da73b3642ca147d.png?v=0" title="\lambda" alt="\lambda" class="tex"/> should get the minimal standard deviation of the transformed data. To eliminate the effect of different <img src="../images/Algorithm_BoxCox/math-c6a6eb61fd9c6c913da73b3642ca147d.png?v=0" title="\lambda" alt="\lambda" class="tex"/> for the standard deviation comparison, before calculating the standard deviation, standarizing the transformed data is needed. The following formula is used for the data standarization.
</p><p><img src="../images/Algorithm_BoxCox/math-840d39a3c7ed4b44e3eab9932312c51c.png?v=0" title="&#10;Z_i=\left\{&#10;    \begin{array}{ll}&#10;\frac{Y_i^\lambda -1}{\lambda G^{\lambda-1}}&amp;\lambda \neq 0\cr&#10;G \ln(Y_i)&amp;\lambda = 0&#10;    \end{array}&#10;\right.&#10;" alt="&#10;Z_i=\left\{&#10;    \begin{array}{ll}&#10;\frac{Y_i^\lambda -1}{\lambda G^{\lambda-1}}&amp;\lambda \neq 0\cr&#10;G \ln(Y_i)&amp;\lambda = 0&#10;    \end{array}&#10;\right.&#10;" class="tex"/>
</p><p>where <img src="../images/Algorithm_BoxCox/math-865c0c0b4ab0e063e5caa3387c1a8741.png?v=0" title="i" alt="i" class="tex"/> is for the <img src="../images/Algorithm_BoxCox/math-811ed2017ce127575a960555aa6179d7.png?v=0" title="ith" alt="ith" class="tex"/> data, <img src="../images/Algorithm_BoxCox/math-dfcf28d0734569a6a693bc8194de62bf.png?v=0" title="G" alt="G" class="tex"/> is the geometric mean of the original data. Then <img src="../images/Algorithm_BoxCox/math-21c2e59531c8710156d34a3c30ac81d5.png?v=0" title="Z" alt="Z" class="tex"/> is used for the standard deviation calculation.
</p><p>The detailed steps of the optimization (also called golden section search algorithm) are:
</p>
<ol><li> Initialize the range for the optimization, here is from -5 to 5, and the tolerance for stopping the iteration.</li>
<li> Narrow down the range by the golden ratio, that is 
<dl><dd> <img src="../images/Algorithm_BoxCox/math-0aaf3b6542b8c585e49199762d65c92a.png?v=0" title="GoldenRatio=(\sqrt{5}+1)/2" alt="GoldenRatio=(\sqrt{5}+1)/2" class="tex"/></dd>
<dd> <img src="../images/Algorithm_BoxCox/math-85423bcb89ca6bc25e6de3d89b13a2d7.png?v=0" title="LenghOfOldRange=OldLargeEndPoint-OldSmallEndPoint" alt="LenghOfOldRange=OldLargeEndPoint-OldSmallEndPoint" class="tex"/></dd>
<dd> <img src="../images/Algorithm_BoxCox/math-3f1fa87ab6608af074c2ad3316b4a9f1.png?v=0" title="NewSmallEndPoint=OldSmallEndPoint+LenghOfOldRange/GoldenRatio" alt="NewSmallEndPoint=OldSmallEndPoint+LenghOfOldRange/GoldenRatio" class="tex"/></dd>
<dd> <img src="../images/Algorithm_BoxCox/math-2be3dbd580085d1d5a7b4875a1183b5f.png?v=0" title="NewLargeEndPoint=OldLargeEndPoint-LenghOfOldRange/GoldenRatio" alt="NewLargeEndPoint=OldLargeEndPoint-LenghOfOldRange/GoldenRatio" class="tex"/></dd>
<dd> then get a smaller new range.</dd></dl></li>
<li> Take the end points of the new range as two <img src="../images/Algorithm_BoxCox/math-c6a6eb61fd9c6c913da73b3642ca147d.png?v=0" title="\lambda" alt="\lambda" class="tex"/>, and calculate <img src="../images/Algorithm_BoxCox/math-21c2e59531c8710156d34a3c30ac81d5.png?v=0" title="Z" alt="Z" class="tex"/> values, and then standard deviation.</li>
<li> Compare two standard deviations.
<dl><dd> If the standard deviation of the small end point of the new range is bigger than the one of the large end point of the new range, update the range as from the small end point of the old range to the small end point of the new range.</dd>
<dd> Otherwise, update the range as from the large end point of the new range to the large end point of the old range.</dd></dl></li>
<li> Take the updated range in 4 as the old range, repeat 2 to 4 util the old range's length is smaller than the spcified tolerance, then get this old range as the final range.</li>
<li> The middle point of the final range is considered as the optimal <img src="../images/Algorithm_BoxCox/math-c6a6eb61fd9c6c913da73b3642ca147d.png?v=0" title="\lambda" alt="\lambda" class="tex"/>.</li></ol>
<p><b>How to calculate standard deviation?</b>
</p>
<ol><li> For subgroup data, that is, subgroup size is bigger than 1, the unbiased pooled standard deviation is estimated.</li>
<li> For individuals data, that is, subgroup size is 1, the average of moving range is estimated by moving range of 2.</li></ol>
<p>Origin also provide the option if to round the optimal <img src="../images/Algorithm_BoxCox/math-c6a6eb61fd9c6c913da73b3642ca147d.png?v=0" title="\lambda" alt="\lambda" class="tex"/> to 0.5, that is to say, after getting the optimal <img src="../images/Algorithm_BoxCox/math-c6a6eb61fd9c6c913da73b3642ca147d.png?v=0" title="\lambda" alt="\lambda" class="tex"/>, round it to the closest value, which is the multiple times of 0.5.
</p>





