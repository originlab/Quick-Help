<h1 class="firstHeading">2.35 Align Peaks</h1><p class='urlname' style='display: none'>Align-Peaks</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Summary"><span class="tocnumber">1</span> <span class="toctext">Summary</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Tutorial"><span class="tocnumber">2</span> <span class="toctext">Tutorial</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Shift"><span class="tocnumber">2.1</span> <span class="toctext">Shift</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Scale"><span class="tocnumber">2.2</span> <span class="toctext">Scale</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Clip"><span class="tocnumber">2.3</span> <span class="toctext">Clip</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Insert"><span class="tocnumber">2.4</span> <span class="toctext">Insert</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><a name="Summary"></a><span class="mw-headline">Summary</span></h2>
<p>The <a class="external text" href="https://www.originlab.com/fileExchange/details.aspx?fid=474" target="_blank">Align Peaks app</a> can be used to align peaks of spectra by shifting, scaling, clipping and inserting data.
</p>
<h2><a name="Tutorial"></a><span class="mw-headline">Tutorial</span></h2>
<ol><li> Start this tutorial with the app <b>Align Peaks</b> installed. If you have not installed this app, please click Add Apps button in <b>Apps Gallery</b> to open <b>App Center</b> to search and install the app.</li>
<li> Right-click on the app icon to select <b>Show Sample Folder</b> context menu to open the folder with sample project "AlignPeaksSample.opju". Drag-and-drop this project file into Origin workspace to open it.
<dl><dd><a  class="image"><img alt="Align Peaks 01.png" src="../images/Align_Peaks/600px-Align_Peaks_01.png?v=72696" width="600"   /></a></dd></dl></li>
<li>Highlight all columns to click the app icon to open the app dialog <b>Align Peaks</b>. In this dialog, there are four control groups in left panel and input data has been plotted into the right panel with anchor and spectra list controls. 
<dl><dd><a  class="image"><img alt="Align Peaks 02.png" src="../images/Align_Peaks/750px-Align_Peaks_02.png?v=72705" width="750"   /></a></dd></dl></li>
<li> Let start to align peaks with four methods:</li></ol>
<h3><a name="Shift"></a><span class="mw-headline">Shift</span></h3>
<p>In this example, we will use the spectra curve VLine1 as reference. For VLine2, there is some backward shift from VLine1, we are going to shift it to align the peaks.
</p>
<ol><li> Select <b>Shift</b> radio box in the left panel, and make sure <b>Anchor Line</b> has been selected for <b>Shift by</b>. 
<dl><dd><a  class="image"><img alt="Align Peaks 03.png" src="../images/Align_Peaks/Align_Peaks_03.png?v=72743" width="389"  /></a></dd></dl></li>
<li> Move the reference line(the blue one) to the peak center of first peak on VLine1. And then, move the anchor line (The black one) to the peak center of first peak on VLine2. Select VLine2 in the Spectra List at the bottom of dialog.
<dl><dd><a  class="image"><img alt="Align Peaks 04.png" src="../images/Align_Peaks/Align_Peaks_04.png?v=72744" width="751"  /></a></dd></dl></li>
<li> Click <b>Apply</b> button to shift the spectra VLine2 to align it to VLine1 at first peak.
<dl><dd><a  class="image"><img alt="Align Peaks 05.png" src="../images/Align_Peaks/750px-Align_Peaks_05.png?v=72745" width="750"   /></a></dd></dl></li>
<li>If you want to undo the shift you just did, you can click <b>Undo</b> button. If everything is ready, you can click <b>OK</b> button to output the adjusted curves to a new worksheet.</li></ol>
<h3><a name="Scale"></a><span class="mw-headline">Scale</span></h3>
<p>In this example, we found the spectra curve VLine3 was scaled up, we can enter a scale factor value less than 1 to scale down it to make VLine1 and VLine3 align.
</p>
<ol><li> Select <b>Scale</b> radio box in left panel and then enter <b>0.833</b> into <b>Scale Factor</b>. Select the target spectra curve <b>VLine3</b> under <b>Spectra List</b>.
<dl><dd><a  class="image"><img alt="Align Peaks 06.png" src="../images/Align_Peaks/750px-Align_Peaks_06.png?v=72747" width="750"   /></a></dd></dl></li>
<li> Click <b>Apply</b> button, you will see the curve VLine3 has been scaled in to align to VLine1 and VLine2.
<dl><dd><a  class="image"><img alt="Align Peaks 07.png" src="../images/Align_Peaks/Align_Peaks_07.png?v=72748" width="721"  /></a></dd></dl></li>
<li>If you want to undo the scaling you just did, you can click <b>Undo</b> button. If everything is ready, you can click <b>OK</b> button to output the adjusted curves to a new worksheet.</li></ol>
<h3><a name="Clip"></a><span class="mw-headline">Clip</span></h3>
<p>In this example, we found there were some delay between the first peak and second peak on VLine4, comparing with VLine1. We are going to remove the delay from VLine 4 to make it align to VLine1.
</p>
<ol><li> Select <b>Clip</b> radio box in the left panel. This time, we use ROI box to clip the delay interval.
<dl><dd><a  class="image"><img alt="Align Peaks 08.png" src="../images/Align_Peaks/Align_Peaks_08.png?v=72751" width="342"  /></a></dd></dl></li>
<li> Make the ROI box as narrow as possible, move Reference Line to the peak center of second peak on VLine1. Select <b>VLine4</b> under <b>Spectra List</b>.
<dl><dd><a  class="image"><img alt="Align Peaks 09.png" src="../images/Align_Peaks/Align_Peaks_09.png?v=72752" width="754"  /></a></dd></dl></li>
<li> Click <b>Apply</b> button multiple times to clip the interval until the second peak of VLine4 align to reference line.
<dl><dd><a  class="image"><img alt="Align Peaks 10.png" src="../images/Align_Peaks/700px-Align_Peaks_10.png?v=72753" width="700"   /></a></dd></dl></li>
<li>If you want to undo the clipping you just did, you can click <b>Undo</b> button. If everything is ready, you can click <b>OK</b> button to output the adjusted curves to a new worksheet.</li></ol>
<h3><a name="Insert"></a><span class="mw-headline">Insert</span></h3>
<p>In this example, we found the second peak on VLine5 appeared ahead of time. To align the peaks, we should insert some data points to make the peaks after the first peak move to the right. 
</p>
<ol><li> Select <b>Insert</b> radio box in left panel. Keep the default settings below:
<dl><dd><a  class="image"><img alt="Align Peaks 11.png" src="../images/Align_Peaks/Align_Peaks_11.png?v=72759" width="363"  /></a></dd></dl></li>
<li> Move Reference Line to second peak of VLine1 and then place the data selector line(the red one) at an appropriate place between first peak and second peak. Select <b>VLine5</b> under <b>Spectra List</b>.
<dl><dd><a  class="image"><img alt="Align Peaks 12.png" src="../images/Align_Peaks/Align_Peaks_12.png?v=72760" width="751"  /></a></dd></dl></li>
<li> Click <b>Apply</b> button multiple times to insert points until the second peak of VLine5 aligns to that of VLine1.
<dl><dd><a  class="image"><img alt="Align Peaks 13.png" src="../images/Align_Peaks/700px-Align_Peaks_13.png?v=72761" width="700"   /></a></dd></dl></li>
<li>If you want to undo the insert you just did, you can click <b>Undo</b> button. If everything is ready, you can click <b>OK</b> button to output the adjusted curves to a new worksheet.</li></ol>
<p><b>Note:</b> For some complicate situations, you can use more then one method to adjust the curves to align them.
</p>





