<h1 class="firstHeading">17.10.2 Algorithms (ROC Curve)</h1><p class='urlname' style='display: none'>ROCCurve-Algorithm</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#ROC_Values"><span class="tocnumber">1</span> <span class="toctext">ROC Values</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#The_area_under_the_ROC_curve"><span class="tocnumber">2</span> <span class="toctext">The area under the ROC curve</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#The_SE_of_the_area_under_the_ROC_curve_statistic"><span class="tocnumber">3</span> <span class="toctext">The SE of the area under the ROC curve statistic</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#The_asymptotic_confidence_interval_of_the_area_under_the_ROC_curve"><span class="tocnumber">4</span> <span class="toctext">The asymptotic confidence interval of the area under the ROC curve</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#The_asymptotic_P-value_under_the_null_hypothesis_that_vs._the_alternative_hypothesis_that"><span class="tocnumber">5</span> <span class="toctext">The asymptotic P-value under the null hypothesis that<b>  </b>vs. the alternative hypothesis that</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Optimal_Cut-Point_Value"><span class="tocnumber">6</span> <span class="toctext">Optimal Cut-Point Value</span></a></li>
</ul>
</div>

<p>In this part, Following notation will be used. 
</p><p><img src="../images/Algorithm_(ROCCurve)/math-d2583020b138319a535bc3c88278ab33.png?v=0" title="x_i\,\!" alt="x_i\,\!" class="tex"/>&#160;:   Test result score for case 
</p><p><img src="../images/Algorithm_(ROCCurve)/math-d750fff2ef5c4d25bcff29719305177a.png?v=0" title="n_{TP}\,\!" alt="n_{TP}\,\!" class="tex"/>&#160;: Number of true positive decisions
</p><p><img src="../images/Algorithm_(ROCCurve)/math-254cedc4e5a3c839360558b23ca648c2.png?v=0" title="n_{FN}\,\!" alt="n_{FN}\,\!" class="tex"/>&#160;: Number of false negative decisions
</p><p><img src="../images/Algorithm_(ROCCurve)/math-12495e96208687e2494a1d6350363ce4.png?v=0" title="n_{TN}\,\!" alt="n_{TN}\,\!" class="tex"/>&#160;: Number of true negative decisions
</p><p><img src="../images/Algorithm_(ROCCurve)/math-4dd508cc11a3900faec0a3ce7e098751.png?v=0" title="n_{FP}\,\!" alt="n_{FP}\,\!" class="tex"/>&#160;: Number of false positive decisions
</p><p><img src="../images/Algorithm_(ROCCurve)/math-a3b41b80fce655f49856414c7f15b33e.png?v=0" title="n_{-}\,\!" alt="n_{-}\,\!" class="tex"/>: Number of cases with negative actual state
</p><p><img src="../images/Algorithm_(ROCCurve)/math-79621c4d3dee617c6ee30941cff7dd5a.png?v=0" title="n_{+}\,\!" alt="n_{+}\,\!" class="tex"/>:  Number of cases with positive actual state
</p><p><img src="../images/Algorithm_(ROCCurve)/math-482fbd5c0104c0420e4348e592886424.png?v=0" title="n_{-=j}\,\!" alt="n_{-=j}\,\!" class="tex"/>:  Number of true negative cases with test results equal to 
</p><p><img src="../images/Algorithm_(ROCCurve)/math-5663bbf004c70b4058e4c35f50e38375.png?v=0" title="n_{+&gt;j}\,\!" alt="n_{+&gt;j}\,\!" class="tex"/>:&#160;: Number of true positive cases with test results greater than 
</p><p><img src="../images/Algorithm_(ROCCurve)/math-b821d677c6db926aa8b8a3208114b77b.png?v=0" title="n_{+=j}\,\!" alt="n_{+=j}\,\!" class="tex"/>:&#160;: Number of true positive cases with test results equal to 
</p><p><img src="../images/Algorithm_(ROCCurve)/math-962c20beac8eb76e37067599eefebfda.png?v=0" title="n_{-&lt;j}\,\!" alt="n_{-&lt;j}\,\!" class="tex"/>:&#160;: Number of true negative cases with test results less than
</p><p><br />
</p>
<h4><a name="ROC_Values"></a><span class="mw-headline">ROC Values</span></h4>
<p>1- Specificity (X): <img src="../images/Algorithm_(ROCCurve)/math-0c5a60aa9d534a69c504fac187790c07.png?v=0" title="1-\frac{n_{TN}}{n_{TN}+n_{FP}}\,\!" alt="1-\frac{n_{TN}}{n_{TN}+n_{FP}}\,\!" class="tex"/>
</p><p>Sensitivity (Y):<img src="../images/Algorithm_(ROCCurve)/math-0760bde0cf79e5793835075ee3d2bcdd.png?v=0" title="\frac{n_{TP}}{n_{TP}+n_{FN}}\,\!" alt="\frac{n_{TP}}{n_{TP}+n_{FN}}\,\!" class="tex"/>
</p>
<h4><a name="The_area_under_the_ROC_curve"></a><span class="mw-headline">The area under the ROC curve</span></h4>
<p>Let <img src="../images/Algorithm_(ROCCurve)/math-6373accf16c083723e8abae2f5401af2.png?v=0" title="x\,\!" alt="x\,\!" class="tex"/> be the scale of the test result variable. Denote <img src="../images/Algorithm_(ROCCurve)/math-2d4dd525bc7143c51992574674cba150.png?v=0" title="x_{-}\,\!" alt="x_{-}\,\!" class="tex"/> by the <img src="../images/Algorithm_(ROCCurve)/math-6373accf16c083723e8abae2f5401af2.png?v=0" title="x\,\!" alt="x\,\!" class="tex"/> values for cases with negative actual states and <img src="../images/Algorithm_(ROCCurve)/math-2c52673b83cb8d0bac1cb71c716fb95b.png?v=0" title="x_{+}\,\!" alt="x_{+}\,\!" class="tex"/> the values for cases with positive actual states. Then, the nonparametric approximation of the &amp;rdquor;true‚Äù area  under the ROC curve, <img src="../images/Algorithm_(ROCCurve)/math-0a5000fe8b6b5570dd5a1ce00b828ef6.png?v=0" title="\theta \,\!" alt="\theta \,\!" class="tex"/>,is
</p><p><img src="../images/Algorithm_(ROCCurve)/math-5f79866cf3c0dc05169d11fdd67fd6d7.png?v=0" title=" A_Z=\frac 1{n_{+}n_{-}}" alt=" A_Z=\frac 1{n_{+}n_{-}}" class="tex"/><img src="../images/Algorithm_(ROCCurve)/math-569223521931231c409785c91f0084b2.png?v=0" title="\sum_{j=1}^{n_{-}}\sum _{i=1}^{n_{+}}\Psi (x_{+},x_{-})" alt="\sum_{j=1}^{n_{-}}\sum _{i=1}^{n_{+}}\Psi (x_{+},x_{-})" class="tex"/>
</p><p>where <img src="../images/Algorithm_(ROCCurve)/math-79621c4d3dee617c6ee30941cff7dd5a.png?v=0" title="n_{+}\,\!" alt="n_{+}\,\!" class="tex"/> is the sample size of <img src="../images/Algorithm_(ROCCurve)/math-a7c6c783c5d03fc91d0594b217f56580.png?v=0" title="D\,\!" alt="D\,\!" class="tex"/>+, <img src="../images/Algorithm_(ROCCurve)/math-79621c4d3dee617c6ee30941cff7dd5a.png?v=0" title="n_{+}\,\!" alt="n_{+}\,\!" class="tex"/>is the sample size of <img src="../images/Algorithm_(ROCCurve)/math-a7c6c783c5d03fc91d0594b217f56580.png?v=0" title="D\,\!" alt="D\,\!" class="tex"/>-, and
</p><p><img src="../images/Algorithm_(ROCCurve)/math-0889c138e945599aafd7573b2404ee0e.png?v=0" title="\Psi (x_{+},x_{-})=\,\!" alt="\Psi (x_{+},x_{-})=\,\!" class="tex"/>
<img src="../images/Algorithm_(ROCCurve)/math-3fd91dcf034941370a5ed5d855390a84.png?v=0" title="&#10;\begin{cases} &#10;  1,  &amp; \mbox{if }x_{+}&gt;x_{-} \\&#10;  0.5, &amp; \mbox{if }x_{+}=x_{-} \\&#10;  0, &amp; \mbox{if }x_{+}&lt;x_{-} &#10;\end{cases}" alt="&#10;\begin{cases} &#10;  1,  &amp; \mbox{if }x_{+}&gt;x_{-} \\&#10;  0.5, &amp; \mbox{if }x_{+}=x_{-} \\&#10;  0, &amp; \mbox{if }x_{+}&lt;x_{-} &#10;\end{cases}" class="tex"/>
</p><p>Note that <img src="../images/Algorithm_(ROCCurve)/math-695617aa4d2b4e1c93f4ffa59c529d83.png?v=0" title="A_z\,\!" alt="A_z\,\!" class="tex"/> is the observed area under the ROC curve, which connects successive points by a straight line, i.e., by the trapezoidal rule. 
</p><p>An alternative way to compute <img src="../images/Algorithm_(ROCCurve)/math-695617aa4d2b4e1c93f4ffa59c529d83.png?v=0" title="A_z\,\!" alt="A_z\,\!" class="tex"/> is as follows:
</p><p><img src="../images/Algorithm_(ROCCurve)/math-1ea8d817ad6b5f332af7ec49c30dc22d.png?v=0" title="A_Z=\frac 1{n_{+}+n_{-}}\sum \left\{ n_{-=j}n_{+&gt;j}+\frac{n_{-=j}n_{+=j}}2\right\} " alt="A_Z=\frac 1{n_{+}+n_{-}}\sum \left\{ n_{-=j}n_{+&gt;j}+\frac{n_{-=j}n_{+=j}}2\right\} " class="tex"/>
</p>
<h4><a name="The_SE_of_the_area_under_the_ROC_curve_statistic"></a><span class="mw-headline">The SE of the area under the ROC curve statistic</span></h4>
<p>The standard deviation of <img src="../images/Algorithm_(ROCCurve)/math-695617aa4d2b4e1c93f4ffa59c529d83.png?v=0" title="A_z\,\!" alt="A_z\,\!" class="tex"/> is estimated by:
</p><p><img src="../images/Algorithm_(ROCCurve)/math-fde8eb47f42d8792fdc2e76131a46863.png?v=0" title="SE(A_Z)=\sqrt{\frac{A_Z(1-A_Z)+(n_{+}-1)(Q_1-A_Z^2)+(n_{-}-1)(Q_2-A_Z^2)}{n_{+}n_{-}}} \,\!" alt="SE(A_Z)=\sqrt{\frac{A_Z(1-A_Z)+(n_{+}-1)(Q_1-A_Z^2)+(n_{-}-1)(Q_2-A_Z^2)}{n_{+}n_{-}}} \,\!" class="tex"/>
</p><p>where
</p><p><img src="../images/Algorithm_(ROCCurve)/math-99adafc3fccb24a1cf7264ad44e4e60a.png?v=0" title="Q_{1=\frac 1{n_{-}n_{+}^2}}\sum n\__{=j}[n_{+&gt;j}^2+n_{+&gt;j}n_{+=j}+\frac{n_{+&gt;j}^2}3] \,\!" alt="Q_{1=\frac 1{n_{-}n_{+}^2}}\sum n\__{=j}[n_{+&gt;j}^2+n_{+&gt;j}n_{+=j}+\frac{n_{+&gt;j}^2}3] \,\!" class="tex"/>
</p><p>and
</p><p><img src="../images/Algorithm_(ROCCurve)/math-aafdd6330c76e9cd18c4af812cd53052.png?v=0" title="Q_{2=\frac 1{n_{-}^2n_{+}}}\sum n_{+=j}[n_{-&gt;j}^2+n_{-&gt;j}n_{-=j}+\frac{n_{-=j}^2}3] \,\!" alt="Q_{2=\frac 1{n_{-}^2n_{+}}}\sum n_{+=j}[n_{-&gt;j}^2+n_{-&gt;j}n_{-=j}+\frac{n_{-=j}^2}3] \,\!" class="tex"/>
</p>
<h4><a name="The_asymptotic_confidence_interval_of_the_area_under_the_ROC_curve"></a><span class="mw-headline">The asymptotic confidence interval of the area under the ROC curve</span></h4>
<p>A 2-sided asymptotic <img src="../images/Algorithm_(ROCCurve)/math-76c3dffd80c7fb9b863984e4f4d30b71.png?v=0" title="c\%=(100-\alpha )\%\,\!" alt="c\%=(100-\alpha )\%\,\!" class="tex"/> confidence interval for the true area under the ROC curve is 
</p><p><img src="../images/Algorithm_(ROCCurve)/math-235de6eb21ed53705c7979a6ce5fb929.png?v=0" title="A_Z\pm SE(A_Z)\,\!" alt="A_Z\pm SE(A_Z)\,\!" class="tex"/>
</p>
<h4><a name="The_asymptotic_P-value_under_the_null_hypothesis_that_vs._the_alternative_hypothesis_that"></a><span class="mw-headline">The asymptotic P-value under the null hypothesis that<b> <img src="../images/Algorithm_(ROCCurve)/math-da8f6f3f8ae6e03c2be19875f1fb8083.png?v=0" title=" \theta=0.5\ \,\!" alt=" \theta=0.5\ \,\!" class="tex"/> </b>vs. the alternative hypothesis that <img src="../images/Algorithm_(ROCCurve)/math-8d97b516153b32dc87de1d6354170e6f.png?v=0" title=" \theta \neq 0.5\ \,\!" alt=" \theta \neq 0.5\ \,\!" class="tex"/></span></h4>
<p>Since <img src="../images/Algorithm_(ROCCurve)/math-695617aa4d2b4e1c93f4ffa59c529d83.png?v=0" title="A_z\,\!" alt="A_z\,\!" class="tex"/> is asymptotically normal under the null hypothesis that <img src="../images/Algorithm_(ROCCurve)/math-da8f6f3f8ae6e03c2be19875f1fb8083.png?v=0" title=" \theta=0.5\ \,\!" alt=" \theta=0.5\ \,\!" class="tex"/> , we can calculate the asymptotic P-value under the null hypothesis that <img src="../images/Algorithm_(ROCCurve)/math-da8f6f3f8ae6e03c2be19875f1fb8083.png?v=0" title=" \theta=0.5\ \,\!" alt=" \theta=0.5\ \,\!" class="tex"/> vs. the alternative hypothesis that <img src="../images/Algorithm_(ROCCurve)/math-8d97b516153b32dc87de1d6354170e6f.png?v=0" title=" \theta \neq 0.5\ \,\!" alt=" \theta \neq 0.5\ \,\!" class="tex"/>:
</p><p><img src="../images/Algorithm_(ROCCurve)/math-d39e6085797aa9607fe719b7472fb2e7.png?v=0" title="P\left( \left| Z\right| &gt;\left| \frac{A_Z-0.5}{SD(A_Z)|_{\theta =0.5}}\right| \right) =2P\left( Z&gt;\left| \frac{A_Z-0.5}{SD(A_Z)\mid _{\theta =0.5}}\right| \right)  " alt="P\left( \left| Z\right| &gt;\left| \frac{A_Z-0.5}{SD(A_Z)|_{\theta =0.5}}\right| \right) =2P\left( Z&gt;\left| \frac{A_Z-0.5}{SD(A_Z)\mid _{\theta =0.5}}\right| \right)  " class="tex"/>
</p><p>In the nonparametric case,
</p><p><img src="../images/Algorithm_(ROCCurve)/math-72938a409015c7ed5745f164b9c6bd99.png?v=0" title="SD(A_Z)|_{\theta =0.5}=\sqrt{\frac{\theta (1-\theta )+(n_{+}-1)(Q_1-\theta ^2)+(n_{-}-1)(Q_2-\theta ^2)}{n_{+}n_{-}}}|_{\theta =0.5}\,\!" alt="SD(A_Z)|_{\theta =0.5}=\sqrt{\frac{\theta (1-\theta )+(n_{+}-1)(Q_1-\theta ^2)+(n_{-}-1)(Q_2-\theta ^2)}{n_{+}n_{-}}}|_{\theta =0.5}\,\!" class="tex"/>
</p><p><img src="../images/Algorithm_(ROCCurve)/math-bc5a5645b9c414917dd8c39d32c961c6.png?v=0" title="=\sqrt{\frac{0.5(1-0.5)+(n_{+}-1)(\frac 13-0.5^2)+(n_{-}-1)(\frac 13-0.5^2)}{n_{+}n_{-}}} " alt="=\sqrt{\frac{0.5(1-0.5)+(n_{+}-1)(\frac 13-0.5^2)+(n_{-}-1)(\frac 13-0.5^2)}{n_{+}n_{-}}} " class="tex"/>
</p>
<h4><a name="Optimal_Cut-Point_Value"></a><span class="mw-headline">Optimal Cut-Point Value</span></h4>
<p>The cut-point value is defined by the equality maximization of these two quantities (SpEqualSe), which is min( abs(1-x-y) ) for ROC curve.
</p>





