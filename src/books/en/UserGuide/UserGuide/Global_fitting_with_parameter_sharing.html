<h1 class="firstHeading">15.3.5.2 Global Fitting with Parameter Sharing</h1><p class='urlname' style='display: none'>GlobalFitting-Param-Sharing</p>
<div style="text-align: left; direction: ltr; margin-left: 1em;"><p><a  class="image"><img alt="Video Image.png" src="../images/Global_fitting_with_parameter_sharing/Video_Image.png?v=29468" width="33"  /></a> See more related video:<a class="external text" href="http://www.originlab.com/index.aspx?go=Products/Origin/DataAnalysis/CurveFitting/GlobalFitting&amp;ss=chm&amp;pid=1175" target="_blank">Global Fitting</a>
</p></div>
<p>Global fitting in Origin involves fitting multiple datasets with the same fitting function. Parameters in the fitting function can optionally be shared amongst all datasets. If a parameter is shared, the fitting procedure will yield the same value for that parameter for all datasets. If a parameter is not shared, the fitting procedure will yield a unique value for that parameter for each dataset.
</p>
<h5><a name="Key_points_of_Global_Fitting:"></a><span class="mw-headline">Key points of Global Fitting:</span></h5>
<ul><li>Multiple datasets are fitted with one model simultaneously.</li>
<li>Fit parameters are optionally shared between the datasets.
<ul><li>For each shared (global) parameter, one best-fit value is estimated from all of the datasets that are fitted.</li>
<li>For each non-shared (local) parameter, a unique best-fit value is generated for individual dataset that is fitted.</li></ul></li>
<li>Other options such as constraints and weighting are also available when you choose to perform Global Fitting.</li></ul>
<p><a  class="image"><img alt="Global fit ex.png" src="../images/Global_fitting_with_parameter_sharing/300px-Global_fit_ex.png?v=70777" width="300"   /></a>
</p>
<h5><a name="To_do_global_fitting_with_parameter_sharing:"></a><span class="mw-headline">To do global fitting with parameter sharing:</span></h5>
<ol><li>Select multiple datasets when you open the NLFit dialog.</li>
<li>Select a fitting function.</li>
<li>In the Data Mode drop-down list of Data Selection settings, select Global Fit.
<dl><dd><a  class="image"><img alt="Global fitting with parameter sharing-1.png" src="../images/Global_fitting_with_parameter_sharing/500px-Global_fitting_with_parameter_sharing-1.png?v=70779" width="500"   /></a></dd>
<dd>In the Parameters tab, select the checkbox in the Share column which corresponds to the parameter you want to set as shared.</dd>
<dd><a  class="image"><img alt="Global fitting with parameter sharing-2.png" src="../images/Global_fitting_with_parameter_sharing/500px-Global_fitting_with_parameter_sharing-2.png?v=70782" width="500"   /></a></dd></dl></li>
<li>Click the <b>Fit</b> or <b>OK</b> button to perform the fitting.</li></ol>
<h3><a name="Related_Algorithm"></a><span class="mw-headline">Related Algorithm</span></h3>
<p>The fitting report for global fit will output the Parameters, Statistics and ANOVA tables for each dataset and a global Statistics and ANOVA table for all of the datasets. When global fitting is performed, the Chi-square for n datasets is computed as:
</p>
<dl><dd><img src="../images/Global_fitting_with_parameter_sharing/math-1f3cb19d3a7b4783b74da7037ddc8af0.png?v=0" title="\chi ^2=\sum_{i=1}^m[\frac{Y1_i-f(x1_i^{\prime };\hat \theta 1)}{\sigma 1_i}]^2+\sum_{i=1}^m[\frac{Y2_i-f(x2_i^{\prime };\hat \theta 2)}{\sigma 2_i}]^2+\ldots +\sum_{i=1}^m[\frac{Yn_i-f(xn_i^{\prime };\hat \theta n)}{\sigma n_i}]^2" alt="\chi ^2=\sum_{i=1}^m[\frac{Y1_i-f(x1_i^{\prime };\hat \theta 1)}{\sigma 1_i}]^2+\sum_{i=1}^m[\frac{Y2_i-f(x2_i^{\prime };\hat \theta 2)}{\sigma 2_i}]^2+\ldots +\sum_{i=1}^m[\frac{Yn_i-f(xn_i^{\prime };\hat \theta n)}{\sigma n_i}]^2" class="tex"/></dd></dl>
<p>and
</p>
<dl><dd><img src="../images/Global_fitting_with_parameter_sharing/math-7b9a1141a384898be332cf95c37eb337.png?v=0" title="reduced X^2=\frac {X^2}{dof}=\frac {X^2}{n-p}" alt="reduced X^2=\frac {X^2}{dof}=\frac {X^2}{n-p}" class="tex"/></dd></dl>
<p>The global ANOVA table is:
</p>
<table class="simple">

<tr>
<th>
</th>
<th>df
</th>
<th>Sum of Squares
</th>
<th>Mean Square
</th>
<th>F Value
</th>
<th>Prob &gt; F
</th></tr>
<tr>
<th>Model
</th>
<td>
<p><i>p-1</i> 
</p>
</td>
<td>
<p><i><img src="../images/Global_fitting_with_parameter_sharing/math-aa63a24312a8865effc7329dcb04410c.png?v=0" title="SS_{reg} = SYY- RSS" alt="SS_{reg} = SYY- RSS" class="tex"/> </i> 
</p>
</td>
<td>
<p><i><img src="../images/Global_fitting_with_parameter_sharing/math-4f3b4a3d2f6c452192bd320d062b9f9c.png?v=0" title="MS_{reg} = SS_{reg} /p-1 " alt="MS_{reg} = SS_{reg} /p-1 " class="tex"/></i> 
</p>
</td>
<td>
<p><i><img src="../images/Global_fitting_with_parameter_sharing/math-d5ea59127172a534421d4b08fd6d3135.png?v=0" title="MS_{reg} / MSE " alt="MS_{reg} / MSE " class="tex"/></i> 
</p>
</td>
<td>
<p><i>p-value </i> 
</p>
</td></tr>
<tr>
<th>Error
</th>
<td>
<p><i> -p</i>  
</p>
</td>
<td>
<p><i>RSS</i>  
</p>
</td>
<td>
<p><i>MSE = RSS /(n-p)</i>
</p>
</td>
<td>
</td>
<td>
</td></tr>
<tr>
<th>Total
</th>
<td>
<p><i>n-1</i>  
</p>
</td>
<td>
<p><i>SYY</i>  
</p>
</td>
<td>
</td>
<td>
</td>
<td>
</td></tr></table>
<p>In the above formula, n is the total number of data points, and p is the total number of parameters. Note that when parameters are shared, it will reduce the number of parameters, p. For example, to do a global fit for two datasets with simple linear function, y = a + bx, with the parameter a shared, the number of parameters becomes three because we have reduced one parameter. Therefore, p = 3.
</p>





