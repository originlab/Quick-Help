<h1 class="firstHeading">29.7.10 Cluster Plot</h1><p><br />
</p>
<p class='urlname' style='display: none'>cluster-plot</p>
<p><a  class="image"><img alt="Cluster plot 01.png" src="../images/Plot_by_Group/Cluster_plot_01.png?v=76545" width="557"  /></a>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Data_Requirements"><span class="tocnumber">1</span> <span class="toctext">Data Requirements</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Creating_the_Graph"><span class="tocnumber">2</span> <span class="toctext">Creating the Graph</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Quick_Examples"><span class="tocnumber">2.1</span> <span class="toctext">Quick Examples</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Example_1:_create_a_cluster_plot"><span class="tocnumber">2.1.1</span> <span class="toctext">Example 1: create a cluster plot</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Example_2:_cluster_plot_updates_automatically_when_the_group_column_changes"><span class="tocnumber">2.1.2</span> <span class="toctext">Example 2: cluster plot updates automatically when the group column changes</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Example_3:_create_a_one-panel_cluster_plot"><span class="tocnumber">2.1.3</span> <span class="toctext">Example 3: create a one-panel cluster plot</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Example_4:_re-order_panels_by_changing_categorical_order"><span class="tocnumber">2.1.4</span> <span class="toctext">Example 4: re-order panels by changing categorical order</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Template"><span class="tocnumber">3</span> <span class="toctext">Template</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Notes"><span class="tocnumber">4</span> <span class="toctext">Notes</span></a></li>
</ul>
</div>

<h2><a name="Data_Requirements"></a><span class="mw-headline">Data Requirements</span></h2>
<p>Ideally, you need to have at least two Y columns as input data, one of which provides the group information. Optionally, you can have additional column(s) to map plot color/symbol shape/symbol size. 
</p>
<h2><a name="Creating_the_Graph"></a><span class="mw-headline">Creating the Graph</span></h2>
<p>Open the <b>plot_bygroup</b> dialog by one of two methods: 
</p>
<ul><li>Select <b>Plot&gt; Categorical: Cluster Plot</b> menu items</li>
<li>Click the <a  class="image"><img alt="Cluster plot button.png" src="../images/Plot_by_Group/Cluster_plot_button.png?v=78353" width="23"  /></a> button in the <b>2D Graphs</b> toolbar
<dl><dd><a  class="image"><img alt="Cluster plot 02.png" src="../images/Plot_by_Group/Cluster_plot_02.png?v=78352" width="314"  /></a></dd></dl></li></ul>
<p>In the dialog that opens, you can
</p>
<ul><li>select the input data range (error bar supported) and add at least one group column</li>
<li>specify the plot type</li>
<li>determine whether to map the plot color or symbol shape/size</li>
<li>determine how to link layers</li>
<li>decide the panel layout</li></ul>
<p><a  class="image"><img alt="Cluster plot 03.png" src="../images/Plot_by_Group/Cluster_plot_03.png?v=80117" width="655"  /></a>
</p><p>Refer to <a class="external text" href="../../XFunction/X-Function/Plot_bygroup.html">this page</a> for the details of this dialog controls.
</p><p>After generate a cluster plot, you can click the green lock on the graph and select <b>Show/Hide Layer(s)</b> to filter some group elements.
</p><p><a  class="image"><img alt="Cluster plot 14.png" src="../images/Plot_by_Group/Cluster_plot_14.png?v=78570" width="250"  /></a>
</p>
<h3><a name="Quick_Examples"></a><span class="mw-headline">Quick Examples</span></h3>
<h4><a name="Example_1:_create_a_cluster_plot"></a><span class="mw-headline">Example 1: create a cluster plot</span></h4>
<p>The following example uses the data <i>&lt;Origin exe folder&gt;/Samples/Statistics/body.dat</i>, imported (<b>Data: Import from File: Single ASCII</b>) using default settings. The dataset contains two group columns: age (col(B)) and gender (Col(C)). We are going to plot a height vs. weight scatter graph, categorizing the scatters into Male and Female panels and distinguishing their age by color.
</p>
<ol>
<li>Right click on col(D) and select <b>Set As: X</b> to set it as X column.</li>
<li>Highlight col(D) and col(E), and then choose <b>Plot&gt; 2D: Cluster Plot</b>. In the dialog that opens, set as following.<br />
<a  class="image"><img alt="Cluster plot 04.png" src="../images/Plot_by_Group/Cluster_plot_04.png?v=80118" width="530"  /></a>
<br />Click <b>OK</b> to create the cluster plot.
<br /><a  class="image"><img alt="Cluster plot 05.png" src="../images/Plot_by_Group/Cluster_plot_05.png?v=80119" width="513"  /></a></li>
</ol>
<h4><a name="Example_2:_cluster_plot_updates_automatically_when_the_group_column_changes"></a><span class="mw-headline">Example 2: cluster plot updates automatically when the group column changes</span></h4>
<p>The following example uses the dataset <i>&lt;Origin exe folder&gt;/Samples/Statistics/LogRegData.dat</i>, imported (<b>Data: Import from File: Single ASCII</b>) with default settings. The dataset contains two group columns: Gender (Col(C)) and Career_Change (Col(D)). We are going to plot a cluster plot by these two group columns. When we filters the group columns, the cluster plot can update accordingly.
</p>
<ol>
<li>Highlight col(A) and col(B) and choose <b>Plot&gt; 2D: Cluster Plot</b>. Set options as follow in the dialog box that opens:<br />
<ul><li><b>Plot Type</b> = Scatter </li>
<li><b>Variable for Separate Layers &gt; Horizontal</b> = col(C):Gender, <b>Vertical</b> = col(D):Career_Change </li>
<li>check <b>Axes Settings &gt; Uniform X Scale</b> </li>
<li>check <b>Show Axis Frame</b></li></ul>
Click <b>OK</b> to create the cluster plot.
<br /><a  class="image"><img alt="Cluster plot 07.png" src="../images/Plot_by_Group/Cluster_plot_07.png?v=76526" width="448"  /></a>
</li>
<li>Now we are going to filter the group elements and see how the graph dynamically displays salary distriubtion among different ages. Click on the green lock at the top-left corner of the graph and select <b>Show/Hide Layer(s)</b>.
<br />
<table class="simple">
<tr>
<th>
</th>
<th> if we want to see how gender variables affect salary distribution among people changing their career
</th>
<th> if we want to see how career hopping affects female salary distribution
</th></tr>
<tr>
<th> filter condition
</th>
<td> <a  class="image"><img alt="Cluster plot 08.png" src="../images/Plot_by_Group/Cluster_plot_08.png?v=78573" width="216"  /></a>
</td>
<td> <a  class="image"><img alt="Cluster plot 09.png" src="../images/Plot_by_Group/Cluster_plot_09.png?v=78572" width="216"  /></a>
</td></tr>
<tr>
<th> cluster plot
</th>
<td> <a  class="image"><img alt="Cluster plot 10.png" src="../images/Plot_by_Group/Cluster_plot_10.png?v=76541" width="372"  /></a>
</td>
<td> <a  class="image"><img alt="Cluster plot 11.png" src="../images/Plot_by_Group/Cluster_plot_11.png?v=76542" width="368"  /></a>
</td></tr></table>
</li>
</ol>
<p><br /><br />
<b>Note</b>: You can add filters to the source worksheet. Changinge the filter condition will also update the cluster plot accordingly.
</p>
<h4><a name="Example_3:_create_a_one-panel_cluster_plot"></a><span class="mw-headline">Example 3: create a one-panel cluster plot</span></h4>
<p>The following example uses the dataset in <i>Trellis Plots - Overlap Panels with Multiple Categories Combination.opju</i> in <a href="../../UserGuide/UserGuide/Startup_Dialog.html" title="UserGuide:Startup Dialog">Learning Center</a>. We are going to plot multiple groups into one panel, in which each group has its own Y axis. 
</p>
<ol>
<li>Choose <b>Help: Learning Center</b>. 
<li>In the dialog that opens, select <b>Graph Samples</b> tab on the left, and on the right select <b>Trellis Plot</b>. 
<li>Double-click on the 1st cell of 3rd row to open <i>Trellis Plots - Overlap Panels with Multiple Categories Combination.opju</i>. Activate the workbook <i>Book8</i>. The dataset <i>Adults</i> vs. <i>Foals</i> is devided into four groups by different Location (col(F)) and Treatment (col(G)). We are going to create a cluster plot in which the four groups are overlapped with each other.
<li>Highlight col(C) and choose <b>Plot&gt; 2D: Cluster Plot</b>. Set options as follow in the dialog box:<br />
<ul><li><b>Plot Type</b> = Line+Symbol </li>
<li><b>Variable for Separate Layers &gt; Horizontal</b> = col(F):Location and col(G):Treatment  </li>
<li><b>Arrange Layers</b> = Overlap All Layers</li>
<li>check <b>Show Group Info in Y Title</b> </li>
<li>check <b>Show Axis Frame</b></li></ul>
Click <b>OK</b> to create the cluster plot.
<br /><a  class="image"><img alt="Cluster plot 13.png" src="../images/Plot_by_Group/Cluster_plot_13.png?v=76535" width="479"  /></a>
</li>
</ol>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Plot_by_Group/Tip_icon.png?v=9614" width="57"  border="0" /></td><td><ol><li>You may notice that both <a href="../../UserGuide/UserGuide/Trellis.html" title="UserGuide:Trellis">trellis plot</a> and cluster plot can plot different groups into one panel. Trellis plot requires all groups to share the same XY axis scale, while cluster plot provides a more flexible scale options. It plots groups into separated layers so that you can choose to link XY axis scale among all layers OR have each layer has its own axis scale. This is useful when the Y values vary greatly from group to group.</li>
<li>To make Y axis color follow the plot color, set Line <b>Color</b> to <b>Auto</b> in the <a href="../../UserGuide/UserGuide/Line_and_Ticks_2.html#Color" title="UserGuide:Line and Ticks 2">Line and Ticks tab</a> of the <b>Axis</b> dialog.</li></ol>
</td></tr></table>
<h4><a name="Example_4:_re-order_panels_by_changing_categorical_order"></a><span class="mw-headline">Example 4: re-order panels by changing categorical order</span></h4>
<p>Cluster plot arranges panels in the order that each value appears in the group column by default. The group column is set as categorical after you plot trellis from it. You can re-order the categorical column to re-arragne the panel. 
</p><p>The following example uses the data &lt;Origin exe folder&gt;/Samples/Statistics/automobile_categorical.dat.dat, imported (Data: Import from File: Single ASCII) using default settings. We are going to plot a "0~60 mph" vs. "Engine Displacement" graph grouped by "Country", and then customize the categorical order to re-order panels.
</p>
<ol>
<li>Do not highlight any columns and choose <b>Plot&gt; 2D: Cluster Plot</b>. Set options as follow in the dialog box:<br />
<ul><li><b>Input&gt; Range1&gt; X</b> = col(D):0~60 mph, <b>Y</b> = col(G):Engine Displacement</li>
<li><b>Plot Type</b> = Symbol </li>
<li><b>Variable for Separate Layers &gt; Horizontal</b> = col(H):Country  </li>
<li>check <b>Uniform X Scale</b> </li>
<li>check <b>Show Axis Frame</b></li></ul>
Click <b>OK</b> to create the cluster plot.
<br /><a  class="image"><img alt="Cluster plot 12.png" src="../images/Plot_by_Group/Cluster_plot_12.png?v=81343" width="402"  /></a>
</li>
<li>Now we are going to sort the countries descendingly and rearrange the graph panels as so. Activate the source worksheet. Double click the <b>Categories</b> label row of Col(H). This will open the <b>Categories</b> dialog.
<li>Check <b>Customize Categories (Add, Delete, Set Arbitrary Order)</b> and click twice the Category header in the table. This will sort the countries descendingly.
<br /><a  class="image"><img alt="Cluster plot 15.png" src="../images/Plot_by_Group/Cluster_plot_15.png?v=81344" width="500"  /></a>
<br />The panels are updated accordingly.
</ol>
<h2><a name="Template"></a><span class="mw-headline">Template</span></h2>
<p>groupedplot.otpu (installed to the EXE folder of Origin)
</p>
<h2><a name="Notes"></a><span class="mw-headline">Notes</span></h2>
<ul><li>Besides <b>Cluster Plot</b>, Origin supports multiple tools to plot group data. Refer to <a href="../../UserGuide/UserGuide/Plotting_Data_by_Groups.html" title="UserGuide:Plotting Data by Groups">this page</a> for more details of creating and customizing a group plot.</li>
<li>Panels are arranged in the order that each element appears in the group column by default. To customize the order, set the group column(s) as categorical and modify the orders in the <a href="../../UserGuide/UserGuide/The_(Column_Properties)_Categories_Tab.html" title="UserGuide:The (Column Properties) Categories Tab"><b>Categories</b> tab</a>.</li>
<li>By default, if the number of panels are more than 50, the calculation would be slow and preview in the <b>plot_bygroup</b> dialog will be disable. The limitation is controled by <a class="external text" href="../../LabTalk/LabTalk/System_Variable_List.html">system variable @nop</a>.</li></ul>


