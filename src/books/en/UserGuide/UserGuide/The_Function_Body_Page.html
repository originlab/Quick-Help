<h1 class="firstHeading">15.3.4.4.5 The Function Body Page</h1><p><br />
</p>
<p class='urlname' style='display: none'>FitFuncBuilder-FuncBody</p>
<p>On this page, you can input the function body, and set initial values for parameters and constants.  These parameter settings can be modified in the Nonlinear Fit dialog.   If your fitting includes integration, you can use this page to map fitting variables and parameters with the elements of the integrand.
</p>
<h2><a name="Dialog_Box_Controls"></a><span class="mw-headline">Dialog Box Controls</span></h2>
<dl><dd><a  class="image"><img alt="FFB Function Body tabs.png" src="../images/The_Function_Body_Page/FFB_Function_Body_tabs.png?v=89236" width="612"  /></a></dd></dl>
<table class="dialogcontroltable">

<tr>
<th> Parameters Tab
</th>
<td>This tab contains several columns for setting initial parameter values.  All settings can be modified in the Nonlinear Fit dialog.
<ul><li><b>Param</b>
<dl><dd> This is read-only, and displays the names of the parameters.</dd></dl></li>
<li><b>Unit</b>
<dl><dd> Specify the units of the parameters.</dd></dl></li>
<li><b>Meaning</b>
<dl><dd> Specify the meanings of the parameters.</dd></dl></li>
<li><b>Fixed</b>
<dl><dd> Select this to fix a parameter.</dd></dl></li>
<li><b>Initial Value</b>
<dl><dd>Set the initial values of the parameters.</dd></dl></li>
<li>Significant Digits
<dl><dd></dd></dl></li>
<li><b>Peak Attribute</b>
<dl><dd>This is available only when the <b>Peak Function</b> check box has been selected on the  <a href="../../UserGuide/UserGuide/The_Variables_and_Parameters_Page.html" title="UserGuide:The Variables and Parameters Page"><b>Variables and Parameters Page</b></a>. For peak functions, the peak attribute for the first <b>y0</b> parameter should be set to <b>Offset/Baseline</b>. You must also assign the peak attributes of center, width, and amplitude/area to at least three other parameters.</dd></dl></li></ul>
</td></tr></table>
<table class="dialogcontroltable">

<tr>
<th> Constants Tab
</th>
<td> Constants are fixed values that can be used either in the function expression or in parameter initialization code. You should enter a value for a constant in the <b>Value</b> column if you have defined it in the previous page. Hidden for Python functions as it is assumed that constants will be defined in the Python Function box.
</td></tr></table>
<table class="dialogcontroltable">

<tr>
<th> Integrand Tab
</th>
<td> This is only available when <b>Include Integration During Fitting</b> is selected in the <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="UserGuide:The Name and Type Page"><b>Name and Type</b></a> page. In this tab, you can map the fitting variables and parameters with elements of the integrand, including lower limit, upper limit, and integrand arguments. After mapping the fitting variables, the corresponding expression for the integration will show at the top of this tab.  Click the <b>Insert</b> button to insert this expression into the Function Body text box.
</td></tr></table>
<p><br />
</p>
<dl><dd><a  class="image"><img alt="FFB Function Body middle notPy.png" src="../images/The_Function_Body_Page/FFB_Function_Body_middle_notPy.png?v=88577" width="664"  /></a></dd>
<dd><a  class="image"><img alt="FFB Function Body middle Py.png" src="../images/The_Function_Body_Page/FFB_Function_Body_middle_Py.png?v=88575" width="662"  /></a></dd></dl>
<p><br />
</p>
<table class="dialogcontroltable">

<tr>
<th> Python Function
</th>
<td> Define the Python function in this box. All necessary Python code, including supporting packages, independent variables, parameters, etc. must be defined here. For speed reasons, we recommend that you use vectorial Python fitting functions.
<ul><li> Independent variables, as listed on the <a href="../../UserGuide/UserGuide/The_Variables_and_Parameters_Page.html" title="UserGuide:The Variables and Parameters Page"><b>Variables and Parameters</b></a> page, are passed as a Python list.</li>
<li> Parameters, as listed on the <a href="../../UserGuide/UserGuide/The_Variables_and_Parameters_Page.html" title="UserGuide:The Variables and Parameters Page"><b>Variables and Parameters</b></a> page, are passed as a Python float.</li>
<li> Optional numeric literals are passed as a Python float.</li></ul>
<p>Arguments can appear in any order. Every Python function in the function call must return a Python list whose size must be the same as the size of the input Python list(s) representing the independent variable(s). 
</p><p>When the equation has multiple dependents, it is also possible to have one equation containing a Python function call which returns a tuple of lists -- one for each independent variable. This way, only one Python call is made for the calculation of all dependent variables. All lists in the returned tuple must (a) be of the same size and (b) must be the same size as the input list(s) of independent variable(s). In this case the function body (see next) would take the following form:
</p>
<pre class="python" style="font-family:monospace;"><span style="color: #000;">&#40;</span>dep1<span style="color: #000;">,</span> dep2<span style="color: #000;">,</span> ...<span style="color: #000;">&#41;</span> <span style="color: #000;">=</span> pyfuncname<span style="color: #000;">&#40;</span>indep1<span style="color: #000;">,</span> indep2<span style="color: #000;">,</span> ...<span style="color: #000;">,</span> param1<span style="color: #000;">,</span> param2<span style="color: #000;">,</span> ...<span style="color: #000;">,</span> numericliteral1<span style="color: #000;">,</span> numericliteral2<span style="color: #000;">,</span>...<span style="color: #000;">&#41;</span><span style="color: #000;">;</span></pre>
<p>Note that LabTalk is not used for getting function values; instead, direct calls to Python are made.
</p>
</td></tr>
<tr>
<th> Function Body
</th>
<td> The <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="UserGuide:The Name and Type Page"><b>Name and Type</b></a> page lists seven function types, each with its own function body format.  To ensure that the fitting function is correctly formatted, follow the hints in the left panel, or read the instructions on the Name and Type page. Note that when function model is implicit, it is required to write the function body as f=g(x,y) instead of 0=g(x,y), where f is the estimate.
</td></tr>
<tr>
<th>Treat All Numbers as Double
</th>
<td>This check box is available when <b>OriginC</b> has been selected in the <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="UserGuide:The Name and Type Page"><b>Name and Type</b></a> page. When <b>Treat All Numbers as Double</b> is selected, all numbers are treated as double precision types.  For example, when selected, “1/2” returns as “0.5”.  When not selected, “1/2” returns as “0”.
</td></tr>
<tr>
<th>Use Derivatives
</th>
<td>This is only available when <b>OriginC</b> has been selected in the <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="UserGuide:The Name and Type Page"><b>Name and Type</b></a> page.  Select this check box to specify expressions for derivatives for all parameters.  Specifying derivative expressions can increase the speed of fitting. Use <b>d_VarName</b> to represent the derivative variables.<br />
<p>See:<a href="../../UserGuide/UserGuide/Partial_Derivative_Parameters.html" title="UserGuide:Partial Derivative Parameters">Specifying Partial Derivative of Parameters</a>
</p>
</td></tr>
<tr>
<th>Open Code Builder Button <a  class="image"><img alt="Ffb open codebuilder.png" src="../images/The_Function_Body_Page/Ffb_open_codebuilder.png?v=23178" width="23"  /></a>
</th>
<td> This is only available when <b>OriginC</b> has been selected in the <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="UserGuide:The Name and Type Page"><b> Name and Type</b></a> page.  Click the button to edit the function body in Code Builder.  For more details, please refer to <a href="../../UserGuide/UserGuide/User-Defined_Fitting_Functions.html#Editing_the_Function_in_Code_Builder" title="UserGuide:User-Defined Fitting Functions">Editing the Function in Code Builder</a>.
</td></tr></table>
<table class="dialogcontroltable">

<tr>
<th>Quick Check
</th>
<td>Use Quick Check to check the validity of a function.  Enter parameter values in the Initial Value column in the table, and then enter values for independent variables in the edit box.  Press the  <a  class="image"><img alt="Ffb evaluate.png" src="../images/The_Function_Body_Page/Ffb_evaluate.png?v=23176" width="23"  /></a> button to view the output values of dependent variables.
<p>If there are errors in your function body, or if you specified inappropriate input values for parameters or variables, the output box will display a missing value and an appropriate error message.
</p>
</td></tr></table>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/The_Function_Body_Page/Tip_icon.png?v=9614" width="57"  border="0" /></td><td><p><b>Quickly modify Parameters and/or Constants</b>
<p>Right click on the table box area of the Parameters tab/Constants tab to bring up the context menu.
</p>
</p>
<ul><li><b>Add</b>: Add a new row in the table.</li>
<li><b>Rename...</b>: Only available when the mouse cursor focuses on certain row. It will open the <b>Parameter Renaming</b> (in the Parameters tab) or <b>Constant Renaming</b> (in the Constants tab) dialog to change the name of the intended Parameter/Constant.</li>
<li><b>Delete</b>: Delete a row of the table. Note that this option in the <b>Parameters</b> tab is not available when there is only one parameter left.</li></ul>
</td></tr></table>


