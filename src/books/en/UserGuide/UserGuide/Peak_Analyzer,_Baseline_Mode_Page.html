<h1 class="firstHeading">19.1.10.2 Peak Analyzer, Baseline Mode Page</h1><p class='urlname' style='display: none'>PeakAnalyzer-BaselineMode</p>
<p>Use the <b>Baseline Mode</b> page to create a baseline. 
</p>
<dl><dd><dl><dd><a  class="image"><img alt="PA BaseModePage.png" src="../images/Peak_Analyzer,_Baseline_Mode_Page/PA_BaseModePage.png?v=74494" width="299"  /></a></dd></dl>
<ul><li><i>Menu Command:</i> <b>Analysis</b>: <b>Peaks and Baseline</b>: <b>Peak Analyzer</b>: <b>Open Dialog</b></li>
<li><i>Window Types</i>: Workbook, Graph</li></ul></dd></dl>
<h2><a name="Dialog_Theme"></a><span class="mw-headline">Dialog Theme</span></h2>
<table class="dialogcontroltable">

<tr>
<th>Dialog Theme
</th>
<td> See <a href="../../UserGuide/UserGuide/The_peak_analyzer_themes.html" title="UserGuide:The peak analyzer themes">Peak Analyzer Themes</a>.
</td></tr>
</table>
<h2><a name="Baseline_Mode"></a><span class="mw-headline">Baseline Mode</span></h2>
<p>There are between four and eight <b>Baseline Modes</b>, depending upon your selected <a href="../../UserGuide/UserGuide/Peak_Analyzer,_Start_Page.html" title="UserGuide:Peak Analyzer, Start Page">Goal</a>. Some Baseline Modes (e.g. User Defined) create additional controls on this page, while others add a page to the Wizard Map.
</p>
<table class="dialogcontroltable">
<tr>
<th> Baseline Mode
</th>
<th> Description
</th></tr>
<tr>
<th>Constant
</th>
<td>Baseline is a horizontal line where Y= Constant. Options include <b>Minimum</b>, <b>Maximum</b>, <b>Mean</b> and <b>Median</b> of the data, and <b>Custom</b> for editing the Y value.
</td></tr>
<tr>
<th>User Defined
</th>
<td>You can create a user defined baseline using one of five methods for finding anchor points:
<ul><li><b>2nd Derivative (zeroes)</b>: Use the <a href="../../UserGuide/UserGuide/Algorithm(PA).html#2nd_Derivative_.28zeroes.29" title="UserGuide:Algorithm(PA)">2nd Derivative (zeroes)</a> method for baseline detection.  </li>
<li><b>1st Derivative and 2nd Derivative</b>: Use the <a href="../../UserGuide/UserGuide/Algorithm(PA).html#1st_Derivative_and_2nd_Derivative" title="UserGuide:Algorithm(PA)">1st Derivative and 2nd Derivative</a> method for baseline detection (this method is more powerful when the baseline is approximately constant).</li>
<li><b>Use Script to Search</b>: Use pre-defined LabTalk script to customize the method of auto finding anchor points. See <a class="external text" href="../../Tutorial/Tutorial/Use_Script_to_Search_Baseline_Anchor_Points_in_Peak_Analyzer.html">this example</a> for details.</li>
<li><b>Use Existing Dataset</b>: Use an existing dataset as the XY coordinates of baseline anchor points.</li></ul>
<dl><dd><ul><li><b>Dataset</b>: You can select a pair of XY columns from Dataset Browser which will display after clicking <a  class="image"><img alt="Button Select Dialog Theme.png" src="../images/Peak_Analyzer,_Baseline_Mode_Page/Button_Select_Dialog_Theme.png?v=1906" width="21"  /></a> button. You can also input range notation eg., <i>(A,C), (2,3)</i>, to refer to relative columns in the worksheet where target dataset locates. Note that such range notation only works for data from worksheet rather than graph.</li>
<li><b>Current Number of points</b>: Read only, display the current number of anchor points.</li></ul></dd></dl>
<ul><li><b>2nd Derivative (peaks)</b>: Use the <a href="../../UserGuide/UserGuide/Algorithm(PA).html#2nd_Derivative_.28peaks.29" title="UserGuide:Algorithm(PA)">2nd Derivative (peaks)</a> method for baseline detection (this method is more recommended if many data points' 2nd derivative approaches to 0). </li></ul>
</td></tr>
<tr>
<th>Use Existing Dataset
</th>
<td>Use an existing dataset as the XY coordinates of baseline anchor points. You can input range notation eg., <i>(A,C), (2,3)</i>, to refer to relative columns in the worksheet where target dataset locates. Note that such range notation only works for data from worksheet rather than graph.
<p><b>Offset Baseline</b>: Enter a value in this text box to offset the baseline.
</p>
</td></tr>
<tr>
<th>XPS
</th>
<td>The <b>Peak Analyzer</b> will allow you to define an X-ray photoemission spectrum special baseline. For more details, please refer to the <a href="../../UserGuide/UserGuide/Peak_Analyzer,_XPS_Baseline.html" title="UserGuide:Peak Analyzer, XPS Baseline"><b>Peak Analyzer, XPS Baseline Page</b></a>.
</td></tr>
<tr>
<th>None (Y=0)
</th>
<td>The Peak Analyzer will use Y=0 as baseline.
</td></tr>
<tr>
<th>Min&amp;Max
</th>
<td>When detecting positive peaks, minimum value in selected data range will be used as baseline; whereas, maximum value will be used as baseline for detecting negative peaks. <b>Note</b> that this option is only available when <b>Goal</b> is <b>Find Peaks</b>.
</td></tr>
<tr>
<th>End Points Weighted
</th>
<td>Create a smoothed curve as baseline using data points from two ends of the input data.
<p><b>Note</b>: This method depends heavily on the selection of end points. You should select the end points fraction very carefully.
</p>
</td></tr>
<tr>
<th>Straight Line
</th>
<td>Create a straight line as baseline by setting the Y intercept and slope. The default value of <b>A(Intercept)</b> and <b>B(Slope)</b> is obtained by connecting the two end points of the data; you can clear the <b>Auto</b> check box to enter the desired values in the edit boxes.
<p>Please note, the digits of default values of <b>A(Intercept)</b> and <b>B(Slope)</b> is decided by the <a href="../../UserGuide/UserGuide/The_(Options)_Numeric_Format_Tab.html#Digits_Group" title="UserGuide:The (Options) Numeric Format Tab">digits settings</a> in the <b>Numeric Format</b> tab of <b>Options</b> dialog.
</p>
</td></tr>
<tr>
<th>Asymmetric Least Squares Smoothing
</th>
<td>Create a smooth baseline based on Asymmetric Least Squares (ALS) correction method. For more details, please refer to the <a href="../../UserGuide/UserGuide/Peak_Analyzer,_ALS_Baseline.html" title="UserGuide:Peak Analyzer, ALS Baseline"><b>Peak Analyzer, Asymmetric Least Squares Smoothing Baseline Page</b></a>.
</td></tr></table>
<h3><a name="User-defined_Anchor_Points_Options"></a><span class="mw-headline">User-defined Anchor Points Options</span></h3>
<dl><dd><dl><dd><a  class="image"><img alt="PA BaseModePage APOptions.png" src="../images/Peak_Analyzer,_Baseline_Mode_Page/PA_BaseModePage_APOptions.png?v=77161" width="473"  /></a></dd></dl></dd></dl>
<p>When <b>Baseline Mode</b> = <b>User Defined</b>, these controls are added to the page.
</p>
<table class="dialogcontroltable">
<tr>
<th>Snap to Spectrum
</th>
<td>Use this to specify whether you want the baseline anchor points to be snapped to the spectrum data. If this is selected, the baseline anchor points will be pulled onto the spectrum as you add or move them.
</td></tr>
<tr>
<th>Smooth Parameter
</th>
<td>The <b>2nd Derivative (zeroes)</b> (adjacent averaging smoothing used),  <b>2nd Derivative (peaks)</b> (Savitzky-Golay smoothing used) and <b>1st Derivative and 2nd Derivative</b> (Savitzky-Golay smoothing used) mode will smooth the data before finding anchor point, but smooth results will not output to the data.
<ul><li><b>Smoothing Windows Size</b></li></ul>
<dl><dd>To increase the smoothness of the result, one can increase smoothing windows size. But for very large window size, adjacent averaging may depart from the input signal too much, whereas Savitzky-Golay can still preserve the overall profile.</dd></dl>
<ul><li><b>Threshold</b></li></ul>
<dl><dd>Threshold can influence anchor point finding. Larger threshold enable more baseline point be found.</dd></dl>
<ul><li><b>Smoothing Polynomial Order</b></li></ul>
<dl><dd> This is only available when <b>1st Derivative and 2nd Derivative</b> is chosen and it specifies the polynomial order for Savitzky-Golay smoothing fitting.</dd></dl>
</td></tr>
<tr>
<th>Use Script to Search
</th>
<td>
<ul><li><b>X=</b></li></ul>
<dl><dd>It specifies the data range of the X coordinates of the baseline anchor points.</dd></dl>
<ul><li><b>Y=</b></li></ul>
<dl><dd>It specifies the data range of the Y coordinates of the baseline anchor points.</dd></dl>
<ul><li><b>Before Formula Script</b></li></ul>
<dl><dd> You may write LabTalk script as Before Formula Script for X= or Y= definition.</dd></dl>
</td></tr>

<tr>
<th>Anchor Points Adjusting Options
</th>
<td>Anchor points adjusting is available for <b>2nd Derivative</b> (both zeroes and peaks), <b>1st Derivative and 2nd Derivative</b> and <b>Use Script to Search</b>.
<p><b>Current Number of Points</b>: The current number of baseline anchor points is displayed here.
</p><p><b>Enable Auto Find</b>:
Specify whether you want the Peak Analyzer to automatically find the baseline anchor points. When selected, the <b>Add</b>, <b>Modify/Del</b> and <b>Clear All</b> buttons are disabled.
</p><p><b>Number of Points to Find</b>:
Enter the desired number of baseline anchor points here.
</p><p><b>Find</b>:
Click this button to find the baseline anchor points in the spectrum data.
</p><p><b>Add</b>:
This button is enabled only when <b>Enable Auto Find</b> is not selected. With this option, you can manually add baseline anchor points by double-clicking on the preview graph containing the spectrum data. The coordinates of mouse click will be shown in <a href="../../UserGuide/UserGuide/The_Data_Display_Tool.html" title="UserGuide:The Data Display Tool">Data Display Window</a> for better selection.
</p><p><b>Modify/Del</b>:
This button is enabled only when <b>Enable Auto Find</b> is not selected. With this option, you can manually move or delete existing baseline anchor points. The coordinates of selected anchor points will be shown in <a href="../../UserGuide/UserGuide/The_Data_Display_Tool.html" title="UserGuide:The Data Display Tool">Data Display Window</a> for better identification.
</p><p><b>Clear All</b>:
This button is enabled only when <b>Enable Auto Find</b> is not selected. When you click this button, all existing baseline anchor points are deleted.
</p><p><b>Save</b>:
Save the current anchor point coordinates as an Anchor Info File (*.DAT format).
</p><p><b>Load</b>:
Load a previously saved Anchor Info File. (*.DAT format)
</p><p><b>Anchor Points Info</b>:
</p>
<dl><dd><a  class="image"><img alt="PA BaseModePage AInfo.png" src="../images/Peak_Analyzer,_Baseline_Mode_Page/PA_BaseModePage_AInfo.png?v=74500" width="400"  /></a></dd>
<dd> Open the <b>Anchor Info</b> dialog to check the current anchor point coordinates. You can add or delete a anchor point, and edit the point location in the dialog, if the <b>Enable Auto Find</b> check box is not selected. You can also copy the point coordinates or paste a specific value for a point X/Y coordinate by the Copy/Paste button.</dd></dl>
<dl><dd><b>Anchor Info</b> Dialog Button Group<br /></dd>
<dd><a  class="image"><img alt="Sort Anchor Points Button.png" src="../images/Peak_Analyzer,_Baseline_Mode_Page/Sort_Anchor_Points_Button.png?v=69007" width="25"  /></a> - Sort anchor points in ascending order by X values.<br /></dd>
<dd><a  class="image"><img alt="Copy Anchor Points Button.png" src="../images/Peak_Analyzer,_Baseline_Mode_Page/Copy_Anchor_Points_Button.png?v=69008" width="25"  /></a> - Copy selected anchor points in anchor points list.<br /></dd>
<dd><a  class="image"><img alt="Paste Anchor Points Button.png" src="../images/Peak_Analyzer,_Baseline_Mode_Page/Paste_Anchor_Points_Button.png?v=69009" width="25"  /></a> - Paste copied anchor points in clipboard into the anchor points list in <b>Anchor Info</b> dialog.<br /></dd>
<dd><a  class="image"><img alt="Add Anchor Points Button.png" src="../images/Peak_Analyzer,_Baseline_Mode_Page/Add_Anchor_Points_Button.png?v=69010" width="25"  /></a> - Add an anchor point to the end of anchor points list.<br /></dd>
<dd><a  class="image"><img alt="Delete Anchor Points Button.png" src="../images/Peak_Analyzer,_Baseline_Mode_Page/Delete_Anchor_Points_Button.png?v=69011" width="25"  /></a> - Remove selected anchor point(s) in anchor points list.<br /></dd></dl>
</td></tr></table>






