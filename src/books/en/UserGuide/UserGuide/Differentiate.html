<h1 class="firstHeading">16.9 Differentiate</h1><p class='urlname' style='display: none'>Math-Differentiate</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#To_Use_Differentiate_Tool"><span class="tocnumber">1.1</span> <span class="toctext">To Use Differentiate Tool</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Dialog_Options"><span class="tocnumber">2</span> <span class="toctext">Dialog Options</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Algorithm"><span class="tocnumber">3</span> <span class="toctext">Algorithm</span></a></li>
</ul>
</div>

<h2><a name="Overview"></a><span class="mw-headline">Overview</span></h2>
<p><a  class="image"><img alt="DifferentiateTool.png" src="../images/Differentiate/450px-DifferentiateTool.png?v=71169" width="450"   /></a><br /><br />
This function performs simple derivative calculations on a data set. The derivative at a given point is computed by taking the average of the slopes between the point and its two closest neighbors. Missing values are ignored.
</p><p>For evenly-spaced X data, you can apply <b>Savitzky-Golay</b> smoothing. If the X data are not equally spaced, this method may not produce a reliable result.
</p>
<h5><a name="To_Use_Differentiate_Tool"></a><span class="mw-headline">To Use Differentiate Tool</span></h5>
<ol><li>Create a new worksheet with data.</li>
<li>Highlight the desired column.</li>
<li>Select <b>Analysis: Mathematics:Differentiate</b> from the Origin menu to open the <b>differentiate</b> dialog. The  X-Function <a class="external text" href="../../XFunction/X-Function/Differentiate.html">differentiate</a> is called to perform the calculation.</li></ol>
<h2><a name="Dialog_Options"></a><span class="mw-headline">Dialog Options</span></h2>
<table class="dialogcontroltable">

<tr>
<th><b>Recalculate</b>
</th>
<td>
<p>Controls recalculation of analysis results
</p>
<ul><li><b>None</b> </li>
<li><b>Auto</b> </li>
<li><b>Manual</b>  </li></ul>
<p>For more information, see: <a class="external text" href="../../UserGuide/UserGuide/Recalculating_Analysis_Results.html">Recalculating Analysis Results</a>
</p>
</td></tr>
<tr>
<th>Input
</th>
<td>
<p>Specify the input XY range (curve). 
</p><p>For help with range controls, see: <a class="external text" href="../../UserGuide/UserGuide/Specifying_Your_Input_Data.html">Specifying Your Input Data</a>
</p>
</td></tr>
<tr>
<th>Derivative
</th>
<td>
<p>Specify the derivative order. 
</p>
</td></tr>
<tr>
<th>Smooth
</th>
<td>
<p>Specify smoothing method.
</p>
<ul><li><b>Savitzky-Golay Smooth</b>
<dl><dd>Use the Savitzky-Golay smoothing method.</dd></dl></li>
<li><b>Polynomial Order </b>
<dl><dd>This is available only when the smoothing is chosen. Set the polynomial order (1 to 9) for the Savitzky-Golay smoothing method. </dd></dl></li>
<li><b>Points of Window</b>
<dl><dd>This is available only when the smoothing is chosen. Set the window size used in the Savitzky-Golay smoothing. </dd></dl></li></ul>
</td></tr>
<tr>
<th>Output
</th>
<td>
<p>Specify the output range.
</p><p>For help with the range controls, see: <a class="external text" href="../../UserGuide/UserGuide/Output_Results.html">Output Results</a>
</p>
</td></tr>
<tr>
<th>Plot Derivative Curve
</th>
<td>
<p>Specify whether to plot the derivative curve. 
</p>
</td></tr></table>
<h2><a name="Algorithm"></a><span class="mw-headline">Algorithm</span></h2>
<p>The derivative of a function is defined as:
</p><p><img src="../images/Differentiate/math-397adb5337cf53537eda3ac6ea94cc37.png?v=0" title="f&#39;(x)=\lim_{h \to 0} \frac{f(x+h)-f(x)}h" alt="f&#39;(x)=\lim_{h \to 0} \frac{f(x+h)-f(x)}h" class="tex"/>
</p><p>While the <img src="../images/Differentiate/math-420af189b35b32d5c184fd9a4547c1d2.png?v=0" title="h\!" alt="h\!" class="tex"/> is small enough, we can use a centered difference formula to approximate the derivative:
</p><p><img src="../images/Differentiate/math-63df5b4933978431e6b9a757c2be2689.png?v=0" title="f&#39;(x_i)\approx \frac{f(x_{i}+h)-f(x_{i}-h)}{2h}" alt="f&#39;(x_i)\approx \frac{f(x_{i}+h)-f(x_{i}-h)}{2h}" class="tex"/>
</p><p>In practice, Origin treats discrete data by the transform of the centered difference formula, and calculates the derivative at point <img src="../images/Differentiate/math-b9aec098733406f89015d893cab14f7f.png?v=0" title="Pi\!" alt="Pi\!" class="tex"/> by taking the average of the slopes between the point and its two closest neighbors.
</p><p><a  class="image"><img alt="6-25-2010 5-28-14 PM.png" src="../images/Differentiate/6-25-2010_5-28-14_PM.png?v=22072" width="311"  /></a>
</p><p>The derivative function applied to discrete data points can therefore be written:
</p><p><img src="../images/Differentiate/math-044afd5d4bb66e32b617b02152ad2015.png?v=0" title="f&#39;(x_i)=\frac 12\left( \frac{y_{i+1}-y_i}{x_{i+1}-x_i}+\frac{y_i-y_{i-1}}{x_i-x_{i-1}}\right) " alt="f&#39;(x_i)=\frac 12\left( \frac{y_{i+1}-y_i}{x_{i+1}-x_i}+\frac{y_i-y_{i-1}}{x_i-x_{i-1}}\right) " class="tex"/>
</p><p>When smooth option is chosen in differentiate, and X data is evenly spaced, <b>Savitzky-Golay</b> method will be used to calculate the derivatives.
</p><p>First perform a polynomial regression on the data points in the moving window. The polynomial value at position x can be calculated as:
</p><p><img src="../images/Differentiate/math-5bafdfa638e3c4dfd49ce6068425adc9.png?v=0" title="f(x)=a_nx^n+a_{n-1}x^{n-1}+a_{n-2}x^{n-2}+\ldots + a_1x + a_0" alt="f(x)=a_nx^n+a_{n-1}x^{n-1}+a_{n-2}x^{n-2}+\ldots + a_1x + a_0" class="tex"/>.
</p><p>where n is the polynomial order, and <img src="../images/Differentiate/math-986bc078b86ae827a46be5ac19d66046.png?v=0" title="a_i, i=0...n" alt="a_i, i=0...n" class="tex"/> are fitted coefficients.
</p><p>And 1st order derivative at position x is:
</p><p><img src="../images/Differentiate/math-424d0a718e4bb420a9db5c20ed934acb.png?v=0" title="f^{\prime }(x)=na_nx^{n-1}+(n-1)a_{n-1}x^{n-2}+...+a_1" alt="f^{\prime }(x)=na_nx^{n-1}+(n-1)a_{n-1}x^{n-2}+...+a_1" class="tex"/>.
</p>





