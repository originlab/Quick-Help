<h1 class="firstHeading">1.2.3 Adding Custom Button on Dialog</h1><p><span class="OIndex" style="display:none">X-Function, Add Custom Button on Dialog</span>
</p>
<h2><a name="Adding_Custom_Button_on_Dialog"></a><span class="mw-headline">Adding Custom Button on Dialog</span></h2>
<p>The following example shows how to add two custom buttons: the Reset button and the Apply button, to an X-Function dialog, as well as an event1 function to catch what button is being clicked. 
</p>
<ol><li>Press F10 to open X-Function Builder. Type "CustomButton" into the X-Function edit box as the X-Function name.</li>
<li>Click the <a  class="image"><img alt="Ocguide xf treeview button.png" src="../images/Adding_Custom_Button_on_Dialog/Ocguide_xf_treeview_button.png?v=77098" width="23"  /></a> button to switch to the Tree View panel, and type "Reset|Apply" in the GetN Dialog Custom Buttons edit box. Click Save to save this X-Function.</li>
<li>Open the X-Function in Code Builder, and put the following code in the CustomButton_event1 function, then click the <a  class="image"><img alt="Ocguide XF Compile Button.PNG" src="../images/Adding_Custom_Button_on_Dialog/Ocguide_XF_Compile_Button.PNG?v=77099" width="92"  /></a> button. 
<span class="OIndex" style="display:none">X-Function, event1</span>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span> nEventID <span style="color: #000080;">==</span> GETNE_ON_CUSTOM_BUTTON1 <span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	out_str<span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;Reset click&quot;</span><span style="color: #000000;">&#41;</span>;
	<span style="color: #008000;">//return PEVENT_GETN_RET_TO_CLOSE; // to close dialog</span>
	<span style="color: #008000;">//return PEVENT_GETN_RET_FORCE_UPDATE; //force update</span>

<span style="color: #000000;">&#125;</span>

<span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span> nEventID <span style="color: #000080;">==</span> GETNE_ON_APPLY <span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	out_str<span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;Apply click&quot;</span><span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span>

<span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span> nEventID <span style="color: #000080;">==</span> GETNE_ON_OK <span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	out_str<span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;OK click&quot;</span><span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span></pre>
</li>
<li>Run <i>CustomButton -d</i> in the Command window to open the dialog of this X-Function.  There should be four buttons: Reset, Apply, OK and Cancel.</li>
<li>Click the Reset button, and "Reset click" gets printed in the Command window. If you click the Apply button, "Apply click" is printed and the Cancel button is changed to a Close button. Click OK, and "OK click" is printed and the dialog is closed.
</li>
</ol>
<p><br />
<b>Note:</b> For more details, please refer to the Origin C help <a class="external text" href="../../OriginC/OriginC/GETN_CUSTOM_BUTTON.html">GETN_CUSTOM_BUTTON</a> .
</p>
<h2><a name="Show_Preview_Button_on_Graph_Preview_GetN_Dialog"></a><span class="mw-headline">Show Preview Button on Graph Preview GetN Dialog</span></h2>
<p>X-Function framework supports a Show Preview button and an Auto Preview check box on the Graph Preview GetN dialog. These two controls are used to update the preview automatically (keep the Auto Preview check box checked) or manually (click the Preview button).
The following steps demonstrate how to add the two controls. 
</p><p>The following five steps illustrate the process to add Preview button controls.
</p>
<ol><li>Press F10 to open X-Function Builder. Type "PreviewButtons" into the X-Function edit box as the X-Function name.</li>
<li>In the Variables table, set up a variable as below and then click the Save button to save this X-Function.
<pre>
Name: gp
Label: Graph
Input/Output: Input
Data Type: string
Control: ...Graph
</pre>
</li>
<li>Run the command <i>PreviewButtons -d</i> to open this X-Function dialog.  There are only two buttons: OK and Cancel. Click Cancel to close the dialog.</li>
<li>In X-Function Builder, click the <a  class="image"><img alt="Ocguide xf treeview button.png" src="../images/Adding_Custom_Button_on_Dialog/Ocguide_xf_treeview_button.png?v=77098" width="23"  /></a> button to switch to the Tree View panel, set Usage Context -&gt; Menus -&gt; Auto GetN Dialog as GetNGraphBox with Preview, and check the Show Preview Button check box. Save this X-Function.</li>
<li>Run <i>PreviewButtons -d</i> to open the dialog again. Now there are two more controls displayed on the dialog: an Auto Preview check box and a Preview button.
</li>
</ol>
<p>The steps below show how to auto-update the dialog's preview graph according to the selection of the <b>gp </b> variable.  For more details about the GetN Graph Preview Dialog, see <a href="../../XFunction/X-Function/Creating_Graph_Preview_GetN_Dialog.html" title="X-Function:Creating Graph Preview GetN Dialog">Creating Graph Preview GetN Dialog</a>.
</p>
<ol start="6">
<li>Open this X-Function in Code Builder, copy the following code, and paste it into the <b>GetNGraphPreview_OnChange</b> function.
<pre class="oc" style="font-family:monospace;"><span style="color: #008000;">//include the bit to call GetNGraphPreview_OnUpdateGraph to update graph</span>
<span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span> <span style="color: #000040;">!</span><span style="color: #000000;">&#40;</span>dwUpdateGraph <span style="color: #000040;">&amp;</span> UPDATE_GRAPH_CHANGED<span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#41;</span>
	dwUpdateGraph <span style="color: #000040;">|</span><span style="color: #000080;">=</span> UPDATE_GRAPH_CHANGED;</pre>
</li>
<li>Copy the codes below into the <b>GetNGraphPreview_OnUpdateGraph</b> function.
<pre class="oc" style="font-family:monospace;">string strGraph <span style="color: #000080;">=</span> trGetN.<span style="color: #000000;">gp</span>.<span style="color: #000000;">strVal</span>;
GraphPage gpSource<span style="color: #000000;">&#40;</span>strGraph<span style="color: #000000;">&#41;</span>;
GraphPage gpDest<span style="color: #000000;">&#40;</span>pgTemp<span style="color: #000000;">&#41;</span>;	
page_clone<span style="color: #000000;">&#40;</span>gpSource, gpDest<span style="color: #000000;">&#41;</span>;</pre></li>
<li>Click the <a  class="image"><img alt="Ocguide XF Compile Button.PNG" src="../images/Adding_Custom_Button_on_Dialog/Ocguide_XF_Compile_Button.PNG?v=77099" width="92"  /></a> button. Then run <i>PreviewButtons -d</i> in the Command window to open the dialog.</li>
<li>In the dialog, type the graph page name into the Graph control, or click the <a  class="image"><img alt="OCguide xf 3dots button.png" src="../images/Adding_Custom_Button_on_Dialog/OCguide_xf_3dots_button.png?v=77124" width="17"  /></a> button to choose one graph page via the Graph Browser dialog. Click the Auto Preview check box or the Preview button, and the specified graph will display on the preview panel. See the picture below.
<div style="text-aligh:center"><a  class="image"><img alt="OCguide xf graph preview dlg.png" src="../images/Adding_Custom_Button_on_Dialog/OCguide_xf_graph_preview_dlg.png?v=77125" width="495"  /></a></div>
</li>
<ol></ol>
</ol>






