<h1 class="firstHeading">2.4.3 fitcmpmodel(Pro)</h1><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Menu_Information"><span class="tocnumber">1</span> <span class="toctext">Menu Information</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Brief_Information"><span class="tocnumber">2</span> <span class="toctext">Brief Information</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Additional_Information"><span class="tocnumber">3</span> <span class="toctext">Additional Information</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#X-Function_Execution_Options"><span class="tocnumber">4</span> <span class="toctext">X-Function Execution Options</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Variables"><span class="tocnumber">5</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Description"><span class="tocnumber">6</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Examples"><span class="tocnumber">7</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Algorithm"><span class="tocnumber">8</span> <span class="toctext">Algorithm</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#References"><span class="tocnumber">9</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Related_X-Functions"><span class="tocnumber">10</span> <span class="toctext">Related X-Functions</span></a></li>
</ul>
</div>

<h2><a name="Menu_Information"></a><span class="mw-headline">Menu Information</span></h2>
<p>Compare Models
</p>
<h2><a name="Brief_Information"></a><span class="mw-headline">Brief Information</span></h2>
<p>Compare two fitting models for a given dataset
</p>
<h2><a name="Additional_Information"></a><span class="mw-headline">Additional Information</span></h2>
<p>It is not accessible from script. This feature is for OriginPro only.
</p>
<h2><a name="X-Function_Execution_Options"></a><span class="mw-headline">X-Function Execution Options</span></h2>
<p><a class="external text" href="../../LabTalk/LabTalk/X-Function_Execution_Options.html">Please refer to the page for additional option switches when accessing the x-function from script</a>
</p>
<h2><a name="Variables"></a><span class="mw-headline">Variables</span></h2>
<table class="xfvar">
<tr>
<th width="8%">Display<br />Name
</th>
<th width="8%">Variable<br />Name
</th>
<th width="8%">I/O<br />and<br />Type
</th>
<th width="8%">Default<br />Value
</th>
<th>Description
</th></tr>
<tr>
<td>Fit Result1
</td>
<td>result1
</td>
<td>
<p>Input
</p><p>Range
</p>
</td>
<td>
</td>
<td>Specifies fit report sheets fitting with same datasets and different model.
</td></tr>
<tr>
<td>Fit Result2
</td>
<td>result2
</td>
<td>
<p>Input
</p><p>Range
</p>
</td>
<td>
</td>
<td>Specifies fit report sheets fitting with same datasets and different model.
</td></tr>
<tr>
<td>Akaike's Information Criteria (AIC)
</td>
<td>aic
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td>1
</td>
<td>Decide whether to output result of Akaike's Information Creiteria (AIC) for comparison. The method has less limitation for model comparison.
</td></tr>
<tr>
<td>Bayesian Information Criteria (BIC)
</td>
<td>bic
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td>0
</td>
<td>Select to decide whether to output result of Bayesian Information Criteria (BIC) for comparison. BIC introduces a larger penalty term than AIC to resolve overfitting problem in data fitting.
</td></tr>
<tr>
<td>F-test
</td>
<td>ftest
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td>0
</td>
<td>Decide whether to output result of F-test for comparison. Please note that F-test only makes sense for nested models.
</td></tr>
<tr>
<td>Significance Level
</td>
<td>sl
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td>0.05
</td>
<td>  Values between <i>0</i> and <i>1</i> are supported.
</td></tr>
<tr>
<td>Fit Parameters
</td>
<td>param
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td>1
</td>
<td>Decide whether to output Fit Parameter table for comparison.
</td></tr>
<tr>
<td>Fit Statistics
</td>
<td>statics
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td>1
</td>
<td>Decide whether to output Fit Statistics table for comparison.
</td></tr>
<tr>
<td>1st Model Name
</td>
<td>name1
</td>
<td>
<p>Input
</p><p>string
</p>
</td>
<td>Model1
</td>
<td>Specify the display name for the first model in the report sheet.
</td></tr>
<tr>
<td>2nd Model Name
</td>
<td>name2
</td>
<td>
<p>Input
</p><p>string
</p>
</td>
<td>Model2
</td>
<td>Specify the display name for the second model in the report sheet.
</td></tr>
<tr>
<td>Results
</td>
<td>rt
</td>
<td>
<p>Output
</p><p>ReportTree
</p>
</td>
<td>&lt;new&gt;
</td>
<td>Specify where to put the output report.
</td></tr></table>
<h2><a name="Description"></a><span class="mw-headline">Description</span></h2>
<p>This tool helps to find out which model is the best fit for the same dataset.
</p><p>Usually we have learned to compare values of Reduced Chi-Square to select the best fit model. It is a useful measure of goodness-of-fit. The more it is close to 1.0, the better model describes our data. But, since variance of each point which enters in the calculation of Chi-Square is not sufficiently known, Chi-Square criteria is not significant in a statistical sense.
</p><p>So, we adopt the following 2 methods in model comparison.
</p><p><b>F-test</b>
</p><p><i>F</i>-test takes advantage of difference of the sum square of residuals of each fit to find out which model is the best. <i>F</i>-test is to compare the sum of square of residuals into a component removed by the simpler model and into a component additionally removed by the more complex model. So, it only makes sense when two models are nested. We recommend users to use this method in following situation
</p><p>1. Equation of 2 models should be in similar structure , such as:
</p>
<dl><dd><a  class="image"><img alt="Fitcmpmodel help English files image002.gif" src="../images/Fitcmpmodel/Fitcmpmodel_help_English_files_image002.gif?v=887" width="125"  /></a> <i>vs</i>. <a  class="image"><img alt="Fitcmpmodel help English files image004.gif" src="../images/Fitcmpmodel/Fitcmpmodel_help_English_files_image004.gif?v=888" width="208"  /></a></dd></dl>
<p>2. Model with some parameter fixed <i>vs</i>. Model with no parameter fixed
</p><p><b>Akaike's Information Criteria (AIC)</b>
</p><p>Akaike's Information Criteria is to find which model would best approximate reality given the data we have recorded. It can simultaneously compare nested or non-nested models. Not relying on concept of significance, AIC is founded on maximum likelihood to rank models. So robust and precise estimates can be obtained by incorporating model uncertainty based on AIC.
</p><p>To use this tool, please pay attention to following
</p>
<ul><li>Input for this tool is fit report sheets (Linear Fit, Polynomial, Nonlinear Curve Fit, etc). So fit tools need to be run before you use this tool</li></ul>
<ul><li>Only the 1<sup>st</sup> result in report sheet can be found. So we need to ensure that results are in separate sheet when fitting multiple datasets.</li></ul>
<p><br />
</p><p><b>Bayesian Information Criteria (BIC)</b>
</p><p>Bayesian information criterion is a model selection criterion that was derived by Schwarz (1978) from a Bayesian modification of the AIC criterion. The penalty term for BIC is similar to AIC equation, but uses a multiplier of <i>ln(n)</i> for <i>k</i> instead of a constant <i>2</i> by incorporating the sample size n. That can resolve so called over fitting problem in data fitting.
</p><p>For two models compared, the model with lower value of BIC is preferred by data.
</p>
<h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>
<p>This example compares the two models as described below.
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\Exponential Decay.dat&quot;</span>; <span style="color: #008000;">// prepare the data</span>
newbook;
impasc;
nlbegin <span style="color: #0000dd;">1</span><span style="color: #000080;">!</span><span style="color: #0000dd;">2</span> ExpDec1 tt;  <span style="color: #008000;">// nonlinear fitting on column 2</span>
nlfit;
nlend <span style="color: #0000dd;">1</span> <span style="color: #0000dd;">2</span>;  &#160;;
nlbegin <span style="color: #0000dd;">1</span><span style="color: #000080;">!</span><span style="color: #0000dd;">2</span> ExpDec2 tt;  <span style="color: #008000;">// nonlinear fitting on column 3</span>
nlfit;
nlend <span style="color: #0000dd;">1</span> <span style="color: #0000dd;">2</span>;  
fitcmpmodel <span style="color: #000080;">-</span>r <span style="color: #0000dd;">2</span> result1<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span><span style="color: #000080;">!</span> result2<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">4</span><span style="color: #000080;">!</span>;   <span style="color: #008000;">// compare the two models</span></pre>
<p>Suppose we have a dataset and want to see which model is the best fit model for it.
</p><p>Candidate models are:
</p><p>ExpDec1: <a  class="image"><img alt="Fitcmpmodel help English files image006.gif" src="../images/Fitcmpmodel/Fitcmpmodel_help_English_files_image006.gif?v=889" width="99"  /></a>
</p><p>ExpDec2: <a  class="image"><img alt="Fitcmpmodel help English files image008.gif" src="../images/Fitcmpmodel/Fitcmpmodel_help_English_files_image008.gif?v=890" width="168"  /></a>
</p><p><b>Operation</b>
</p><p>1.Import <i>Exponential Growth.dat</i> on \<i>Samples</i>\<i>Curve Fitting</i> folder
</p><p>2.Highlight Col(B), select <b>Analysis: Fitting: Nonlinear Curve Fit</b> to open dialog. Set <b>Function</b> as <b>ExpDec1</b>. Click <b>OK</b> to get result sheet
</p><p>3.Open <b>Nonlinear Curve fit</b> dialog again, Set <b>Function</b> as <b>ExpDec2</b> this time. Click <b>OK</b> to get result sheet
</p><p>4.Select <b>Analysis: Fitting: Compare Models</b> to open dialog
</p><p>5.Click browse button to open <b>Report Tree Browser</b> and select 1 item for <b>Fit Result1</b>
</p><p>6.Repeat same operation to select another item for <b>Fit Result2</b>
</p><p>7.  Select all options in GUI and click <b>OK</b>
</p><p>8.From <i>F</i>-test table and AIC result table, we can draw conclusion that ExpDec1 function is the best fit model
</p>
<h2><a name="Algorithm"></a><span class="mw-headline">Algorithm</span></h2>
<p><b>1. F-test</b>
</p><p><b>F Statistic</b>:
</p>
<dl><dd><dl><dd><a  class="image"><img alt="Fitcmpmodel help English files image010.gif" src="../images/Fitcmpmodel/Fitcmpmodel_help_English_files_image010.gif?v=891" width="213"  /></a></dd></dl></dd></dl>
<dl><dd><dl><dd><i>RSS</i>1 is residual sum of square of fit for the simpler model, <i>RSS</i>2 is residual sum of square of fit for the other model.</dd></dl></dd></dl>
<p><b>Prob</b>: 
</p>
<dl><dd><dl><dd><a  class="image"><img alt="Fitcmpmodel help English files image012.gif" src="../images/Fitcmpmodel/Fitcmpmodel_help_English_files_image012.gif?v=892" width="196"  /></a></dd></dl></dd></dl>
<p><b>2. Akaike's Information Criteria (AIC)</b>
</p><p><b>AIC:</b>
</p>
<dl><dd><dl><dd><a  class="image"><img alt="Fitcmpmodel help English files image014.gif" src="../images/Fitcmpmodel/Fitcmpmodel_help_English_files_image014.gif?v=893" width="336"  /></a></dd></dl></dd></dl>
<dl><dd><dl><dd>where <i>N</i> is number is data points, <i>K</i> is number of parameters plus 1, <i>RSS</i> is residual sum of square of fit.</dd></dl></dd></dl>
<p><b>Weight:</b>
</p>
<dl><dd><dl><dd><a  class="image"><img alt="Fitcmpmodel help English files image016.gif" src="../images/Fitcmpmodel/Fitcmpmodel_help_English_files_image016.gif?v=894" width="192"  /></a></dd></dl></dd></dl>
<dl><dd><dl><dd>where<a  class="image"><img alt="Fitcmpmodel help English files image018.gif" src="../images/Fitcmpmodel/Fitcmpmodel_help_English_files_image018.gif?v=895" width="41"  /></a> is the deference between two <i>AIC</i> values</dd></dl></dd></dl>
<p><b>3. Schwarz Bayesian Information Criterion (BIC)</b>
</p><p><b>BIC:</b>
</p>
<dl><dd><dl><dd> <img src="../images/Fitcmpmodel/math-d02fad951640046d84cc422de3c2f0ca.png?v=0" title="BIC=N\ln \left(\frac{RSS}{N} \right)+K\ln \left(N \right)" alt="BIC=N\ln \left(\frac{RSS}{N} \right)+K\ln \left(N \right)" class="tex"/></dd></dl></dd></dl>
<dl><dd><dl><dd>where <i>N</i> is number is data points, <i>K</i> is number of parameters plus 1, <i>RSS</i> is residual sum of square of fit.</dd>
<dd></dd></dl></dd></dl>
<p><br />
</p>
<h2><a name="References"></a><span class="mw-headline">References</span></h2>
<p>1.  <cite>Akaike</cite><cite>, Hirotsugu (1974). "A new look at the statistical model identification".</cite> <cite>IEEE Transactions on Automatic Control</cite><cite>19 (6): 716-723</cite>
</p><p>2.  Burnham, K. R. and D. R. Anderson. 2002. <i>Model Selection and Multimodel Inference</i>. Springer, New York.
</p>
<h2><a name="Related_X-Functions"></a><span class="mw-headline">Related X-Functions</span></h2>
<p><a href="../../XFunction/X-Function/Fitcmpdata.html" title="X-Function:Fitcmpdata">fitcmpdata</a>
</p>





