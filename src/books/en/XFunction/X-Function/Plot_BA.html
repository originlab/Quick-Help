<h1 class="firstHeading">2.10.1 plot_BA</h1><p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Menu_Information"><span class="tocnumber">1</span> <span class="toctext">Menu Information</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Brief_Information"><span class="tocnumber">2</span> <span class="toctext">Brief Information</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Additional_Information"><span class="tocnumber">3</span> <span class="toctext">Additional Information</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Command_Line_Usage"><span class="tocnumber">4</span> <span class="toctext">Command Line Usage</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Variables"><span class="tocnumber">5</span> <span class="toctext">Variables</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Details_of_Lines_and_Fills_TreeNode"><span class="tocnumber">5.1</span> <span class="toctext">Details of Lines and Fills TreeNode</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Description"><span class="tocnumber">6</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Algorithm"><span class="tocnumber">7</span> <span class="toctext">Algorithm</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#True_Value_Varies"><span class="tocnumber">7.1</span> <span class="toctext">True Value Varies</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#True_Value_is_Constant"><span class="tocnumber">7.2</span> <span class="toctext">True Value is Constant</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#References"><span class="tocnumber">8</span> <span class="toctext">References</span></a></li>
</ul>
</div>

<h2><a name="Menu_Information"></a><span class="mw-headline">Menu Information</span></h2>
<p>Bland-Altman
</p>
<h2><a name="Brief_Information"></a><span class="mw-headline">Brief Information</span></h2>
<p>Create Bland-Altman plot
</p>
<h2><a name="Additional_Information"></a><span class="mw-headline">Additional Information</span></h2>
<p>Minimum Origin Version Required: 2020b
</p>
<h2><a name="Command_Line_Usage"></a><span class="mw-headline">Command Line Usage</span></h2>
<p><code>
1.plot_BA -r 1 irng:=[Book1]Sheet1!(C"RV",D"IC",A"Subj.") diff:=1 trplot.fillloa:=1 trplot.fillcil:=0;
</code>
</p>
<h2><a name="Variables"></a><span class="mw-headline">Variables</span></h2>
<table class="xfvar">
<tr>
<th width="8%">Display<br />Name
</th>
<th width="8%">Variable<br />Name
</th>
<th width="8%">I/O<br />and<br />Type
</th>
<th width="8%">Default<br />Value
</th>
<th>Description
</th></tr>
<tr>
<td>Input
</td>
<td>irng
</td>
<td>
<p>Input
</p><p>Range
</p>
</td>
<td> <center>&lt;active&gt;</center>
</td>
<td> Specify data ranges of Method1, Method2, and Subject, in sequence. Subject column is optional.
<p>Option list:
</p>
<ul><li><i>1st Method</i></li></ul>
<dl><dd>Specify data column for the first method</dd></dl>
<ul><li><i>2nd Method</i></li></ul>
<dl><dd>Specify data column for the second method</dd></dl>
<ul><li><i>Subject</i></li></ul>
<dl><dd>Specify data column for Subject. This option is specified if your data has repeated measures for each subject. Your data will be grouped into subjects according to the Subject column you choose here. Multiple groups of subjects are supported.</dd></dl>
</td></tr>
<tr>
<td>X Axis
</td>
<td>xaxis
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>Mean</center>
</td>
<td> Specify the values used for X axis.
<p>Option list:
</p>
<ul><li><i>mean:Mean</i></li>
<li><i>m1:1st Method</i></li>
<li><i>m2:2nd Method</i></li>
<li><i>geo: Geometric</i></li></ul>
<dl><dd> Usually used when <b>Y Axis</b> is specified as <b>ratios</b>. </dd></dl>
</td></tr>
<tr>
<td>Y Axis
</td>
<td>yaxis
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>1</center>
</td>
<td> Specify the values used for Y axis.
<p>Option list:
</p>
<ul><li><i>diffp:Difference&#160;%</i></li></ul>
<dl><dd> Difference / Mean X 100%</dd></dl>
<ul><li><i>diff:Difference</i></li></ul>
<dl><dd>This is the value used when Subject column is specified.</dd></dl>
<ul><li><i>ratio:Ratio</i></li></ul>
<dl><dd> Usually used when <b>X Axis</b> is specified as <b>geo</b>. </dd></dl>
</td></tr>
<tr>
<td>SD Multiplier for LoA
</td>
<td>sd
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>1.96</center>
</td>
<td> Specify the multiplier factor of Standard Deviation for Limits of Agreement method.
</td></tr>
<tr>
<td>Confidence Level in&#160;%
</td>
<td>conf
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>95</center>
</td>
<td> Specify the confidence level in percentage.
</td></tr>
<tr>
<td>True Value is Constant
</td>
<td>trueval
</td>
<td>
<p>Input
</p><p>int 
</p>
</td>
<td> <center>0</center>
</td>
<td> Checking this option to use One Way Anova to get mean square for the residual for two methods separately. Available only when Subject is specified.
</td></tr>
<tr>
<td>Plot Each Subject as One Bubble
</td>
<td>bubble
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>1</center>
</td>
<td> Available only when Subject is specified. Specify whether to plot each subject as one bubble.
<p>When it is selected, bubble size is mapped to number of replicates for each subject. Otherwise, each data point is plotted as one symbol, and its color and shape is mapped to Subject column.
</p>
</td></tr>
<tr>
<td>Mean Difference (bias) Estimation
</td>
<td>diff
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>Subject Difference</center>
</td>
<td> Available only when Subject is specified. When <b>True Value is Constant</b> is checked, <b>Mean Difference Estimation</b> uses subject differenct.
<p>Option list:
</p>
<ul><li><i>sub:Subject Difference</i></li>
<li><i>indv:Individual Row</i></li></ul>
</td></tr>
<tr>
<td>Confidence Interval Estimation for LoA
</td>
<td>interval
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>MOVER</center>
</td>
<td> Available only when Subject is specified.
<p>Option list:
</p>
<ul><li>"<i>mover:Mover</i></li>
<li><i>delta:Delta Method</i></li></ul>
</td></tr>
<tr>
<td>Lines and Fills
</td>
<td>trplot
</td>
<td>
<p>Input
</p><p>TreeNode
</p>
</td>
<td> <center>&lt;unassigned&gt;</center>
</td>
<td> Check to show the desired reference lines and color-filled area.
<p>See details in the next table.
</p>
</td></tr>
<tr>
<td>Mean of Pairwise Means
</td>
<td>mpm
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td> Mean of all pair-wise means: 0=false, 1=true.
</td></tr>
<tr>
<td>Bland-Altman Ratio
</td>
<td>ratio
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td> Calculated as 0.5*(upper LoA - lower LoA)/mpm: 0=false, 1=true.
</td></tr>
<tr>
<td>Output Results
</td>
<td>rd
</td>
<td>
<p>Output
</p><p>ReportData
</p>
</td>
<td> <center>[&lt;input&gt;]&lt;new&gt;</center>
</td>
<td> Specify the range of output data for plotting.
</td></tr></table>
<h3><a name="Details_of_Lines_and_Fills_TreeNode"></a><span class="mw-headline">Details of Lines and Fills TreeNode</span></h3>
<p>This <b>trplot</b> tree specifies all supported reference lines and filled intervals.
</p><p>Syntax: trplot.<i>Treenode:=&lt;value&gt;</i>
</p><p>Example: trplot.fillloa:=1
</p>
<table class="treetable">
<tr>
<th> Treenode
</th>
<th> Label
</th>
<th> Type
</th>
<th> Default
</th>
<th> Description
</th></tr>
<tr>
<td>mean
</td>
<td>Mean
</td>
<td>int
</td>
<td>1
</td>
<td>Line of Mean value.
</td></tr>
<tr>
<td>equality
</td>
<td>Line of Equality (Difference=0)
</td>
<td>int
</td>
<td>1
</td>
<td>Line of Equality (Difference=0).
</td></tr>
<tr>
<td>
</td>
<td>Limits of Agreement
</td>
<td>int
</td>
<td>1
</td>
<td>Limits of Agreement
</td></tr>
<tr>
<td>fillloa
</td>
<td>Fill Between LoA
</td>
<td>int
</td>
<td>0
</td>
<td>Fill interval area between LoA.
</td></tr>
<tr>
<td>cim
</td>
<td>CI of Mean
</td>
<td>int
</td>
<td>0
</td>
<td>Lines of upper and lower limits of confidence interval of mean. The confidence level is specified in <b>Confidence Level in&#160;%</b>.
</td></tr>
<tr>
<td>fillcim
</td>
<td>Fill Between CI of Mean
</td>
<td>int
</td>
<td>1
</td>
<td>Fill area between confidence interval of mean. The confidence level is specified by <b>Confidence Level in&#160;%</b>.
</td></tr>
<tr>
<td>cil
</td>
<td>CI of Limits of Agreement
</td>
<td>int
</td>
<td>0
</td>
<td>Lines of limits of Agreement
</td></tr>
<tr>
<td>fillcil
</td>
<td>Fill Between CI of LoA
</td>
<td>int
</td>
<td>1
</td>
<td>Fill area between confidence interval of limits of Agreement. The confidence level is specified by <b>Confidence Interval Estimation for LoA</b>.
</td></tr></table>
<h2><a name="Description"></a><span class="mw-headline">Description</span></h2>
<p>This X-Function is used to create the Bland-Altman plot. A Bland-Altman plot is a graphic display of difference between two methods. It is typically plotting the differences of two methods against their mean, with mean difference and 95% confidence intervals for comparison.
</p><p>Also see menu deails <a class="external text" href="../../UserGuide/UserGuide/Bland_Altman_Plot.html#Creating_the_Graph">here</a>.
</p>
<h2><a name="Algorithm"></a><span class="mw-headline">Algorithm</span></h2>
<h3><a name="True_Value_Varies"></a><span class="mw-headline">True Value Varies</span></h3>
<p>It is assumed that the repeated differences for a single subject are independent in this case. One way ANOVA is used to calculate mean square of the residual (measurement error) for differences of two methers.
</p><p><img src="../images/Plot_BA/math-e7dfaacaa311d5922b9b713ab040d02d.png?v=0" title="NOO=\frac{(\sum m_i)^2-\sum m_i^2}{(n-1)\sum m_i}" alt="NOO=\frac{(\sum m_i)^2-\sum m_i^2}{(n-1)\sum m_i}" class="tex"/>
</p><p>where <img src="../images/Plot_BA/math-7b8b965ad4bca0e41ab51de7b31363a1.png?v=0" title="n" alt="n" class="tex"/> is the number of subjects, <img src="../images/Plot_BA/math-342e772474b691ac87dac30aeef596c0.png?v=0" title="m_i" alt="m_i" class="tex"/> is number of observations on subject <i>i</i>. If all the subjects have the same number of observations, m, this factor reduces to m.
</p><p><img src="../images/Plot_BA/math-84e9e594f26834cae582a047f52bec77.png?v=0" title="Average Difference Across Subjects = \frac{Mean Square of Model - Mean Square Of Error}{NOO}" alt="Average Difference Across Subjects = \frac{Mean Square of Model - Mean Square Of Error}{NOO}" class="tex"/>
</p><p>Total Variance for Single Differences on Different Subjects = Mean Square of Error + Average Difference across Subjects
</p><p>Standard Deviation = Square Root of Total Variance for Single Differences on Different Subjects
</p><p>Mean = mean of the individual differences
</p>
<h3><a name="True_Value_is_Constant"></a><span class="mw-headline">True Value is Constant</span></h3>
<p>One Way Anova is used to get mean square for the residual (measurement error) for two methods separately.
</p><p><img src="../images/Plot_BA/math-5d94cab6b6250f55830ac3f4702ffebd.png?v=0" title="Multiplier = (1-\frac 1{n}\sum \frac 1{m})" alt="Multiplier = (1-\frac 1{n}\sum \frac 1{m})" class="tex"/>
</p><p>If the <i>Multiplier</i> of observations on each subjects are the same, the above formula can be simplified as:
</p><p><img src="../images/Plot_BA/math-771ef23662a26da6db7f144b53551ff9.png?v=0" title="Multiplier = (1-\frac 1{m})" alt="Multiplier = (1-\frac 1{m})" class="tex"/>
</p><p>Standard Deviation = square root of (variance of differences between subject means + Multiplier of method1 * mean square of error of method1 + Multiplier of method2 * mean square of error of method2) 
</p><p>Mean = mean of the individual differences
</p>
<h2><a name="References"></a><span class="mw-headline">References</span></h2>
<p>Bland &amp; Altman (2007)
</p>





