<h1 class="firstHeading">2.11.18 stft(Pro)</h1><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Menu_Information"><span class="tocnumber">1</span> <span class="toctext">Menu Information</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Brief_Information"><span class="tocnumber">2</span> <span class="toctext">Brief Information</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Additional_Information"><span class="tocnumber">3</span> <span class="toctext">Additional Information</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Command_Line_Usage"><span class="tocnumber">4</span> <span class="toctext">Command Line Usage</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#X-Function_Execution_Options"><span class="tocnumber">5</span> <span class="toctext">X-Function Execution Options</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Variables"><span class="tocnumber">6</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Examples"><span class="tocnumber">7</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Algorithm"><span class="tocnumber">8</span> <span class="toctext">Algorithm</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#More_Information"><span class="tocnumber">9</span> <span class="toctext">More Information</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Related_X-Functions"><span class="tocnumber">10</span> <span class="toctext">Related X-Functions</span></a></li>
</ul>
</div>

<h2><a name="Menu_Information"></a><span class="mw-headline">Menu Information</span></h2>
<p>Analysis&#160;: Signal Processing&#160;: STFT
</p>
<h2><a name="Brief_Information"></a><span class="mw-headline">Brief Information</span></h2>
<p>Compute short time fourier transform of signal
</p>
<h2><a name="Additional_Information"></a><span class="mw-headline">Additional Information</span></h2>
<p>This feature is for OriginPro only.
</p>
<h2><a name="Command_Line_Usage"></a><span class="mw-headline">Command Line Usage</span></h2>
<p><code>
1. stft ix:=col(2); 
</p><p>2. stft ix:=col(2) interval:=4; 
</p><p>3. stft ix:=col(2) option:=complex; 
</p><p>4. stft ix:=col(2) winlen:=32 fftlen:=64 overlap:=16; 
</p><p>5. stft ix:=col(2) win:=tri; 
</p><p>6. stft ix:=col(2) win:=gauss correct:=power alpha:=3; 
</p><p>7. stft ix:=col(2) win:=kaiser beta:=2; 
</p><p>8. stft ix:=col(2) plot:=0; 
</p><p></code>
</p>
<h2><a name="X-Function_Execution_Options"></a><span class="mw-headline">X-Function Execution Options</span></h2>
<p><a class="external text" href="../../LabTalk/LabTalk/X-Function_Execution_Options.html">Please refer to the page for additional option switches when accessing the x-function from script</a>
</p>
<h2><a name="Variables"></a><span class="mw-headline">Variables</span></h2>
<table class="xfvar">
<tr>
<th width="8%">Display<br />Name
</th>
<th width="8%">Variable<br />Name
</th>
<th width="8%">I/O<br />and<br />Type
</th>
<th width="8%">Default<br />Value
</th>
<th>Description
</th></tr>
<tr>
<td>Input
</td>
<td>ix
</td>
<td>
<p>Input
</p><p>vector&lt;complex&gt;
</p>
</td>
<td> <center>&lt;active&gt;</center>
</td>
<td> Specifies the input signal
</td></tr>
<tr>
<td>Specify By
</td>
<td>mode
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td>
<p>Option list:
</p>
<ul><li><i>interval:Interval</i> {0}
<dl><dd></dd></dl></li>
<li><i>freq:Frequency</i> {1}
<dl><dd></dd></dl></li></ul>
</td></tr>
<tr>
<td>Sampling Interval
</td>
<td>interval
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>&lt;auto&gt;</center>
</td>
<td> Specifies the sampling interval if mode is interval. The default is &lt;auto&gt;, which corresponds to an automatically-calculated interval.
</td></tr>
<tr>
<td>Sampling Frequency
</td>
<td>freq
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>&lt;auto&gt;</center>
</td>
<td> Specifies the sampling frequency if mode is frequency. The default is &lt;auto&gt;, which corresponds to an automatically-calculated frequency.
</td></tr>
<tr>
<td>FFT Length
</td>
<td>fftlen
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>256</center>
</td>
<td> Specifies the size of FFT section
</td></tr>
<tr>
<td>Window length
</td>
<td>winlen
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>256</center>
</td>
<td> Specifies the window size, which must not be greater than the size of an FFT section
</td></tr>
<tr>
<td>Overlap
</td>
<td>overlap
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>128</center>
</td>
<td> Specifies the number of data points by which the window sections overlap. It should be less than the window size
</td></tr>
<tr>
<td>Window Type
</td>
<td>win
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>4</center>
</td>
<td> Specifies the window type used by FFT
<p>Option list:
</p>
<ul><li><i>rect:Rectangle</i> {0}
<dl><dd>Rectangular window</dd></dl></li>
<li><i>welch:Welch</i> {1}
<dl><dd>Welch window</dd></dl></li>
<li><i>tri:Triangular</i> {2}
<dl><dd>Triangular window</dd></dl></li>
<li><i>bartlett:Bartlett</i> {3}
<dl><dd>Bartlett window</dd></dl></li>
<li><i>hanning:Hanning</i> {4}
<dl><dd>Hanning window</dd></dl></li>
<li><i>hamming:Hamming</i> {5}
<dl><dd>Hamming window</dd></dl></li>
<li><i>blackman:Blackman</i> {6}
<dl><dd>Blackman window</dd></dl></li>
<li><i>gauss:Gaussian</i> {7}
<dl><dd>Gaussian window</dd></dl></li>
<li><i>kaiser:Kaiser</i> {8}
<dl><dd>Kaiser window</dd></dl></li></ul>
</td></tr>
<tr>
<td>Alpha
</td>
<td>alpha
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>0</center>
</td>
<td> This variable is only available when Window Type is Gaussian. It specifies the Alpha parameter for Gaussian window.
</td></tr>
<tr>
<td>Beta
</td>
<td>beta
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>0</center>
</td>
<td> This variable is only available when Window Type is Kaiser. It specifies the Beta parameter for Kaiser window.
</td></tr>
<tr>
<td>Window Correction
</td>
<td>correct
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td><center>amplitude</center>
</td>
<td>
<p>Specifies the Window Correction Factor used to correct the alteration made by applying a window to the input data.
</p><p>Option list
</p>
<ul><li><i>none:None</i>
<dl><dd>No correction is applied.</dd></dl></li>
<li><i>amp:Amplitude</i>
<dl><dd>Amplitude Correction is applied. </dd></dl></li>
<li><i>power:Power</i>
<dl><dd>Energy Correction is applied.</dd></dl></li></ul>
</td></tr>
<tr>
<td>Option
</td>
<td>option
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>2</center>
</td>
<td> Specifies the computation option. The default is 2, which correspond to the computing of the amplitude in dB.
<p>Option list:
</p>
<ul><li><i>complex:Complex Result</i> {0}
<dl><dd>The complex result of STFT will be computed.</dd></dl></li>
<li><i>amp:Amplitude Result</i> {1}
<dl><dd>The amplitude of the complex result will be given</dd></dl></li>
<li><i>ampdb:Amplitude in dB</i> {2}
<dl><dd>The amplitude in dB will be computed.</dd></dl></li></ul>
</td></tr>
<tr>
<td>Swap Time and Frequency
</td>
<td>swapxy
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td> Specifies whether to swap the time axis and the frequency axis in the image plot.
</td></tr>
<tr>
<td>Output Matrix
</td>
<td>om
</td>
<td>
<p>Output
</p><p>MatrixObject
</p>
</td>
<td> <center>[&lt;new&gt;]&lt;new&gt;!</center>
</td>
<td> Specify the output matrix
</td></tr>
<tr>
<td>Create Image Plot
</td>
<td>plot
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>1</center>
</td>
<td> Specify whether an image plot of the result will be generated
</td></tr>
<tr>
<td>Output Worksheet
</td>
<td>rd
</td>
<td>
<p>Output
</p><p>ReportData
</p>
</td>
<td> <center>[&lt;input&gt;]&lt;new&gt;</center>
</td>
<td> Specify the output worksheet.
</td></tr></table>
<h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>
<p>1.  To perform stft of Column B using the default setting:
</p><p><code>stft ix:=col(b)</code>
</p><p>2.  To perform stft with Hanning window:
</p><p><code>stft -d</code>
</p><p>to open the dialog. Then select Hanning window for Window Type.
</p><p>3.  To perform stft using a pre-saved analysis theme called <i>MyTheme</i>, use the Command Window:
</p><p><code>stft -t "MyTheme"</code>
</p>
<h2><a name="Algorithm"></a><span class="mw-headline">Algorithm</span></h2>
<p><b>stft Computation</b>
</p><p>stft is computed in the following procedure:
</p><p>1. N points are taken from the input signal, where N is equal to the window size.
</p><p>2. A window of the chosen type is used to multiply the extracted data, point-by-point.
</p><p>3. Zeros will be padded on both sides of the window, if the window size is less than the size of the FFT section.
</p><p>4. FFT is computed on the FFT section.
</p><p>5. Move the window according to the user-specified overlap size, and repeat steps 1 through 4 until the end of the input signal is reached.
</p><p><b>The Window Functions</b>
</p><p>The sliding windows are defined as follows:
</p><p><b>Rectangular Window</b>: 
</p>
<dl><dd><a  class="image"><img alt="Stft help English files image011.gif" src="../images/Stft/Stft_help_English_files_image011.gif?v=460" width="56"  /></a> for <a  class="image"><img alt="Stft help English files image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif?v=461" width="88"  /></a></dd></dl>
<p><b>Welch Window</b>:
</p><p><b> <a  class="image"><img alt="Stft help English files image013.gif" src="../images/Stft/Stft_help_English_files_image013.gif?v=462" width="179"  /></a></b> for <a  class="image"><img alt="Stft help English files image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif?v=461" width="88"  /></a>
</p><p><b>Triangular Window</b>:
</p><p><img src="../images/Stft/math-655e1c705391455c89e20d9abae0eced.png?v=0" title="\mbox{For } 0 \le n \le N-1" alt="\mbox{For } 0 \le n \le N-1" class="tex"/>
</p>
<dl><dd><img src="../images/Stft/math-1e13169a1ecddcba2b5478ade624ef7d.png?v=0" title="&#10;w[n]=&#10;\begin{cases}&#10;\frac{2}{N+1}(\frac{N+1}{2}-|n-\frac{N-1}{2}|), &amp; \mbox{if }N\mbox{ is odd} \\&#10;\frac{2}{N}(\frac{N}{2}-|n-\frac{N-1}{2}|), &amp; \mbox{if }N\mbox{ is even}&#10;\end{cases}&#10;" alt="&#10;w[n]=&#10;\begin{cases}&#10;\frac{2}{N+1}(\frac{N+1}{2}-|n-\frac{N-1}{2}|), &amp; \mbox{if }N\mbox{ is odd} \\&#10;\frac{2}{N}(\frac{N}{2}-|n-\frac{N-1}{2}|), &amp; \mbox{if }N\mbox{ is even}&#10;\end{cases}&#10;" class="tex"/></dd></dl>
<p><b>Bartlett</b> <b>Window:</b>
</p>
<dl><dd><img src="../images/Stft/math-44e773c8628ca87ab69ebfe21712169d.png?v=0" title="w[n]=\frac{2}{N-1}(\frac{N-1}{2}-|n-\frac{N-1}{2}|) \mbox{ for } 0 \le n \le N-1" alt="w[n]=\frac{2}{N-1}(\frac{N-1}{2}-|n-\frac{N-1}{2}|) \mbox{ for } 0 \le n \le N-1" class="tex"/></dd></dl>
<p><b>Hanning</b> <b>Window</b>:
</p>
<dl><dd><a  class="image"><img alt="Stft help English files image018.gif" src="../images/Stft/Stft_help_English_files_image018.gif?v=465" width="172"  /></a> for <a  class="image"><img alt="Stft help English files image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif?v=461" width="88"  /></a></dd></dl>
<p><b>Hamming Window</b>:
</p>
<dl><dd><a  class="image"><img alt="Stft help English files image019.gif" src="../images/Stft/Stft_help_English_files_image019.gif?v=466" width="195"  /></a> for <a  class="image"><img alt="Stft help English files image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif?v=461" width="88"  /></a></dd></dl>
<p><b>Blackman Window</b>:
</p>
<dl><dd><a  class="image"><img alt="Stft help English files image020.gif" src="../images/Stft/Stft_help_English_files_image020.gif?v=467" width="288"  /></a> for <a  class="image"><img alt="Stft help English files image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif?v=461" width="88"  /></a></dd></dl>
<p><b>Gaussian Window:</b>
</p>
<dl><dd><img src="../images/Stft/math-8c1b29b5709e6b785032092404883df0.png?v=0" title="w[n]=e^{-\frac{1}{2}(\alpha\frac{n-(N-1)/2}{(N-1)/2})^2} \mbox{ for } 0 \le n \le N-1" alt="w[n]=e^{-\frac{1}{2}(\alpha\frac{n-(N-1)/2}{(N-1)/2})^2} \mbox{ for } 0 \le n \le N-1" class="tex"/></dd></dl>
<p><b>Kaiser Window:</b>
</p>
<dl><dd><img src="../images/Stft/math-6ac7c1069e87a335854c91b9b9ff2e79.png?v=0" title="w[n]=\frac{I(\beta\sqrt{1-(\frac{2n}{N-1}-1)^2})}{I(\beta)} \mbox{ for } 0 \le n \le N-1" alt="w[n]=\frac{I(\beta\sqrt{1-(\frac{2n}{N-1}-1)^2})}{I(\beta)} \mbox{ for } 0 \le n \le N-1" class="tex"/></dd></dl>
<p>where I(ix) denotes Bessel Function.
</p><p><b>Computation of the Sampling Interval</b>
</p><p>For details of the auto computation of the sampling interval, please see the X-Function document for fft1.
</p>
<h2><a name="More_Information"></a><span class="mw-headline">More Information</span></h2>
<p>For more information, please refer to our User Guide.
</p>
<dl><dd><ul><li><a class="external text" href="../../UserGuide/Category/Short-Time_Fourier_Transform_(Pro_only).html">Description</a></li>
<li><a class="external text" href="../../UserGuide/UserGuide/Reference_(STFT).html">Reference</a></li></ul></dd></dl>
<h2><a name="Related_X-Functions"></a><span class="mw-headline">Related X-Functions</span></h2>
<p><a href="../../XFunction/X-Function/Fft1.html" title="X-Function:Fft1">fft1</a>
</p>
<hr class='keywordshr'><p><span class='keywords'>Keywords:</span><span class='keywordsInput'>fft, sliding window, time slice</span></p>






