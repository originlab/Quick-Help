<h1 class="firstHeading">2.6.1.4 imgColorlevel</h1><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Menu_Information"><span class="tocnumber">1</span> <span class="toctext">Menu Information</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Brief_Information"><span class="tocnumber">2</span> <span class="toctext">Brief Information</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Command_Line_Usage"><span class="tocnumber">3</span> <span class="toctext">Command Line Usage</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#X-Function_Execution_Options"><span class="tocnumber">4</span> <span class="toctext">X-Function Execution Options</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Variables"><span class="tocnumber">5</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Description"><span class="tocnumber">6</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Examples"><span class="tocnumber">7</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Algorithm"><span class="tocnumber">8</span> <span class="toctext">Algorithm</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#References"><span class="tocnumber">9</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Related_X-Functions"><span class="tocnumber">10</span> <span class="toctext">Related X-Functions</span></a></li>
</ul>
</div>

<h2><a name="Menu_Information"></a><span class="mw-headline">Menu Information</span></h2>
<p>Image: Adjustments: Color Level
</p>
<h2><a name="Brief_Information"></a><span class="mw-headline">Brief Information</span></h2>
<p>Apply user-defined color levels to image
</p>
<h2><a name="Command_Line_Usage"></a><span class="mw-headline">Command Line Usage</span></h2>
<p><code>
</p><p>1. imgColorlevel c:=green w:=90 b:=20 g:=80;
</p><p>2. imgColorlevel c:=red w:=80 b:=20 oimg:=&lt;new&gt;; 
</p><p></code>
</p>
<h2><a name="X-Function_Execution_Options"></a><span class="mw-headline">X-Function Execution Options</span></h2>
<p><a class="external text" href="../../LabTalk/LabTalk/X-Function_Execution_Options.html">Please refer to the page for additional option switches when accessing the x-function from script</a>
</p>
<h2><a name="Variables"></a><span class="mw-headline">Variables</span></h2>
<table class="xfvar">
<tr>
<th width="8%">Display<br />Name
</th>
<th width="8%">Variable<br />Name
</th>
<th width="8%">I/O<br />and<br />Type
</th>
<th width="8%">Default<br />Value
</th>
<th>Description
</th></tr>
<tr>
<td>Input Matrix
</td>
<td>img
</td>
<td>
<p>Input
</p><p>Image
</p>
</td>
<td> <center>&lt;active&gt;</center>
</td>
<td>
<p>Specifies the image to manipulate. By default, the input image is the active image.
</p>
</td></tr>
<tr>
<td>Channel
</td>
<td>c
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>master</center>
</td>
<td>
<p>Specifies the color channel to apply color leveling.
</p><p><br />
Option list
</p>
<ul><li><i>M:Master</i>
<dl><dd>The master channel</dd></dl></li>
<li><i>R:Red</i>
<dl><dd>The red channel</dd></dl></li>
<li><i>G:Green</i>
<dl><dd>The green channel</dd></dl></li>
<li><i>blue:Blue</i>
<dl><dd>The blue channel</dd></dl></li></ul>
</td></tr>
<tr>
<td>HiClip(%)
</td>
<td>w
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>100</center>
</td>
<td>
<p>Specifies the percentage of highlight levels, which will be remapped to max level during color leveling.
</p>
</td></tr>
<tr>
<td>LoClip(%)
</td>
<td>b
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>0</center>
</td>
<td>
<p>Specifies the percentage of shadow levels, which will be remapped to min level during color leveling.
</p>
</td></tr>
<tr>
<td>Gamma
</td>
<td>g
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>1</center>
</td>
<td>
<p>Specifies the gamma value used to remap the mid-tone values.
</p>
</td></tr>
<tr>
<td>Output Image
</td>
<td>oimg
</td>
<td>
<p>Output
</p><p>Image
</p>
</td>
<td> <center>&lt;input&gt;</center>
</td>
<td>
<p>Specifies the output image.
See the syntax <a class="external text" href="../../XFunction/X-Function/Output_Notations.html">here</a>.
</p>
</td></tr>
<tr>
<td>Level Report
</td>
<td>cl
</td>
<td>
<p>Output
</p><p>ReportData
</p>
</td>
<td> <center>[&lt;new&gt;]&lt;new&gt;!</center>
</td>
<td>
<p>Specifies the leveling report.
</p><p><br />
</p>
</td></tr></table>
<h2><a name="Description"></a><span class="mw-headline">Description</span></h2>
<p>The <i>imgColorlevel</i> function applies color leveling to an image, which can alter the highlights, midtones and shadows of a color channel and thus can be used to enhance the color of the image. For example, if the input image has too few highlights in its green channel (you can judge that from the histogram or directly from the input image), you can set the <i>HiClip(%)</i> variable to a number less than 100 to boost the highlights.
</p>
<h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>
<p>In this example, the input image has too few highlights in the green channel. We can tell this from the image view of the input image and the histogram of its green channel. To boost the green highlights, we use the <i>imgColorlevel</i> X-Function.
</p>
<table class="TableGrid" style="border: none; x-border-left: 1px table-solid; x-border-top: 1px table-solid; x-border-right: 1px table-solid; x-border-bottom: 1px table-solid; border-collapse: separate; border-spacing: 0px; border-spacing: 0px" border="1">
<tr>
<td>
<p><a  class="image"><img alt="ImgColorlevel help English files image002.jpg" src="../images/ImgColorlevel/ImgColorlevel_help_English_files_image002.jpg?v=1027" width="261"  /></a>
</p>
</td>
<td>
<p><a  class="image"><img alt="ImgColorlevel help English files image004.gif" src="../images/ImgColorlevel/ImgColorlevel_help_English_files_image004.gif?v=1028" width="261"  /></a>
</p>
</td></tr>
<tr>
<td>
<center>Original image</center>
</td>
<td>
<center>Histogram of green channel in original image</center>
</td></tr></table>
<p><br />
Before using the X-function, we first decide a proper <i>HiClip(%)</i> to use. The histogram shows that there are very few pixels whose green levels are not less than 224. So we decide to remap the color levels that are not less than 224 to the max level (255). We compute the value of <i>HiClip(%)</i> as follows:
</p><p><a  class="image"><img alt="ImgColorlevel help English files image006.gif" src="../images/ImgColorlevel/ImgColorlevel_help_English_files_image006.gif?v=1029" width="240"  /></a>
</p><p>In other words, we decide to set <i>HiClip(%)</i> to 88.
</p><p>Then, we can use the <i>imgColorlevel</i> X-Function as follows:
</p>
<ol><li> Make the input image active. Then, we choose <b>Image: Adjustment: Color Level</b> from the Origin menu. This opens the dialog of the X-Function.</li>
<li> Select <b>Green</b> with the <b>Channel</b> drop-down list<b>.</b> Enter <b>88</b> in the <b>HiClip(%)</b> box. Click <b>OK</b> to close the dialog. Then the input image is replaced by the output image.</li></ol>
<p>We can see there are more green highlights now.
</p>
<table class="TableGrid" style="border: none; x-border-left: 1px table-solid; x-border-top: 1px table-solid; x-border-right: 1px table-solid; x-border-bottom: 1px table-solid; border-collapse: separate; border-spacing: 0px; border-spacing: 0px" border="1">
<tr>
<td>
<p><a  class="image"><img alt="ImgColorlevel help English files image008.jpg" src="../images/ImgColorlevel/ImgColorlevel_help_English_files_image008.jpg?v=1030" width="261"  /></a>
</p>
</td>
<td>
<p><a  class="image"><img alt="ImgColorlevel help English files image010.gif" src="../images/ImgColorlevel/ImgColorlevel_help_English_files_image010.gif?v=1031" width="261"  /></a>
</p>
</td></tr>
<tr>
<td>
<center>Output image</center>
</td>
<td>
<center>Histogram of green channel in output image</center>
</td></tr></table>
<p><br />
The leveling report:
</p><p><b><a  class="image"><img alt="ImgColorlevel help English files image012.jpg" src="../images/ImgColorlevel/ImgColorlevel_help_English_files_image012.jpg?v=1032" width="316"  /></a></b>
</p>
<h2><a name="Algorithm"></a><span class="mw-headline">Algorithm</span></h2>
<p>The computation uses L_ColorLevelBitmap() function from LEADTOOLS Main API. For more information, please refer to the LEADTOOLS Main API Help file, Version 14 and read the following topic: L_ColorLevelBitmap.
</p>
<h2><a name="References"></a><span class="mw-headline">References</span></h2>
<p>LEADTOOLS Main API Help file, Version 14
</p>
<h2><a name="Related_X-Functions"></a><span class="mw-headline">Related X-Functions</span></h2>
<p><a href="../../XFunction/X-Function/ImgLevel.html" title="X-Function:ImgLevel">imgLevel</a>, <a href="../../XFunction/X-Function/ImgAutoLevel.html" title="X-Function:ImgAutoLevel">imgAutoLevel</a>
</p>





