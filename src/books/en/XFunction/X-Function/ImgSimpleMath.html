<h1 class="firstHeading">2.6.3.7 imgSimpleMath(Pro)</h1><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Menu_Information"><span class="tocnumber">1</span> <span class="toctext">Menu Information</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Brief_Information"><span class="tocnumber">2</span> <span class="toctext">Brief Information</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Additional_Information"><span class="tocnumber">3</span> <span class="toctext">Additional Information</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Command_Line_Usage"><span class="tocnumber">4</span> <span class="toctext">Command Line Usage</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#X-Function_Execution_Options"><span class="tocnumber">5</span> <span class="toctext">X-Function Execution Options</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Variables"><span class="tocnumber">6</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Description"><span class="tocnumber">7</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Examples"><span class="tocnumber">8</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Algorithm"><span class="tocnumber">9</span> <span class="toctext">Algorithm</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#References"><span class="tocnumber">10</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Related_X-Functions"><span class="tocnumber">11</span> <span class="toctext">Related X-Functions</span></a></li>
</ul>
</div>

<h2><a name="Menu_Information"></a><span class="mw-headline">Menu Information</span></h2>
<p>Image: Arithmetic Transform: Simple Math
</p>
<h2><a name="Brief_Information"></a><span class="mw-headline">Brief Information</span></h2>
<p>Perform simple math operations between two images
</p>
<h2><a name="Additional_Information"></a><span class="mw-headline">Additional Information</span></h2>
<p>This feature is for OriginPro only.
</p>
<h2><a name="Command_Line_Usage"></a><span class="mw-headline">Command Line Usage</span></h2>
<pre>
1. imgSimpleMath img2:=[blue]1!mat(1); 
2. imgSimpleMath img1:=[mbook1]msheet1!mat(1)  img2:=[mbook2]msheet1!mat(1); 
3. imgSimpleMath c1:=green f1:=10 img2:= [mbook2]msheet1!mat(1) c2:=green f2:=2 func:=xor oimg:=result;
</pre>
<h2><a name="X-Function_Execution_Options"></a><span class="mw-headline">X-Function Execution Options</span></h2>
<p><a class="external text" href="../../LabTalk/LabTalk/X-Function_Execution_Options.html">Please refer to the page for additional option switches when accessing the x-function from script</a>
</p>
<h2><a name="Variables"></a><span class="mw-headline">Variables</span></h2>
<table class="xfvar">
<tr>
<th width="8%">Display<br />Name
</th>
<th width="8%">Variable<br />Name
</th>
<th width="8%">I/O<br />and<br />Type
</th>
<th width="8%">Default<br />Value
</th>
<th>Description
</th></tr>
<tr>
<td>Input Matrix
</td>
<td>img1
</td>
<td>
<p>Input
</p><p>Image
</p>
</td>
<td> <center>&lt;active&gt;</center>
</td>
<td>
<p>Specifies the first input image (Image1). The default input is the active image.
</p>
</td></tr>
<tr>
<td>Channel of Image1
</td>
<td>c1
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>master</center>
</td>
<td>
<p>Specifies the channel of Image1, on which the function will be operated. The default is all.
<br />
Option list
</p>
<ul><li><i>master:Master</i>
<dl><dd>All channels</dd></dl></li>
<li><i>red:Red</i>
<dl><dd>Red channel</dd></dl></li>
<li><i>green:Green</i>
<dl><dd>Green channel</dd></dl></li>
<li><i>blue:Blue</i>
<dl><dd>Blue channel</dd></dl></li></ul>
</td></tr>
<tr>
<td>Factor *Image1
</td>
<td>f1
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>1.0</center>
</td>
<td>
<p>Specifies a factor, by which image1 will be first multiplied before the math operation. The default factor is 1.0.
</p>
</td></tr>
<tr>
<td>Offset Z of Image1
</td>
<td>z1
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td>
<p>Specifies a constant, by which image1 will be added after it is multiplied the factor and before the math operation.
</p>
</td></tr>
<tr>
<td>Input Matrix
</td>
<td>img2
</td>
<td>
<p>Input
</p><p>Image
</p>
</td>
<td> <center>&lt;&gt;</center>
</td>
<td>
<p>Specifies the second input image (Image2), with which the first image will be combined.
</p>
</td></tr>
<tr>
<td>Channel of Image2
</td>
<td>c2
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>master</center>
</td>
<td>
<p>Specifies the channel of Image2, on which the function will be operated. The default is all.
<br />
Option list
</p>
<ul><li><i>master:Master</i>
<dl><dd>All channels</dd></dl></li>
<li><i>red:Red</i>
<dl><dd>Red channel</dd></dl></li>
<li><i>green:Green</i>
<dl><dd>Green channel</dd></dl></li>
<li><i>Blue</i>
<dl><dd>Blue channel</dd></dl></li></ul>
</td></tr>
<tr>
<td>Factor * Image2
</td>
<td>f2
</td>
<td>
<p>Input
</p><p>double
</p>
</td>
<td> <center>1.0</center>
</td>
<td>
<p>Specifies a factor, by which image2 will be first multiplied before the math operation. The default factor is 1.0.
</p>
</td></tr>
<tr>
<td>Math Function
</td>
<td>func
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>and</center>
</td>
<td>
<p>Specifies the math function used to combine two images.
<br />
Option list
</p>
<ul><li><i>and:And</i>
<dl><dd>Combines each pair of corresponding pixels, using a bitwise AND (&amp;) operation.</dd></dl></li>
<li><i>or:Or</i>
<dl><dd>Combines each pair of corresponding pixels, using a bitwise OR ( | ) operation.</dd></dl></li>
<li><i>xor:Xor</i>
<dl><dd>Combines each pair of corresponding pixels, using a bitwise exclusive OR (^) operation.</dd></dl></li>
<li><i>add:Add</i>
<dl><dd>Adds each pair of corresponding pixels.</dd></dl></li>
<li><i>sub12:img1 - img2</i>
<dl><dd>Subtracts image2 from image1.</dd></dl></li>
<li><i>sub21:img2 - img1</i>
<dl><dd>Subtracts image1 from image2.</dd></dl></li>
<li><i>mul:img2 * img1</i>
<dl><dd>Multiplies each pair of corresponding pixels. If the result exceeds the maximum value (2^bpp-1, where bpp is the bits per pixel), the result will be divided by the maximum value.</dd></dl></li>
<li><i>div12:img1/img2</i>
<dl><dd>Divides image1 by image2. If image2 &gt; 0, then the result is calculated as follows: result = min( (img1/ img2) * 255, 255 ). Otherwise, if image2 = 0, then result = 255.</dd></dl></li>
<li><i>div21:img2/img1</i>
<dl><dd>Divides image2 by image1. If image1 &gt; 0, then the result is calculated as follows: result = min( (img2/ img1) * 255, 255 ). Otherwise, if image1 = 0, then result = 255.</dd></dl></li>
<li><i>avg:avg (img2,img1)</i>
<dl><dd>Uses the average of the two values.</dd></dl></li>
<li><i>min:min(img2,img1)</i>
<dl><dd>Uses the lesser of the two values</dd></dl></li>
<li><i>max:max(img2,img1)</i>
<dl><dd>Uses the greater of the two values.</dd></dl></li>
<li><i>abs:abs(img2 - img1)</i>
<dl><dd>Calculates the absolute difference between the two values.</dd></dl></li></ul>
</td></tr>
<tr>
<td>Output Image
</td>
<td>oimg
</td>
<td>
<p>Output
</p><p>Image
</p>
</td>
<td> <center>&lt;new&gt;</center>
</td>
<td>
<p>Specifies the output image. By default, a new image will be created and used as output.
See the syntax <a class="external text" href="../../XFunction/X-Function/Output_Notations.html">here</a>.
</p>
</td></tr>
<tr>
<td>Offset X
</td>
<td>x
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td>
<p>Specifies the horizontal offset for Image2. A non-zero value will cause the relative position of two images to be changed.
</p>
</td></tr>
<tr>
<td>Offset Y
</td>
<td>y
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td>
<p>Specifies the vertical offset for Image2. A non-zero value will cause the relative position of two images to be changed.
</p>
</td></tr>
<tr>
<td>Crop to Common Area
</td>
<td>crop
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td>
<p>Specifies whether to crop the output to the common area of two input images.
</p>
</td></tr></table>
<h2><a name="Description"></a><span class="mw-headline">Description</span></h2>
<p>The <i>imgSimpleMath</i> function combines data from two images, using the specified mathematic function.
</p>
<h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>
<ul><li> Code Sample</li></ul>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// Subtract background from a cell image then detect the cell edges.</span>
<span style="color: #008000;">//Create a new folder in the Project Explorer</span>
pe_mkdir EdgeDetection path<span style="color: #000000;">:</span><span style="color: #000080;">=</span>aa<span style="color: #000080;">$</span>;
pe_cd aa<span style="color: #000080;">$</span>;
<span style="color: #008000;">//Create a matrix and import the cell image into it</span>
window <span style="color: #000080;">-</span>t m;
fname<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> System.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span><span style="color: #ff00ff;">&quot;samples\Image Processing and Analysis\cell.jpg&quot;</span>;
impimage;
CellBk<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> <span style="color: #000080;">%</span>h;
<span style="color: #008000;">//Create a matrix and import the background image into it</span>
window <span style="color: #000080;">-</span>t m;
fname<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> System.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span><span style="color: #ff00ff;">&quot;samples\Image Processing and Analysis\bgnd.jpg&quot;</span>;
impimage;

<span style="color: #008000;">//Subtract background and pre-processing</span>
imgSimpleMath img2<span style="color: #000000;">:</span><span style="color: #000080;">=</span>cellbk<span style="color: #000080;">$</span> func<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">4</span> x<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">7</span> y<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">13</span> crop<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;
imgBinary t1<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">65</span> t2<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">255</span>;
imgMedian d<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">18</span>;
<span style="color: #008000;">//Edge detection</span>
imgEdge t<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">12</span> f<span style="color: #000000;">:</span><span style="color: #000080;">=</span>shv;
<span style="color: #008000;">//Add the edges back to the cell image</span>
imgSimpleMath img2<span style="color: #000000;">:</span><span style="color: #000080;">=</span>cellbk<span style="color: #000080;">$</span> func<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>;

window <span style="color: #000080;">-</span>z; <span style="color: #008000;">//Maximize window</span></pre>
<h2><a name="Algorithm"></a><span class="mw-headline">Algorithm</span></h2>
<p>The <i>imgSimpleMath</i> function combines the data byte-by-byte using specified math function. The computation mainly uses L_CombineBitmapExt() function from LEADTOOLS Main API. Please refer to the LEADTOOLS Main API Help file, Version 14 and read the L_CombineBitmapExt topic.
</p>
<h2><a name="References"></a><span class="mw-headline">References</span></h2>
<p>LEADTOOLS Main API Help file, Version 14
</p>
<h2><a name="Related_X-Functions"></a><span class="mw-headline">Related X-Functions</span></h2>
<p><a href="../../XFunction/X-Function/ImgBlend.html" title="X-Function:ImgBlend">imgBlend</a>
</p>





