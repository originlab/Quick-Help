<h1 class="firstHeading">2.4.13 nlbegin</h1><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Brief_Information"><span class="tocnumber">1</span> <span class="toctext">Brief Information</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Additional_Information"><span class="tocnumber">2</span> <span class="toctext">Additional Information</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Command_Line_Usage"><span class="tocnumber">3</span> <span class="toctext">Command Line Usage</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#X-Function_Execution_Options"><span class="tocnumber">4</span> <span class="toctext">X-Function Execution Options</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Variables"><span class="tocnumber">5</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Description"><span class="tocnumber">6</span> <span class="toctext">Description</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Details_of_the_nltree_TreeNode"><span class="tocnumber">6.1</span> <span class="toctext"><b>Details of the nltree TreeNode</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Example"><span class="tocnumber">7</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Related_X-Functions"><span class="tocnumber">8</span> <span class="toctext">Related X-Functions</span></a></li>
</ul>
</div>

<h2><a name="Brief_Information"></a><span class="mw-headline">Brief Information</span></h2>
<p>Start a nonlinear curve fitting session for XY data
</p>
<h2><a name="Additional_Information"></a><span class="mw-headline">Additional Information</span></h2>
<p>X-Function not designed for Auto GetN Dialog.
</p><p>This feature is updated in 8.0 SR5. For more details, please refer to <a class="external text" href="http://www.originlab.com/doc/ReleaseNotes" target="_blank">Release Notes</a>.
</p>
<h2><a name="Command_Line_Usage"></a><span class="mw-headline">Command Line Usage</span></h2>
<p><code>
</p><p>nlbegin iy:=1 func:=gauss nltree:=tt; // initialize fitting the active plot using gauss model
</p><p>nlbegin iy:=(1,2) func:=expgrow1 nltree:=tt;// initialize expgrow1 model to fit data with column 1 as X and column 2 as Y
</p><p></code>
</p>
<h2><a name="X-Function_Execution_Options"></a><span class="mw-headline">X-Function Execution Options</span></h2>
<p><a class="external text" href="../../LabTalk/LabTalk/X-Function_Execution_Options.html">Please refer to the page for additional option switches when accessing the x-function from script</a>
</p>
<h2><a name="Variables"></a><span class="mw-headline">Variables</span></h2>
<table class="xfvar">
<tr>
<th width="8%">Display<br />Name
</th>
<th width="8%">Variable<br />Name
</th>
<th width="8%">I/O<br />and<br />Type
</th>
<th width="8%">Default<br />Value
</th>
<th>Description
</th></tr>
<tr>
<td>Input
</td>
<td>iy
</td>
<td>
<p>Input
</p><p>XYRange
</p>
</td>
<td> <center>&lt;active&gt;</center>
</td>
<td> Specify the data to be fitted
</td></tr>
<tr>
<td>Fitting Function Name
</td>
<td>func
</td>
<td>
<p>Input
</p><p>string
</p>
</td>
<td> <center>&lt;unassigned&gt;</center>
</td>
<td> Specify the fitting function used to fit data
</td></tr>
<tr>
<td>
</td>
<td>nltree
</td>
<td>
<p>Input/Output
</p><p>TreeNode
</p>
</td>
<td> <center>nlt</center>
</td>
<td> The tree that contains the information of fitting such as parameter values, standard error, etc.
</td></tr>
<tr>
<td>Fitting Mode
</td>
<td>mode
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>auto</center>
</td>
<td> Specify the method to treat the input data for fitting.
<p>Option list:
</p>
<ul><li><i>auto:Auto</i></li></ul>
<dl><dd>Origin automatically chooses a data mode.</dd></dl>
<ul><li><i>concat:Concatenate Fit</i></li></ul>
<dl><dd>All input datasets are concatenated and fitted as one curve.</dd></dl>
<ul><li><i>global:Global Fit</i></li></ul>
<dl><dd>All datasets are fitted globally.  This mode should be used when you want to fit one model to multiple datasets with shared parameters.</dd></dl>
<ul><li><i>cons:Independent Fit - Consolidated Report</i></li></ul>
<dl><dd>All datasets are fitted independently with the results output to a consolidated report.  This mode should be used when you want to fit one model to multiple datasets without shared parameters and create a consolidated report.</dd></dl>
</td></tr>
<tr>
<td>Number of Replicas
</td>
<td>replica
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td> Specify the number of replicas. It is used to fit multiple peaks data by replicating the function for each peak. If the function you have selected does not support replicas, this is not available.
</td></tr>
<tr>
<td>Dialog Theme
</td>
<td>theme
</td>
<td>
<p>Input
</p><p>string
</p>
</td>
<td> <center>&lt;optional&gt;</center>
</td>
<td> Specify a theme. The settings saved in it will be loaded to customize the fitting.
</td></tr>
<tr>
<td>Notation of Parameters
</td>
<td>pnotation
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>para</center>
</td>
<td> Specify the notation of parameters in the output tree.
<p>Option list:
</p>
<ul><li><i>para:ParaName</i></li></ul>
<dl><dd>Use the parameter names as notation.</dd></dl>
<ul><li><i>abbr:Abbreviation</i></li></ul>
<dl><dd>Use the abbreviations of the parameters as notation.</dd></dl>
<ul><li><i>both:Both</i></li></ul>
<dl><dd>Use both names and abbreviations of the parameters as notation.</dd></dl>
</td></tr>
<tr>
<td>Parameter Initialization
</td>
<td>init
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>auto</center>
</td>
<td> Specify the status of parameter initialization.
<p>Option list:
</p>
<ul><li><i>auto:Auto</i></li></ul>
<dl><dd>Origin automatically decides whether to enable parameter initialization according to the FDF file of the fitting function.</dd></dl>
<ul><li><i>enable:Enable</i></li></ul>
<dl><dd>Enable parameter initialization.</dd></dl>
<ul><li><i>disable:Disable</i></li></ul>
<dl><dd>Disable parameter initialization.</dd></dl>
</td></tr>
<tr>
<td>Weight Method
</td>
<td>weight
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>-1</center>
</td>
<td> Specify the global weight method.
<p>Option list:
</p>
<ul><li>-1=<i>auto</i>
<dl><dd>Weight is Instrumental if error data are co-selected.</dd></dl></li>
<li>0=<i>none: No Weights</i>
<dl><dd>No weight is used.</dd></dl></li>
<li>1=<i>ins:Instrumental</i> (=1/ei^2)
<dl><dd>Use instrumental weight method.</dd></dl></li>
<li>2=<i>stat:Statistical</i> (=1/yi)
<dl><dd>Use statistical weight method.</dd></dl></li></ul>
</td></tr>
<tr>
<td>How to Initialize the NLFit Object
</td>
<td>option
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td> Specify how to initialize the NLFit Object.
<p>Option list:
</p>
<ul><li><i>init_all:Init All Parameters</i>
<dl><dd>Initialize all parameters and then do the fitting with these parameters.</dd></dl></li>
<li><i>change_data:Only Change Data</i>
<dl><dd>Keep the former settings and only change dataset, then do the fitting to the new dataset. </dd></dl></li></ul>
</td></tr></table>
<h2><a name="Description"></a><span class="mw-headline">Description</span></h2>
<p>Start a nonlinear fitting session, including option settings and parameter initialization. 
</p><p>The <b>nltree</b> is a TreeNode variable, which can control many fitting settings and allows you to read fitting results such as the parameter values, standard error, etc. The following tables list the most common objects in <b>nltree</b>. 
</p>
<h3><a name="Details_of_the_nltree_TreeNode"></a><span class="mw-headline"><b>Details of the nltree TreeNode</b></span></h3>
<table class="simple">
<tr>
<th> Object Name
</th>
<th> Description
</th>
<th> Access Privilege
</th>
<th> Output to Report Worksheet
</th></tr>
<tr>
<td> nltree.p<i>n</i>
</td>
<td> The value of the nth parameter (Derived Parameters excluded)
</td>
<td> Read/Write
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.f<i>n</i>
</td>
<td> Set the nth parameter to be Fixed (1) or allow to vary (0)
</td>
<td> Read/Write
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.sm
</td>
<td> shared parameter. m is the number of parameters (Derived Parameters excluded).
</td>
<td> Read/Write
</td>
<td> <font color="magenta">No</font>
</td></tr>
<tr>
<td> nltree.e<i>n</i>
</td>
<td> The standard error of the nth parameter
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.u<i>n</i>
</td>
<td> Upper confidence limit. Accessible when it is calculated by theme.
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.l<i>n</i>
</td>
<td> Lower confidence limit, Accessible when it is calculated by theme.
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.ub<i>n</i>
</td>
<td> Upper Bounds Value
</td>
<td> Read/Write
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.lb<i>n</i>
</td>
<td> Lower Bounds Value
</td>
<td> Read/Write
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.ubon<i>n</i>
</td>
<td> Enable (1) or Disable (0) use of <b>nltree.ubn</b>
</td>
<td> Read/Write
</td>
<td> <font color="magenta">No</font>
</td></tr>
<tr>
<td> nltree.lbon<i>n</i>
</td>
<td> Enable (1) or Disable (0) use of <b>nltree.lbn</b>.
</td>
<td> Read/Write
</td>
<td> <font color="magenta">No</font>
</td></tr>
<tr>
<td> nltree.ubx<i>n</i>
</td>
<td> The relation between the parameter and the upper bound value. 0 corresponds to "&lt;=", non-zero value corresponds to "&lt;".
</td>
<td> Read/Write
</td>
<td> <font color="magenta">No</font>
</td></tr>
<tr>
<td> nltree.lbx<i>n</i>
</td>
<td> The relation between the lower bound value and the parameter. 0 corresponds to "&lt;=", non-zero value corresponds to "&lt;".
</td>
<td> Read/Write
</td>
<td> <font color="magenta">No</font>
</td></tr>
<tr>
<td> nltree.d<i>n</i>
</td>
<td> Calculated dependency for the parameter
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.n<i>n</i>$, nltree.names<i>n</i>$
</td>
<td> This is a string vector. It contains the formal names of all the parameters (derived parameters are excluded).
</td>
<td> Read
</td>
<td> Yes
</td></tr></table>
<p>This table lists properties that are independent of parameters. Many of these properties do not appear in the tree until at least one fit iteration has occurred.
</p>
<table class="simple">
<tr>
<th> Object Name
</th>
<th> Description
</th>
<th> Access Privilege
</th>
<th> Output to Report Worksheet
</th></tr>
<tr>
<td> nltree.adjr<i>n</i>
</td>
<td> Adjust R-Square value
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.chisqr<i>n</i>
</td>
<td> Chi-Square value
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.c<i>n</i>
</td>
<td> Confidence interval of the nth parameter. Currently not supported
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.cod<i>n</i>
</td>
<td> R-Square (COD)
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.confC
</td>
<td> Confidence Level for Curves (%)
</td>
<td> Read/Write
</td>
<td> No
</td></tr>
<tr>
<td> nltree.confP
</td>
<td> Confidence Level for Parameters (%)
</td>
<td> Read/Write
</td>
<td> No
</td></tr>
<tr>
<td> nltree.constr$
</td>
<td> Linear constraints to the fitting process
</td>
<td> Read/Write
</td>
<td> No
</td></tr>
<tr>
<td> nltree.constraints
</td>
<td> Enable/disable the linear constraints
</td>
<td> Read/Write
</td>
<td> No
</td></tr>
<tr>
<td> nltree.cor<i>n</i>, nltree.r<i>n</i>
</td>
<td> R value (correlation coefficient)
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.corr<i>n</i>
</td>
<td> Correlation matrix (<font color="red">Origin 8.1 SR2</font>)
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.covar<i>n</i>
</td>
<td> Covariance matrix (<font color="red">Origin 8.1 SR2</font>)
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.data<i>n</i>.wdata1$
</td>
<td> Range of weight data
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.data<i>n</i>.wmethod1$
</td>
<td> Weight type for each dataset
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.data<i>n</i>.x1$
</td>
<td> Range of X. Accessible when getting results from getnlr X-Function.
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.data<i>n</i>.y1$
</td>
<td> Range of Y. Accessible when getting results from getnlr X-Function.
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.dof<i>n</i>
</td>
<td> Degree of freedom
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.dp<i>n</i>
</td>
<td> The value of the nth derived parameter
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.fitstatus<i>n</i>$
</td>
<td> Fit status
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.func$
</td>
<td> Fitting function name
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.maxIter
</td>
<td> Maximum number of iterations
</td>
<td> Read/Write
</td>
<td> No
</td></tr>
<tr>
<td> nltree.ndp<i>n</i>$
</td>
<td> This is a string vector. It contains the names of derived parameters.
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.niter
</td>
<td> Number of iterations
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.prob<i>n</i>
</td>
<td> P value. Currently not supported
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.pts<i>n</i>
</td>
<td> Number of points that are actually used in the fitting
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.rmse
</td>
<td> Root mean square of the error or the Standard Deviation of the model
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.ssr<i>n</i>
</td>
<td> Residual sum of square
</td>
<td> Read
</td>
<td> Yes
</td></tr>
<tr>
<td> nltree.tolerance
</td>
<td> The tolerance value to control fitting processing
</td>
<td> Read/Write
</td>
<td> No
</td></tr>
<tr>
<td> nltree.t<i>n</i>
</td>
<td> t-Test value for the nth parameter. Currently not supported
</td>
<td> Read
</td>
<td> Yes
</td></tr></table>
<p>Please note that when you use the objects like *.pn, *.lbn, etc., there are two ways to access the fitting parameters. One way uses the order of the parameter to access it. Another way uses the name of the parameter. For example, when two datasets are fitted with the Gauss function, there will be 8 fitting parameters: y0, xc, w, A are the parameter names for the first dataset; y0_2, xc_2, w_2, A_2 are the parameters for the second dataset. If <b>tt</b> is the <b>nltree</b> variable, both tt.p5 and tt.y0_2 will point to the parameter y0_2 of the second dataset.
</p><p>*.covarn and *.corrn are used to access the covariance matrix and correlation matrix from the report of fitting results. The two parameters exist in the <b>nltree</b> only when fitting results contain the covariance matrix and correlation matrix in the report. Hence it's necessary to use the script
</p>
<pre class="lt" style="font-family:monospace;">nlend <span style="color: #0000dd;">1</span>;</pre>
<p>to output the report. Following script can be used to access the cell of the covariance matrix.
</p>
<pre class="lt" style="font-family:monospace;">tt.<span style="color: #000080;">covar1</span><span style="color: #000000;">&#91;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#93;</span><span style="color: #000080;">=</span>;  <span style="color: #008000;">//Cell of first row and second column in the covariance matrix</span></pre>
<h2><a name="Example"></a><span class="mw-headline">Example</span></h2>
<p>1. Here is an example that fits the first plot in the active layer using ExpGrow1 function.
</p><p>We fix the x0 and y0 values in the fitting for the first 3 iterations. The fitted data are put in the 3rd column.
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\Exponential Growth.dat&quot;</span>; <span style="color: #008000;">// prepare data</span>
newbook;
impasc;
wks.<span style="color: #000080;">addcol</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
string strData<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#40;</span><span style="color: #000080;">%</span>H,<span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>wks.<span style="color: #000080;">ncols</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #008000;">// Remember the name of the added column</span>
range fitx<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>, fity<span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>;
plotxy <span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#41;</span>;
nlbegin <span style="color: #0000dd;">1</span> ExpGrow1 tt;      <span style="color: #008000;">// initialize fitting session for the first plot using ExpGrow1 function</span>
tt.<span style="color: #000080;">x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;          <span style="color: #008000;">// first fix the x0 value at that initial date</span>
tt.<span style="color: #000080;">y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;          <span style="color: #008000;">// also fix y0 </span>
tt.<span style="color: #000080;">A1</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;
nlfit <span style="color: #0000dd;">3</span>;                    <span style="color: #008000;">// do only 3 iterations</span>
tt.<span style="color: #000080;">f_x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;        <span style="color: #008000;">// then relax the x0 and y0 to fit with default max iterations</span>
nlfit;
fity<span style="color: #000080;">=</span>fit<span style="color: #000000;">&#40;</span>fitx<span style="color: #000000;">&#41;</span>;             <span style="color: #008000;">// now we can generate the fit curve</span>
nlend;                      <span style="color: #008000;">// all don</span>
layer <span style="color: #000080;">-</span>i <span style="color: #000080;">%</span><span style="color: #000000;">&#40;</span>strData<span style="color: #000080;">$</span><span style="color: #000000;">&#41;</span>;       <span style="color: #008000;">// Include the fit in the plot</span>
set <span style="color: #000080;">%</span><span style="color: #000000;">&#40;</span>strData<span style="color: #000080;">$</span><span style="color: #000000;">&#41;</span> <span style="color: #000080;">-</span>c <span style="color: #0000dd;">2</span>;       <span style="color: #008000;">// Set its color to red</span></pre>
<p>2. Here is an example that uses nlbegin to initialze the fitting session, then uses nlpara to open a parameters dialog to edit the initial values and bounds setting etc. 
</p><p>Finally, nlfit is used to continue the fitting.
</p>
<pre class="lt" style="font-family:monospace;">nlbegin iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> func<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Gauss;	<span style="color: #008000;">// make sure col(1)&amp;col(2) contain data</span>
nlpara;		                <span style="color: #008000;">// this will open a dialog to monitor parameter values</span>

<span style="color: #008000;">// continue to run following scripts to finish the fitting</span>
nlfit;
nlend <span style="color: #0000dd;">1</span>;</pre>
<p>3. Here is an example that resets the fitting function by using nlfn if user finds that the function is not suitable to the data.
</p>
<pre>
nlbegin iy:=2 func:=Gauss;	// make sure col(1)&amp;col(2) contain data
nlfn Lorentz;
nlfit;
nlend 1 1;			// output fitting report with autoupdate
</pre>
<p><br />
4. Here is an example that fits a multiple peaks data by setting replica.
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\Multiple Peaks.dat&quot;</span>; <span style="color: #008000;">// prepare data</span>
newbook;
impasc;
nlbegin <span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#41;</span> Gauss tt replica<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>;
nlfit;
nlend <span style="color: #0000dd;">1</span>;</pre>
<p>5. Here is an example that performs weighted fitting.
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\gaussian.dat&quot;</span>; <span style="color: #008000;">// prepare data</span>
newbook;
impasc;
nlbegin <span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span>,<span style="color: #0000dd;">3</span><span style="color: #000000;">&#41;</span> Gauss tt weight<span style="color: #000000;">:</span><span style="color: #000080;">=</span>ins;	<span style="color: #008000;">//Set col(3) as weight data and instrumental as weight method </span>
nlfit;
nlend <span style="color: #0000dd;">1</span>;</pre>
<p>6. Here is an example that accesses the covariance matrix and correlation matrix from the report of fitting results.
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\Gaussian.dat&quot;</span>;
newbook;
impasc;
nlbegin iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#41;</span> func<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Gauss nltree<span style="color: #000000;">:</span><span style="color: #000080;">=</span>tt;
<span style="color: #008000;">// Output the Correlation and Covariance matrix</span>
nlgui gg <span style="color: #0000dd;">1</span>;
gg.<span style="color: #000080;">Quantities</span>.<span style="color: #000080;">mCov</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span>;
gg.<span style="color: #000080;">Quantities</span>.<span style="color: #000080;">mCor</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span>;
nlgui gg <span style="color: #0000dd;">0</span>;
nlfit;
nlend <span style="color: #0000dd;">1</span>;
tt.<span style="color: #000080;">covar1</span><span style="color: #000000;">&#91;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#93;</span><span style="color: #000080;">=</span>;
tt.<span style="color: #000080;">corr1</span><span style="color: #000000;">&#91;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#93;</span><span style="color: #000080;">=</span>;</pre>
<p>7. In this example, the script should be executed as a whole. During execution, the NLFit Parameter dialog opens, giving the opportunity to edit settings. When you click <b>OK</b> to close the dialog box, the next script line (nlend 1 1;) is executed automatically:
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\Exponential Growth.dat&quot;</span>; <span style="color: #008000;">// prepare data</span>
newbook;
impasc;
wks.<span style="color: #000080;">addcol</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
string strData<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#40;</span><span style="color: #000080;">%</span>H,<span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>wks.<span style="color: #000080;">ncols</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #008000;">// Remember the name of the added column</span>
range fitx<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>, fity<span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>;
plotxy <span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#41;</span>;
nlbegin <span style="color: #0000dd;">1</span> ExpGrow1 tt;      <span style="color: #008000;">// initialize fitting session for the first plot using ExpGrow1 function</span>
tt.<span style="color: #000080;">x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;          <span style="color: #008000;">// first fix the x0 value at that initial date</span>
tt.<span style="color: #000080;">y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;          <span style="color: #008000;">// also fix y0 </span>
tt.<span style="color: #000080;">A1</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;
nlpara <span style="color: #0000dd;">1</span>;         <span style="color: #008000;">//dialog open and could do some settings</span>
<span style="color: #008000;">//Execute the next line automatically when we click “OK” on the dialog.</span>
nlend <span style="color: #0000dd;">1</span> <span style="color: #0000dd;">1</span>;</pre>
<h2><a name="Related_X-Functions"></a><span class="mw-headline">Related X-Functions</span></h2>
<p><a href="../../XFunction/X-Function/Nlfit.html" title="X-Function:Nlfit">nlfit</a>, <a href="../../XFunction/X-Function/Nlend.html" title="X-Function:Nlend">nlend</a>, <a href="../../XFunction/X-Function/Nlgui.html" title="X-Function:Nlgui">nlgui</a>, <a href="../../XFunction/X-Function/Nlpara.html" title="X-Function:Nlpara">nlpara</a>, <a href="../../XFunction/X-Function/Nlfn.html" title="X-Function:Nlfn">nlfn</a>, <a href="../../XFunction/X-Function/Nlbeginr.html" title="X-Function:Nlbeginr">nlbeginr</a>, <a href="../../XFunction/X-Function/Nlbeginz.html" title="X-Function:Nlbeginz">nlbeginz</a>, <a href="../../XFunction/X-Function/Nlbeginm.html" title="X-Function:Nlbeginm">nlbeginm</a>, <a href="../../XFunction/X-Function/Nlbegino.html" title="X-Function:Nlbegino">nlbegino</a>
</p>
<hr class='keywordshr'><p><span class='keywords'>Keywords:</span><span class='keywordsInput'>regression, NLFit</span></p>






