<h1 class="firstHeading">2.6.6.1 imgAverage</h1><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Menu_Information"><span class="tocnumber">1</span> <span class="toctext">Menu Information</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Brief_Information"><span class="tocnumber">2</span> <span class="toctext">Brief Information</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Command_Line_Usage"><span class="tocnumber">3</span> <span class="toctext">Command Line Usage</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#X-Function_Execution_Options"><span class="tocnumber">4</span> <span class="toctext">X-Function Execution Options</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Variables"><span class="tocnumber">5</span> <span class="toctext">Variables</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Description"><span class="tocnumber">6</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Examples"><span class="tocnumber">7</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Algorithm"><span class="tocnumber">8</span> <span class="toctext">Algorithm</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#References"><span class="tocnumber">9</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Related_X-Functions"><span class="tocnumber">10</span> <span class="toctext">Related X-Functions</span></a></li>
</ul>
</div>

<h2><a name="Menu_Information"></a><span class="mw-headline">Menu Information</span></h2>
<p>Average
</p>
<h2><a name="Brief_Information"></a><span class="mw-headline">Brief Information</span></h2>
<p>Apply average filter to image
</p>
<h2><a name="Command_Line_Usage"></a><span class="mw-headline">Command Line Usage</span></h2>
<p><code>
</p><p>1. imgAverage d:=20; 
</p><p>2. imgAverage d:=2 img:=mat(1) oimg:=mat(2);
</p><p></code>
</p>
<h2><a name="X-Function_Execution_Options"></a><span class="mw-headline">X-Function Execution Options</span></h2>
<p><a class="external text" href="../../LabTalk/LabTalk/X-Function_Execution_Options.html">Please refer to the page for additional option switches when accessing the x-function from script</a>
</p>
<h2><a name="Variables"></a><span class="mw-headline">Variables</span></h2>
<table class="xfvar">
<tr>
<th width="8%">Display<br />Name
</th>
<th width="8%">Variable<br />Name
</th>
<th width="8%">I/O<br />and<br />Type
</th>
<th width="8%">Default<br />Value
</th>
<th>Description
</th></tr>
<tr>
<td>Dimension
</td>
<td>d
</td>
<td>
<p>Input
</p><p>int
</p>
</td>
<td> <center>2</center>
</td>
<td>
<p>Specifies the size of the averaging neighborhood, which is a square. This variable is the length, in pixels, of one side of the square.
</p>
</td></tr>
<tr>
<td>Input Matrix
</td>
<td>img
</td>
<td>
<p>Input
</p><p>Image
</p>
</td>
<td> <center>&lt;active&gt;</center>
</td>
<td>
<p>Specifies the image to be manipulated. The default input is the active image.
</p>
</td></tr>
<tr>
<td>Output Image
</td>
<td>oimg
</td>
<td>
<p>Output
</p><p>Image
</p>
</td>
<td> <center>&lt;input&gt;</center>
</td>
<td>
<p>Specifies the output image. By default, the output image is the same as the input image.
</p><p>See the syntax <a class="external text" href="../../XFunction/X-Function/Output_Notations.html">here</a>.
</p>
</td></tr></table>
<h2><a name="Description"></a><span class="mw-headline">Description</span></h2>
<p>This function applies average filter to the input image so the color of each pixel is replaced by the average color of pixels in its neighborhood. This results in a blurring effect.
</p><p>The user can control the amount of blur by specifying the size of the neighborhood that will be used in the averaging. Generally, the larger the size, the greater the blurring will be.
</p><p>Successive use of the same command will further blur the image, as the image averaging now applies to the latest version of the image being averaged.
</p>
<h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>
<p>In this example, we use the <i>imgAverage</i> function to blur the input image:
</p>
<ol><li> When the image is active, select <b>Image: Spatial Filters: average</b> to open the dialog of the X-Function.</li>
<li> In the dialog, change the settings as the screenshot below and click <b>OK</b> to close the dialog.<br /><a  class="image"><img alt="ImgAverage help English files image002.jpg" src="../images/ImgAverage/ImgAverage_help_English_files_image002.jpg?v=1006" width="323"  /></a><br /> A new image is created. It is the filtered image.</li></ol>
<dl><dd><table class="TableGrid" style="; border: none; x-border-left: 1px table-solid; x-border-top: 1px table-solid; x-border-right: 1px table-solid; x-border-bottom: 1px table-solid; border-collapse: separate; border-spacing: 0px;background: #EFEFEF" border="1">
<tr>
<td>
<dl><dd><a  class="image"><img alt="ImgAverage help English files image004.jpg" src="../images/ImgAverage/ImgAverage_help_English_files_image004.jpg?v=1007" width="261"  /></a></dd></dl>
</td>
<td>
<dl><dd><a  class="image"><img alt="ImgAverage help English files image006.jpg" src="../images/ImgAverage/ImgAverage_help_English_files_image006.jpg?v=1008" width="262"  /></a></dd></dl>
</td></tr>
<tr>
<td>
<center>The original image</center>
</td>
<td>
<center>The output image</center>
</td></tr></table></dd></dl>
<p><br />
</p>
<h2><a name="Algorithm"></a><span class="mw-headline">Algorithm</span></h2>
<p>This is an easy to implement method of <i>color-averaging</i> images that can be described by the equation:
</p>
<dl><dd><a  class="image"><img alt="MeanFilter.png" src="../images/ImgAverage/MeanFilter.png?v=5299" width="260"  /></a></dd></dl>
<p>where:
</p><p><i>O(x, y)</i> = the output image,
</p><p><i>I(x, y)</i> = the input image, and
</p><p><i>d</i> = the dimension specified by the user
</p><p>For example, we need to average an image with a 3x3 window (d =3). Pixels of image section under the window we specified are shown below:
</p>
<dl><dd><dl><dd><dl><dd><a  class="image"><img alt="ImageMatrix.png" src="../images/ImgAverage/ImageMatrix.png?v=5301" width="260"  /></a></dd></dl></dd></dl></dd></dl>
<p>According to the algorithm above, the result value of center pixel in the window is
</p>
<dl><dd><a  class="image"><img alt="AvarageOutput.png" src="../images/ImgAverage/AvarageOutput.png?v=5302" width="378"  /></a></dd></dl>
<p>Where I(x,y) is the original value of the pixel which is in x row, y column of the Matrix.
</p><p>The computation in Origin is implemented with the L_AverageFilterBitmap() function from LEADTOOLS Main API. Please refer to the LEADTOOLS Main API Help file, Version 14 and read the L_AverageFilterBitmap topic.
</p>
<h2><a name="References"></a><span class="mw-headline">References</span></h2>
<p>LEADTOOLS Main API Help file, Version 14
</p>
<h2><a name="Related_X-Functions"></a><span class="mw-headline">Related X-Functions</span></h2>
<p><a href="../../XFunction/X-Function/ImgGaussian.html" title="X-Function:ImgGaussian">imgGaussian</a>, <a href="../../XFunction/X-Function/ImgMedian.html" title="X-Function:ImgMedian">imgMedian</a>
</p>





