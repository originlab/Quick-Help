<h1 class="firstHeading">3.3.2.1 Average</h1><p class='urlname' style='display: none'>Average-cmd</p>
<p>Operates on the given dataset to find a running average.  <b>This command alters the dataset on which it operates.</b> To find averages for a dataset without altering the original data, use the ave() function.
</p>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Average_(command)/Tip_icon.png?v=0" width="57"  border="0" /></td><td><p>Please see the <a class="external text" href="../../XFunction/X-Function/Averagexy.html"><b>averagexy</b></a>, <a class="external text" href="../../XFunction/X-Function/Avecurves.html"><b>avecurves</b></a> X-Function.
</p></td></tr></table>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Syntax:"><span class="tocnumber">1</span> <span class="toctext">Syntax:</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Note_on_.5Brange.5D:"><span class="tocnumber">2</span> <span class="toctext">Note on [range]:</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Options:"><span class="tocnumber">3</span> <span class="toctext">Options:</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#no_option.3B_Average_neighboring_values"><span class="tocnumber">3.1</span> <span class="toctext">no option; Average neighboring values</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#-l.3B_Limit_data_points_by_the_average_of_the_first_and_last_two_points"><span class="tocnumber">3.2</span> <span class="toctext">-l; Limit data points by the average of the first and last two points</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#-n.3B_Average_2N_neighboring_values"><span class="tocnumber">3.3</span> <span class="toctext">-n; Average 2N neighboring values</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Examples:"><span class="tocnumber">4</span> <span class="toctext">Examples:</span></a></li>
</ul>
</div>

<h2><a name="Syntax:"></a><span class="mw-headline"><font color="chocolate">Syntax:</font></span></h2>
<p>average <i>[option] dataset [range]</i>
</p>
<h2><a name="Note_on_.5Brange.5D:"></a><span class="mw-headline"><font color="chocolate">Note on [range]:</font></span></h2>
<p>[range] appears in the command syntax line of commands that take a dataset as an argument.  It indicates that the range modification options can be used to set the active range of the dataset.  The command affects only the active range of the dataset.  
</p><p>There are three range modification options:  -b, -e, and -t.  They offer two methods of implementation:
</p><p>Set the beginning and final index numbers of the active range:
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #000080;">-</span>b  firstPoint  <span style="color: #000080;">-</span>e  endPoint</pre>
<p>Set the total number of points in the active range, beginning at <i>firstPoint:</i>
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #000080;">-</span>b firstPoint <span style="color: #000080;">-</span>t totalPoints</pre>
<h2><a name="Options:"></a><span class="mw-headline"><font color="chocolate">Options:</font></span></h2>
<h3><a name="no_option.3B_Average_neighboring_values"></a><span class="mw-headline">no option; Average neighboring values</span></h3>
<p><b>Syntax</b>: average <i>string</i>
</p><p>Each value is the average of three values, the averaged value and its two neighboring values.
</p>
<pre class="lt" style="font-family:monospace;">range bb <span style="color: #000080;">=</span> <span style="color: #000000;">&#91;</span>Book1<span style="color: #000000;">&#93;</span>Sheet1<span style="color: #000080;">!</span><span style="color: #0000dd;">1</span>;
ave bb;</pre>
<h3><a name="-l.3B_Limit_data_points_by_the_average_of_the_first_and_last_two_points"></a><span class="mw-headline">-l; Limit data points by the average of the first and last two points</span></h3>
<p><b>Syntax</b>: average <b>-l</b> <i>dataset</i> [<i>range</i>]
</p><p>Find the average of the first two points in <i>dataset</i> and last two points in <i>dataset</i>.If the intervening points (third point through the n-2 point) fall outside the range defined by these two average values, then replace the intervening points with the closer of these two averages.  
If an intervening point does not fall outside the range defined by these two averages, then leave the value unchanged (see the Examples, below).
</p>
<h3><a name="-n.3B_Average_2N_neighboring_values"></a><span class="mw-headline">-n; Average 2N neighboring values</span></h3>
<p><b>Syntax</b>: average <b>-n</b> <i>N</i> <i>dataset</i> [<i>range</i>]
</p><p>Each value is the average of <i>N</i> points before, <i>N</i> points after and itself.<br />
So, <code>ave -n 1 Col(B)</code> is equivalent to <code>ave Col(B)</code>.
</p>
<pre class="lt" style="font-family:monospace;">range aa <span style="color: #000080;">=</span> <span style="color: #000000;">&#91;</span>Book1<span style="color: #000000;">&#93;</span>Sheet1<span style="color: #000080;">!</span><span style="color: #0000dd;">2</span>;
ave <span style="color: #000080;">-</span>n <span style="color: #0000dd;">2</span> aa;</pre>
<h2><a name="Examples:"></a><span class="mw-headline"><font color="chocolate">Examples:</font></span></h2>
<p>The following script uses the six neighboring values plus itself (2*3+1) to find the average for each value in col(B).
</p>
<pre class="lt" style="font-family:monospace;">range aa <span style="color: #000080;">=</span> <span style="color: #000000;">&#91;</span>Book1<span style="color: #000000;">&#93;</span>Sheet1<span style="color: #000080;">!</span><span style="color: #0000dd;">2</span>;
ave <span style="color: #000080;">-</span>n <span style="color: #0000dd;">3</span> aa;</pre>
<p>The next script uses the four neighboring values plus itself (2*2+1) to find the average for each value in col(B) over the range of row index 10 to row index 20.
</p>
<pre class="lt" style="font-family:monospace;">range aa <span style="color: #000080;">=</span> <span style="color: #000000;">&#91;</span>Book1<span style="color: #000000;">&#93;</span>Sheet1<span style="color: #000080;">!</span><span style="color: #0000dd;">2</span>
ave <span style="color: #000080;">-</span>n <span style="color: #0000dd;">2</span> aa <span style="color: #000080;">-</span>b <span style="color: #0000dd;">10</span> <span style="color: #000080;">-</span>e <span style="color: #0000dd;">20</span>;
<span style="color: #008000;">// 20 - 10 + 1 = 11 so these statements are equivalente</span>
av <span style="color: #000080;">-</span>n <span style="color: #0000dd;">2</span> aa <span style="color: #000080;">-</span>b <span style="color: #0000dd;">10</span> <span style="color: #000080;">-</span>t <span style="color: #0000dd;">11</span>;</pre>
<p>The last script calculates the averages of the first two points and last two points in col(B).  It then replaces the intervening points that are outside the range of average values with the closer of these two averages.
</p>
<pre class="lt" style="font-family:monospace;">range aa <span style="color: #000080;">=</span> <span style="color: #000000;">&#91;</span>Book1<span style="color: #000000;">&#93;</span>Sheet1<span style="color: #000080;">!</span><span style="color: #0000dd;">2</span>
ave <span style="color: #000080;">-</span>l aa;</pre>


