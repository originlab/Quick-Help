<h1 class="firstHeading">3.7.5.97 Vr</h1><p class='urlname' style='display: none'>Vr-obj</p>
<p><b>LabTalk Object Type:</b> 
</p>
<dl><dd><a href="../../LabTalk/Category/Origin_Object_Reference_(Labtalk).html" title="Category:Origin Object Reference (Labtalk)">External Object</a></dd></dl>
<p>The vr object reads a video file and imports frame (or frames) of video to matrix object/matrixbook.
</p><p><br />
</p>
<h2><a name="Methods:"></a><span class="mw-headline"><font color="chocolate">Methods:</font></span></h2>
<table class="simple">
<tr>
<th width="180">Method
</th>
<th> Description
</th></tr>
<tr>
<td> <b>vr.Open(<i>fname</i>)</b>
</td>
<td> Open a video with the specified file name (include the complete file path)
<p>Return value:
</p>
<ul><li> 0: successful.</li>
<li> Other values: failure and the value is the standard error code.</li></ul>
</td></tr>
<tr>
<td> <b>vr.SeekFrame(<i>frameOffset, nOrigin</i>)</b>
</td>
<td> Move the pointer associated with the video to a new location that is <i>framesOffset</i> frames from <i>nOrigin</i>.
<p><i>nOrigin</i> values:
</p>
<ul><li> -1: the first frame of the video</li>
<li> 0: default value. The current frame </li>
<li> 1: the last frame of the video</li></ul>
</td></tr>
<tr>
<td><b>vr.SeekTime(<i>msecOffset, nOrigin</i>)</b>
</td>
<td> Move the pointer associated with the video to a frame that locates <i>msecOffset</i> milliseconds after <i>nOrigin</i>.
<p><i>nOrigin</i> values
</p>
<ul><li> -1: the beginning of the video</li>
<li> 0: default value. The current time </li>
<li> 1: the end of the video</li></ul>
</td></tr>
<tr>
<td><b>vr.ReadFrame(<i>[dataset]</i>) </b>
</td>
<td> Import a frame to the specified dataset. If the dataset is not given then the active one is used.
</td></tr>
<tr>
<td><b>vr.ReadFrame(<i>MBookName, layerIndex, objectIndex</i>)</b>
</td>
<td> Import a frame to the specified matrix object [<i>MBookName</i>]<i>LayerIndex</i>!<i>"ojectIndex"</i>.
</td></tr>
<tr>
<td><b>vr.ReadFrames(<i>MBookName, frameCount, skipFrames</i>)</b>
</td>
<td> Import <i>frameCount</i> frames to the first matrixsheet of <i>MBookName</i>, skipping every <i>skipFrames</i> frames. Each frame is imported into a matrix object.
</td></tr>
<tr>
<td> <b>vr.Close( )</b>
</td>
<td> Close the video.
<p>Return value:
</p>
<ul><li> 0: successful.</li>
<li> 1: failure.</li></ul>
</td></tr></table>
<h2><a name="Properties:"></a><span class="mw-headline"><font color="chocolate">Properties:</font></span></h2>
<p>All Vr properties are read-only.
</p>
<table class="simple">
<tr>
<th width="180">Property
</th>
<th> Access
</th>
<th> Description
</th></tr>
<tr>
<td> Vr.FourCC
</td>
<td> Read only
<p>numeric
</p>
</td>
<td> A number corresponding to the video's <a href="../../LabTalk/LabTalk/FourCC_Table.html" title="LabTalk:FourCC Table">four character code</a>.
</td></tr>
<tr>
<td> Vr.FourCC$
</td>
<td> Read only
<p>string
</p>
</td>
<td> <a href="../../LabTalk/LabTalk/FourCC_Table.html" title="LabTalk:FourCC Table">Four character code</a> used to identify the video codec.
</td></tr>
<tr>
<td> Vr.Format
</td>
<td> Read only
<p>numeric
</p>
</td>
<td> OpenCV format code. See below Channel properties for extracted info:
<p>Channels: number of channels per frame
</p><p>ChannelBits: bits per channel
</p><p>ChannelInt: channel data integer values
</p><p>ChannelSigned: channel data signed values
</p><p>Note: the format and channel properties are based on the lastly read frame.
</p>
</td></tr>
<tr>
<td>Vr.Channels
</td>
<td>Read only
<p>numeric
</p>
</td>
<td> Number of channels per frame
</td></tr>
<tr>
<td>Vr.ChannelBits
</td>
<td>Read only
<p>numeric
</p>
</td>
<td> Bits per channel
</td></tr>
<tr>
<td>Vr.ChannelInt
</td>
<td>Read only
<p>numeric
</p>
</td>
<td> Channel data integer values
</td></tr>
<tr>
<td>Vr.ChannelSigned
</td>
<td>Read only
<p>numeric
</p>
</td>
<td> Channel data signed values
</td></tr>
<tr>
<td> Vr.FPS
</td>
<td> Read only
<p>numeric
</p>
</td>
<td> Frames per second
</td></tr>
<tr>
<td> Vr.FrameCount
</td>
<td> Read only
<p>numeric
</p>
</td>
<td> Number of frames in the video file
</td></tr>
<tr>
<td> Vr.Width
</td>
<td> Read only
<p>numeric
</p>
</td>
<td> Video width in pixels
</td></tr>
<tr>
<td> Vr.Height
</td>
<td> Read only
<p>numeric
</p>
</td>
<td> Video height in pixels
</td></tr>
<tr>
<td> Vr.PosFrames
</td>
<td> Read only
<p>numeric
</p>
</td>
<td> Current position in frame
</td></tr>
<tr>
<td> Vr.PosMSec
</td>
<td> Read only
<p>numeric
</p>
</td>
<td> Current position in millisecond
</td></tr></table>
<h2><a name="Examples:"></a><span class="mw-headline"><font color="chocolate">Examples:</font></span></h2>
<p>This script shows how to import 1 out of every 15 frames into the active matrixbook, each frame to a matrix object.
</p>
<pre class="lt" style="font-family:monospace;">string vfilename<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;C:\test.mp4&quot;</span>;
int StepSize <span style="color: #000080;">=</span> <span style="color: #0000dd;">15</span>; <span style="color: #008000;">// skip every 15 frames</span>

int err <span style="color: #000080;">=</span> vr.<span style="color: #000080;">Open</span><span style="color: #000000;">&#40;</span><span style="color: #000080;">%</span><span style="color: #000000;">&#40;</span>vfilename<span style="color: #000080;">$</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;<span style="color: #008000;">// Open the video file.</span>
if<span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">0</span> <span style="color: #000080;">==</span> err <span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	int TotalFrames <span style="color: #000080;">=</span> vr.<span style="color: #000080;">FrameCount</span><span style="color: #000080;">/</span>StepSize;
 
	<span style="color: #008000;">// Read from beginning to the end of the file into matrix.</span>
	vr.<span style="color: #000080;">ReadFrames</span><span style="color: #000000;">&#40;</span><span style="color: #000080;">%</span>h, TotalFrames, StepSize<span style="color: #000000;">&#41;</span>;
	vr.<span style="color: #000080;">Close</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;<span style="color: #008000;">// Close the video file.</span>
<span style="color: #000000;">&#125;</span>;</pre>
<p>There is also a <a href="../../LabTalk/LabTalk/Import.html#Import_Video" title="LabTalk:Import">full example</a> of how to import 100 frames from a video into a new matrixbook.
</p>





