<h1 class="firstHeading">2.3.2.2.3 $( ) Substitution - Numeric to String Conversion</h1><p class='urlname' style='display: none'>numeric-string-conversion</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#SyntaxSyntax"><span class="tocnumber">1</span> <span class="toctext">Syntax<span class="OIndex" style="display:none">Syntax</span></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Format"><span class="tocnumber">2</span> <span class="toctext">Format</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Default_Format"><span class="tocnumber">2.1</span> <span class="toctext">Default Format</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Origin_Formats"><span class="tocnumber">2.2</span> <span class="toctext">Origin Formats</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#C-Language_Formats"><span class="tocnumber">2.3</span> <span class="toctext">C-Language Formats</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Combining_Origin_and_C-language_Formats"><span class="tocnumber">2.4</span> <span class="toctext">Combining Origin and C-language Formats</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Display_Negative_Values"><span class="tocnumber">3</span> <span class="toctext">Display Negative Values</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Variable_Naming_with_.24.28.29"><span class="tocnumber">4</span> <span class="toctext">Variable Naming with $()</span></a></li>
</ul>
</div>

<h2><a name="SyntaxSyntax"></a><span class="mw-headline">Syntax<span class="OIndex" style="display:none">Syntax</span></span></h2>
<p>The $() notation is used for numeric to string conversion.  This notation evaluates the given expression at run-time, converts the result to a numeric string, and then substitutes the string for itself.
</p><p>The notation has the following form:
</p><p><b>$(<i>expression</i> [, <i>format</i>])</b>
</p><p>where the format is optional or can be Origin format, C-language format, or combined Origin and C-Language format as described in the following sections. 
</p><p>Expression can be one of the following:
</p>
<table class="simple">
<tr>
<th> Expression
</th>
<th> Format
</th>
<th> Example
</th>
<th> Description
</th></tr>
<tr>
<td align="left"> number
</td>
<td> <i>NA</i>
</td>
<td>
<pre>type $(4.567); //ANS: 4.567
</pre>
</td>
<td> Display the number with up to 14 significant digits
</td></tr>
<tr>
<td align="left"> numeric variable
</td>
<td> <i>.3</i>
</td>
<td>
<pre>xx=1.2345678; 
type $(xx, .3); //ANS: 1.235
</pre>
</td>
<td> Display the variable xx with 3 decimal places
</td></tr>
<tr>
<td align="left"> numeric object property
</td>
<td> <i>NA</i>
</td>
<td>
<pre>//if a 2-column workbook is active
type "there are $(wks.ncols) columns";
//ANS: there are 2 columns
</pre>
</td>
<td> Display wks.ncols value
</td></tr>
<tr>
<td align="left"> dataset variable
</td>
<td> <i>NA</i>
</td>
<td>
<pre>dataset ds1={2,4,6}; //dataset variable
type $(ds1); //ANS: 2 4 6
</pre>
</td>
<td> Display ds1 with space separated list
</td></tr>
<tr>
<td align="left"> range variable
</td>
<td><i>*3</i>
</td>
<td>
<pre>//fill column A with 0.00012345, 6.789, 20.2
range ra=col(A); //range variable
type $(ra, *3); //ANS: 1.23E-4 6.79, 20.2
</pre>
</td>
<td> Display ra with 3 significant digits
</td></tr>
<tr>
<td align="left"> math expression
</td>
<td> <i>.0,</i>
</td>
<td>
<pre>xx = 1234.5678;
type $(xx*4, .0,); //ANS: 4,938
</pre>
</td>
<td> Display expression result with 0 decimal places and comma separator
</td></tr></table>
<h2><a name="Format"></a><span class="mw-headline">Format</span></h2>
<p>We use type command to show effect of all formats.
</p>
<h3><a name="Default_Format"></a><span class="mw-headline">Default Format</span></h3>
<p>The square brackets indicate that format is an optional argument for the $() substitution notation. No no format is specified, Origin will carry expression to the number of decimal digits or significant digits specified by the <b>@SD</b> <a href="../../LabTalk/LabTalk/System_Variables.html#DATA" title="LabTalk:System Variables">system variable</a> (which default value is 14).  For example:
</p>
<pre class="lt" style="font-family:monospace;">double aa <span style="color: #000080;">=</span>  <span style="color: #0000dd;">3.14159265358979323846</span>;
type <span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>aa<span style="color: #000000;">&#41;</span>;    <span style="color: #008000;">// ANS: 3.1415926535898</span></pre>
<h3><a name="Origin_Formats"></a><span class="mw-headline">Origin Formats</span></h3>
<p>Origin supports custom formatting of numeric values in <a class="external text" href="../../UserGuide/UserGuide/Custom_Numeric_Format.html">the worksheet</a> or in <a class="external text" href="../../UserGuide/UserGuide/Linking_Text_Labels_to_Data_and_Variables.html">text labels</a>. For a full list of numeric format options, see <a href="../../LabTalk/LabTalk/Origin_Formats.html" title="LabTalk:Origin Formats"><b>Reference Tables: Origin Formats</b></a>.
</p><p><br />
</p>
<table class="simple">
<tr>
<th> Format
</th>
<th> Description
</th>
<th> Example
</th></tr>
<tr>
<td align="center"> *<i>n</i>
</td>
<td> Display <i>n</i> significant digits
</td>
<td>
<pre>xx=1.23456; 
type "xx = $(xx, *2)"; //ANS: xx=1.2
</pre>
</td></tr>
<tr>
<td align="center"> .<i>n</i>
</td>
<td> Display <i>n</i> decimal places
</td>
<td>
<pre>xx=1.23456; 
type "xx = $(xx, .2)"; //ANS: xx=1.23
</pre>
</td></tr>
<tr>
<td align="center"> *<i>n</i>*
</td>
<td> Display <i>n</i> significant digits, truncating trailing zeros
</td>
<td>
<pre>xx = 1.10001; 
type "xx = $(xx, *4*)"; //ANS: xx=1.1
</pre>
</td></tr>
<tr>
<td align="center"> .<i>n</i>,
</td>
<td> Display <i>n</i> decimal places, using comma separator (US, UK, etc.)
</td>
<td>
<pre>xx = 1234.5678;
type "xx = $(xx, .2,)"; //ANS: xx=1,234.57
xx= 10000;
type "$(xx, .0,)"; //ANS: 10,000
</pre>
</td></tr>
<tr>
<td align="center"> E.<i>n</i>
</td>
<td> Display <i>n</i> decimal places, in engineering format
</td>
<td>
<pre>xx=203465987;
type "xx = $(xx, E*3)"; //ANS: xx=203M
</pre>
</td></tr>
<tr>
<td align="center"> S*<i>n</i>
</td>
<td> Display <i>n</i> significant digits in scientific notation of the form <b>1E3</b>
</td>
<td>
<pre>xx=203465987;
type "xx = $(xx, S*3)"; //ANS: xx=2.03E+08
</pre>
</td></tr>
<tr>
<td align="center"> D<i>&lt;format&gt;</i>
</td>
<td> Display in custom date format, where <i>&lt;format&gt;</i> is either the index number (counting from 0) of the format, starting from the top of the <a class="external text" href="../../UserGuide/UserGuide/The_(Column_Properties)_Properties_Tab.html#Display">Column Properties <b>Display</b> list</a>; or a string built using <a href="../../LabTalk/LabTalk/Date_and_Time_Format_Specifiers.html" title="LabTalk:Date and Time Format Specifiers">these date and time format specifiers</a>.
</td>
<td>
<pre>type "$(date(7/20/2009), D1)";  // ANS: Monday, July 20, 2009
type "$(date(7/20/2009), Dyyyy'-'MM'-'dd)";  //ANS: 2009-07-20
DT=2459858.6946202; //assign a julian date to DT
type "DT = $(DT, D1)"; // ANS: DT = Thursday, October 6, 2022
type "Now= $(@D, DMM-dd-yyyy h:mm:ss tt)"; // @D: current date&amp;time
</pre>
</td></tr>
<tr>
<td align="center"> T<i>&lt;format&gt;</i>
</td>
<td> Display in custom time format, where <i>&lt;format&gt;</i> is either the index number (counting from 0) of the format, starting from the top of the <a class="external text" href="../../UserGuide/UserGuide/The_(Column_Properties)_Properties_Tab.html#Display">Column Properties <b>Display</b> list</a>; or a string built using <a href="../../LabTalk/LabTalk/Date_and_Time_Format_Specifiers.html" title="LabTalk:Date and Time Format Specifiers">these time format specifiers</a>.
</td>
<td>
<pre>type "$(time(14:31:04), T4)";   //ANS: 02 PM
type "$(time(14:31:04), Thh'.'mm'.'ss)";  //ANS: 02.31.04
DT=2459858.6946202;
type "DT = $(DT, T0)"; // ANS: DT = 16:40
type "Now = $(@D, THH:mm:ss.##)"; // @D: current date&amp;time
</pre>
</td></tr>
<tr>
<td align="center"> C<i>&lt;format&gt;</i>
</td>
<td> Display month or day of week in Calendar format. &lt;format&gt; is either M# (month), or D#=day of the week. # can be 0 (3 characters), 1 (full characters) or 2 (1 character)
</td>
<td>
<pre>type "$(12, CM0)";  // ANS: Dec
type "$(3, CD1)";  // ANS: Wednesday
</pre>
</td></tr>
<tr>
<td align="center"> #<i>n</i> or ##
</td>
<td> Display an integer to <i>n</i> places, zero padding where necessary. Or use n number of #'s to refer to <i>n</i>th places
</td>
<td>
<pre>xx=45;
type "xx=$(xx, #5)"; //ANS: 00045
type "xx=$(xx, ###)"; //AnS: 045
</pre>
</td></tr>
<tr>
<td align="center"> <i>&lt;prefix&gt;</i>##<i>&lt;sep&gt;</i>###<i>&lt;suffix&gt;</i>
</td>
<td> Display a number by specifying a separator (<i>&lt;sep&gt;</i>) between digits and optionally add prefix(<i>&lt;prefix&gt;</i>) and/or suffix (<i>&lt;suffix&gt;</i>). One <b>#</b> symbol indicates one digit. The last <b>#</b> in this expression always refers to the unit digit. The numbers of <b>#</b> in both first and second parts can be varied.
</td>
<td>
<pre>xx=56000;
type "xx=$(xx, ##+###)"; //ANS: xx=56+000
xx=4000; 
type "xx=$(xx, ##+##M)"; //ANS: xx=40+00M
</pre>
</td></tr>
<tr>
<td align="center"># #/<i>n</i>
</td>
<td> Round and display a number as a fraction with specified <i>n</i> as denominator. The numerator and denominator are separated by a forward slash <b>/</b>. The number of digits of numerator is adjusted accordingly.
</td>
<td>
<pre>AA = 0.334;
type "AA = $(AA, # ##/##)"; //ANS: AA = 1/3
type "AA = $(AA, # #/8)"; //ANS: AA = 3/8
</pre>
</td></tr>
<tr>
<td align="center">D[<i>&lt;space&gt;</i>]M[S][F][<i>n</i>]
</td>
<td> Display a degree number in the format of <i>Degree&#176; Minute' Second"</i>, where 1 degree = 60 minutes, and 1 minute = 60 seconds. Space can be inserted to separate each part. <i>n</i> indicates decimal places for fractions. <b>F</b> displays degree number without symbols and inserting spaces as separator.
</td>
<td>
<pre>DD = 37.34255;
type "DD = $(DD, DMS)"; //ANS: DD = 37°20'33"
type "DD = $(DD, D MS)"; //ANS: DD = 37° 20' 33"
type "DD = $(DD, DMSF)"; //ANS: DD = 37 20 33
type "DD = $(DD, DMF1)"; //ANS: DD = 37 20.6
</pre>
</td></tr></table>
<h3><a name="C-Language_Formats"></a><span class="mw-headline">C-Language Formats</span></h3>
<p>The <i>format</i> portion of the $() notation also supports C-language formatting statements.
</p>
<table class="simple">
<tr>
<th> Option
</th>
<th> Un/Signed
</th>
<th> Output
</th>
<th> Input Range
</th>
<th> Example
</th></tr>
<tr>
<td> d, i
</td>
<td> SIGNED
</td>
<td> Integer values (of decimal or integer value)
</td>
<td> -2^31 -- 2^31 -1
</td>
<td>
<pre>double nn = -247.56;
type "Value: $(nn,%d)"; // ANS: -247
</pre>
</td></tr>
<tr>
<td> f, e, E, g, G
</td>
<td> SIGNED
</td>
<td> Decimal, scientific, decimal-or-scientific
</td>
<td> +/-1e290 -- +/-1e-290
</td>
<td>
<pre>double nn = 1.23456e5;
type "Values: $(nn,&#160;%9.4f), $(nn,&#160;%9.4E), $(nn,&#160;%g)";
// ANS: 123456.0000, 1.2346E+005, 123456
double nn = 1.23456e6;
type "Values: $(nn,&#160;%9.4f), $(nn,&#160;%9.4E), $(nn,&#160;%g)";
// ANS: 123456.0000, 1.2346E+006, 1.23456e+006
</pre>
</td></tr>
<tr>
<td> o, u, x, X
</td>
<td> UNSIGNED
</td>
<td> Octal, Integer, hexadecimal, HEXADECIMAL
</td>
<td> -2^31 -- 2^32 - 1
</td>
<td>
<pre>double nn = 65551;
type "Values: $(nn,&#160;%o), $(nn,&#160;%u), $(nn,&#160;%X)";
// ANS: 200017, 65551, 1000F
</pre>
</td></tr></table>
<p>Note: In the last category, negative values will be expressed as two's complement.
</p>
<h3><a name="Combining_Origin_and_C-language_Formats"></a><span class="mw-headline">Combining Origin and C-language Formats</span></h3>
<p>Origin supports the use of formats <i>E</i> and <i>S</i> along with C-language format specifiers.  For example:
</p>
<pre class="lt" style="font-family:monospace;">xx <span style="color: #000080;">=</span> 1e6;
type <span style="color: #ff00ff;">&quot;xx = $(xx, E%4.2f)&quot;</span>;  <span style="color: #008000;">// ANS: 1.00M</span></pre>
<h2><a name="Display_Negative_Values"></a><span class="mw-headline">Display Negative Values</span></h2>
<p>Most of Origin's LabTalk command statements take options and options are always preceded by the dash "-" character. 
Therefore the following command will not work
</p>
<pre class="lt" style="font-family:monospace;">k<span style="color: #000080;">=</span><span style="color: #000080;">-</span><span style="color: #0000dd;">5</span>;
type <span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>k<span style="color: #000000;">&#41;</span>; <span style="color: #008000;">//intepret as type -5 and think -5 is an option of ''type'' command</span></pre>
<p>Therefore you must protect the <b>-</b> by enclosing the substitution in quotes or parentheses. For example:
</p>
<pre class="lt" style="font-family:monospace;">K <span style="color: #000080;">=</span> <span style="color: #000080;">-</span><span style="color: #0000dd;">5</span>;
type <span style="color: #ff00ff;">&quot;$(K)&quot;</span>; <span style="color: #008000;">// This works</span>
type <span style="color: #000000;">&#40;</span><span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>K<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; <span style="color: #008000;">// This works</span></pre>
<h2><a name="Variable_Naming_with_.24.28.29"></a><span class="mw-headline">Variable Naming with $()</span></h2>
<p>In assignment statements, the $() notation is substitution-processed and resolved to a value regardless of which side of the assignment operator it is located.
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">//create variable A with value 2</span>
A <span style="color: #000080;">=</span> <span style="color: #0000dd;">2</span>; <span style="color: #008000;">//Define variable A with value 2.  </span>

<span style="color: #008000;">//Create a variable A2 with the value 3</span>
A<span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>A<span style="color: #000000;">&#41;</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>; <span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>A<span style="color: #000000;">&#41;</span> is resolved first so LHS is A2

<span style="color: #008000;">//verify the result</span>
A2<span style="color: #000080;">=</span>;
A<span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>A<span style="color: #000000;">&#41;</span><span style="color: #000080;">=</span>;</pre>
<p><br />
Also when variable names are used for range or dataset type argument in functions, $() substitution is needed to resolve it first.
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">//fill column 1 to 5 with values</span>
col<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">=</span>data<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">100</span><span style="color: #000000;">&#41;</span>; 
int nn <span style="color: #000080;">=</span> <span style="color: #0000dd;">5</span>; 
loop<span style="color: #000000;">&#40;</span>ii,<span style="color: #0000dd;">2</span>,nn<span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
  wcol<span style="color: #000000;">&#40;</span>ii<span style="color: #000000;">&#41;</span><span style="color: #000080;">=</span>normal<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">100</span><span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span>

<span style="color: #008000;">//Example of using variable in X Function smooth</span>
loop<span style="color: #000000;">&#40;</span>ii,<span style="color: #0000dd;">2</span>,nn<span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
 <span style="color: #008000;">//smooth on the iith column $(ii)</span>
  smooth <span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>ii<span style="color: #000000;">&#41;</span> method<span style="color: #000000;">:</span><span style="color: #000080;">=</span>aav npts<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">10</span>;
<span style="color: #000000;">&#125;</span>

<span style="color: #008000;">//Example of using variable in LabTalk function sum()</span>
lastcolumn<span style="color: #000080;">=</span>wks.<span style="color: #000080;">ncols</span>;
<span style="color: #008000;">//add a column after last one and set the value to be sum of last column</span>
col<span style="color: #000000;">&#40;</span><span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>lastcolumn<span style="color: #000080;">+</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">=</span> sum<span style="color: #000000;">&#40;</span><span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>lastcolumn<span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;
col<span style="color: #000000;">&#40;</span><span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>lastcolumn<span style="color: #000080;">+</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#91;</span>L<span style="color: #000000;">&#93;</span><span style="color: #000080;">$</span><span style="color: #000080;">=</span> sum; <span style="color: #008000;">//set long name of column</span></pre>
<p><br />
---
For more examples of $() substitution, see <a href="../../LabTalk/Script/Converting_to_String.html" title="Script:Converting to String">Numeric to String</a> conversion.
</p>





