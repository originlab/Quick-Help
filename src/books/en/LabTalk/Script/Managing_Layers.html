<h1 class="firstHeading">2.9.3 Managing Layers</h1><p class='urlname' style='display: none'>Managing-Layers</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Creating_a_panel_plotManage_Layer"><span class="tocnumber">1</span> <span class="toctext">Creating a panel plot<span class="OIndex" style="display:none">Manage Layer</span></span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Creating_a_6_panel_graph"><span class="tocnumber">1.1</span> <span class="toctext">Creating a 6 panel graph</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Creating_and_plotting_into_a_6_panel_graph"><span class="tocnumber">1.2</span> <span class="toctext">Creating and plotting into a 6 panel graph</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Adding_Layers_to_a_Graph_WindowAdd_Layer"><span class="tocnumber">2</span> <span class="toctext">Adding Layers to a Graph Window<span class="OIndex" style="display:none">Add Layer</span></span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Arranging_the_layersArrange_LayerLayer_Arrangement"><span class="tocnumber">3</span> <span class="toctext">Arranging the layers<span class="OIndex" style="display:none">Arrange Layer</span><span class="OIndex" style="display:none">Layer Arrangement</span></span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Moving_a_layerMove_layerLayer.2C_Move"><span class="tocnumber">4</span> <span class="toctext">Moving a layer<span class="OIndex" style="display:none">Move layer</span><span class="OIndex" style="display:none">Layer, Move</span></span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Swap_two_layersSwap_LayersLayer.2C_Swap"><span class="tocnumber">5</span> <span class="toctext">Swap two layers<span class="OIndex" style="display:none">Swap Layers</span><span class="OIndex" style="display:none">Layer, Swap</span></span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Aligning_layersAlign_LayerLayer_Alignment"><span class="tocnumber">6</span> <span class="toctext">Aligning layers<span class="OIndex" style="display:none">Align Layer</span><span class="OIndex" style="display:none">Layer Alignment</span></span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Linking_LayersLink_LayersLayer.2C_Linking"><span class="tocnumber">7</span> <span class="toctext">Linking Layers<span class="OIndex" style="display:none">Link Layers</span><span class="OIndex" style="display:none">Layer, Linking</span></span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Setting_Layer_Unit"><span class="tocnumber">8</span> <span class="toctext">Setting Layer Unit</span></a></li>
</ul>
</div>

<h2><a name="Creating_a_panel_plotManage_Layer"></a><span class="mw-headline">Creating a panel plot<span class="OIndex" style="display:none">Manage Layer</span></span></h2>
<p>The <b><a class="external text" href="../../XFunction/X-Function/Newpanel.html">newpanel</a></b> X-Function creates a new graph with an n x m <span class="OIndex">layer</span><span class="OIndex HasShownIndex" style="display:none">Layer, Adding</span> arrangement.
</p>
<h3><a name="Creating_a_6_panel_graph"></a><span class="mw-headline">Creating a 6 panel graph</span></h3>
<p>The following example will create a new graph window with 6 layers, arranged as 2 columns and 3 rows.  This function can be run independent of what window is active.  
</p>
<pre class="lt" style="font-family:monospace;">newpanel col<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> row<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>;</pre>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Managing_Layers/Tip_icon.png?v=0" width="57"  border="0" /></td><td><p>Remember that when using X-Functions you do not always need to use the variable name when assigning values; however, being explicit with col:= and row:= may make your code more readable.  To save yourself some typing, in place of the code above, you can use the following:
</p></td></tr></table> 
<pre class="lt" style="font-family:monospace;">newpanel <span style="color: #0000dd;">2</span> <span style="color: #0000dd;">3</span>;</pre> 
<h3><a name="Creating_and_plotting_into_a_6_panel_graph"></a><span class="mw-headline">Creating and plotting into a 6 panel graph</span></h3>
<p>The following example will import some data into a new workbook, create a new graph window with 6 layers, arranged as 2 columns and 3 rows, and loop through each layer (panel), plotting the imported data.
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// Create a new workbook</span>
newbook;	

<span style="color: #008000;">// Import a file</span>
path<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Graphing\&quot;</span>;
fname<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> path<span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;waterfall2.dat&quot;</span>;
impasc;

<span style="color: #008000;">// Save the workbook name as newpanel will change&#160;%H</span>
string bkname<span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #000080;">%</span>H;

<span style="color: #008000;">// Create a 2*3 panel</span>
newpanel <span style="color: #0000dd;">2</span> <span style="color: #0000dd;">3</span>;

<span style="color: #008000;">// Plot the data </span>
for <span style="color: #000000;">&#40;</span>ii<span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>; ii<span style="color: #000080;">&lt;</span><span style="color: #0000dd;">8</span>; ii<span style="color: #000080;">++</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	plotxy iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">&#91;</span>bkname<span style="color: #000080;">$</span><span style="color: #000000;">&#93;</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span>wcol<span style="color: #000000;">&#40;</span>ii<span style="color: #000000;">&#41;</span> plot<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">200</span> ogl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span>ii<span style="color: #000080;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span></pre>
<h2><a name="Adding_Layers_to_a_Graph_WindowAdd_Layer"></a><span class="mw-headline">Adding Layers to a Graph Window<span class="OIndex" style="display:none">Add Layer</span></span></h2>
<p>The <b><a class="external text" href="../../XFunction/X-Function/Layadd.html">layadd</a></b> X-Function creates/adds a new <span class="OIndex">layer</span><span class="OIndex HasShownIndex" style="display:none">Layer, Add layer</span> to a graph window.  This function is the equivalent of the <b>Insert: New Layer(Axes) menu</b>.
</p>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Managing_Layers/Tip_icon.png?v=0" width="57"  border="0" /></td><td><p>Programmatically adding a layer to a graph is not common.  It is recommended to create a graph template ahead of time and then use the <b><a class="external text" href="../../XFunction/X-Function/Plotxy.html">plotxy</a></b> X-Function to plot into your graph template.
</p></td></tr></table>
<p>The following example will add an independent right Y axis scale.  A new layer is added, displaying only the right Y axis.  It is linked in dimension and the X axis is linked to the current active layer at the time the layer is added.  The new added layer becomes the active layer.
</p>
<pre class="lt" style="font-family:monospace;">layadd type<span style="color: #000000;">:</span><span style="color: #000080;">=</span>rightY;</pre>
<h2><a name="Arranging_the_layersArrange_LayerLayer_Arrangement"></a><span class="mw-headline">Arranging the layers<span class="OIndex" style="display:none">Arrange Layer</span><span class="OIndex" style="display:none">Layer Arrangement</span></span></h2>
<p>The <b><a class="external text" href="../../XFunction/X-Function/Layarrange.html">layarrange</a></b> X-Function is used to arrange the layers on the graph page.
</p>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Managing_Layers/Tip_icon.png?v=0" width="57"  border="0" /></td><td><p>Programmatically arranging layers on a graph is not common.  It is recommended to create a graph template ahead of time and then use the <b><a class="external text" href="../../XFunction/X-Function/Plotxy.html">plotxy</a></b> X-Function to plot into your graph template.
</p></td></tr></table>
<p>The following example will arrange the existing layers on the active graph into two rows by three columns.  If the active graph does not already have 6 layers, it will not add any new layers.  It arranges only the layers that exist.  
</p>
<pre class="lt" style="font-family:monospace;">layarrange row<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> col<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>;</pre>
<h2><a name="Moving_a_layerMove_layerLayer.2C_Move"></a><span class="mw-headline">Moving a layer<span class="OIndex" style="display:none">Move layer</span><span class="OIndex" style="display:none">Layer, Move</span></span></h2>
<p>The <b><a class="external text" href="../../XFunction/X-Function/Laysetpos.html">laysetpos</a></b> X-Function is used to set the position of one or more layers in the graph, relative to the page.
</p><p>The following example will left align all layers in the active graph window, setting their position to be 15% from the left-hand side of the page.
</p>
<pre class="lt" style="font-family:monospace;">laysetpos layer<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;1:0&quot;</span> left<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">15</span>;</pre>
<h2><a name="Swap_two_layersSwap_LayersLayer.2C_Swap"></a><span class="mw-headline">Swap two layers<span class="OIndex" style="display:none">Swap Layers</span><span class="OIndex" style="display:none">Layer, Swap</span></span></h2>
<p>The <b><a class="external text" href="../../XFunction/X-Function/Layswap.html">layswap</a></b> X-Function is used to swap the location/position of two graph layers.  You can reference the layers by name or number.
</p><p>The following example will swap the position on the page of layers indexed 1 and 2.
</p>
<pre class="lt" style="font-family:monospace;">layswap igl1<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> igl2<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>;</pre>
<p>The following example will swap the position on the page of layers named Layer1 and Layer2.
</p>
<pre class="lt" style="font-family:monospace;">layswap igl1<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Layer1 igl2<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Layer2;</pre>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Managing_Layers/Tip_icon.png?v=0" width="57"  border="0" /></td><td><p>Layers can be renamed from both the Layer Management tool as well as the Plot Details dialog.  In the Layer Management tool, you can double-click on the Name in the Layer Selection list, to rename.  In the left-hand navigation panel of the Plot Details dialog, you can slow double-click a layer name to rename.
</p><p>To rename from LabTalk, use layer<i>n</i>.name$ where <i>n</i> is the layer index.  For example, to rename layer index 1 to Power, use the following:  layer1.name$="Power"; 
</p></td></tr></table>
<h2><a name="Aligning_layersAlign_LayerLayer_Alignment"></a><span class="mw-headline">Aligning layers<span class="OIndex" style="display:none">Align Layer</span><span class="OIndex" style="display:none">Layer Alignment</span></span></h2>
<p>The <b><a class="external text" href="../../XFunction/X-Function/Layalign.html">layalign</a></b> X-Function is used to align one or more layers relative to a source/reference layer.
</p><p>The following example will bottom align layer 2 with layer 1 in the active graph window.
</p>
<pre class="lt" style="font-family:monospace;">layalign igl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> destlayer<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> direction<span style="color: #000000;">:</span><span style="color: #000080;">=</span>bottom;</pre>
<p>The following example will left align layers 2, 3 and 4 with layer 1 in the active graph window.
</p>
<pre class="lt" style="font-family:monospace;">layalign igl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> destlayer<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span><span style="color: #000000;">:</span><span style="color: #0000dd;">4</span> direction<span style="color: #000000;">:</span><span style="color: #000080;">=</span>left;</pre>
<p>The following example will left align all layers in Graph3 with respect to layer 1.  The 2:0 notation means for all layers, starting with layer 2 and ending with the last layer in the graph.  
</p>
<pre class="lt" style="font-family:monospace;">layalign igp<span style="color: #000000;">:</span><span style="color: #000080;">=</span>graph3 igl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> destlayer<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span><span style="color: #000000;">:</span><span style="color: #0000dd;">0</span> direction<span style="color: #000000;">:</span><span style="color: #000080;">=</span>left;</pre>
<h2><a name="Linking_LayersLink_LayersLayer.2C_Linking"></a><span class="mw-headline">Linking Layers<span class="OIndex" style="display:none">Link Layers</span><span class="OIndex" style="display:none">Layer, Linking</span></span></h2>
<p>The <b><a class="external text" href="../../XFunction/X-Function/Laylink.html">laylink</a></b> X-Function is used for linking layers to one another.  It is used to link axes scales as well as layer area/position.
</p><p>The following example will link all X axes in all layers in the active graph to the X axis of layer 1.  The Units will be set to&#160;% of Linked Layer.
</p>
<pre class="lt" style="font-family:monospace;">laylink igl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> destlayers<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span><span style="color: #000000;">:</span><span style="color: #0000dd;">0</span> XAxis<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;</pre>
<h2><a name="Setting_Layer_Unit"></a><span class="mw-headline">Setting Layer Unit</span></h2>
<p>The <b><a class="external text" href="../../XFunction/X-Function/Laysetunit.html">laysetunit</a></b> X-Function is used to set the unit for the layer area of one or more layers.
</p>

