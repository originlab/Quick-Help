<h1 class="firstHeading">2.6.2 String Processing</h1><p class='urlname' style='display: none'>String-Processing</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Using_String_Registers"><span class="tocnumber">1</span> <span class="toctext">Using String Registers</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Using_String_VariablesExtracting_String_Number"><span class="tocnumber">2</span> <span class="toctext">Using String Variables<span class="OIndex" style="display:none">Extracting String Number</span></span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Getting_a_Substring_from_a_Longer_String_Using_String_Variables"><span class="tocnumber">3</span> <span class="toctext">Getting a Substring from a Longer String Using String Variables</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Find_substring.2C_using_getFileName.28.29Substring"><span class="tocnumber">3.1</span> <span class="toctext">Find substring, using getFileName()<span class="OIndex" style="display:none">Substring</span></span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Find_substring.2C_using_reverseFind.28.29.2C_mid.28.29_methods"><span class="tocnumber">3.2</span> <span class="toctext">Find substring, using reverseFind(), mid() methods</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Find_substring.2C_token-based"><span class="tocnumber">3.3</span> <span class="toctext">Find substring, token-based</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Concatenate_Strings"><span class="tocnumber">4</span> <span class="toctext">Concatenate Strings</span></a></li>
</ul>
</div>

<h3><a name="Using_String_Registers"></a><span class="mw-headline">Using String Registers</span></h3>
<p><a href="../../LabTalk/LabTalk/String_registers.html" title="LabTalk:String registers"><span class="OIndex">String Registers</span></a> predate the introduction of string variables (Origin 8) and are used more often in older scripts. They are simple to use but are more difficult to read as compared with string variables and their methods. Also, they are global (session scope) and so are more difficult to control in terms of their values being modified by other parts of the code.
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// Concatenate two strings using string registers</span>

<span style="color: #000080;">%</span>A<span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;Left&quot;</span>;
<span style="color: #000080;">%</span>B<span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;Handed&quot;</span>;
<span style="color: #000080;">%</span>N<span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;%A&#160;%B&quot;</span>;
<span style="color: #000080;">%</span>N<span style="color: #000080;">=</span>          <span style="color: #008000;">// &quot;Left Handed&quot;</span></pre>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// Extract the file name substring from the longer file path string:</span>
<span style="color: #000080;">%</span>N<span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;C:\Program Files\Origin 8\Samples\Import\S15-125-03.dat&quot;</span>;
for<span style="color: #000000;">&#40;</span>done<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;done<span style="color: #000080;">==</span><span style="color: #0000dd;">0</span>; <span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
    <span style="color: #000080;">%</span>M<span style="color: #000080;">=</span><span style="color: #000080;">%</span><span style="color: #000000;">&#91;</span><span style="color: #000080;">%</span>N,<span style="color: #000080;">&gt;</span><span style="color: #ff00ff;">'\'</span><span style="color: #000000;">&#93;</span>;
    if<span style="color: #000000;">&#40;</span><span style="color: #000080;">%</span><span style="color: #000000;">&#91;</span><span style="color: #000080;">%</span>M<span style="color: #000000;">&#93;</span><span style="color: #000080;">&gt;</span><span style="color: #0000dd;">0</span><span style="color: #000000;">&#41;</span> <span style="color: #000080;">%</span>N <span style="color: #000080;">=</span> <span style="color: #000080;">%</span>M;
    else done <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span>;
<span style="color: #000000;">&#125;</span>
<span style="color: #000080;">%</span>N<span style="color: #000080;">=</span>;</pre>
<h3><a name="Using_String_VariablesExtracting_String_Number"></a><span class="mw-headline">Using String Variables<span class="OIndex" style="display:none">Extracting String Number</span></span></h3>
<p>String variables, introduced in Origin 8, are generally preferable to string registers as they produce more reliable code. To resolve string variables,&#160;%( ) substitution is used. The following example shows multiple ways to extract numbers from a string:
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// String variables support many methods</span>
string fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;S15-125-03.dat&quot;</span>;

int nn<span style="color: #000080;">=</span>fname.<span style="color: #000080;">Find</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">'S'</span><span style="color: #000000;">&#41;</span>;
string str1<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> fname.<span style="color: #000080;">Mid</span><span style="color: #000000;">&#40;</span>nn<span style="color: #000080;">+</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">2</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">$</span>;
type <span style="color: #ff00ff;">&quot;1st number =&#160;%(str1$)&quot;</span>;

string str2<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> fname.<span style="color: #000080;">Between</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;-&quot;</span>, <span style="color: #ff00ff;">&quot;-&quot;</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">$</span>;
type <span style="color: #ff00ff;">&quot;2nd number =&#160;%(str2$)&quot;</span>;

int nn <span style="color: #000080;">=</span> fname.<span style="color: #000080;">ReverseFind</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">'-'</span><span style="color: #000000;">&#41;</span>;
int oo <span style="color: #000080;">=</span> fname.<span style="color: #000080;">ReverseFind</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">'.'</span><span style="color: #000000;">&#41;</span>&#160;;
string str3<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> fname.<span style="color: #000080;">Mid</span><span style="color: #000000;">&#40;</span>nn <span style="color: #000080;">+</span> <span style="color: #0000dd;">1</span>, oo <span style="color: #000080;">-</span> nn <span style="color: #000080;">-</span> <span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">$</span>;
type <span style="color: #ff00ff;">&quot;3rd number =&#160;%(str3$)&quot;</span>;

<span style="color: #008000;">//Use&#160;%(string$) to convert string to number and do calculation 125-15*03</span>
<span style="color: #008000;">//Use $(number) to convert the calculation result to string and print</span>
type <span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span><span style="color: #000080;">%</span><span style="color: #000000;">&#40;</span>str2<span style="color: #000080;">$</span><span style="color: #000000;">&#41;</span> <span style="color: #000080;">-</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#40;</span>str1<span style="color: #000080;">$</span><span style="color: #000000;">&#41;</span> <span style="color: #000080;">*</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#40;</span>str3<span style="color: #000080;">$</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>; 

<span style="color: #008000;">// Using string Registers, we can use substring notation</span>
<span style="color: #000080;">%</span>M <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;S15-125-03.dat&quot;</span>;
<span style="color: #000080;">%</span>N <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#91;</span><span style="color: #000080;">%</span>M,<span style="color: #0000dd;">2</span><span style="color: #000000;">:</span><span style="color: #0000dd;">3</span><span style="color: #000000;">&#93;</span>;  <span style="color: #008000;">// Specify start and end</span>
type <span style="color: #ff00ff;">&quot;1st number =&#160;%N&quot;</span>;
<span style="color: #000080;">%</span>N <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#91;</span><span style="color: #000080;">%</span>M,<span style="color: #000080;">&gt;</span><span style="color: #ff00ff;">'S'</span><span style="color: #000000;">&#93;</span>; <span style="color: #008000;">// Find string after 'S'</span>
<span style="color: #000080;">%</span>N <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#91;</span><span style="color: #000080;">%</span>N,<span style="color: #ff00ff;">'-'</span><span style="color: #000000;">&#93;</span>;  <span style="color: #008000;">// Find remaining before '-'</span>
type <span style="color: #ff00ff;">&quot;1st number =&#160;%N&quot;</span>;
<span style="color: #000080;">%</span>O <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#91;</span><span style="color: #000080;">%</span>M,#<span style="color: #0000dd;">2</span>,\x2D<span style="color: #000000;">&#93;</span>;  <span style="color: #008000;">// Find second token delimited by '-' (hexadecimal 2D)</span>
type <span style="color: #ff00ff;">&quot;2nd number =&#160;%O&quot;</span>;
<span style="color: #000080;">%</span>P <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#91;</span><span style="color: #000080;">%</span>M,<span style="color: #ff00ff;">'.'</span><span style="color: #000000;">&#93;</span>;  <span style="color: #008000;">// trim extension</span>
<span style="color: #000080;">%</span>P <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#91;</span><span style="color: #000080;">%</span>P,<span style="color: #000080;">&gt;</span><span style="color: #ff00ff;">'-'</span><span style="color: #000000;">&#93;</span>; <span style="color: #008000;">// after first '-'</span>
<span style="color: #000080;">%</span>P <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">&#91;</span><span style="color: #000080;">%</span>P,<span style="color: #000080;">&gt;</span><span style="color: #ff00ff;">'-'</span><span style="color: #000000;">&#93;</span>; <span style="color: #008000;">// after second '-'</span>
type <span style="color: #ff00ff;">&quot;3rd number =&#160;%P&quot;</span>;
type <span style="color: #000080;">$</span><span style="color: #000000;">&#40;</span><span style="color: #000080;">%</span>O <span style="color: #000080;">-</span> <span style="color: #000080;">%</span>N <span style="color: #000080;">*</span> <span style="color: #000080;">%</span>P<span style="color: #000000;">&#41;</span>;</pre>
<h3><a name="Getting_a_Substring_from_a_Longer_String_Using_String_Variables"></a><span class="mw-headline">Getting a Substring from a Longer String Using String Variables</span></h3>
<p>These examples show multiple ways to get a substring (in this case a file name) from a longer string (a full file path).<span class="OIndex" style="display:none">String Processing</span><span class="OIndex" style="display:none">String Method</span> For information on substring notation using string registers, see <a href="../../LabTalk/LabTalk/String_registers.html#Substring_Notation" title="LabTalk:String registers">Substring Notation</a>.
</p>
<h4><a name="Find_substring.2C_using_getFileName.28.29Substring"></a><span class="mw-headline">Find substring, using getFileName()<span class="OIndex" style="display:none">Substring</span></span></h4>
<p>In this example, a string method designed for a very specific but commonly needed task is invoked.
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// Use the built-in string method, GetFileName():</span>
string fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;C:\Program Files\Origin 8\Samples\Import\S15-125-03.dat&quot;</span>;
string str1<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> fname.<span style="color: #000080;">GetFileName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">$</span>;
str1<span style="color: #000080;">$</span><span style="color: #000080;">=</span>;</pre>
<h4><a name="Find_substring.2C_using_reverseFind.28.29.2C_mid.28.29_methods"></a><span class="mw-headline">Find substring, using reverseFind(), mid() methods</span></h4>
<p>This time, a combination of string methods is used:
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// Use the functions ReverseFind and Mid to extract the file name:</span>
string fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;C:\Program Files\Origin 8\Samples\Import\S15-125-03.dat&quot;</span>;
<span style="color: #008000;">// Find the position of the last '\' by searching from the right.</span>
int nn<span style="color: #000080;">=</span>fname.<span style="color: #000080;">ReverseFind</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">'\'</span><span style="color: #000000;">&#41;</span>;
<span style="color: #008000;">// Get the substring starting after that position and going to the end.</span>
string str2<span style="color: #000080;">$</span><span style="color: #000080;">=</span>fname.<span style="color: #000080;">Mid</span><span style="color: #000000;">&#40;</span>nn<span style="color: #000080;">+</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">$</span>;
<span style="color: #008000;">// Type the file name to the Script Window.</span>
str2<span style="color: #000080;">$</span><span style="color: #000080;">=</span>;</pre>
<h4><a name="Find_substring.2C_token-based"></a><span class="mw-headline">Find substring, token-based</span></h4>
<p><span class="OIndex" style="display:none">Token</span>
</p><p>Here, another variation of generic finding methods is chosen to complete the task.
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// Use a token-based method to extract the file name:</span>

string fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;C:\Program Files\Origin 8\Samples\Import\S15-125-03.dat&quot;</span>;
<span style="color: #008000;">// Get the number of tokens, demarcated by '\' characters.</span>
int nn<span style="color: #000080;">=</span>fname.<span style="color: #000080;">GetNumTokens</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">'\'</span><span style="color: #000000;">&#41;</span>;           
<span style="color: #008000;">// Get the last token.</span>
string str3<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> fname.<span style="color: #000080;">GetToken</span><span style="color: #000000;">&#40;</span>nn, <span style="color: #ff00ff;">'\'</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">$</span>;  
<span style="color: #008000;">// Output the value of that token to the Script Window.</span>
str3<span style="color: #000080;">$</span><span style="color: #000080;">=</span>;</pre>
<p><br />
For more information, see <a href="../../LabTalk/LabTalk/String_(object).html" title="LabTalk:String (object)">String Methods</a>.
</p>
<h3><a name="Concatenate_Strings"></a><span class="mw-headline">Concatenate Strings</span></h3>
<p>You can <span class="OIndex">concatenate string</span><span class="OIndex HasShownIndex" style="display:none">String Concatenation</span>s by using the '+' operator:
</p>
<pre class="lt" style="font-family:monospace;">string aa<span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;reading&quot;</span>;
string bb<span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;he likes &quot;</span> <span style="color: #000080;">+</span> aa<span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot; books&quot;</span>;
type <span style="color: #ff00ff;">&quot;He said &quot;</span> <span style="color: #000080;">+</span> bb<span style="color: #000080;">$</span>;</pre>
<p>You may also use the <b>insert</b> string method to concatenate two strings:
</p>
<pre class="lt" style="font-family:monospace;">string aa<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;Happy&quot;</span>;
string bb<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot; Go Lucky&quot;</span>;
<span style="color: #008000;">// insert the string 'aa' into string 'bb' at position 1 </span>
bb.<span style="color: #000080;">insert</span><span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span>,aa<span style="color: #000080;">$</span><span style="color: #000000;">&#41;</span>;            
bb<span style="color: #000080;">$</span><span style="color: #000080;">=</span>;</pre>
<p>For a complete listing and description of supported string methods, please see <a href="../../LabTalk/LabTalk/String_(object).html" title="LabTalk:String (object)">String (Object)</a>.
</p>





