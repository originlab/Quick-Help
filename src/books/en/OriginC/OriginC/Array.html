<h1 class="firstHeading">3.15.1 Array</h1><p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Auxiliary_Structure_and_Function"><span class="tocnumber">1</span> <span class="toctext">Auxiliary Structure and Function</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Access_data_objects"><span class="tocnumber">2</span> <span class="toctext">Access data objects</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Append_or_set_a_object"><span class="tocnumber">2.1</span> <span class="toctext">Append or set a object</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Get_and_set_an_object"><span class="tocnumber">2.2</span> <span class="toctext">Get and set an object</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Get_and_set_size"><span class="tocnumber">2.3</span> <span class="toctext">Get and set size</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Storage_relative"><span class="tocnumber">2.4</span> <span class="toctext">Storage relative</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><a name="Auxiliary_Structure_and_Function"></a><span class="mw-headline">Auxiliary Structure and Function</span></h2>
<p>Data structure and function in this section will be used in our example code. Make sure you have included &lt;Origin.h&gt; and &lt;Array.h&gt; before running these examples.
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>Origin.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span>
<span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>Array.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span></pre>
<ul><li>Structure used to hold data in our example code.</li></ul>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">class</span> POINTEX
<span style="color: #000000;">&#123;</span>
<span style="color: #0000ff;">public</span><span style="color: #000000;">:</span>
	POINTEX<span style="color: #000000;">&#40;</span><span style="color: #0000ff;">int</span> n<span style="color: #000000;">&#41;</span>
	<span style="color: #000000;">&#123;</span>
		m_n <span style="color: #000080;">=</span> n;
		<span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;Constructor<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span><span style="color: #000000;">&#41;</span>;
	<span style="color: #000000;">&#125;</span>
	
	~POINTEX<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
	<span style="color: #000000;">&#123;</span>
		<span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;Destructor, n =&#160;%d<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>, m_n<span style="color: #000000;">&#41;</span>;
	<span style="color: #000000;">&#125;</span>
	
	<span style="color: #0000ff;">int</span> m_n;
<span style="color: #000000;">&#125;</span>;</pre>
<ul><li>This function simply set the size of the array as 3 with values {1,2,3}</li></ul>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> _perpare_array<span style="color: #000000;">&#40;</span>Array<span style="color: #000080;">&lt;</span>POINTEX<span style="color: #000040;">&amp;</span><span style="color: #000080;">&gt;</span> <span style="color: #000040;">&amp;</span>myArray<span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>	
	<span style="color: #008000;">// Add elements to the array.</span>
	<span style="color: #0000ff;">int</span>		ii;
	<span style="color: #0000ff;">int</span>		nSize <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
	<span style="color: #0000ff;">for</span><span style="color: #000000;">&#40;</span>ii <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span>; ii <span style="color: #000080;">&lt;</span> nSize; ii<span style="color: #000040;">++</span><span style="color: #000000;">&#41;</span>
	<span style="color: #000000;">&#123;</span>		
		POINTEX		<span style="color: #000040;">*</span>pp <span style="color: #000080;">=</span> <span style="color: #0000ff;">new</span> POINTEX<span style="color: #000000;">&#40;</span>ii<span style="color: #000040;">+</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span>;
		myArray.<span style="color: #000000;">Add</span><span style="color: #000000;">&#40;</span><span style="color: #000040;">*</span>pp<span style="color: #000000;">&#41;</span>;
	<span style="color: #000000;">&#125;</span>	
<span style="color: #000000;">&#125;</span></pre>
<h2><a name="Access_data_objects"></a><span class="mw-headline">Access data objects</span></h2>
<h3><a name="Append_or_set_a_object"></a><span class="mw-headline">Append or set a object</span></h3>
<p>This example show how to add objects to the array
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #008000;">//Method 1:</span>
<span style="color: #008000;">// add at the end of the array</span>
<span style="color: #0000ff;">void</span>	Array_add_item_at_end<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	Array<span style="color: #000080;">&lt;</span>POINTEX<span style="color: #000040;">&amp;</span><span style="color: #000080;">&gt;</span> myArray;
	myArray.<span style="color: #000000;">SetAsOwner</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">true</span><span style="color: #000000;">&#41;</span>;
	_perpare_array<span style="color: #000000;">&#40;</span>myArray<span style="color: #000000;">&#41;</span>;
	
	POINTEX		<span style="color: #000040;">*</span>pObj <span style="color: #000080;">=</span> <span style="color: #0000ff;">new</span> POINTEX<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">211</span><span style="color: #000000;">&#41;</span>;
	myArray.<span style="color: #000000;">Add</span><span style="color: #000000;">&#40;</span><span style="color: #000040;">*</span>pObj<span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span>
<span style="color: #008000;">//Method 2:</span>
<span style="color: #008000;">// add at any place, might replace other object if the place is occupied already</span>
<span style="color: #0000ff;">void</span>	Array_set_or_add_one_item<span style="color: #000000;">&#40;</span> <span style="color: #0000ff;">int</span> nToSet <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span> <span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	Array<span style="color: #000080;">&lt;</span>POINTEX<span style="color: #000040;">&amp;</span><span style="color: #000080;">&gt;</span> myArray;
	myArray.<span style="color: #000000;">SetAsOwner</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">true</span><span style="color: #000000;">&#41;</span>;
	_perpare_array<span style="color: #000000;">&#40;</span>myArray<span style="color: #000000;">&#41;</span>;
	
	POINTEX		<span style="color: #000040;">*</span>pObj <span style="color: #000080;">=</span> <span style="color: #0000ff;">new</span> POINTEX<span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">200</span> <span style="color: #000000;">&#41;</span>;
	myArray.<span style="color: #000000;">SetAtGrow</span><span style="color: #000000;">&#40;</span> nToSet, <span style="color: #000040;">*</span>pObj <span style="color: #000000;">&#41;</span>;<span style="color: #008000;">//if nToSet is bigger than 2, Array will resize itself as to hold newly added object</span>
<span style="color: #000000;">&#125;</span></pre>
<h3><a name="Get_and_set_an_object"></a><span class="mw-headline">Get and set an object</span></h3>
<p>This example show how to get an object and modify its value
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #008000;">//Method 1:</span>
<span style="color: #008000;">// get object reference by Array::GetAt(int nIndex) and then modify this reference</span>
<span style="color: #0000ff;">void</span>	Array_modify_one_item_1<span style="color: #000000;">&#40;</span><span style="color: #0000ff;">int</span> nToModify <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	Array<span style="color: #000080;">&lt;</span>POINTEX<span style="color: #000040;">&amp;</span><span style="color: #000080;">&gt;</span> myArray;
	myArray.<span style="color: #000000;">SetAsOwner</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">true</span><span style="color: #000000;">&#41;</span>;
	_perpare_array<span style="color: #000000;">&#40;</span>myArray<span style="color: #000000;">&#41;</span>;
	
	POINTEX<span style="color: #000040;">&amp;</span>	obj <span style="color: #000080;">=</span> myArray.<span style="color: #000000;">GetAt</span><span style="color: #000000;">&#40;</span>nToModify<span style="color: #000000;">&#41;</span>;
	<span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span> obj <span style="color: #000000;">&#41;</span>
		obj.<span style="color: #000000;">m_n</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">100</span>;
<span style="color: #000000;">&#125;</span>

<span style="color: #008000;">//Method 2:</span>
<span style="color: #008000;">// create a new object and set it to Array to replace old item, Array::SetAt will destruct old object firstly whatever Set Owner TRUE or FALSE</span>
<span style="color: #0000ff;">void</span>	Array_modify_one_item_2<span style="color: #000000;">&#40;</span><span style="color: #0000ff;">int</span> nToModify <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	Array<span style="color: #000080;">&lt;</span>POINTEX<span style="color: #000040;">&amp;</span><span style="color: #000080;">&gt;</span> myArray;
	myArray.<span style="color: #000000;">SetAsOwner</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">true</span><span style="color: #000000;">&#41;</span>;
	_perpare_array<span style="color: #000000;">&#40;</span>myArray<span style="color: #000000;">&#41;</span>;
	
	POINTEX		<span style="color: #000040;">*</span>pNew <span style="color: #000080;">=</span> <span style="color: #0000ff;">new</span> POINTEX<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">100</span><span style="color: #000000;">&#41;</span>;	
	myArray.<span style="color: #000000;">SetAt</span><span style="color: #000000;">&#40;</span>nToModify, <span style="color: #000040;">*</span>pNew<span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span></pre>
<h3><a name="Get_and_set_size"></a><span class="mw-headline">Get and set size</span></h3>
<p>This example show how to get and set the size of the array
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #008000;">//////////////// Get the size of this list ////////////////</span>
<span style="color: #0000ff;">void</span>	Array_get_size_of_the_array<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	Array<span style="color: #000080;">&lt;</span>POINTEX<span style="color: #000040;">&amp;</span><span style="color: #000080;">&gt;</span> myArray;
	myArray.<span style="color: #000000;">SetAsOwner</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">true</span><span style="color: #000000;">&#41;</span>;
	_perpare_array<span style="color: #000000;">&#40;</span>myArray<span style="color: #000000;">&#41;</span>;

	<span style="color: #0000ff;">int</span> nSize <span style="color: #000080;">=</span> myArray.<span style="color: #000000;">GetSize</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
	<span style="color: #000000;">ASSERT</span><span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">3</span> <span style="color: #000080;">==</span> nSize <span style="color: #000000;">&#41;</span>;
	
	POINTEX		<span style="color: #000040;">*</span>pObj <span style="color: #000080;">=</span> <span style="color: #0000ff;">new</span> POINTEX<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">20</span><span style="color: #000000;">&#41;</span>;
	myArray.<span style="color: #000000;">Add</span><span style="color: #000000;">&#40;</span> <span style="color: #000040;">*</span>pObj <span style="color: #000000;">&#41;</span>;
	nSize <span style="color: #000080;">=</span> myArray.<span style="color: #000000;">GetSize</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;<span style="color: #008000;">//nSize should be 4</span>
	<span style="color: #000000;">ASSERT</span><span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">4</span> <span style="color: #000080;">==</span> nSize <span style="color: #000000;">&#41;</span>;
	
	POINTEX		<span style="color: #000040;">*</span>pObjTwo <span style="color: #000080;">=</span> <span style="color: #0000ff;">new</span> POINTEX<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">22</span><span style="color: #000000;">&#41;</span>;
	myArray.<span style="color: #000000;">SetAtGrow</span><span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">8</span>, <span style="color: #000040;">*</span>pObjTwo <span style="color: #000000;">&#41;</span>;
	nSize <span style="color: #000080;">=</span> myArray.<span style="color: #000000;">GetSize</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;<span style="color: #008000;">//nSize should be 9 since we added an object to the place indexed as 8 and array resize itself as 9</span>
	<span style="color: #000000;">ASSERT</span><span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">9</span> <span style="color: #000080;">==</span> nSize <span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span>

<span style="color: #008000;">//////////////// Set the size of this list ////////////////</span>
<span style="color: #0000ff;">void</span>	Array_set_size_of_the_array<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	Array<span style="color: #000080;">&lt;</span>POINTEX<span style="color: #000040;">&amp;</span><span style="color: #000080;">&gt;</span> myArray;
	myArray.<span style="color: #000000;">SetAsOwner</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">true</span><span style="color: #000000;">&#41;</span>;
	_perpare_array<span style="color: #000000;">&#40;</span>myArray<span style="color: #000000;">&#41;</span>;

	myArray.<span style="color: #000000;">SetSize</span><span style="color: #000000;">&#40;</span><span style="color: #0000dd;">8</span><span style="color: #000000;">&#41;</span>;<span style="color: #008000;">// following code myArray.GetSize() should return 8 after set size here</span>
	<span style="color: #000000;">ASSERT</span><span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">8</span> <span style="color: #000080;">==</span> myArray.<span style="color: #000000;">GetSize</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#41;</span>;
	
	myArray.<span style="color: #000000;">SetSize</span><span style="color: #000000;">&#40;</span><span style="color: #0000dd;">2</span><span style="color: #000000;">&#41;</span>;<span style="color: #008000;">// myArray.GetSize() should return 2 following this line</span>
	<span style="color: #000000;">ASSERT</span><span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">2</span> <span style="color: #000080;">==</span> myArray.<span style="color: #000000;">GetSize</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#41;</span>;
	
<span style="color: #000000;">&#125;</span></pre>
<h3><a name="Storage_relative"></a><span class="mw-headline">Storage relative</span></h3>
<p>If set array as the owner, objects in it will be deleted when destructor of Array is called or on reducing the size of the array
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #008000;">//////////////// Set the list as the owner of objects' memory ////////////////</span>
<span style="color: #0000ff;">void</span>	Array_set_as_owner<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	Array<span style="color: #000080;">&lt;</span>POINTEX<span style="color: #000040;">&amp;</span><span style="color: #000080;">&gt;</span> myArray;
	myArray.<span style="color: #000000;">SetAsOwner</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">true</span><span style="color: #000000;">&#41;</span>;
	_perpare_array<span style="color: #000000;">&#40;</span>myArray<span style="color: #000000;">&#41;</span>;

	<span style="color: #0000ff;">BOOL</span> bOwner <span style="color: #000080;">=</span> <span style="color: #0000ff;">TRUE</span>;
	myArray.<span style="color: #000000;">SetAsOwner</span><span style="color: #000000;">&#40;</span> bOwner <span style="color: #000000;">&#41;</span>;<span style="color: #008000;">//following myArray.IsOwner() should return true if this function is called successfully</span>
	<span style="color: #000000;">ASSERT</span><span style="color: #000000;">&#40;</span> myArray.<span style="color: #000000;">IsOwner</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#41;</span>;
	
	bOwner <span style="color: #000080;">=</span> <span style="color: #0000ff;">FALSE</span>;
	myArray.<span style="color: #000000;">SetAsOwner</span><span style="color: #000000;">&#40;</span> bOwner <span style="color: #000000;">&#41;</span>;<span style="color: #008000;">//following myArray.IsOwner() should return false;</span>
	<span style="color: #000000;">ASSERT</span><span style="color: #000000;">&#40;</span> <span style="color: #000040;">!</span>myArray.<span style="color: #000000;">IsOwner</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span> <span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span></pre>






