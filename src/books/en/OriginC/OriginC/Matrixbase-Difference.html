<h1 class="firstHeading">2.2.3.9.14 matrixbase::Difference</h1><p><span class="OIndex" style="display:none">Difference</span>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Syntax"><span class="tocnumber">2</span> <span class="toctext">Syntax</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Return"><span class="tocnumber">4</span> <span class="toctext">Return</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Remark"><span class="tocnumber">6</span> <span class="toctext">Remark</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#See_Also"><span class="tocnumber">7</span> <span class="toctext">See Also</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Header_to_Include"><span class="tocnumber">8</span> <span class="toctext">Header to Include</span></a></li>
</ul>
</div>

<h2><a name="Description"></a><span class="mw-headline">Description</span></h2>
<p>Compute the N-th order row wise or column wise difference of the elements in this matrix.
</p>
<h2><a name="Syntax"></a><span class="mw-headline">Syntax</span></h2>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">int</span> Difference<span style="color: #000000;">&#40;</span> matrixbase <span style="color: #000040;">&amp;</span> mbDifference, <span style="color: #0000ff;">int</span> nOrder <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span>, <span style="color: #0000ff;">int</span> nDim <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span> <span style="color: #000000;">&#41;</span></pre>
<h2><a name="Parameters"></a><span class="mw-headline">Parameters</span></h2>
<dl><dt> mbDifference</dt>
<dd>[output] The result matrix containing the difference</dd>
<dt> nOrder</dt>
<dd>[input] The order of difference to compute, default is 1</dd>
<dt> nDim</dt>
<dd>[input] The Difference function can operate row wise (relative to the first dimension when nDim=1) or column wise (relative to the second dimension when nDim=2), default is 1 or row wise</dd></dl>
<h2><a name="Return"></a><span class="mw-headline">Return</span></h2>
<p>Returns 0 on success and a non-zero error code on failure.
</p>
<h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>
<p><b>EX1</b>
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">void</span> matrixbase_Difference_ex1<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
    matrix mat1 <span style="color: #000080;">=</span> <span style="color: #000000;">&#123;</span>
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">2</span>,  <span style="color: #0000dd;">4</span>,  <span style="color: #0000dd;">6</span><span style="color: #000000;">&#125;</span>,
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">3</span>,  <span style="color: #0000dd;">7</span>, <span style="color: #0000dd;">11</span><span style="color: #000000;">&#125;</span>,
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">5</span>, <span style="color: #0000dd;">11</span>, <span style="color: #0000dd;">17</span><span style="color: #000000;">&#125;</span>
    <span style="color: #000000;">&#125;</span>;
    <span style="color: #0000ff;">int</span> rc <span style="color: #000080;">=</span> mat1.<span style="color: #000000;">Difference</span><span style="color: #000000;">&#40;</span> mat1 <span style="color: #000000;">&#41;</span>;
    <span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span>rc<span style="color: #000040;">!</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span><span style="color: #000000;">&#41;</span> 
        <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;Error: Difference failed. rc=%d<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>, rc<span style="color: #000000;">&#41;</span>; 
    <span style="color: #0000ff;">else</span><span style="color: #000000;">&#123;</span>
    	<span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;The matrix is:<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span><span style="color: #000000;">&#41;</span>;
        <span style="color: #0000ff;">for</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">int</span> ii<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>; ii<span style="color: #000080;">&lt;</span> mat1.<span style="color: #000000;">GetNumRows</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; ii<span style="color: #000040;">++</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#123;</span>
			<span style="color: #0000ff;">for</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">int</span> jj<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>; jj<span style="color: #000080;">&lt;</span> mat1.<span style="color: #000000;">GetNumCols</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>; jj<span style="color: #000040;">++</span><span style="color: #000000;">&#41;</span> 
				<span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;%g  &quot;</span>, mat1<span style="color: #000000;">&#91;</span>ii<span style="color: #000000;">&#93;</span><span style="color: #000000;">&#91;</span>jj<span style="color: #000000;">&#93;</span><span style="color: #000000;">&#41;</span>;
			<span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;<span style="color: #666666; font-weight: bold;">\r</span><span style="color: #666666; font-weight: bold;">\n</span>&quot;</span><span style="color: #000000;">&#41;</span>;
        <span style="color: #000000;">&#125;</span>
    <span style="color: #000000;">&#125;</span>
<span style="color: #000000;">&#125;</span></pre>
<p><b>EX2</b>
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #008000;">// Compute nth-order difference of a matrix</span>
<span style="color: #0000ff;">#define</span> MAKEMAT<span style="color: #000000;">&#40;</span>X<span style="color: #000000;">&#41;</span> MatrixLayer MatLy##X;MatLy##X.<span style="color: #000000;">Create</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;Matrix Mat##X<span style="color: #000000;">&#40;</span>MatLy##X<span style="color: #000000;">&#41;</span>
<span style="color: #0000ff;">void</span> matrixbase_Difference_ex2<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
    <span style="color: #0000ff;">int</span> rc;
 
    matrix mat1 <span style="color: #000080;">=</span> <span style="color: #000000;">&#123;</span>
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">2</span>,  <span style="color: #0000dd;">4</span>,  <span style="color: #0000dd;">6</span><span style="color: #000000;">&#125;</span>,
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">3</span>,  <span style="color: #0000dd;">7</span>, <span style="color: #0000dd;">11</span><span style="color: #000000;">&#125;</span>,
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">5</span>, <span style="color: #0000dd;">11</span>, <span style="color: #0000dd;">17</span><span style="color: #000000;">&#125;</span>
    <span style="color: #000000;">&#125;</span>;
 
    MAKEMAT<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span>; MAKEMAT<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">2</span><span style="color: #000000;">&#41;</span>; MAKEMAT<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">3</span><span style="color: #000000;">&#41;</span>; MAKEMAT<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">4</span><span style="color: #000000;">&#41;</span>;
 
    Mat1<span style="color: #000080;">=</span>mat1;
    <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;  Original matrix is&#160;%s.<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;
 
    rc<span style="color: #000080;">=</span>mat1.<span style="color: #000000;">Difference</span><span style="color: #000000;">&#40;</span>Mat2<span style="color: #000000;">&#41;</span>;
    <span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span>rc<span style="color: #000040;">!</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span><span style="color: #000000;">&#41;</span> 
        <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;  Error: 1st order difference on&#160;%s failed.<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;
    <span style="color: #0000ff;">else</span>
        <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;  1st order differential of&#160;%s is in&#160;%s<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>,
          Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>,Mat2.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;
 
    rc<span style="color: #000080;">=</span>mat1.<span style="color: #000000;">Difference</span><span style="color: #000000;">&#40;</span>Mat3,<span style="color: #0000dd;">2</span><span style="color: #000000;">&#41;</span>;
    <span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span>rc<span style="color: #000040;">!</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span><span style="color: #000000;">&#41;</span> 
        <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;  Error: 2nd order difference on&#160;%s failed.<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;
    <span style="color: #0000ff;">else</span> 
        <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;  2nd order differential of&#160;%s is in&#160;%s<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>,
          Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>,Mat3.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;
 
<span style="color: #008000;">//    rc=mat1.Difference(Mat4,3);</span>
<span style="color: #008000;">//    If nOrder is setted as 3, a Command Error will occur.</span>
<span style="color: #000000;">&#125;</span></pre>
<p><b>EX3</b>
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">#define</span> MAKEMAT<span style="color: #000000;">&#40;</span>X<span style="color: #000000;">&#41;</span> MatrixLayer MatLy##X;MatLy##X.<span style="color: #000000;">Create</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;Matrix Mat##X<span style="color: #000000;">&#40;</span>MatLy##X<span style="color: #000000;">&#41;</span>

<span style="color: #0000ff;">void</span> matrixbase_Difference_ex3<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>

<span style="color: #000000;">&#123;</span>
    matrix mat1 <span style="color: #000080;">=</span> <span style="color: #000000;">&#123;</span>
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">4</span>, <span style="color: #0000dd;">6</span><span style="color: #000000;">&#125;</span>,
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">3</span>, <span style="color: #0000dd;">7</span>, <span style="color: #0000dd;">11</span><span style="color: #000000;">&#125;</span>,
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">5</span>, <span style="color: #0000dd;">11</span>, <span style="color: #0000dd;">17</span><span style="color: #000000;">&#125;</span>
    <span style="color: #000000;">&#125;</span>;

    matrix mat2 <span style="color: #000080;">=</span> <span style="color: #000000;">&#123;</span>
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">3</span><span style="color: #000000;">&#125;</span>,
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">3</span><span style="color: #000000;">&#125;</span>,
        <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">3</span><span style="color: #000000;">&#125;</span>
    <span style="color: #000000;">&#125;</span>;

    MAKEMAT<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span>; MAKEMAT<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">2</span><span style="color: #000000;">&#41;</span>; MAKEMAT<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">3</span><span style="color: #000000;">&#41;</span>; MAKEMAT<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">4</span><span style="color: #000000;">&#41;</span>; MAKEMAT<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">5</span><span style="color: #000000;">&#41;</span>;

    Mat1<span style="color: #000080;">=</span>mat1; Mat2<span style="color: #000080;">=</span>mat2;

    Mat3<span style="color: #000080;">=</span>mat1<span style="color: #000040;">-</span>mat2;
    <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;%s =&#160;%s -&#160;%s &lt;== element-wise subtraction of 2 matrices<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>,Mat3.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>,Mat2.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;


    Mat4<span style="color: #000080;">=</span>mat1<span style="color: #000040;">-</span><span style="color: #0000dd;">2</span>;
    <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;%s =&#160;%s - 2 &lt;== Scaler subtraction of a matrix<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>,Mat4.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;

    mat1.<span style="color: #000000;">Difference</span><span style="color: #000000;">&#40;</span>Mat5<span style="color: #000000;">&#41;</span>;
    <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;%s = Difference(%s) &lt;== difference of adjacent 2 rows in a matrix (1st order differential)<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>,Mat5.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span></pre>
<h2><a name="Remark"></a><span class="mw-headline">Remark</span></h2>
<p>Compute the N-th order row wise or column wise difference of the elements in this matrix. The difference matrix is computed by replacing the current element with the current element minus the previous element along the dimension specified by nDim. The N-th order difference approximates the N-th order derivative. If nOrder is greater than or equal to the size of the dimension identified by nDim than an empty matrix is returned. The underlying base type of this matrix and the result matrix must be the same.
</p><p><br />
</p><p>Note
</p><p>The following is a summary of various matrix operations:
</p><p>1) Multiplication:
</p><p>1-1) * ... Proper multiplication of 2 matrices (mat1*mat2)
</p><p>1-2) * ... Scaler multiplication of a matrix (mat1*A or A*mat1)
</p><p>1-3) DotMultiply ... Element-wise multiplication of 2 matrices
</p><p>1-4) Cross ... Cross product of 2 matrices
</p><p>1-5) CumulativeProduct ... cumulative product of a matrix
</p><p>2) Division:
</p><p>2-1) / ... Not defined for 2 matrices. For proper division, multiply Inverse(mat1)
</p><p>2-2) / ... Scaler division of a matrix (mat1/A)
</p><p>2-3) DotDivide ...  Element-wise division of 2 matrices
</p><p>3) Addition:
</p><p>3-1) + ... Element-wise addition of 2 matrices
</p><p>3-2) + ... Scaler addition of a matrix (mat1+A or A+mat1)
</p><p>3-3) SumColumns ... Summation of each column in a matrix
</p><p>3-4) CumulativeSum ... Cumulative product of a matrix
</p><p>4) Subtraction:
</p><p>4-1) - ... Element-wise subtraction of 2 matrices
</p><p>4-2) - ... Scaler subtraction of a matrix (mat1-A or A-mat1)
</p><p>4-3) Difference ... Difference of adjacent 2 rows in a matrix (1st order differential)
</p><p>5) Power:
</p><p>5-1) ^ (or pow) ... Not defined as element-wise power of 2 matrices
</p><p>5-2) ^ (or pow) ... Not defined as scaler power of a matrix
</p><p>5-3) DotPower ... Element-wise power of 2 matrices
</p><p>To depict the differences of above subtractions, try the EX2.
</p>
<h2><a name="See_Also"></a><span class="mw-headline">See Also</span></h2>
<h2><a name="Header_to_Include"></a><span class="mw-headline">Header to Include</span></h2>
<p>origin.h
</p>





