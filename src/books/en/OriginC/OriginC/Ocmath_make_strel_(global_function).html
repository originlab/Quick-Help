<h1 class="firstHeading">2.1.12.5.3 ocmath_make_strel</h1><p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Syntax"><span class="tocnumber">2</span> <span class="toctext">Syntax</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Return"><span class="tocnumber">4</span> <span class="toctext">Return</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Remark"><span class="tocnumber">6</span> <span class="toctext">Remark</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#See_Also"><span class="tocnumber">7</span> <span class="toctext">See Also</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Header_to_Include"><span class="tocnumber">8</span> <span class="toctext">Header to Include</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Reference"><span class="tocnumber">9</span> <span class="toctext">Reference</span></a></li>
</ul>
</div>

<h2><a name="Description"></a><span class="mw-headline">Description</span></h2>
<p>Create a morphological structuring element by users selection.
</p>
<h2><a name="Syntax"></a><span class="mw-headline">Syntax</span></h2>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">int</span> ocmath_make_strel<span style="color: #000000;">&#40;</span> StrelResult <span style="color: #000040;">*</span> pStrel, StrelParams <span style="color: #000040;">*</span> psParams, UINT nShape <span style="color: #000080;">=</span> SQUARE_SHAPE <span style="color: #000000;">&#41;</span></pre>
<h2><a name="Parameters"></a><span class="mw-headline">Parameters</span></h2>
<dl><dt> pStrel</dt>
<dd>[output]pointer to the object of structure StrelResult. StrelResult defines a morphological structuring element.</dd>
<dd>It has 4 elements:</dd>
<dd>pNHoodMat: pointer to neighborhood matrix. The neighborhood matrix specifies the neighborhood.</dd>
<dd>pHeightMat: pointer to height matrix. The height matrix must be real and finite valued and same size as the neighborhood matrix.</dd>
<dd>When it is NULL or all cells of it equals 0, se is flat structuring element, or else nonflat.</dd>
<dd>nRows: the row number of matrix;</dd>
<dd>nCols: the column number of matrix;</dd>
<dt> psParams</dt>
<dd>[input] pointer to the object of structure StrelParams. StrelParams defines different parameters for different shape pStrel will be created.</dd>
<dd>					 nShape = ARBITRARY_SHAPE: must set nRows, nCols, pNHood and pHeight. pNHood is a pointer to neighborhood matrix, which specifies the neighborhood.</dd></dl>
<p>							pHeight is a pointer to height matrix, which must be real and finite valued and same size as the neighborhood matrix. 
							When pHeight is NULL or all cells of it equals 0, the function will create a flat morphological structuring element, or else nonflat.  
							nRows is row number of matrix; nCols is column number of matrix.
</p>
<dl><dd>					 nShape = RECTANGLE_SHAPE: must set nRows and nCols. </dd></dl>
<p>							Creates a flat, rectangle-shaped structuring element, where nRows and nCols specifies the size. nRows and nCols must be nonnegative integers. nRows is the number of rows in the structuring element neighborhood; nCols is the number of columns.
</p>
<dl><dd>					 nShape = SQUARE_SHAPE: must set nWidth, the structuring element matrix's row and column number are all nWidth. </dd></dl>
<p>							Creates a square structuring element whose width is nWidth pixels. nWidth must be a nonnegative integer. 
</p>
<dl><dd>					 nShape = DIAMOND_SHAPE: must set nRadius, the structuring element matrix's row and column number are all 2*nRadius+1. </dd></dl>
<p>							Creates a flat, diamond-shaped structuring element, where nRadius specifies the distance from the structuring element origin to the points of the diamond. nRadius must be a nonnegative integer scalar. 
</p>
<dl><dd>					 nShape = OCTAGON_SHAPE: must set nRadius, the structuring element matrix's row and column number are all 2*nRadius+1. </dd></dl>
<p>							Creates a flat, octagonal structuring element, where nRadius specifies the distance from the structuring element origin to the sides of the octagon, as measured along the horizontal and vertical axes. nRadius must be a nonnegative multiple of 3.
</p>
<dl><dd>					 nShape = PAIR_SHAPE: must set rowOffset and colOffset, the structuring element matrix's row and column number are 2*abs(rowOffset)+1 and 2*abs(colOffset)+1. </dd></dl>
<p>							Creates a flat structuring element containing two members. One member is located at the origin. The second member's location is specified by rowOffset and colOffset. rowOffset and colOffset must be integers.
</p>
<dl><dd>					 nShape = LINE_SHAPE: must set nLen and thetaDeg, the structuring element matrix's row and column number are specified by 2*abs(round(1.0*(nlen-1)/2*cos(theta)))+1 and 2*abs(round(-1.0*(nlen-1)/2*sin(theta)))+1.</dd></dl>
<p>							Creates a flat, linear structuring element, where nLen specifies the length, and thetaDeg specifies the angle (in degrees) of the line, as measured in a counterclockwise direction from the horizontal axis. nLen is approximately the distance between the centers of the structuring element members at opposite ends of the line. 
</p>
<dl><dd>					 nShape = PERIODICLINE_SHAPE: we must set nP,  rowOffset and colOffset, the structuring element matrix's row and column number are 2*[nP*abs(rowOffset)]+1 and 2*[nP*abs(colOffset)]+1.</dd></dl>
<p>							Creates a flat structuring element containing 2*nP+1 members. rowOffset and colOffset are integer-valued row and column offsets. One structuring element member is located at the origin. The other members are located at 1*(rowOffset, colOffset), -1*(rowOffset, colOffset), 2*(rowOffset, colOffset), -2*(rowOffset, colOffset), ..., p*(rowOffset, colOffset), -p*(rowOffset, colOffset). 
</p>
<dl><dd>It has 11 elements: nRows, nCols, pNHood, pHeight, nWidth, nRadius,rowOffset,colOffset, nP, nLen and thetaDeg.</dd>
<dt> nShape</dt>
<dd>[input] the type of morphological structuring element, there are 8 types: ARBITRARY_SHAPE, DIAMOND_SHAPE, </dd></dl>
<p>					 LINE_SHAPE, OCTAGON_SHAPE, PAIR_SHAPE, PERIODICLINE_SHAPE, RECTANGLE_SHAPE and SQUARE_SHAPE
</p>
<h2><a name="Return"></a><span class="mw-headline">Return</span></h2>
<p>Returns 0 on success and a non-zero error code on failure.
</p>
<h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>
<p><b>EX1</b>
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">void</span> matrixbase_ImDilate_ex1<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
    matrix matData <span style="color: #000080;">=</span> <span style="color: #000000;">&#123;</span><span style="color: #000000;">&#123;</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">&#125;</span>,
                      <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span>,<span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">&#125;</span>,
                      <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">2</span>,<span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">4</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">&#125;</span>,
                      <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">4</span>,<span style="color: #0000dd;">5</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">&#125;</span>,
                      <span style="color: #000000;">&#123;</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">&#125;</span><span style="color: #000000;">&#125;</span>;

    matrix matHood <span style="color: #000080;">=</span>  <span style="color: #000000;">&#123;</span><span style="color: #000000;">&#123;</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">&#125;</span>,<span style="color: #000000;">&#123;</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span>,<span style="color: #0000dd;">1</span><span style="color: #000000;">&#125;</span>,<span style="color: #000000;">&#123;</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">&#125;</span><span style="color: #000000;">&#125;</span>;
    matrix matHeight;
    matHeight <span style="color: #000080;">=</span> matHood;
    StrelParams sp;
    sp.<span style="color: #000000;">nRows</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
    sp.<span style="color: #000000;">nCols</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
    sp.<span style="color: #000000;">pNHood</span> <span style="color: #000080;">=</span> matHood;
    sp.<span style="color: #000000;">pHeight</span> <span style="color: #000080;">=</span> matHeight;
        
    matrix mNHood, mHeight;
    mNHood.<span style="color: #000000;">SetSize</span><span style="color: #000000;">&#40;</span><span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">3</span><span style="color: #000000;">&#41;</span>;
    mHeight.<span style="color: #000000;">SetSize</span><span style="color: #000000;">&#40;</span><span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">3</span><span style="color: #000000;">&#41;</span>;
    StrelResult se;
    se.<span style="color: #000000;">nRows</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
    se.<span style="color: #000000;">nCols</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
    se.<span style="color: #000000;">pNHoodMat</span> <span style="color: #000080;">=</span> mNHood;
    se.<span style="color: #000000;">pHeightMat</span> <span style="color: #000080;">=</span> mHeight;
    <span style="color: #0000ff;">int</span> nRet <span style="color: #000080;">=</span> ocmath_make_strel<span style="color: #000000;">&#40;</span><span style="color: #000040;">&amp;</span>se, <span style="color: #000040;">&amp;</span>sp, ARBITRARY_SHAPE<span style="color: #000000;">&#41;</span>;
    <span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span>nRet <span style="color: #000040;">!</span><span style="color: #000080;">=</span> OE_NOERROR<span style="color: #000000;">&#41;</span>
    <span style="color: #000000;">&#123;</span>
        <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;  Error: Make strel failed. Error Code=%d<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>, nRet<span style="color: #000000;">&#41;</span>;
        <span style="color: #0000ff;">return</span>;
    <span style="color: #000000;">&#125;</span>
<span style="color: #000000;">&#125;</span></pre>
<h2><a name="Remark"></a><span class="mw-headline">Remark</span></h2>
<h2><a name="See_Also"></a><span class="mw-headline">See Also</span></h2>
<h2><a name="Header_to_Include"></a><span class="mw-headline">Header to Include</span></h2>
<p>origin.h
</p>
<h2><a name="Reference"></a><span class="mw-headline">Reference</span></h2>






