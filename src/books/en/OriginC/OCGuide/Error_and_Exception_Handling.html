<h1 class="firstHeading">1.2.6 Error and Exception Handling</h1><p><span class="OIndex" style="display:none">Exception Handling</span>
Origin C supports C++ exception handling using the <span class="OIndex" style="display:none">try-catch Statement</span><b>try</b>, <b>catch</b>, and <b>throw</b><span class="OIndex" style="display:none">throw Statement</span> statements.
</p><p>The try block consists of the <b>try</b> keyword followed by one or more statements enclosed in braces.  Immediately after the try block is the catch handler.  Origin C supports only a single catch handler that accepts an <i>integer</i> argument.  After the <b>catch</b> keyword comes one or more statements enclosed in braces.
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">try</span>
<span style="color: #000000;">&#123;</span>
    LPSTR lpdest <span style="color: #000080;">=</span> <span style="color: #0000ff;">NULL</span>;    <span style="color: #008000;">// NULL pointer on purpose</span>
    <span style="color: #000000;">strcpy</span><span style="color: #000000;">&#40;</span>lpdest, <span style="color: #ff00ff;">&quot;Test&quot;</span><span style="color: #000000;">&#41;</span>; <span style="color: #008000;">// copy to NULL pointer to cause error</span>
<span style="color: #000000;">&#125;</span>
<span style="color: #0000ff;">catch</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">int</span> nErr<span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
    out_int<span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;Error = &quot;</span>, nErr<span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span></pre>
<p>The try-catch works by executing the statements in the try block.  If an error occurs, the execution will jump to the catch block.  If no error occurs then the catch block is ignored.
</p><p>The throw keyword is optional and is used to trigger an error and cause execution to jump to the catch block. 
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">void</span> TryCatchThrowEx<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
    <span style="color: #0000ff;">try</span>
    <span style="color: #000000;">&#123;</span>
        DoSomeWork<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">4</span><span style="color: #000000;">&#41;</span>;  <span style="color: #008000;">// pass a valid number to show success</span>
        DoSomeWork<span style="color: #000000;">&#40;</span><span style="color: #000040;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">&#41;</span>; <span style="color: #008000;">// pass an invalid number to cause error</span>
    <span style="color: #000000;">&#125;</span>
    <span style="color: #0000ff;">catch</span><span style="color: #000000;">&#40;</span><span style="color: #0000ff;">int</span> iErr<span style="color: #000000;">&#41;</span>
    <span style="color: #000000;">&#123;</span>
        <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;Error code =&#160;%d<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>, iErr<span style="color: #000000;">&#41;</span>;
    <span style="color: #000000;">&#125;</span>
<span style="color: #000000;">&#125;</span> 
<span style="color: #0000ff;">void</span> DoSomeWork<span style="color: #000000;">&#40;</span><span style="color: #0000ff;">double</span> num<span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
    <span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span> num <span style="color: #000080;">&lt;</span> <span style="color: #0000dd;">0</span> <span style="color: #000000;">&#41;</span>
        <span style="color: #0000ff;">throw</span> <span style="color: #0000dd;">100</span>; <span style="color: #008000;">// Force error</span>
    <span style="color: #0000ff;">if</span><span style="color: #000000;">&#40;</span> <span style="color: #0000dd;">0</span> <span style="color: #000080;">==</span> num <span style="color: #000000;">&#41;</span>
        <span style="color: #0000ff;">throw</span> <span style="color: #0000dd;">101</span>; <span style="color: #008000;">// Force error</span>

    <span style="color: #0000ff;">double</span> result <span style="color: #000080;">=</span> <span style="color: #000000;">sqrt</span><span style="color: #000000;">&#40;</span>num<span style="color: #000000;">&#41;</span> <span style="color: #000040;">/</span> <span style="color: #000000;">log</span><span style="color: #000000;">&#40;</span>num<span style="color: #000000;">&#41;</span>;
    <span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;sqrt(%f) / log(%f) =&#160;%g<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>, num, num, result<span style="color: #000000;">&#41;</span>; 
<span style="color: #000000;">&#125;</span></pre>






