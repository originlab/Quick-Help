<h1 class="firstHeading">1.4.5 Distributing Origin C Code</h1><p><br />
</p>
<h2><a name="Distributing_Source_CodeDistributing_CodeShare_Code"></a><span class="mw-headline">Distributing Source Code<span class="OIndex" style="display:none">Distributing Code</span><span class="OIndex" style="display:none">Share Code</span></span></h2>
<p>Origin users can share Origin C source code with one another by distributing either the source files themselves (.C, .CPP, .OCZ) or preprocessed files (.OP).
</p><p>If it is not necessary for others to see your application's source code, it is highly recommended that you distribute the encrypted Origin C source files (.OCZ)  or preprocessed files (.OP) for version before Origin 2015 instead of the source files (.C or .CPP). 
</p><p>For encrypted OCZ files, users only need to drag and drop them into <a href="../../OriginC/Category/Code_Builder.html" title="Category:Code Builder">Code Builder</a> in Origin to view and edit content. A prompt will show up to ask for the password when you try to open it for the first time but it will be only asked once in same Origin session.
</p><p>See the <a href="../../OriginC/OCGuide/Create_and_Edit_an_Origin_C_File.html#File_Types" title="OCGuide:Create and Edit an Origin C File">File Types</a> in the <b>Create and Edit an Origin C File</b> section for more information.
</p>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Distributing_Origin_C_Code/Tip_icon.png?v=21427" width="57"  border="0" /></td><td><p>When an encrypted OCZ file is open in Origin session, since Origin 2016 SR0 user can choose to re-save the *.ocz file as not encrypted *.c or *.cpp by selecting menu <b>File: Save As</b> and choose a file type in <b>Save as type</b> drop-down list.
</p></td></tr></table>
<h2><a name="Distributing_Applications"></a><span class="mw-headline">Distributing Applications</span></h2>
<p>After creating an application, you can distribute it as a single package file to other Origin users.
</p><p>Use <b>Package Manager</b> to package all the application files into a single package file (.OPX)<span class="OIndex" style="display:none">Package Files</span>.  Note that when adding your application files into the package, be sure to add the preprocessed files (.OP) or the source files (.C or .CPP).  It is not necessary to add both.  
</p><p>Users can install your application by dropping the package file directly into Origin.
</p><p>The following is an example that shows how to package all the application files into one OPX file. The user can drop the package file into Origin to install, then click a button to run the source file.
</p>
<ol>
<li>Prepare an Origin C source file. In <b>Code Builder</b>, choose menu <b>File: New</b> to create a new c file named <i>MyButton.c</i>, copy the following code to it and save it to the <i>User File Folder\OriginC\</i> subfolder.
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">void</span> OnButtonClick<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>          
<span style="color: #000000;">&#123;</span>
	Worksheet wks <span style="color: #000080;">=</span> Project.<span style="color: #000000;">ActiveLayer</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
	
	DataRange dr;
	dr.<span style="color: #000000;">Add</span><span style="color: #000000;">&#40;</span>wks, <span style="color: #0000dd;">0</span>, <span style="color: #ff00ff;">&quot;X&quot;</span><span style="color: #000000;">&#41;</span>;
	dr.<span style="color: #000000;">Add</span><span style="color: #000000;">&#40;</span>wks, <span style="color: #0000dd;">1</span>, <span style="color: #ff00ff;">&quot;Y&quot;</span><span style="color: #000000;">&#41;</span>;
	
	GraphPage gp;
	gp.<span style="color: #000000;">Create</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
	GraphLayer gl <span style="color: #000080;">=</span> gp.<span style="color: #000000;">Layers</span><span style="color: #000000;">&#40;</span><span style="color: #0000dd;">0</span><span style="color: #000000;">&#41;</span>;
	
	<span style="color: #0000ff;">int</span> nn <span style="color: #000080;">=</span> gl.<span style="color: #000000;">AddPlot</span><span style="color: #000000;">&#40;</span>dr<span style="color: #000000;">&#41;</span>;
	gl.<span style="color: #000000;">Rescale</span><span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span></pre>
</li>
<li>Create an OGS file named <i>MyButton.ogs</i> to load the Origin C source file and call function. Copy the following and save it to the User File Folder.
<pre class="lt" style="font-family:monospace;"><span style="color: #000000;">&#91;</span>Main<span style="color: #000000;">&#93;</span>
	if<span style="color: #000000;">&#40;</span><span style="color: #0000dd;">0</span> <span style="color: #000080;">==</span> Run.<span style="color: #000080;">LoadOC</span><span style="color: #000000;">&#40;</span><span style="color: #000080;">%</span>Y\OriginC\MyButton.<span style="color: #000080;">c</span><span style="color: #000000;">&#41;</span><span style="color: #000000;">&#41;</span>
	<span style="color: #000000;">&#123;</span>
		OnButtonClick;
	<span style="color: #000000;">&#125;</span></pre></li>
<li>
In the Origin menu, choose <b>View: Toolbars</b>. In the <b>Customize Toolbar</b> dialog, choose the <b>Button Groups</b> tab, and click <b>New</b> button to open the <b>Create Button Group</b> dialog. Set <i>MyButton</i> as the <b>Group Name</b>, keep <b>Number of Buttons</b> as 1, choose the <i>Userdef.bmp</i> file from the User File Folder as <b>Bitmap</b>, and click the OK button. In the ensuing <b>Save As</b> dialog, click the Save button to save the <i>MyButton.ini</i> file to the default path.</li>
<li>In the <b>Customize Tool</b> dialog, select <i>MyButton</i> item from <b>Groups</b> list, and click to choose the <a  class="image"><img alt="MyButton.png" src="../images/Distributing_Origin_C_Code/MyButton.png?v=27562" width="22"  /></a> button from <b>Buttons</b> panel, then click <b>Settings</b> button from <b>Button</b> group to open a <b>Button Settings</b> dialog.  Choose <i>MyButton.ogs</i> as the <b>File Name</b>, type "Main" in for <b>Section Name</b>, then make sure the following check-boxes are unchecked: <b>Matrix</b>, <b>Excel</b>, <b>Graph</b>, <b>Layout</b> and <b>Excel</b>. Click OK to close the dialog.</li>
<li>Click <b>Export</b> to open the <b>Export Button Group</b> dialog, then click <b>Add File</b> and choose the above <i>MyButton.c</i> file.<div><a  class="image"><img alt="ExportButtonGroup.png" src="../images/Distributing_Origin_C_Code/ExportButtonGroup.png?v=33417" width="296"  /></a></div></li>
<li>Click <b>Export</b> button, then in the Save As dialog click Save to save the <i>MyButton.OPX</i> file to the specified folder.</li>
<li>Choose menu <b>Tools: Package Manager</b>, and in the dialog that opens, choose <b>File: Open</b> to open the <i>MyButton.OPX</i> file.  Put the script 
<pre class="lt" style="font-family:monospace;">Run.<span style="color: #000080;">LoadOC</span><span style="color: #000000;">&#40;</span><span style="color: #000080;">%</span>Y\OriginC\MyButton.<span style="color: #000080;">c</span><span style="color: #000000;">&#41;</span>;</pre>
into <b>LabTalk Script: After Installation</b> in gird view to load the Origin C source file.  This script will be run when you drop OPX into Origin to install this application.</li>
</ol>


