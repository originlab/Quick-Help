<h1 class="firstHeading">1.18.1.5.1 Simple Hello World Dialog</h1><p class='urlname' style='display: none'>first-HTML-dialog</p>
<p><span class="OIndex" style="display:none">Hello World Dialog</span><span class="OIndex" style="display:none">HTML Dialog</span>
</p><p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Summary"><span class="tocnumber">1</span> <span class="toctext">Summary</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Sample_Files"><span class="tocnumber">2</span> <span class="toctext">Sample Files</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Creating_an_HTML_Page"><span class="tocnumber">3</span> <span class="toctext">Creating an HTML Page</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Creating_an_HTML_dialog"><span class="tocnumber">4</span> <span class="toctext">Creating an HTML dialog</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Advanced_Feature"><span class="tocnumber">5</span> <span class="toctext">Advanced Feature</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Preventing_dialog_resizing"><span class="tocnumber">5.1</span> <span class="toctext">Preventing dialog resizing</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Setting_dialog_size"><span class="tocnumber">5.2</span> <span class="toctext">Setting dialog size</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Adding_event_handler"><span class="tocnumber">5.3</span> <span class="toctext">Adding event handler</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><a name="Summary"></a><span class="mw-headline">Summary</span></h2>
<p>This tutorial will show how to:
</p>
<ol><li> Create an HTML page.</li>
<li> Display the HTML page in the dialog box by OriginC.</li>
<li> Build an event handler to respond to events of dialog.</li></ol>
<p class="version" >Minimum Origin Version Required: Origin 2017</p>
<h2><a name="Sample_Files"></a><span class="mw-headline">Sample Files</span></h2>
<ul><li> index.html: This is the HTML code for the html page.</li>
<li> HelloWorldDlg.cpp: This is the OriginC code to call out the HTML page and show it in the dialog.</li>
<li> HelloWorldDlg1.cpp: This is the OriginC code that includes more advanced features. </li></ul>
<table class="note">

<tr>
<td><b>Note:</b> You can download the sample files <a class="external text" href="http://blog.originlab.com/wp-content/uploads/2016/11/HTMLDlgExamples.zip" target="_blank">here</a>.
</td></tr></table>
<h2><a name="Creating_an_HTML_Page"></a><span class="mw-headline">Creating an HTML Page</span></h2>
<p>When you create an HTML dialog, the first step is creating an HTML page.
</p>
<ol>
<li> Start Origin and open <b>Code Builder</b> by clicking button <a  class="image"><img alt="Cb.png" src="../images/1st_HTML_Dialog/Cb.png?v=49249" width="26"  /></a>.
<li> Create a new HTML file named index.html and save it to a new folder named Hello World.
<li> Inside the&lt; head &gt; and &lt; body &gt; elements, add the other HTML elements such as &lt; title &gt;, &lt; h1 &gt;, &lt; p &gt; to construct an HTML page.
<pre class="javascript" style="font-family:monospace;"><span style="color: #339933;">&lt;!</span>DOCTYPE html<span style="color: #339933;">&gt;</span>
<span style="color: #339933;">&lt;</span>html<span style="color: #339933;">&gt;</span>
    <span style="color: #339933;">&lt;</span>meta charset<span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;utf-8&quot;</span> <span style="color: #339933;">/&gt;</span>
    <span style="color: #339933;">&lt;</span>meta http<span style="color: #339933;">-</span>equiv<span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;X-UA-Compatible&quot;</span> content<span style="color: #339933;">=</span><span style="color: #3366CC;">&quot;IE=Edge&quot;</span><span style="color: #339933;">/&gt;</span>
    <span style="color: #339933;">&lt;</span>head<span style="color: #339933;">&gt;</span>
       <span style="color: #339933;">&lt;</span>title<span style="color: #339933;">&gt;</span>
          A Small Hello 
       <span style="color: #339933;">&lt;/</span>title<span style="color: #339933;">&gt;</span>
    <span style="color: #339933;">&lt;/</span>head<span style="color: #339933;">&gt;</span>
    <span style="color: #339933;">&lt;</span>body<span style="color: #339933;">&gt;</span>
        <span style="color: #339933;">&lt;</span>h1<span style="color: #339933;">&gt;</span>Hello World<span style="color: #339933;">&lt;/</span>h1<span style="color: #339933;">&gt;</span>
        <span style="color: #339933;">&lt;</span>p<span style="color: #339933;">&gt;</span>This is very minimal <span style="color: #3366CC;">&quot;hello world&quot;</span> HTML document.<span style="color: #339933;">&lt;/</span>p<span style="color: #339933;">&gt;</span> 
    <span style="color: #339933;">&lt;/</span>body<span style="color: #339933;">&gt;</span>
<span style="color: #339933;">&lt;/</span>html<span style="color: #339933;">&gt;</span></pre>
</ol>
<table class="note">

<tr>
<td><b>Note:</b> When editing is complete, you can check the content of this page by opening it with any web browser.
</td></tr></table>
<h2><a name="Creating_an_HTML_dialog"></a><span class="mw-headline">Creating an HTML dialog</span></h2>
<p>In this section, you will make the generated HTML page display in the dialog.
</p>
<ol>
<li> In <b>Code Builder</b>, create a new cpp file named HelloWorldDlg.cpp under the path of the HTML file.
<li> Include three needed header files at first. Note that HTMLDlg.h is new in Origin 2017 which connects Origin and the HTML dialog together.

<pre class="c" style="font-family:monospace;"><span style="color: #339933;">#include &lt;Origin.h&gt;</span>
<span style="color: #339933;">#include &lt;..\OriginLab\DialogEx.h&gt;</span>
<span style="color: #339933;">#include &lt;..\OriginLab\HTMLDlg.h&gt;</span></pre>
<li> Derive a user defined HTML dialog class from the class <code>HTMLDlg</code>, and point to the HTML page inside the method <code>GetInitURL()</code>.
<pre class="c" style="font-family:monospace;">class HelloWorldDlg<span style="color: #339933;">:</span> public HTMLDlg
<span style="color: #009900;">&#123;</span>
    public<span style="color: #339933;">:</span>
        string GetInitURL<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #666666; font-style: italic;">//get the path of html file                    </span>
	<span style="color: #009900;">&#123;</span>
            string strFile <span style="color: #339933;">=</span> __FILE__<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//the path of the current file</span>
	    <span style="color: #b1b100;">return</span> GetFilePath<span style="color: #009900;">&#40;</span>strFile<span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> <span style="color: #ff0000;">&quot;index.html&quot;</span><span style="color: #339933;">;</span>
	<span style="color: #009900;">&#125;</span>
<span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span></pre>
<li> To open the HTML dialog, save all the code and build it, then execute the following function.

<pre class="c" style="font-family:monospace;"><span style="color: #993333;">void</span> hello<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    HelloWorldDlg dlg<span style="color: #339933;">;</span>
    dlg.<span style="color: #202020;">DoModalEx</span><span style="color: #009900;">&#40;</span>GetWindow<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre>
</ol>
<p>An HTML dialog with "Hello World" will pop up:
</p>
<dl><dd><a  class="image"><img alt="Hello.png" src="../images/1st_HTML_Dialog/300px-Hello.png?v=49186" width="300"   /></a></dd></dl>
<h2><a name="Advanced_Feature"></a><span class="mw-headline">Advanced Feature</span></h2>
<p>If you want to learn more,  try to improve the program by modifying the dialog and adding event handlers.
</p>
<table class="note">

<tr>
<td><b>Note:</b> The complete code of the following features is available in HelloWorldDlg1.cpp.
</td></tr></table>
<h3><a name="Preventing_dialog_resizing"></a><span class="mw-headline">Preventing dialog resizing</span></h3>
<p>To do this, use <code>ModifyStyle</code> to disable WS_THICKFRAME in the method <code>OnInitDialog</code> inside your dialog class:
</p>
<pre class="c" style="font-family:monospace;">BOOL OnInitDialog<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    ModifyStyle<span style="color: #009900;">&#40;</span>WS_THICKFRAME<span style="color: #339933;">,</span> <span style="color: #0000dd;">0</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><span style="color: #666666; font-style: italic;">//prevent resizing</span>
    <span style="color: #b1b100;">return</span> HTMLDlg<span style="color: #339933;">::</span><span style="color: #202020;">OnInitDialog</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre>
<h3><a name="Setting_dialog_size"></a><span class="mw-headline">Setting dialog size</span></h3>
<p>You need to call a parent class method <code>GetDlgInitSize</code> from you dialog class, and specify the width and height of the dialog in it:
</p>
<pre class="c" style="font-family:monospace;">BOOL GetDlgInitSize<span style="color: #009900;">&#40;</span>int<span style="color: #339933;">&amp;</span> width<span style="color: #339933;">,</span> int<span style="color: #339933;">&amp;</span> height<span style="color: #009900;">&#41;</span><span style="color: #666666; font-style: italic;">//get dialog size</span>
<span style="color: #009900;">&#123;</span>
    width <span style="color: #339933;">=</span> <span style="color: #0000dd;">500</span><span style="color: #339933;">;</span>
    height <span style="color: #339933;">=</span> <span style="color: #0000dd;">200</span><span style="color: #339933;">;</span>
    <span style="color: #b1b100;">return</span> <span style="color: #000000; font-weight: bold;">true</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre>
<h3><a name="Adding_event_handler"></a><span class="mw-headline">Adding event handler</span></h3>
<p>Similar to <a href="../../OriginC/Category/Dialog_Builder.html" title="Category:Dialog Builder">Dialog Builder</a>, a message map is used to specify which events will be handled and which function will be called to handle them.
<br />
As an example, an event handler methods are added inside the user defined class HelloWorldDlg to pop up a message when the dialog is closed.
</p>
<ol>
<li> Map the dialog message by the following message map inside the class <code>HelloWorldDlg</code>.

<pre class="c" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">//Message Map</span>
public<span style="color: #339933;">:</span>
    EVENTS_BEGIN_DERIV<span style="color: #009900;">&#40;</span>HTMLDlg<span style="color: #009900;">&#41;</span>
        ON_DESTROY<span style="color: #009900;">&#40;</span>OnDestroy<span style="color: #009900;">&#41;</span>
    EVENTS_END_DERIV</pre>
<li>Add an event handler method inside the class <code>HelloWorldDlg</code> to pop up a message box when the dialog is closed.
<pre class="c" style="font-family:monospace;">BOOL OnDestroy<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>
<span style="color: #009900;">&#123;</span>
    MessageBox<span style="color: #009900;">&#40;</span>GetSafeHwnd<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> _L<span style="color: #009900;">&#40;</span><span style="color: #ff0000;">&quot;Thank you and have a good day!&quot;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">,</span>_L<span style="color: #009900;">&#40;</span><span style="color: #ff0000;">&quot;Message&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
    <span style="color: #b1b100;">return</span> <span style="color: #000000; font-weight: bold;">true</span><span style="color: #339933;">;</span>
<span style="color: #009900;">&#125;</span></pre>
</ol>






