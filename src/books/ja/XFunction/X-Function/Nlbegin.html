<h1 class="firstheading">nlbegin</h1><div id="toc" class="toc"><div id="toctitle"><h2>目次</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Brief_Information"><span class="tocnumber">1</span> <span class="toctext">概要</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Additional_Information"><span class="tocnumber">2</span> <span class="toctext">追加の情報</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Command_Line_Usage"><span class="tocnumber">3</span> <span class="toctext">コマンドラインの使用法</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Variables"><span class="tocnumber">4</span> <span class="toctext">変数</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Description"><span class="tocnumber">5</span> <span class="toctext">説明</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Details_of_the_nltree_TreeNode"><span class="tocnumber">5.1</span> <span class="toctext"><b>nltree</b>ツリーノードの詳細について</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Example"><span class="tocnumber">6</span> <span class="toctext">サンプル</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Related_X-Functions"><span class="tocnumber">7</span> <span class="toctext">関連するXファンクション</span></a></li>
</ul>
</div>

<h2><a name="Brief_Information"></a><span class="mw-headline">概要</span></h2>
<p>XYデータの非線形曲線フィッティングセッションを開始します
</p>
<h2><a name="Additional_Information"></a><span class="mw-headline">追加の情報</span></h2>
<p>Xファンクションは Auto GetNダイアログ用にデザインされていません。
</p><p>この機能はOrigin8.0 SR5で更新されています。詳細は、<a class="external text" href="http://www.originlab.com/doc/ReleaseNotes" target="_blank">リリースノート</a> のセクションをご覧下さい。
</p>
<h2><a name="Command_Line_Usage"></a><span class="mw-headline">コマンドラインでの使用法</span></h2>
<p><code>
</p><p>nlbegin iy:=1 func:=gauss nltree:=tt; // gaussモデルを使用して、アクティブプロットのフィットを実行
</p><p>nlbegin iy:=(1,2) func:=expgrow1 nltree:=tt;// expgrow1モデルを実行して、列1 を X とし、列2 を Y として実行
</p><p></code>
</p>
<h2><a name="Variables"></a><span class="mw-headline">変数</span></h2>
<table class="xfvar">
<tr>
<th width="8%">表示<br />名
</th>
<th width="8%">変数<br />名
</th>
<th width="8%">I/O<br />と<br />データ型
</th>
<th width="8%">デフォルト<br />値
</th>
<th>説明
</th></tr>
<tr>
<td>入力
</td>
<td>iy
</td>
<td>
<p>入力
</p><p>XYRange
</p>
</td>
<td> <center>&lt;active&gt;</center>
</td>
<td> フィットするデータを指定します。
</td></tr>
<tr>
<td>フィット関数名
</td>
<td>func
</td>
<td>
<p>入力
</p><p>string
</p>
</td>
<td> <center>&lt;unassigned&gt;</center>
</td>
<td> データをフィットする関数を設定します。
</td></tr>
<tr>
<td>
</td>
<td>nltree
</td>
<td>
<p>入力/出力
</p><p>TreeNode
</p>
</td>
<td> <center>nlt</center>
</td>
<td> パラメータ値、標準誤差などのフィッティングの情報を含むツリーです。
</td></tr>
<tr>
<td>フィットモード
</td>
<td>mode
</td>
<td>
<p>入力
</p><p>int
</p>
</td>
<td> <center>自動</center>
</td>
<td> 入力データをフィットする時の扱い方を指定します。
<p>オプションリスト
</p>
<ul><li><i>auto:自動</i></li></ul>
<dl><dd>Originは自動的にデータモードを選択します。</dd></dl>
<ul><li><i>concat:連結フィット</i></li></ul>
<dl><dd>すべての入力データセットは、連結され、1つの曲線としてフィットされます。</dd></dl>
<ul><li><i>global:グローバルフィット</i></li></ul>
<dl><dd>すべてのデータセットがグローバルにフィットされます。  このモードは、1つのモデルで、パラメータを共有して複数データセットをフィットする時に使用します。</dd></dl>
<ul><li><i>cons:独立フィット - 統合レポート</i></li></ul>
<dl><dd>全てのデータセットは独立してフィットされ、結果は統合されたレポートに出力されます。  このモードは、1つのモデルで、パラメータを共有せずに複数データセットをフィットし、統合レポートを作成する時に使用します。</dd></dl>
</td></tr>
<tr>
<td>複製の数
</td>
<td>replica
</td>
<td>
<p>入力
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td> 複製の数を指定します。各ピークに関数を置き換える事で複数のピークのデータを使用して複数フィットを行います。選択した関数が、複製をサポートしていない場合、このオプションは使用できません。
</td></tr>
<tr>
<td>ダイアログテーマ
</td>
<td>theme
</td>
<td>
<p>入力
</p><p>string
</p>
</td>
<td> <center>&lt;optional&gt;</center>
</td>
<td> テーマを指定します。保存された設定がロードされ、フィットをカスタム化します。
</td></tr>
<tr>
<td>パラメータの表記
</td>
<td>pnotation
</td>
<td>
<p>入力
</p><p>int
</p>
</td>
<td> <center>para</center>
</td>
<td> 出力ツリーでのパラメータの表記を指定します。
<p>オプションリスト
</p>
<ul><li><i>para:パラメータ名</i></li></ul>
<dl><dd>パラメータ名を表記法として使用します。</dd></dl>
<ul><li><i>abbr:省略名</i></li></ul>
<dl><dd>パラメータについている省略名を表記法として使用します。</dd></dl>
<ul><li><i>both:両方</i></li></ul>
<dl><dd>パラメータ名と省略名の両方を表記法として使用します。</dd></dl>
</td></tr>
<tr>
<td>パラメータ初期化
</td>
<td>init
</td>
<td>
<p>入力
</p><p>int
</p>
</td>
<td> <center>自動</center>
</td>
<td> パラメータ初期化のステータスを指定します。
<p>オプションリスト
</p>
<ul><li><i>auto:自動</i></li></ul>
<dl><dd>Originは自動的にパラメータの初期化をフィット関数のFDFファイルに則って実行するかどうか指定します。</dd></dl>
<ul><li><i>enable:有効にする</i></li></ul>
<dl><dd>パラメータの初期化を有効にします。</dd></dl>
<ul><li><i>disable:無効にする</i></li></ul>
<dl><dd>パラメータの初期化を無効にします。</dd></dl>
</td></tr>
<tr>
<td>重み付け法
</td>
<td>weight
</td>
<td>
<p>入力
</p><p>int
</p>
</td>
<td> <center>-1</center>
</td>
<td> グローバル重み付け方を指定します。
<p>オプションリスト
</p>
<ul><li>-1: <i>自動</i>
<dl><dd>エラーデータが一緒に選択されている場合、重み付けは機械的です。</dd></dl></li>
<li>0=<i>none:重み付けなし</i>
<dl><dd>重み付けは特に使用されていません。</dd></dl></li>
<li>1=<i>ins:I機械的</i> (=1/ei^2)
<dl><dd>機械的に重み付けを行う方法を使用します。</dd></dl></li>
<li>2=Stat:toukei<i>統計</i> (=1/yi)
<dl><dd>統計的に重み付けを行う方法を使用します。</dd></dl></li></ul>
</td></tr>
<tr>
<td>NLFitオブジェクトの初期化の方法
</td>
<td>option
</td>
<td>
<p>入力
</p><p>int
</p>
</td>
<td> <center>0</center>
</td>
<td> NLFitオブジェクトの初期化の方法を指定します。
<p>オプションリスト
</p>
<ul><li><i>init_all:全てのパラメーを初期化</i>
<dl><dd>全てのパラメータを初期化してそのパラメータでフィットを実行します。</dd></dl></li>
<li><i>change_data:データのみ変更</i>
<dl><dd>以前の設定を維持し、データセットのみを変更して新しいデータセットでフィットを実行します。 </dd></dl></li></ul>
</td></tr></table>
<h2><a name="Description"></a><span class="mw-headline">説明</span></h2>
<p>非線形曲線フィットのセッションを開始します。この時、オプション設定とパラメータの初期化も行います。 
</p><p><b>nltree</b>はツリーノードの変数で、数多くのフィット設定やフィット結果例えば、パラメータ値や標準誤差などを読み解く際、に使用できます。以下の表は<b>nltree</b>の中で最も一般的なオブジェクトです。 
</p>
<h3><a name="Details_of_the_nltree_TreeNode"></a><span class="mw-headline"><b>nltreeツリーノードの詳細について</b></span></h3>
<table class="simple">
<tr>
<th> オブジェクト名
</th>
<th> 説明
</th>
<th> アクセス権
</th>
<th> レポートシートに出力
</th></tr>
<tr>
<td> nltree.p<i>n</i>
</td>
<td> n番目のパラメータ値です(算出されたパラメータを除く)
</td>
<td> 読み込み/書き込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.f<i>n</i>
</td>
<td> n番目のパラメータを固定(1)するか変化する(0)ようにします
</td>
<td> 読み込み/書き込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.sm
</td>
<td> 共有パラメータです。mはパラメータの数を表わします(算出されたパラメータを除く)
</td>
<td> 読み込み/書き込み
</td>
<td> <font color="magenta">不可</font>
</td></tr>
<tr>
<td> nltree.e<i>n</i>
</td>
<td> n番目のパラメータの標準誤差です
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.u<i>n</i>
</td>
<td> 上側信頼水準テーマによって計算された時にアクセス可能
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.l<i>n</i>
</td>
<td> 下側信頼水準。テーマによって計算された時にアクセス可能
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.ub<i>n</i>
</td>
<td> 上側境界値
</td>
<td> 読み込み/書き込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.lb<i>n</i>
</td>
<td> 下側境界値
</td>
<td> 読み込み/書き込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.ubon<i>n</i>
</td>
<td> <b>nltree.ubn</b>の使用を有効にする(1) か無効にします(0)
</td>
<td> 読み込み/書き込み
</td>
<td> <font color="magenta">不可</font>
</td></tr>
<tr>
<td> nltree.lbon<i>n</i>
</td>
<td> <b>nltree.lbn</b>の使用を有効にする(1) か無効にします(0)
</td>
<td> 読み込み/書き込み
</td>
<td> <font color="magenta">不可</font>
</td></tr>
<tr>
<td> nltree.ubx<i>n</i>
</td>
<td> パラメータと上側境界値の関係を設定します。0は&quot;&lt;=&quot;(以上)にあたり、0以外の値は&quot;&lt;&quot;(より大きい)になります。
</td>
<td> 読み込み/書き込み
</td>
<td> <font color="magenta">不可</font>
</td></tr>
<tr>
<td> nltree.lbx<i>n</i>
</td>
<td> パラメータと下側境界値の関係を設定します。0は&quot;&lt;=&quot;(以上)にあたり、0以外の値は&quot;&lt;&quot;(より大きい)になります。
</td>
<td> 読み込み/書き込み
</td>
<td> <font color="magenta">不可</font>
</td></tr>
<tr>
<td> nltree.d<i>n</i>
</td>
<td> パラメータの依存度を計算します
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.n<i>n</i>$, nltree.names<i>n</i>$
</td>
<td> これは文字列ベクトルです。これは全てのパラメータの正式名称を含みます(算出したパラメータは除外されます)
</td>
<td> 読み込み
</td>
<td> 可
</td></tr></table>
<p>この表はパラメータから独立したプロパティをリストします。多くのプロパティは最低1回でもフィットを反復しないとツリーに表示されません。
</p>
<table class="simple">
<tr>
<th> オブジェクト名
</th>
<th> 説明
</th>
<th> アクセス権
</th>
<th> レポートシートに出力
</th></tr>
<tr>
<td> nltree.adjr<i>n</i>
</td>
<td> 自由度調整済みR二乗値
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.chisqr<i>n</i>
</td>
<td> カイ二乗値
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.c<i>n</i>
</td>
<td> n番目のパラメータの信頼区間現在サポートされていません
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.cod<i>n</i>
</td>
<td> R二乗(COD)
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.confC
</td>
<td> 曲線の信頼水準(%)
</td>
<td> 読み込み/書き込み
</td>
<td> 不可
</td></tr>
<tr>
<td> nltree.confP
</td>
<td> 曲線の信頼水準(%)
</td>
<td> 読み込み/書き込み
</td>
<td> 不可
</td></tr>
<tr>
<td> nltree.constr$
</td>
<td> フィット過程の線形定数
</td>
<td> 読み込み/書き込み
</td>
<td> 不可
</td></tr>
<tr>
<td> nltree.constraints
</td>
<td> 線形定数を有効にする/無効にする
</td>
<td> 読み込み/書き込み
</td>
<td> 不可
</td></tr>
<tr>
<td> nltree.cor<i>n</i>, nltree.r<i>n</i>
</td>
<td> R値(相関係数)
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.corr<i>n</i>
</td>
<td> 相関行列(<font color="red">Origin 8.1 SR2</font>)
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.covar<i>n</i>
</td>
<td> 共分散行列(<font color="red">Origin 8.1 SR2</font>)
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.data<i>n</i>.wdata1$
</td>
<td> 重み付けデータの範囲
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.data<i>n</i>.wmethod1$
</td>
<td> 各データセットの重み付けタイプ
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.data<i>n</i>.x1$
</td>
<td> Xの範囲。getnlr Xファンクションから結果を入手している時に利用可能
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.data<i>n</i>.y1$
</td>
<td> Yの範囲。getnlr Xファンクションから結果を入手している時に利用可能
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.dof<i>n</i>
</td>
<td> 自由度
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.dp<i>n</i>
</td>
<td> n番目の算出されたパラメータ値
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.fitstatus<i>n</i>$
</td>
<td> フィット状況
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.func$
</td>
<td> フィット関数名
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.maxIter
</td>
<td> 反復の最大数
</td>
<td> 読み込み/書き込み
</td>
<td> 不可
</td></tr>
<tr>
<td> nltree.ndp<i>n</i>$
</td>
<td> これは文字列ベクトルです。計算されたパラメータの名前を有しています
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.niter
</td>
<td> 反復回数
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.prob<i>n</i>
</td>
<td> P値現在サポートされていません
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.pts<i>n</i>
</td>
<td> フィットで実際に使用されているポイント数です
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.rmse
</td>
<td> 誤差の実効値またはモデルの標準偏差
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.ssr<i>n</i>
</td>
<td> 残差平方和
</td>
<td> 読み込み
</td>
<td> 可
</td></tr>
<tr>
<td> nltree.tolerance
</td>
<td> フィット手順を制御する許容値
</td>
<td> 読み込み/書き込み
</td>
<td> 不可
</td></tr>
<tr>
<td> nltree.t<i>n</i>
</td>
<td> n番目のパラメータに対するt検定値現在サポートされていません
</td>
<td> 読み込み
</td>
<td> 可
</td></tr></table>
<p>なお、*.pn, *.lbnのようなオブジェクトを使用する場合、フィットパラメータにアクセスする方法は2通りあります。1つ目の方法はパラメータの順番を利用してアクセスする方法です。もう1つの方法はパラメータ名を使用する事です。例えば、2つのデータセットがGauss関数でフィットされた場合、8つのフィット関数、y0, xc, w, A (1番目のデータセットのパラメータ名)とy0_2, xc_2, w_2, A_2 (2番目のデータセットのパラメータ名)があります。<b>nltree</b> 内に<b>tt</b>という変数がある場合、tt.p5 と tt.y0_2 はどちらも2番目のデータセット内にあるパラメータy0_2を示します。
</p><p>*.covarn と *.corrn は共分散行列とフィット結果からレポートに作成する相関行列にアクセスするのに使用します。この両方のパラメータを <b>nltree</b> で使用出来るようになるのはフィット結果が共分散行列と相関行列を有する時のみです。よって、スクリプトを使う必要があります。
</p>
<pre class="lt" style="font-family:monospace;">nlend <span style="color: #0000dd;">1</span>;</pre>
<p>これでレポートを出力します。次のスクリプトは共分散行列のセルにアクセスする方法です。
</p>
<pre class="lt" style="font-family:monospace;">tt.<span style="color: #000080;">covar1</span><span style="color: #000000;">[</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">]</span><span style="color: #000080;">=</span>;  <span style="color: #008000;">//共分散行列の1行2列目のセルにアクセスする</span></pre>
<h2><a name="Example"></a><span class="mw-headline">サンプル</span></h2>
<p>1.それでは、ExpGrow1 関数を使用してアクティブレイヤの最初のプロットをフィットしましょう。
</p><p>パラメータ x0 と y0 の値は固定し、反復は3回とします。フィットしたデータは3列目に出力します。
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\Exponential Growth.dat&quot;</span>; <span style="color: #008000;">// データを準備</span>
newbook;
impasc;
wks.<span style="color: #000080;">addcol</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
string strData<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">(</span><span style="color: #000080;">%</span>H,<span style="color: #000080;">$</span><span style="color: #000000;">(</span>wks.<span style="color: #000080;">ncols</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>; <span style="color: #008000;">// 追加した列の名前を確認</span>
range fitx<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>, fity<span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>;
plotxy <span style="color: #000000;">(</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>;
nlbegin <span style="color: #0000dd;">1</span> ExpGrow1 tt;      <span style="color: #008000;">//最初のプロットにフィット関数ExpGrow1 を使用してフィット実行</span>
tt.<span style="color: #000080;">x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;          <span style="color: #008000;">// まず、x0 の値を最初の日付に固定</span>
tt.<span style="color: #000080;">y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;          <span style="color: #008000;">// 同じくfix y0 を固定</span>
tt.<span style="color: #000080;">A1</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;
nlfit <span style="color: #0000dd;">3</span>;                    <span style="color: #008000;">// 反復は3 回だけ</span>
tt.<span style="color: #000080;">f_x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;        <span style="color: #008000;">// x0 と y0 元に戻し、デフォルトの設定で収束するまで反復</span>
nlfit;
fity<span style="color: #000080;">=</span>fit<span style="color: #000000;">(</span>fitx<span style="color: #000000;">)</span>;             <span style="color: #008000;">// フィット曲線を生成</span>
nlend;                      <span style="color: #008000;">// フィット過程終了</span>
layer <span style="color: #000080;">-</span>i <span style="color: #000080;">%</span><span style="color: #000000;">(</span>strData<span style="color: #000080;">$</span><span style="color: #000000;">)</span>;       <span style="color: #008000;">// プロット内にフィット結果を含む</span>
set <span style="color: #000080;">%</span><span style="color: #000000;">(</span>strData<span style="color: #000080;">$</span><span style="color: #000000;">)</span> <span style="color: #000080;">-</span>c <span style="color: #0000dd;">2</span>;       <span style="color: #008000;">// 色を赤にセット</span></pre>
<p>2.これは、nlbegin を使用してフィットセッションを開始する例です。その後、nlparaを使用してパラメータダイアログを開き、初期値と境界設定を編集します。 
</p><p>最後に、nlfitを使用して、フィットの続きを行います。
</p>
<pre class="lt" style="font-family:monospace;">nlbegin iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> func<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Gauss;	<span style="color: #008000;">// make sure col(1)とcol(2)にデータがあることを確認</span>
nlpara;		                <span style="color: #008000;">//ダイアログを開いてパラメータ値を確認</span>

<span style="color: #008000;">// フィット完了のために次のコマンドを実行</span>
nlfit;
nlend <span style="color: #0000dd;">1</span>;</pre>
<p>3.このサンプルは使用するつもりだった関数がデータにとって適切ではないと判断した時に、nlfn を使用してフィット関数をリセットします。
</p>
<pre>
nlbegin iy:=2 func:=Gauss;	// col(1)&amp;col(2) がデータを含むことを確認
nlfn Lorentz;
nlfit;
nlend 1 1;			// 自動更新でフィット結果を出力
</pre>
<p><br />
4.複製を設定する事で、複数のピークのデータをフィットするサンプルです。
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\Multiple Peaks.dat&quot;</span>; <span style="color: #008000;">// データ準備</span>
newbook;
impasc;
nlbegin <span style="color: #000000;">(</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> Gauss tt replica<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>;
nlfit;
nlend <span style="color: #0000dd;">1</span>;</pre>
<p>5.これは重み付けフィットを行う例題です
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\gaussian.dat&quot;</span>; <span style="color: #008000;">// データ準備</span>
newbook;
impasc;
nlbegin <span style="color: #000000;">(</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span>,<span style="color: #0000dd;">3</span><span style="color: #000000;">)</span> Gauss tt weight<span style="color: #000000;">:</span><span style="color: #000080;">=</span>ins;	<span style="color: #008000;">//col(3) を重みデータ列としてセットし、重み付け方法は機械的を選択</span>
nlfit;
nlend <span style="color: #0000dd;">1</span>;</pre>
<p>6.共分散行列とフィット結果からレポートに作成する相関行列にアクセスするサンプルです。
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\Gaussian.dat&quot;</span>;
newbook;
impasc;
nlbegin iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">(</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> func<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Gauss nltree<span style="color: #000000;">:</span><span style="color: #000080;">=</span>tt;
<span style="color: #008000;">// 相関行列と共分散行列を出力</span>
nlgui gg <span style="color: #0000dd;">1</span>;
gg.<span style="color: #000080;">Quantities</span>.<span style="color: #000080;">mCov</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span>;
gg.<span style="color: #000080;">Quantities</span>.<span style="color: #000080;">mCor</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span>;
nlgui gg <span style="color: #0000dd;">0</span>;
nlfit;
nlend <span style="color: #0000dd;">1</span>;
tt.<span style="color: #000080;">covar1</span><span style="color: #000000;">[</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">]</span><span style="color: #000080;">=</span>;
tt.<span style="color: #000080;">corr1</span><span style="color: #000000;">[</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">]</span><span style="color: #000080;">=</span>;</pre>
<p>7.この例題の場合、スクリプトは全体として実行してください。実行中、NLFit パラメータダイアログが開くので、設定を編集できます。OKをクリックしてダイアログを閉じるとき、次のスクリプト行(nlend 1 1;)が自動的に実行されます。
</p>
<pre class="lt" style="font-family:monospace;">fname<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Curve Fitting\Exponential Growth.dat&quot;</span>; <span style="color: #008000;">// データ準備</span>
newbook;
impasc;
wks.<span style="color: #000080;">addcol</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
string strData<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> <span style="color: #000080;">%</span><span style="color: #000000;">(</span><span style="color: #000080;">%</span>H,<span style="color: #000080;">$</span><span style="color: #000000;">(</span>wks.<span style="color: #000080;">ncols</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>; <span style="color: #008000;">// 追加した列の名前を確認</span>
range fitx<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>, fity<span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>;
plotxy <span style="color: #000000;">(</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>;
nlbegin <span style="color: #0000dd;">1</span> ExpGrow1 tt;      <span style="color: #008000;">//最初のプロットにExpGrow1 関数を使用したフィットセッションを実行</span>
tt.<span style="color: #000080;">x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_x0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;          <span style="color: #008000;">// パラメータx0 値を最初の日付で固定</span>
tt.<span style="color: #000080;">y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;tt.<span style="color: #000080;">f_y0</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;          <span style="color: #008000;">// 同じくパラメータ y0 を固定</span>
tt.<span style="color: #000080;">A1</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;
nlpara <span style="color: #0000dd;">1</span>;         <span style="color: #008000;">//ダイアログが開き、必要に応じて設定を変更</span>
<span style="color: #008000;">//OKをクリックしてダイアログを閉じると、自動的に次の行を実行</span>
nlend <span style="color: #0000dd;">1</span> <span style="color: #0000dd;">1</span>;</pre>
<h2><a name="Related_X-Functions"></a><span class="mw-headline">関連 X ファンクション</span></h2>
<p><a href="../../XFunction/X-Function/Nlfit.html" title="Xファンクション:Nlfit">nlfit</a>, <a href="../../XFunction/X-Function/Nlend.html" title="Xファンクション:Nlend">nlend</a>, <a href="../../XFunction/X-Function/Nlgui.html" title="Xファンクション:Nlgui">nlgui</a>, <a href="../../XFunction/X-Function/Nlpara.html" title="Xファンクション:Nlpara">nlpara</a>, <a href="../../XFunction/X-Function/Nlfn.html" title="Xファンクション:Nlfn">nlfn</a>, <a href="../../XFunction/X-Function/Nlbeginr.html" title="Xファンクション:Nlbeginr">nlbeginr</a>, <a href="../../XFunction/X-Function/Nlbeginz.html" title="Xファンクション:Nlbeginz">nlbeginz</a>, <a href="../../XFunction/X-Function/Nlbeginm.html" title="Xファンクション:Nlbeginm">nlbeginm</a>, <a href="../../XFunction/X-Function/Nlbegino.html" title="Xファンクション:Nlbegino">nlbegino</a>
</p>
<hr class='keywordshr'><p><span class='keywords'>キーワード:</span><span class='keywordsInput'>回帰, NLFit</span></p>







    