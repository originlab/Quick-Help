<h1 class="\&quot;firstheading\&quot;">imgMorph</h1>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>内容</h2>
</div>
<ol>
<li class="kadov-p"><a href="#Menu_Information"><span class="tocnumber">1</span> <span class="toctext">メニュー情報</span></a></li>
<li class="kadov-p"><a href="#Brief_Information"><span class="tocnumber">2</span> <span class="toctext">概要</span></a></li>
<li class="kadov-p"><a href="#Additional_Information"><span class="tocnumber">3</span> <span class="toctext">追加の情報</span></a></li>
<li class="kadov-p"><a href="#Command_Line_Usage"><span class="tocnumber">4</span> <span class="toctext">コマンドラインでの使用法</span></a></li>
<li class="kadov-p"><a href="#Variables"><span class="tocnumber">5</span> <span class="toctext">変数</span></a></li>
<li class="kadov-p"><a href="#Description"><span class="tocnumber">6</span> <span class="toctext">説明</span></a></li>
<li class="kadov-p"><a href="#Examples"><span class="tocnumber">7</span> <span class="toctext">サンプル</span></a></li>
<li class="kadov-p"><a href="#Algorithm"><span class="tocnumber">8</span> <span class="toctext">アルゴリズム</span></a></li>
<li class="kadov-p"><a href="#References"><span class="tocnumber">9</span> <span class="toctext">参考文献</span></a></li>
<li class="kadov-p"><a href="#Related_X-Functions"><span class="tocnumber">10</span> <span class="toctext">関連のXファンクション</span></a></li>
</ol>
</td>
</tr>
</table>
<a name="Menu_Information" id="Menu_Information"></a>
<h2><span class="mw-headline">メニュー情報</span></h2>
<p>モフォロジカルフィルタ</p>
<a name="Brief_Information" id="Brief_Information"></a>
<h2><span class="mw-headline">概要</span></h2>
<p>数値行列またはグレースケール/バイナリ画像ににモフォロジカルフィルタを適用します。</p>
<a name="Additional_Information" id="Additional_Information"></a>
<h2><span class="mw-headline">追加の情報</span></h2>
<p>これはOriginProのみの機能です。</p>
<a name="Command_Line_Usage" id="Command_Line_Usage"></a>
<h2><span class="mw-headline">コマンドラインでの使用法</span></h2>
<p><code style="font-family: monospace;">1. imgMorph op:=open emode:=diamond r:=5;</code></p>
<p><code style="font-family: monospace;">2. imgMorph op:=erosion emode:=rec col:=5 row:=4;</code></p>
<a name="Variables" id="Variables"></a>
<h2><span class="mw-headline">変数</span></h2>
<table class="xfvar">
<tr>
<th style="width: 8%;">表示<br />
名</th>
<th style="width: 8%;">変数<br />
名</th>
<th style="width: 8%;">I/O<br />
と<br />
データ型</th>
<th style="width: 8%;">デフォルト<br />
値</th>
<th>説明</th>
</tr>
<tr>
<td>入力画像</td>
<td>im</td>
<td>
<p>入力</p>
<p>MatrixObject</p>
</td>
<td>
<p style="text-align: center;">&lt;active&gt;</p>
</td>
<td>
<p>入力画像を指定します。これは、数値行列、グレースケール画像または2値画像である必要があります。デフォルトの入力はアクティブイメージです。</p>
</td>
</tr>
<tr>
<td>出力画像</td>
<td>om</td>
<td>
<p>出力</p>
<p>MatrixObject</p>
</td>
<td>
<p style="text-align: center;">&lt;新規&gt;</p>
</td>
<td>
<p>出力画像を指定します。デフォルトで、新しい画像が作成され、出力として使われます。</p>
</td>
</tr>
<tr>
<td>操作:</td>
<td>op</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">開く</p>
</td>
<td>
<p>実行する形態操作を指定します。<br />
オプションリスト</p>
<ul>
<li class="kadov-p"><i style="font-style: italic;">dilation:Dilationダイレーション</i>
<dl>
<dd>各オブジェクトをそれに接している背景のポイントと合体させ、オブジェクトのサイズを大きくします。この操作は、セグメント化されたオブジェクトの欠落点を除去するのに使用することができます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">erosion:エロージョン</i>
<dl>
<dd>オブジェクトの周りの1ピクセル分のサイズを小さくします。この操作は、非常に小さいオブジェクトを除去するのに使うことができます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">open:開く</i>
<dl>
<dd>オブジェクトに対して、エロージョンを実行してからダイレーションを実行します。大きいオブジェクトの領域を変えずに、小さいオブジェクトを除去します。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">close:閉じる</i>
<dl>
<dd>オブジェクトに対してダイレーションを実行して、エロージョンを実行します。オブジェクトの小さな欠落点を埋め、近くのオブジェクトを接続します。しかし、オブジェクトの領域は影響しません。</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr>
<td>平面要素</td>
<td>flat</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">1</p>
</td>
<td>
<p>平面の構造要素を使うかどうかを指定します。</p>
</td>
</tr>
<tr>
<td>行列高さ</td>
<td>hm</td>
<td>
<p>入力</p>
<p>MatrixObject</p>
</td>
<td>
<p style="text-align: center;">&lt;optional&gt;</p>
</td>
<td>
<p>この変数は、平面要素が0にセットされている場合のみ、利用できます。構造要素の高さを持つ行列を指定します。</p>
</td>
</tr>
<tr>
<td>要素の作成</td>
<td>emode</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">rec</p>
</td>
<td>
<p>構造要素を指定します。<br />
オプションリスト</p>
<ul>
<li class="kadov-p"><i style="font-style: italic;">arb:任意</i>
<dl>
<dd>行列オブジェクトを使って構造要素を表します。Element変数を使ってこの行列オブジェクトを指定することができます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">diamond:ダイアモンド</i>
<dl>
<dd>ダイアモンド形状のオブジェクトを作成します。半径ボックスに半径を指定できます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">Line:線</i>
<dl>
<dd>線オブジェクトを作成します。2つの変数－長さと角度－を使って、長さと角度を指定できます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">octagon:八角形</i>
<dl>
<dd>八角形オブジェクトを作成します。半径ボックスに半径を指定できます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">pair:ペア</i>
<dl>
<dd>対のドットを含む構造要素を作成します。1つのドットは中心に配置されます。その他のドットの位置は2つの変数－行オフセットと列オフセットで決まります。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">pl:周期線</i>
<dl>
<dd>2*p+1 ドットを含む構造要素を作成します。pは片側のポイントで決まります。ドットの相対的な位置は別の2つの変数－行オフセットと列オフセットで決まります。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">rec:矩形</i>
<dl>
<dd>矩形オブジェクトを作成します。2つの変数－列と行で幅と高さを指定できます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">square:二乗</i>
<dl>
<dd>正方形オブジェクトを作成します。幅ボックスで幅を指定できます。</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr>
<td>要素の行列</td>
<td>em</td>
<td>
<p>入力/出力</p>
<p>MatrixObject</p>
</td>
<td>
<p style="text-align: center;">&lt;optional&gt;</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「自由」にセットされているときのみ利用できます。構造化している要素を表す行列オブジェクトを指定するのに使用します。</p>
</td>
</tr>
<tr>
<td>列</td>
<td>col</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">3</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「矩形」にセットされているときのみ利用できます。これは矩形の幅を指定します。</p>
</td>
</tr>
<tr>
<td>行</td>
<td>row</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">3</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「矩形」にセットされているときのみ利用できます。矩形の高さを指定します。</p>
</td>
</tr>
<tr>
<td>幅</td>
<td>w</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">3</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「正方形」にセットされているときのみ利用できます。正方形の幅を指定します。</p>
</td>
</tr>
<tr>
<td>半径</td>
<td>r</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">3</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「ダイアモンド」または「八角形」にセットされているときのみ利用できます。構造オブジェクトの半径を指定します。</p>
</td>
</tr>
<tr>
<td>行のオフセット</td>
<td>roffset</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">0</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「周期線」または「ペア」にセットされているときのみ利用できます。2つの隣り合うメンバー間の行オフセットを指定します。</p>
</td>
</tr>
<tr>
<td>列のオフセット</td>
<td>coffset</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">0</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「周期線」または「ペア」にセットされているときのみ利用できます。2つの隣り合うメンバー間の列オフセットを指定します。</p>
</td>
</tr>
<tr>
<td>長さ</td>
<td>len</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">5</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「線」にセットされているときのみ利用できます。線オブジェクトの長さを指定します。</p>
</td>
</tr>
<tr>
<td>角度 (単位:度)</td>
<td>deg</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">5</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「線」にセットされているときのみ利用できます。線オブジェクトの角度を指定します。単位は、度(°)です。</p>
</td>
</tr>
<tr>
<td>片側のポイント</td>
<td>np</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">5</p>
</td>
<td>
<p>この変数は、「要素の作成」変数が「周期線」にセットされているときのみ利用できます。数字 pを指定します。そして、構造要素に2*p+1ドットの線が現れます。</p>
</td>
</tr>
</table>
<a name="Description" id="Description"></a>
<h2><span class="mw-headline">説明</span></h2>
<p>このXファンクションは、モフォロジカル画像処理を行うツールです。数値行列、グレースケール、2値画像に対して使用することができます。</p>
<p>一般的に言えば、モフォロジカル画像処理は、コンボリューションのような操作で画像の構造要素を渡すことで実行します。出力画像は、選択した操作だけでなく、構造要素のサイズと形状によって決まります。</p>
<p>構造要素は、どのような形状でも、どのようなサイズでも行うことができます。これは0および1で構成される行列で、1は隣接セルを定義します。構造要素の異なる形状を使うと、異なる効果になる可能性があります。形状の選択は、ケースバイケースで決めるようにしましょう。目安となる方法としては、関心のあるオブジェクトの幾何的な形状に近い形状を選ぶことです。構造要素のサイズも、出力に影響があります。例えば、エロージョン操作では、より大きなサイズを指定すると、画像内のより大きな要素のみが処理去れ、小さい要素は除かれます。より小さなサイズを指定すると、より小さな要素および画像の細部は残る傾向があります。</p>
<p>4つのモフォロジカル操作がこのツールで利用することができます。それは <i>ダイレーション</i>, <i>エロ－ジョン</i>, <i>開く</i> ,<i>閉じる</i>です エロージョンは、入力画像のオブジェクトのサイズを小さくし、ダイレーションはオブジェクトの大きさを大きくします。開くは、小さいオブジェクトや細いオブジェクトを除去し、大きいオブジェクトの領域を変更しません。閉じるは、オブジェクトの小さな欠落点を埋め、オブジェクトの境界をスムーズにしますが、オブジェクトの領域は変わりません。必要に応じて、これらの操作から選択します。</p>
<a name="Examples" id="Examples"></a>
<h2><span class="mw-headline">サンプル</span></h2>
<p>この例では、入力画像には異なるサイズの正方形のオブジェクトがいくつか含まれています。 <i>imgMorph</i> Xファンクションを使って、それから小さいオブジェクトを削除します。手順は次のようになります。</p>
<ol>
<li class="kadov-p">新しい行列を作成し、画像ファイルをそこにインポートします。</li>
<li class="kadov-p">画像をアクティブにして、メニューから「<b>イメージ：算術変換：モフォロジカルフィルタ</b>」を選び、このXファンクションのダイアログボックスを開きます。</li>
<li class="kadov-p">Xファンクションダイアログで、下の図のように設定を変更して、<b>OK</b><br />
ボタンをクリックしてダイアログを閉じます。<br />
<img src="../images/ImgMorph/ImgMorph_help_English_files_image002.jpg" alt="" style="border: none;" width="404" height="152" border="0" /><br />
出力画像と構造要素が作成されます。出力画像には大きな正方形のみが表示されます。</li>
</ol>
<p>入力画像<br /></p>
<dl>
<dd><a href="" style="color: #0000ff; text-decoration: underline;"><img alt="Image:imgMorph_help_English_files_image004.jpg" src="../images/ImgMorph/ImgMorph_help_English_files_image004.jpg" title="Image:imgMorph_help_English_files_image004.jpg" width="294" height="286" border="0" /></a></dd>
</dl>
<p>出力画像<br /></p>
<dl>
<dd><a href="" style="color: #0000ff; text-decoration: underline;"><img alt="Image:imgMorph_help_English_files_image006.jpg" src="../images/ImgMorph/ImgMorph_help_English_files_image006.jpg" title="Image:imgMorph_help_English_files_image006.jpg" width="294" height="284" border="0" /></a></dd>
</dl>
<p>構造要素<br /></p>
<dl>
<dd><a href="" style="color: #0000ff; text-decoration: underline;"><img alt="Image:imgMorph_help_English_files_image008.jpg" src="../images/ImgMorph/ImgMorph_help_English_files_image008.jpg" title="Image:imgMorph_help_English_files_image008.jpg" width="393" height="315" border="0" /></a></dd>
</dl>
<p><br /></p>
<a name="Algorithm" id="Algorithm"></a>
<h2><span class="mw-headline">アルゴリズム</span></h2>
<p>入力画像にモフォロジカルフィルタを実行するため、構造要素が画像に渡されます。Bを入力画像にし、Sを構造要素にします。Sxyは、原点が (x,y)にある構造要素と解釈されます。</p>
<p>エロージョンの出力は、次のように表すことができます。</p>
<dl>
<dd><a href="" style="color: #0000ff; text-decoration: underline;"><img alt="Image:Erosion.png" src="../images/ImgMorph/Erosion.png" title="Image:Erosion.png" width="115" height="25" border="0" /></a></dd>
</dl>
<p>そして、ダイレーションは次のようになります。</p>
<dl>
<dd><a href="" style="color: #0000ff; text-decoration: underline;"><img alt="Image:Dilation2.png" src="../images/ImgMorph/Dilation2.png" title="Image:Dilation2.png" width="146" height="27" border="0" /></a></dd>
</dl>
<p>ここで、 <a href=""><img alt="Image:Dilation s.png" src="../images/ImgMorph/Dilation_s.png" title="Image:Dilation s.png" width="17" height="18" border="0" /></a> は、Sの反転で、次のように定義されます。</p>
<dl>
<dd><a href="" style="color: #0000ff; text-decoration: underline;"><img alt="Image:Dilation reflection.png" src="../images/ImgMorph/Dilation_reflection.png" title="Image:Dilation reflection.png" width="129" height="19" border="0" /></a>.</dd>
</dl>
<p>開く操作は、エロージョンを1度実行し、ダイレーションを1度実行することで、実行されます。そして、閉じるは、ダイレーションを1度実行し、エロージョンを1度実行することで、実行されます。</p>
<a name="References" id="References"></a>
<h2><span class="mw-headline">参考文献</span></h2>
<p>Kenneth R.Castleman.1996.<i>Digital Image Processing.</i>Prentice Hall, Upper Saddle River, NJ, USA.</p>
<a name="Related_X-Functions" id="Related_X-Functions"></a>
<h2><span class="mw-headline">関連のXファンクション</span></h2>
<p><a href="ImgUserfilter.html" title="X-Function:ImgUserfilter">imgUserfilter</a></p>
