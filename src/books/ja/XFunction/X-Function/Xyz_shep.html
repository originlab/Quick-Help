<h1 class="\&quot;firstheading\&quot;">xyz_shep</h1>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>内容</h2>
</div>
<ol>
<li class="kadov-p"><a href="#Brief_Information"><span class="tocnumber">1</span> <span class="toctext">概要</span></a></li>
<li class="kadov-p"><a href="#Command_Line_Usage"><span class="tocnumber">2</span> <span class="toctext">コマンドラインでの使用法</span></a></li>
<li class="kadov-p"><a href="#Variables"><span class="tocnumber">3</span> <span class="toctext">変数</span></a></li>
<li class="kadov-p"><a href="#Description"><span class="tocnumber">4</span> <span class="toctext">説明</span></a></li>
<li class="kadov-p"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">サンプル</span></a></li>
<li class="kadov-p"><a href="#Algorithm"><span class="tocnumber">6</span> <span class="toctext">アルゴリズム</span></a></li>
<li class="kadov-p"><a href="#References"><span class="tocnumber">7</span> <span class="toctext">参考文献</span></a></li>
<li class="kadov-p"><a href="#Related_X-Functions"><span class="tocnumber">8</span> <span class="toctext">関連のXファンクション</span></a></li>
</ol>
</td>
</tr>
</table>
<a name="Brief_Information" id="Brief_Information"></a>
<h2><span class="mw-headline">概要</span></h2>
<p>修正シェパードグリッディング法</p>
<a name="Command_Line_Usage" id="Command_Line_Usage"></a>
<h2><span class="mw-headline">コマンドラインでの使用法</span></h2>
<p><code style="font-family: monospace;">1. xyz_shep iz:=Col(3);</code></p>
<p><code style="font-family: monospace;">2. xyz_renka iz:=Col(3) rows:=10 cols:=10;</code></p>
<p><code style="font-family: monospace;">4. xyz_shep iz:=Col(3) q:=13 w:=19;</code></p>
<p><code style="font-family: monospace;">5. xyz_renka iz:=Col(3) om:=[MBook]MSheet!Mat(1);</code></p>
<a name="Variables" id="Variables"></a>
<h2><span class="mw-headline">変数</span></h2>
<table class="xfvar">
<tr>
<th style="width: 8%;">表示<br />
名</th>
<th style="width: 8%;">変数<br />
名</th>
<th style="width: 8%;">I/O<br />
と<br />
データ型</th>
<th style="width: 8%;">デフォルト<br />
値</th>
<th>説明</th>
</tr>
<tr>
<td>入力</td>
<td>iz</td>
<td>
<p>入力</p>
<p>XYZRange</p>
</td>
<td>
<p style="text-align: center;">&lt;active&gt;</p>
</td>
<td>
<p>入力XYZ範囲の指定</p>
</td>
</tr>
<tr>
<td>行</td>
<td>rows</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">20</p>
</td>
<td>
<p>出力行列の行</p>
</td>
</tr>
<tr>
<td>列</td>
<td>cols</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">20</p>
</td>
<td>
<p>出力行列の列</p>
</td>
</tr>
<tr>
<td>二次因子</td>
<td>q</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">13</p>
</td>
<td>
<p>二次間局所因数は各ノードに対して局所近似二次フィット関数が影響を及ぼす範囲を計算するのに利用されます。デフォルトで q は 13に等しくなります。これらの因数を変更することにより グリッディングの精度を上げることができますが、計算時間は非常に大きな値(言い換えれば、手法の局所性を減少させる値) になります。</p>
</td>
</tr>
<tr>
<td>重み付け</td>
<td>w</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">19</p>
</td>
<td>
<p>加重関数局所因数は各ノードの重み付け半径を算出するのに利用されます。デフォルトでは、wは19に等しくなっています。これらの因数を変更することにより グリッディングの精度を上げることができますが、計算時間は非常に大きな値(言い換えれば、手法の局所性を減少させる値) になります。</p>
</td>
</tr>
<tr>
<td>出力行列</td>
<td>om</td>
<td>
<p>出力</p>
<p>MatrixObject</p>
</td>
<td>
<p style="text-align: center;">&lt;新規&gt;</p>
</td>
<td>
<p>出力行列オブジェクトの指定</p>
</td>
</tr>
</table>
<a name="Description" id="Description"></a>
<h2><span class="mw-headline">説明</span></h2>
<p>この関数はRenkaによって記述された修正シェパードグリッディング法を実行します。<sup>[1].</sup>これは距離ベースの手法であり、いくつかの局所的方法によってシェパード法を改良したものです。グリッディングの間、ある範囲内にあるデータ <i><span class="texhtml">R<sub>q</sub></span> <span style="font-style: normal;">および</span> <span class="texhtml">R<sub>w</sub></span></i>のみをグリッドノードとして扱います。設定を簡単にするために、2つの整数 <i><span class="texhtml">N<sub>q</sub></span> <span style="font-style: normal;">および</span> <span class="texhtml">N<sub>w</sub></span> を <span class="texhtml">R<sub>q</sub></span> <span style="font-style: normal;">と</span> <span class="texhtml">R<sub>w</sub></span></i> を算出するのに使用します。(関数のパラメータである <i>q</i> と <i>w</i> そしてそれぞれ <i>二次間局所因数</i> と <i>加重関数局所因数</i>と呼ばれます) <i><span class="texhtml">N<sub>q</sub></span> と <span class="texhtml">N<sub>w</sub></span></i>の値を増加させるとより広範囲の演算がなされます。逆もまた同様です。一般的に言って、 <i><span class="texhtml">N<sub>q</sub></span></i>=13 と <span class="texhtml"><i>N</i><sub><i>w</i></sub></span>=19 という設定はかなり良い結果をもたらします。</p>
<p><span class="texhtml">この関数の</span> <span class="texhtml"><i>R</i><sub><i>q</i></sub></span> <span class="texhtml">と</span> <span class="texhtml"><i>R</i><sub><i>w</i></sub></span> はノードごとに変動します。もう1つの似た働きを持つXファンクションでFranke と Nielson<sup>[2]</sup> によって記述された <i>xyz_shep_nag</i> では固定された <span class="texhtml"><i>R</i><sub><i>q</i></sub></span> と <span class="texhtml"><i>R</i><sub><i>w</i></sub></span> を計算に利用します。</p>
<a name="Examples" id="Examples"></a>
<h2><span class="mw-headline">サンプル</span></h2>
<p>1. <i>Samples\Matrix Conversion and Gridding <span style="font-style: normal;">フォルダから</span></i> <i>XYZ Random Gaussian.dat</i> <i>を</i> インポートします。</p>
<p>2. xyz_renka 3 とコマンドウィンドウに入力します。または <code>xyz_shep d</code> と表示されるダイアログに入力します。</p>
<p><br />
他のサンプルについては、XFスクリプトダイアログ(F11を押す)をご覧下さい。</p>
<a name="Algorithm" id="Algorithm"></a>
<h2><span class="mw-headline">アルゴリズム</span></h2>
<p>これは以下のようにデータを取り込む距離ベースの加重グリッディング法です。</p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image002.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image002.gif" title="Image:xyz_shep_help_English_files_image002.gif" width="155" height="45" border="0" /></a>,</p>
<p>ここで <span class="texhtml"><i>F</i><sub><i>i</i></sub></span> はノード (<span class="texhtml"><i>x</i></span><sub><i>i,</i></sub> <span class="texhtml"><i>y</i><sub><i>i</i></sub></span>) に内在する関数であり、 <span class="texhtml"><i>W</i><sub><i>i</i></sub></span>(<i>x</i>, <i>y</i>) は加重となります。より局所的な関数を作成するには、 <span class="texhtml"><i>F</i></span><sub><i>i</i></sub> と <span class="texhtml"><i>W</i><sub><i>i</i></sub></span> は中央の (<span class="texhtml"><i>x</i><sub><i>i</i></sub></span>, <span class="texhtml"><i>y</i><sub><i>i</i></sub></span>) と半径 <i>R</i>との間にあるもののみで計算します。</p>
<p>初めに、加重を以下のように定義します。</p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image004.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image004.gif" title="Image:xyz_shep_help_English_files_image004.gif" width="151" height="68" border="0" /></a>.</p>
<p>与えられた半径 <span class="texhtml"><i>R</i><sub><i>w</i></sub></span>、 相対的重さ <span class="texhtml"><i>w</i><sub><i>k</i></sub></span> は</p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image006.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image006.gif" title="Image:xyz_shep_help_English_files_image006.gif" width="128" height="56" border="0" /></a> この場合、</p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image008.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image008.gif" title="Image:xyz_shep_help_English_files_image008.gif" width="239" height="51" border="0" /></a>,</p>
<p><span class="texhtml"><i style="font-style: italic;">d</i></span><sub><i>k</i></sub> は (<i>x</i>, <i>y</i>) (<span class="texhtml"><i>x</i><sub><i>k</i></sub></span>, <span class="texhtml"><i>y</i><sub><i>k</i></sub></span>) との間のユークリッド距離です。</p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image010.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image010.gif" title="Image:xyz_shep_help_English_files_image010.gif" width="148" height="29" border="0" /></a>.</p>
<p><span class="texhtml"><i style="font-style: italic;">R</i><sub><i>w</i></sub></span>&gt;0の場合、</p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image012.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image012.gif" title="Image:xyz_shep_help_English_files_image012.gif" width="184" height="48" border="0" /></a></p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image014.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image014.gif" title="Image:xyz_shep_help_English_files_image014.gif" width="100" height="45" border="0" /></a>.</p>
<p>次に, 節点関数 <span class="texhtml"><i>F</i><sub><i>i</i></sub></span> は局所近似関数の <span class="texhtml"><i>Q</i></span><sub><i>k</i></sub> によって置き換えられます。</p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image016.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image016.gif" title="Image:xyz_shep_help_English_files_image016.gif" width="360" height="59" border="0" /></a></p>
<p><span class="texhtml"><i style="font-style: italic;">Q</i></span><sub><i>k</i></sub> は 結節点<span class="texhtml"><i>R</i><sub><i>q</i></sub></span> 内に位置するデータ用の加重最小二乗二次近似関数です。係数を最小化するには</p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image018.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image018.gif" title="Image:xyz_shep_help_English_files_image018.gif" width="404" height="47" border="0" /></a></p>
<p>この場合、</p>
<p><a href=""><img alt="Image:xyz_shep_help_English_files_image020.gif" src="../images/Xyz_shep/Xyz_shep_help_English_files_image020.gif" title="Image:xyz_shep_help_English_files_image020.gif" width="357" height="71" border="0" /></a>.</p>
<p>上述のように、補間関数は局所近似関数であり、<span class="texhtml"><i>R</i><sub><i>q</i></sub></span>と<span class="texhtml"><i>R</i><sub><i>w</i></sub></span>という結節点周辺の影響圏に依存します。 この手法では、 <span class="texhtml"><i>R</i><sub><i>q</i></sub></span> と <span class="texhtml"><i>R</i><sub><i>w</i></sub></span> はより精密に演算を実行するために、結節点ごとに変化します。2つの整数 <i>N</i><span class="texhtml"><sub><i>q</i></sub></span> と <span class="texhtml"><i>N</i><sub><i>w</i></sub></span> が与えられ、<span class="texhtml"><i>R</i><sub><i>q</i></sub></span> と <span class="texhtml"><i>R</i><sub><i>w</i></sub></span> は <span class="texhtml"><i>N</i><sub><i>q</i></sub></span> と <span class="texhtml"><i>N</i><sub><i>w</i></sub></span> の節を含めるのに充分な大きさが選択されます。</p>
<a name="References" id="References"></a>
<h2><span class="mw-headline">参考文献</span></h2>
<p>[1].Renka, R.J., <i>Multivariate Interpolation of Large Sets of Scattered Data</i>.ACM Transactions on Mathematical Software, Vol.14, No.2, June 1988, pp:139-148.</p>
<p>[2].Franke R and Nielson G.<i>smooth Interpolation of Large Sets of Scattered Data</i>.Internat.J.Num.Methods Engrg.1980, 15 pp:1691-1704.</p>
<a name="Related_X-Functions" id="Related_X-Functions"></a>
<h2><span class="mw-headline">関連のXファンクション</span></h2>
<p><a href="Xyz_regular.html" title="X-Function:Xyz regular">xyz_regular</a>, <a href="Xyz_renka.html" title="X-Function:Xyz renka">xyz_renka</a>, <a href="Xyz_renka_nag.html" title="X-Function:Xyz renka nag">xyz_renka_nag</a>, <a href="Xyz_shep_nag.html" title="X-Function:Xyz shep nag">xyz_shep_nag</a>, <a href="Xyz_sparse.html" title="X-Function:Xyz sparse">xyz_sparse</a>, <a href="Xyz_tps.html" title="X-Function:Xyz tps">xyz_tps</a></p>
