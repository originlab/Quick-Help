<h1 class="firstheading">stft</h1>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>内容</h2>
</div>
<ol>
<li class="toclevel-1"><a href="#Menu_Information"><span class="tocnumber">1</span> <span class="toctext">メニュー情報</span></a></li>
<li class="toclevel-1"><a href="#Brief_Information"><span class="tocnumber">2</span> <span class="toctext">概要</span></a></li>
<li class="toclevel-1"><a href="#Additional_Information"><span class="tocnumber">3</span> <span class="toctext">追加の情報</span></a></li>
<li class="toclevel-1"><a href="#Command_Line_Usage"><span class="tocnumber">4</span> <span class="toctext">コマンドラインでの使用法</span></a></li>
<li class="toclevel-1"><a href="#Variables"><span class="tocnumber">5</span> <span class="toctext">変数</span></a></li>
<li class="toclevel-1"><a href="#Examples"><span class="tocnumber">6</span> <span class="toctext">サンプル</span></a></li>
<li class="toclevel-1"><a href="#Algorithm"><span class="tocnumber">7</span> <span class="toctext">アルゴリズム</span></a></li>
<li class="toclevel-1"><a href="#More_Information"><span class="tocnumber">8</span> <span class="toctext">詳細な情報</span></a></li>
<li class="toclevel-1"><a href="#Related_X-Functions"><span class="tocnumber">9</span> <span class="toctext">関連のXファンクション</span></a></li>
</ol>
</td>
</tr>
</table>
<a name="Menu_Information" id="Menu_Information"></a>
<h2><span class="mw-headline">メニュー情報</span></h2>
<p>解析： 信号処理： STFT</p>
<a name="Brief_Information" id="Brief_Information"></a>
<h2><span class="mw-headline">概要</span></h2>
<p>短時間フーリエ変換を実行します。</p>
<a name="Additional_Information" id="Additional_Information"></a>
<h2><span class="mw-headline">追加の情報</span></h2>
<p>これはOriginProのみの機能です。</p>
<a name="Command_Line_Usage" id="Command_Line_Usage"></a>
<h2><span class="mw-headline">コマンドラインでの使用法</span></h2>
<p><code style="font-family: monospace;">1. stft ix:=col(2);</code></p>
<p><code style="font-family: monospace;">2. stft ix:=col(2) interval:=4;</code></p>
<p><code style="font-family: monospace;">3. stft ix:=col(2) option:=complex;</code></p>
<p><code style="font-family: monospace;">4. stft ix:=col(2) winlen:=32 fftlen:=64 overlap:=16;</code></p>
<p><code style="font-family: monospace;">5. stft ix:=col(2) win:=tri;</code></p>
<p><code style="font-family: monospace;">6. stft ix:=col(2) win:=gauss alpha:=3;</code></p>
<p><code style="font-family: monospace;">7. stft ix:=col(2) win:=kaiser beta:=2;</code></p>
<p><code style="font-family: monospace;">8. stft ix:=col(2) plot:=0;</code></p>
<a name="Variables" id="Variables"></a>
<h2><span class="mw-headline">変数</span></h2>
<table class="xfvar">
<tr>
<th style="width: 8%;">表示<br />
名</th>
<th style="width: 8%;">変数<br />
名</th>
<th style="width: 8%;">I/O<br />
と<br />
データ型</th>
<th style="width: 8%;">デフォルト<br />
値</th>
<th>説明</th>
</tr>
<tr>
<td>入力</td>
<td>ix</td>
<td>
<p>入力</p>
<p>vector&lt;complex&gt;</p>
</td>
<td>
<p style="text-align: center;">&lt;active&gt;</p>
</td>
<td>入力信号を指定します。</td>
</tr>
<tr>
<td>指定する</td>
<td>mode</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">0</p>
</td>
<td>
<p>オプションリスト:</p>
<ul>
<li><i style="font-style: italic;">interval:間隔</i> {0}
<dl>
<dd>
<p>&#160;</p>
</dd>
</dl>
</li>
<li><i style="font-style: italic;">freq:周波数</i> {1}
<dl>
<dd>
<p>&#160;</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr>
<td>サンプリング間隔</td>
<td>interval</td>
<td>
<p>入力</p>
<p>double</p>
</td>
<td>
<p style="text-align: center;">&lt;自動&gt;</p>
</td>
<td>modeがinterval(間隔)の場合、サンプリング間隔を指定します。デフォルトは &lt;自動&gt;で、これは自動に計算される間隔に対応しています。</td>
</tr>
<tr>
<td>サンプリング周波数</td>
<td>freq</td>
<td>
<p>入力</p>
<p>double</p>
</td>
<td>
<p style="text-align: center;">&lt;自動&gt;</p>
</td>
<td>modeがfrequency(周波数)の場合、サンプリング間隔を指定します。デフォルトは &lt;自動&gt;で、これは自動に計算される周波数に対応しています。</td>
</tr>
<tr>
<td>FFT長</td>
<td>fftlen</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">256</p>
</td>
<td>FFT区間の大きさを指定します。</td>
</tr>
<tr>
<td>ウィンドウ長</td>
<td>winlen</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">256</p>
</td>
<td>ウィンドウの大きさを指定します。これはFFT区間の大きさより大きくてはいけません。</td>
</tr>
<tr>
<td>オーバーラップ</td>
<td>overlap</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">128</p>
</td>
<td>ウィンドウ区間が重なるデータポイントの数を指定します。ウィンドウの大きさより小さくしてください。</td>
</tr>
<tr>
<td>ウィンドウ法</td>
<td>win</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">4</p>
</td>
<td>FFTで使用するウィンドウ法を指定します。
<p>オプションリスト:</p>
<ul>
<li><i style="font-style: italic;">rect:矩形</i> {0}
<dl>
<dd>矩形ウィンドウ</dd>
</dl>
</li>
<li><i style="font-style: italic;">welch:Welch</i> {1}
<dl>
<dd>Welchウィンドウ</dd>
</dl>
</li>
<li><i style="font-style: italic;">tri:Triangular</i> {2}
<dl>
<dd>Triangularウィンドウ</dd>
</dl>
</li>
<li><i style="font-style: italic;">bartlett:Bartlett</i> {3}
<dl>
<dd>Bartlettウィンドウ</dd>
</dl>
</li>
<li><i style="font-style: italic;">hanning:Hanning</i> {4}
<dl>
<dd>Hanningウィンドウ</dd>
</dl>
</li>
<li><i style="font-style: italic;">hamming:Hamming</i> {5}
<dl>
<dd>Hammingウィンドウ</dd>
</dl>
</li>
<li><i style="font-style: italic;">blackman:Blackman</i> {6}
<dl>
<dd>Blackmanウィンドウ</dd>
</dl>
</li>
<li><i style="font-style: italic;">gauss:Gaussian</i> {7}
<dl>
<dd>Gaussianウィンドウ</dd>
</dl>
</li>
<li><i style="font-style: italic;">kaiser:Kaiser</i> {8}
<dl>
<dd>Kaiserウィンドウ</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr>
<td>アルファ値</td>
<td>alpha</td>
<td>
<p>入力</p>
<p>double</p>
</td>
<td>
<p style="text-align: center;">0</p>
</td>
<td>ウィンドウ法がGaussianの場合のみ利用できます。ガウスウィンドウに対して、アルファパラメータを指定します。</td>
</tr>
<tr>
<td>ベータ値</td>
<td>beta</td>
<td>
<p>入力</p>
<p>double</p>
</td>
<td>
<p style="text-align: center;">0</p>
</td>
<td>ウィンドウ法がKaiserの場合のみ利用できます。Kaiserウィンドウに対して、ベータパラメータを指定します。</td>
</tr>
<tr>
<td>オプション</td>
<td>option</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">2</p>
</td>
<td>計算オプションを指定します。デフォルト値は2で、これはdB単位での振幅の計算に対応しています。
<p>オプションリスト:</p>
<ul>
<li><i style="font-style: italic;">complex:Complex Result</i> {0}
<dl>
<dd>STFTの複素数の結果が計算されます。</dd>
</dl>
</li>
<li><i style="font-style: italic;">amp:Amplitude Result</i> {1}
<dl>
<dd>複素数の結果の振幅が与えられます。</dd>
</dl>
</li>
<li><i style="font-style: italic;">ampdb:Amplitude in dB</i> {2}
<dl>
<dd>dB単位での振幅が計算されます。</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr>
<td>時間と周波数の入れ替え</td>
<td>swapxy</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">0</p>
</td>
<td>イメージプロットの時間軸と周波数軸を入れ替えるかどうかを指定します。</td>
</tr>
<tr>
<td>出力行列</td>
<td>om</td>
<td>
<p>出力</p>
<p>MatrixObject</p>
</td>
<td>
<p style="text-align: center;">[&lt;新規&gt;]&lt;新規&gt;!</p>
</td>
<td>出力する行列を指定します。</td>
</tr>
<tr>
<td>プロット</td>
<td>plot</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">1</p>
</td>
<td>結果のイメージプロットを生成するかどうかを指定します。</td>
</tr>
<tr>
<td>出力ワークシート</td>
<td>rd</td>
<td>
<p>出力</p>
<p>ReportData</p>
</td>
<td>
<p style="text-align: center;">[&lt;入力&gt;]&lt;新規&gt;</p>
</td>
<td>出力ワークシートの指定をします。</td>
</tr>
</table>
<a name="Examples" id="Examples"></a>
<h2><span class="mw-headline">サンプル</span></h2>
<p>1.デフォルトの設定で、列Bに対してSTFTを実行します。</p>
<p><code style="font-family: monospace;">stft ix:=col(b)</code></p>
<p>2.Hanning法でSTFTを実行するには</p>
<p><code style="font-family: monospace;">stft -d</code></p>
<p>ダイアログボックスを開きます。そしてウィンドウの種類で、Hanningウィンドウを選択します。</p>
<p>3.事前に保存した<i>MyTheme</i>という分析テーマを使ってSTFTを実行するには、コマンドウィンドウに次のように入力します。</p>
<p><code style="font-family: monospace;">stft -t "MyTheme"</code></p>
<a name="Algorithm" id="Algorithm"></a>
<h2><span class="mw-headline">アルゴリズム</span></h2>
<p><b style="font-weight: bold;">STFTの計算</b></p>
<p>STFTは、次の手順で計算します。</p>
<p>1.Nポイントが入力信号から取られます。Nはウィンドウサイズです。</p>
<p>2.選択したウィンドウの種類を使って、抽出したデータをポイント毎に掛け算します。</p>
<p>3.ウィンドウサイズがFFT区間のサイズより小さい場合、ウィンドウの両側にゼロが付加されます。</p>
<p>4.FFTは、FFT区間で計算されます。</p>
<p>5.ユーザが指定した重なりサイズに従ってウィンドウを移動し、入力信号の終わりまでステップ1からステップ4を繰り返します。</p>
<p><b style="font-weight: bold;">ウィンドウ関数</b></p>
<p>ウィンドウの移動は次のように定義されます。</p>
<p><b style="font-weight: bold;">矩形ウィンドウ：</b></p>
<dl>
<dd><a style="color: #0000ff; text-decoration: underline;"><img alt="Image:stft_help_English_files_image011.gif" src="../images/Stft/Stft_help_English_files_image011.gif" width="56" height="20" border="0" /></a> <a><img alt="Image:stft_help_English_files_image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif" width="88" height="16" border="0" /></a></dd>
</dl>
<p><b style="font-weight: bold;">Welchウィンドウ：</b></p>
<p><b style="font-weight: bold;"><a><img alt="Image:stft_help_English_files_image013.gif" src="../images/Stft/Stft_help_English_files_image013.gif" width="179" height="85" border="0" /></a></b> <a><img alt="Image:stft_help_English_files_image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif" width="88" height="16" border="0" /></a></p>
<p><b style="font-weight: bold;">Triangularウィンドウ：</b></p>
<p><img class="tex" src="../images/Stft/math-655e1c705391455c89e20d9abae0eced.png" alt="\mbox{For } 0 \le n \le N-1" border="0" /></p>
<dl>
<dd><img class="tex" src="../images/Stft/math-1e13169a1ecddcba2b5478ade624ef7d.png" alt="w[n]= \begin{cases} \frac{2}{N+1}(\frac{N+1}{2}-|n-\frac{N-1}{2}|), &amp; \mbox{if }N\mbox{ is odd} \\ \frac{2}{N}(\frac{N}{2}-|n-\frac{N-1}{2}|), &amp; \mbox{if }N\mbox{ is even} \end{cases}" border="0" /></dd>
</dl>
<p><b style="font-weight: bold;">Bartlett</b><b>ウィンドウ：</b></p>
<dl>
<dd><img class="tex" src="../images/Stft/math-44e773c8628ca87ab69ebfe21712169d.png" alt="w[n]=\frac{2}{N-1}(\frac{N-1}{2}-|n-\frac{N-1}{2}|) \mbox{ for } 0 \le n \le N-1" border="0" /></dd>
</dl>
<p><b style="font-weight: bold;">Hanning</b><b>ウィンドウ：</b></p>
<dl>
<dd><a style="color: #0000ff; text-decoration: underline;"><img alt="Image:stft_help_English_files_image018.gif" src="../images/Stft/Stft_help_English_files_image018.gif" width="172" height="48" border="0" /></a> <a><img alt="Image:stft_help_English_files_image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif" width="88" height="16" border="0" /></a></dd>
</dl>
<p><b style="font-weight: bold;">Hammingウィンドウ：</b></p>
<dl>
<dd><a style="color: #0000ff; text-decoration: underline;"><img alt="Image:stft_help_English_files_image019.gif" src="../images/Stft/Stft_help_English_files_image019.gif" width="195" height="45" border="0" /></a> <a><img alt="Image:stft_help_English_files_image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif" width="88" height="16" border="0" /></a></dd>
</dl>
<p><b style="font-weight: bold;">Blackmanウィンドウ：</b></p>
<dl>
<dd><a style="color: #0000ff; text-decoration: underline;"><img alt="Image:stft_help_English_files_image020.gif" src="../images/Stft/Stft_help_English_files_image020.gif" width="288" height="43" border="0" /></a> <a><img alt="Image:stft_help_English_files_image012.gif" src="../images/Stft/Stft_help_English_files_image012.gif" width="88" height="16" border="0" /></a></dd>
</dl>
<p><b style="font-weight: bold;">Gaussianウィンドウ</b></p>
<dl>
<dd><img class="tex" src="../images/Stft/math-8c1b29b5709e6b785032092404883df0.png" alt="w[n]=e^{-\frac{1}{2}(\alpha\frac{n-(N-1)/2}{(N-1)/2})^2} \mbox{ for } 0 \le n \le N-1" border="0" /></dd>
</dl>
<p><b style="font-weight: bold;">Kaiserウィンドウ</b></p>
<dl>
<dd><img class="tex" src="../images/Stft/math-6ac7c1069e87a335854c91b9b9ff2e79.png" alt="w[n]=\frac{I(\beta\sqrt{1-(\frac{2n}{N-1}-1)^2})}{I(\beta)} \mbox{ for } 0 \le n \le N-1" border="0" /></dd>
</dl>
<p>where I(ix) denotes Bessel Function.</p>
<p><b style="font-weight: bold;">サンプリング間隔の計算</b></p>
<p>サンプリング間隔の自動計算の詳細は、fft1のXファンクションのヘルプをご覧ください。</p>
<a name="More_Information" id="More_Information"></a>
<h2><span class="mw-headline">詳細な情報</span></h2>
<p>詳細は、ユーザガイドをご覧下さい。</p>
<dl>
<dd>
<ul>
<li><a href="../../UserGuide/Category/Short-Time_Fourier_Transform_%28Pro_only%29.html" title="http://docwiki.originlab.com/index.php?title=Category:Short-Time_Fourier_Transform_%28Pro_only%29" rel="nofollow">説明</a></li>
<li><a href="../../UserGuide/UserGuide/Reference_%28STFT%29.html" title="http://docwiki.originlab.com/index.php?title=UserGuide:Reference_%28STFT%29" rel="nofollow">参考</a></li>
</ul>
</dd>
</dl>
<a name="Related_X-Functions" id="Related_X-Functions"></a>
<h2><span class="mw-headline">関連するXファンクション</span></h2>
<p><a href="../../XFunction/X-Function/Fft1.html" title="X-Function:Fft1">fft1</a></p>
