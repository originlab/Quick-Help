<h1 class="firstheading">タブベースのダイアログの作成</h1>
<p><span class="OIndex" style="display: none;">Xファンクション:タブベースのダイアログ</span></p>
<p>以下の例はタブベースのXファンクションダイアログの作り方を示しています。event1関数はタブが変更されたことをキャッチします。</p>
<ol>
<li>F10を押してXファンクションビルダを開きます。Xファンクション編集ボックスに「tabdlg」と入力して、Xファンクションの名前にします。</li>
<li>変数パネルで<b>x</b>をクリックして名前を<b>str1</b>に変更します。<b>データの種類</b>を<b>string</b>に変更します。オプション文字列を<b>G:-Tab One</b>に変更します。パネルの灰色の部分を右クリックして3つの変数を追加し、以下のようにそれらの変数のプロパティを変更します。<b>保存</b>をクリックしてXファンクションを保存します。</li>

<p><a class="image"><img alt="Tabdlg.png" src="../images/Creating_Tab-based_Dialog/400px-Tabdlg.png" width="504" height="293" border="0" /></a></p>

<li>Xファンクションをコードビルダで開き、先頭に以下のコードを追加します。<span class="OIndex" style="display: none;">Xファンクション:event1</span>
<pre class="oc" style="font-family: monospace;">
<span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>event_utils.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span>
        
</pre>
<p><b style="font-weight: bold;">TabDialog_event1</b>に以下のコードを入力します。</p>
<pre class="oc" style="font-family: monospace;">
<span style="color: #008000;">//タブ変更のコード</span><span style="color: #0000ff;">
if</span> <span style="color: #000000;">(</span> GETNE_ON_ACTIVE_TAB_CHANGE <span style="color: #000080;">==</span> nEventID <span style="color: #000000;">)
{</span>
        <span style="color: #0000ff;">int</span> nLastTabIndex <span style="color: #000080;">=</span> <span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 221);">1</span>;
        <span style="color: #0000ff;">if</span> <span style="color: #000000;">(</span> <span style="color: rgb(0, 0, 64);">!</span>trGetN.<span style="color: #000000;">GetAttribute(</span>STR_LAST_TAB_INDEX_ATTRIB, nLastTabIndex<span style="color: #000000;">)</span> <span style="color: #000000;">)</span>
                nLastTabIndex <span style="color: #000080;">=</span> <span style="color: rgb(0, 0, 64);">-</span><span style="color: rgb(0, 0, 221);">1</span>;
        <span style="color: #000000;">printf(</span><span style="color: #ff00ff;">"TabChanged: Old=%d, New=%d\n"</span>, nLastTabIndex, nRow<span style="color: #000000;">)</span>;
        trGetN.<span style="color: #000000;">SetAttribute(</span>STR_LAST_TAB_INDEX_ATTRIB, nRow<span style="color: #000000;">)</span>;<span style="color: #000000;">
}</span>
</pre>
<p><b style="font-weight: bold;">TabDialog_before_execute</b>に以下のコードを入力します。</p>
<pre class="oc" style="font-family: monospace;">
<span style="color: #0000ff;">if</span> <span style="color: #000000;">(</span> is_xf_startup<span style="color: #000000;">(</span>nGetNDialog, dwCntrl<span style="color: #000000;">)</span> <span style="color: #000000;">)
{</span>
        STATS_GETN_GROUPED_SUBNODES_AS_TABS; <span style="color: #008000;">//タブでブランチを表示する</span>
        GETN_ENABLE_TABCHANGE_EVENT<span style="color: #000000;">(</span>trGetN, <span style="color: #0000ff;">true</span><span style="color: #000000;">)</span>; <span style="color: #008000;">//タブ変更のイベントを有効にする</span><span style="color: #000000;">
}</span>
</pre></li>
<li><a class="image"><img alt="Ocguide XF Compile Button.PNG" src="../images/Creating_Tab-based_Dialog/Ocguide_XF_Compile_Button.PNG" width="107" height="24" border="0" /></a>ボタンをクリックします。</li>
<li>コマンドウィンドウで<b>tabdlg -d</b>を実行してダイアログを開きます。タブの切り替えでイベントが発生し、"TabChanged: Old=-1, New=2"のようなメッセージが表示されます。</li>
</ol>
