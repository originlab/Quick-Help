<h1 class="\&quot;firstheading\&quot;">xyz_tps</h1>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>内容</h2>
</div>
<ol>
<li class="kadov-p"><a href="#Brief_Information"><span class="tocnumber">1</span> <span class="toctext">概要</span></a></li>
<li class="kadov-p"><a href="#Command_Line_Usage"><span class="tocnumber">2</span> <span class="toctext">コマンドラインでの使用法</span></a></li>
<li class="kadov-p"><a href="#Variables"><span class="tocnumber">3</span> <span class="toctext">変数</span></a></li>
<li class="kadov-p"><a href="#Description"><span class="tocnumber">4</span> <span class="toctext">説明</span></a></li>
<li class="kadov-p"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">サンプル</span></a></li>
<li class="kadov-p"><a href="#Algorithm"><span class="tocnumber">6</span> <span class="toctext">アルゴリズム</span></a></li>
<li class="kadov-p"><a href="#References"><span class="tocnumber">7</span> <span class="toctext">参考文献</span></a></li>
<li class="kadov-p"><a href="#Related_X-Functions"><span class="tocnumber">8</span> <span class="toctext">関連のXファンクション</span></a></li>
</ol>
</td>
</tr>
</table>
<a name="Brief_Information" id="Brief_Information"></a>
<h2><span class="mw-headline">概要</span></h2>
<p>Thin Plane スプライン補間</p>
<a name="Command_Line_Usage" id="Command_Line_Usage"></a>
<h2><span class="mw-headline">コマンドラインでの使用法</span></h2>
<p><code style="font-family: monospace;">1. xyz_tps iz:=Col(3);</code></p>
<p><code style="font-family: monospace;">2. xyz_renka iz:=Col(3) rows:=20 cols:=20;</code></p>
<p><code style="font-family: monospace;">3. xyz_tps iz:=Col(3) s:=0.8;</code></p>
<p><code style="font-family: monospace;">4. xyz_renka iz:=Col(3) om:=[MBook]MSheet!Mat(1);</code></p>
<a name="Variables" id="Variables"></a>
<h2><span class="mw-headline">変数</span></h2>
<table class="xfvar">
<tr>
<th style="width: 8%;">表示<br />
名</th>
<th style="width: 8%;">変数<br />
名</th>
<th style="width: 8%;">I/O<br />
と<br />
データ型</th>
<th style="width: 8%;">デフォルト<br />
値</th>
<th>説明</th>
</tr>
<tr>
<td>入力</td>
<td>iz</td>
<td>
<p>入力</p>
<p>XYZRange</p>
</td>
<td>
<p>&#160;</p>
</td>
<td>
<p>入力XYZ範囲の指定</p>
</td>
</tr>
<tr>
<td>行</td>
<td>rows</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">35</p>
</td>
<td>
<p>出力行列の行</p>
</td>
</tr>
<tr>
<td>列</td>
<td>cols</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">35</p>
</td>
<td>
<p>出力行列の列</p>
</td>
</tr>
<tr>
<td>スムージング</td>
<td>s</td>
<td>
<p>入力</p>
<p>double</p>
</td>
<td>
<p style="text-align: center;">0.5</p>
</td>
<td>
<p>これは入力データポイントを超えるグリッド表面の広がりを指定する非負の値です。因数がゼロの場合、スムージング処理は行われず、補間面は全てのデータポイントを通過します。正の因数は表面スムーザを生成しますが、余り大きな因数にすると元データの全ての情報を保持することができなくなります。</p>
</td>
</tr>
<tr>
<td>外れ値</td>
<td>outlier</td>
<td>
<p>入力</p>
<p>int</p>
</td>
<td>
<p style="text-align: center;">extrap</p>
</td>
<td>
<p>入力データが不規則で補間によって行列を完全に埋めることができない場合、外れ値にあたる箇所に指定した値を配置します。(下記参照)<br />
オプションリスト</p>
<ul>
<li class="kadov-p"><i style="font-style: italic;">extrap:補外</i>
<dl>
<dd>TPSアルゴリズムに基づく外挿点を外れ値に割り当てます。 (デフォルトの設定)</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">missing:</i>欠損値
<dl>
<dd>外れ値を欠損値とします。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">zero:ゼロ</i>
<dl>
<dd>外れ値をゼロとします。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">min:最小</i>
<dl>
<dd>Z列の最小値を外れ値に割り当てます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">Max:最大</i>
<dl>
<dd>Z列の最大値を外れ値に割り当てます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">mean:平均</i>
<dl>
<dd>Z列の平均値を外れ値に割り当てます。</dd>
</dl>
</li>
<li class="kadov-p"><i style="font-style: italic;">custom:カスタム値</i>
<dl>
<dd>指定したカスタム値を外れ値に割り当てます。</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr>
<td>外部</td>
<td>outside_val</td>
<td>
<p>入力</p>
<p>double</p>
</td>
<td>
<p style="text-align: center;">100</p>
</td>
<td>
<p>結果行列内の外れ値に割り当てるカスタム値を指定します。外れ値フィールドの カスタム値オプションが選択されている場合にのみカスタム値を指定できます。</p>
</td>
</tr>
<tr>
<td>許容値</td>
<td>tolerance</td>
<td>
<p>入力</p>
<p>double</p>
</td>
<td>
<p style="text-align: center;">5E-3</p>
</td>
<td>
<p>入力データの周囲が矩形かどうか決定する際の許容値を指定します。この変数は外れ値フィールドに外挿が選択されている場合には選択することができません。</p>
</td>
</tr>
<tr>
<td>出力行列</td>
<td>om</td>
<td>
<p>出力</p>
<p>MatrixObject</p>
</td>
<td>
<p style="text-align: center;">&lt;新規&gt;</p>
</td>
<td>
<p>ここでは、行列ワークシート名を含む出力結果の宛先や形式などを指定します。</p>
</td>
</tr>
<tr>
<td>正則化</td>
<td>r</td>
<td>
<p>出力</p>
<p>double</p>
</td>
<td>
<p style="text-align: center;">&lt;unassigned&gt;</p>
</td>
<td>
<p>正則化変数、ここでは曲げエネルギーの 加重として機能します。このパラメータはスムージング因数に比例し、スムージング因数がゼロでない場合にのみ有効となります。これは、入力されたスムージング因数に基づいて計算されたパラメータです。</p>
</td>
</tr>
</table>
<a name="Description" id="Description"></a>
<h2><span class="mw-headline">説明</span></h2>
<p>この関数はTPS(Thin Plate Spline)アルゴリズムに基づいたランダムな行列変換を行う手法を提供します。これは、XYZグリッディングダイアログボックスにも表示されます。</p>
<p>TPSは物理的な補間手法です。グリッディングデータを生成するために、この手法では、全てのデータポイントは薄い、伸縮性のある平面や平板に分配されると仮定します。平面 はグリッドポイントを移動しないよう制約されます。スプラインはグリッドポイントを補間することによって2次元の曲面を形成します。曲面はデータに対して適当なフィットを行うために、データ間で変形されます。最善の結果は、通常、いわゆる平面の"曲げエネルギー関数"を最小化することよって得ることができます。</p>
<p>TPSは局所的な水平面の2次元補間に適した手法です。</p>
<a name="Examples" id="Examples"></a>
<h2><span class="mw-headline">サンプル</span></h2>
<p>1. ファイル\<i>Samples</i>\<i>Matrix Conversion and Gridding</i>\ <i>XYZ Random Gaussian.dat</i>をインポートします。</p>
<p>2. 次のコマンドを入力し、Enterキーを押します。</p>
<p><code style="font-family: monospace;">xyz_tps iz:=Col(3) rows:=50 cols:=50</code></p>
<p>行列がイメージモードで新しいウィンドウ内でグラフ化されます。</p>
<dl>
<dd><a href="" style="color: #0000ff; text-decoration: underline;"><img alt="Image:xyz_tps_help_English_files_image002.jpg" src="../images/Xyz_tps/Xyz_tps_help_English_files_image002.jpg" title="Image:xyz_tps_help_English_files_image002.jpg" width="279" height="304" border="0" /></a></dd>
</dl>
<p><br />
他のサンプルについては、XFスクリプトダイアログ(F11を押す)をご覧下さい。</p>
<a name="Algorithm" id="Algorithm"></a>
<h2><span class="mw-headline">アルゴリズム</span></h2>
<p>Thin Plate Spline (TPS) アルゴリズムは散布データのための補間法です。TPS プロセスは薄い、伸縮性のある、平面 (または曲面)をグリッド点に固定し、全てのデータポイントを通過するように曲面を持ち上げるのに似た作業です。 TPS のアルゴリズムによって、全てのデータポイントと最小のいわゆる曲げエネルギー関数の両方を取得する関数を構築します。</p>
<p>曲げエネルギー関数は次のように定義されます。</p>
<p><a href=""><img alt="Image:xyz_tps_help_English_files_image004.gif" src="../images/Xyz_tps/Xyz_tps_help_English_files_image004.gif" title="Image:xyz_tps_help_English_files_image004.gif" width="197" height="31" border="0" /></a>.</p>
<p>数式の最小化関数です。</p>
<p><a href=""><img alt="Image:xyz_tps_help_English_files_image006.gif" src="../images/Xyz_tps/Xyz_tps_help_English_files_image006.gif" title="Image:xyz_tps_help_English_files_image006.gif" width="329" height="45" border="0" /></a>,</p>
<p>ここで <a href=""><img alt="Image:xyz_tps_help_English_files_image008.gif" src="../images/Xyz_tps/Xyz_tps_help_English_files_image008.gif" title="Image:xyz_tps_help_English_files_image008.gif" width="113" height="24" border="0" /></a>, と <a href=""><img alt="Image:xyz_tps_help_English_files_image010.gif" src="../images/Xyz_tps/Xyz_tps_help_English_files_image010.gif" title="Image:xyz_tps_help_English_files_image010.gif" width="24" height="27" border="0" /></a> はベクトルの大きさを示しています。</p>
<p>規則化パラメータは曲げエネルギーの重み付けとして機能します。ゼロに近い規則化パラメータは全てのデータポイントに接近しますが、ノイズの多いデータの場合、粗い曲面を作成してしまいます。大きな規則化パラメータはデータをより滑らかにしますが、個々のデータへのフィットの厳密さは失われてしまいます。そのため、規則化パラメータは補間の必要条件の厳密さを示すものとなります。このパラメータは入力されたスムージング因数に基づいて計算されます。</p>
<p>XYZ のデータポイントを <i>x</i><sub><i>i</i></sub><i>, y</i><sub><i>i</i></sub>, <i>z</i><sub><i>i</i></sub>, で表す場合、<span class="texhtml"><i>i</i> = 1, 2, ... <i>N</i>,</span> となります。</p>
<p><a href=""><img alt="Image:xyz_tps_help_English_files_image012.gif" src="../images/Xyz_tps/Xyz_tps_help_English_files_image012.gif" title="Image:xyz_tps_help_English_files_image012.gif" width="349" height="89" border="0" /></a></p>
<p>最小の曲げエネルギーを検出するためには、より算術的な変換が必要とされます。アルゴリズムの詳細に興味のあるユーザは以下の参考文献をご一読ください。</p>
<a name="References" id="References"></a>
<h2><span class="mw-headline">参考文献</span></h2>
<p>[1].Bookstein, F.L."Principal Warps: Thin Plate Splines and the Decomposition of Deformations." <i>IEEE Trans.Pattern Anal.Mach.Intell</i>.11, 567-585 (1989)</p>
<p>[2].Craven, P.and Wahba, G.<i>"Smoothing Noisy Data with spline Functions"</i>.Numer.Math 31, 377-403 (1979).</p>
<p>[3].Donato, Gianluca and Serge Belongie, <i>"Approximation Methods for Thin Plate spline Mappings and Principal Warps"</i> 2002.</p>
<a name="Related_X-Functions" id="Related_X-Functions"></a>
<h2><span class="mw-headline">関連のXファンクション</span></h2>
<p><a href="Xyz_regular.html" title="X-Function:Xyz regular">xyz_regular</a>, <a href="Xyz_renka.html" title="X-Function:Xyz renka">xyz_renka</a>, <a href="Xyz_renka_nag.html" title="X-Function:Xyz renka nag">xyz_renka_nag</a>, <a href="Xyz_shep.html" title="X-Function:Xyz shep">xyz_shep</a>, <a href="Xyz_shep_nag.html" title="X-Function:Xyz shep nag">xyz_shep_nag</a>, <a href="Xyz_sparse.html" title="X-Function:Xyz sparse">xyz_sparse</a></p>
