<h1 class="firstheading">ダイアログにカスタムボタンを追加する</h1><p><span class="OIndex" style="display:none">X-Function, Add Custom Button on Dialog</span>
</p>
<h2><a name="Adding_Custom_Button_on_Dialog"></a><span class="mw-headline">ダイアログにカスタムボタンを追加する</span></h2>
<p>次のサンプルは2つのカスタムボタンを追加する方法を示します。この例では、Xファンクションダイアログにリセットボタンと適用ボタンを追加し、event1関数も使用してどのボタンがクリックされたか見極めます。 
</p>
<ol><li>F10を押してXファンクションビルダを開きます。Xファンクション編集ボックスに「CustomButton」と入力して、Xファンクションの名前にします。</li>
<li><a  class="image"><img alt="Ocguide xf treeview button.png" src="../images/Adding_Custom_Button_on_Dialog/Ocguide_xf_treeview_button.png" width="23"  /></a> ボタンをクリックしてツリービューパネルに切り替え、GetNダイアログカスタムボタン編集ボックスに「Reset|Apply」と入力します。保存をクリックしてXファンクションを保存します。</li>
<li>コードビルダでXファンクションを開きます。そして、次のコードをCustomButton_event1関数に入力し、<a  class="image"><img alt="Ocguide XF Compile Button.PNG" src="../images/Adding_Custom_Button_on_Dialog/Ocguide_XF_Compile_Button.PNG" width="92"  /></a>ボタンをクリックします。 
<span class="OIndex" style="display:none">Xファンクション:event1</span>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">if</span><span style="color: #000000;">(</span> nEventID <span style="color: #000080;">==</span> GETNE_ON_CUSTOM_BUTTON1 <span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	out_str<span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;Reset click&quot;</span><span style="color: #000000;">)</span>;
	<span style="color: #008000;">//return PEVENT_GETN_RET_TO_CLOSE; // ダイアログを閉じる</span>
	<span style="color: #008000;">//return PEVENT_GETN_RET_FORCE_UPDATE; //強制更新</span>

<span style="color: #000000;">}</span>

<span style="color: #0000ff;">if</span><span style="color: #000000;">(</span> nEventID <span style="color: #000080;">==</span> GETNE_ON_APPLY <span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	out_str<span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;Apply click&quot;</span><span style="color: #000000;">)</span>;
<span style="color: #000000;">}</span>

<span style="color: #0000ff;">if</span><span style="color: #000000;">(</span> nEventID <span style="color: #000080;">==</span> GETNE_ON_OK <span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	out_str<span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;OK click&quot;</span><span style="color: #000000;">)</span>;
<span style="color: #000000;">}</span></pre>
</li>
<li>コマンドウィンドウで<i>CustomButton -d</i> を実行し、このXファンクションのダイアログを開きます。  4つのボタン、Reset、適用、OK、キャンセルを確認できます。</li>
<li>Resetボタンをクリックするとコマンドウィンドウに 「Reset click」と表示されます。適用ボタンをクリックすると「Apply click」とコマンドウィンドウに表示され、キャンセルボタンは閉じるボタンに代わります。OKをクリックすると「OK click」が表示され、ダイアログが閉じます。
</li>
</ol>
<p><br />
<b>Note:</b> 詳細は、Origin Cヘルプの <a class="external text" href="../../OriginC/OriginC/GETN_CUSTOM_BUTTON.html">GETN_CUSTOM_BUTTON</a> を参照してください。
</p>
<h2><a name="Show_Preview_Button_on_Graph_Preview_GetN_Dialog"></a><span class="mw-headline">グラフプレビューGetNダイアログでプレビューボタンを表示する</span></h2>
<p>Xファンクションの枠組みは、グラフプレビューGetNダイアログのプレビューを表示するボタンと自動プレビューチェックボックスをサポートしています。これらの2つのコントロールは自動的にプレビューを更新する(自動プレビューチェックを付ける必要があります)か手動でプレビューを更新(プレビューボタンをクリック)します。
次の手順でこれら2つのコントロールをどのように追加するか示します。 
</p><p>プレビューボタンを追加するには以下の5つの手順を実行します。
</p>
<ol><li>F10を押してXファンクションビルダを開きます。Xファンクション編集ボックスに「PreviewButtons」と入力して、Xファンクションの名前にします。</li>
<li>変数表で以下のように変数を設定してOKをクリックして、このXファンクションを保存します。
<pre>
Name: gp
Label: Graph
Input/Output: Input
Data Type: string
Control: ...Graph
</pre>
</li>
<li>コマンド<i>PreviewButtons -d</i> を実行してXファンクションダイアログを開きます。  今回は2つのボタン、OKとキャンセルしかありません。キャンセルをクリックしてダイアログを閉じます。</li>
<li>Xファンクションビルダでは<a  class="image"><img alt="Ocguide xf treeview button.png" src="../images/Adding_Custom_Button_on_Dialog/Ocguide_xf_treeview_button.png" width="23"  /></a>ボタンをクリックしてツリービューパネルへ移動し、使用のコンテクスト→メニュー→自動GetNダイアログで「プレビュー付きGetNGraphBox」を選択してから「プレビューボタンを表示」にチェックをつけます。このXファンクションを保存します。</li>
<li><i>PreviewButtons -d</i> を実行してダイアログを再度開きます。すると、今度は2つのコントロール、自動プレビューチェックボックスとプレビューボタンが追加表示されている事がわかります。
</li>
</ol>
<p>以下の手順は、<b>gp</b>変数の選択によってダイアログのプレビューグラフが自動更新されるか示します。   GetN Graph Preview ダイアログについての詳細は、<a href="../../XFunction/X-Function/Creating_Graph_Preview_GetN_Dialog.html" title="X-Function:GetNダイアログでグラフプレビューを作成">GetNダイアログでグラフプレビューを作成</a>を確認してください。
</p>
<ol start="6">
<li>このXファンクションをコードビルダで開きます。以下のコードをコピーして<b>GetNGraphPreview_OnChange</b>関数に貼り付けてください。
<pre class="oc" style="font-family:monospace;"><span style="color: #008000;">//GetNGraphPreview_OnUpdateGraphを呼び出してグラフを更新するビットを含める</span>
<span style="color: #0000ff;">if</span><span style="color: #000000;">(</span> <span style="color: #000040;">!</span><span style="color: #000000;">(</span>dwUpdateGraph <span style="color: #000040;">&amp;</span> UPDATE_GRAPH_CHANGED<span style="color: #000000;">)</span> <span style="color: #000000;">)</span>
	dwUpdateGraph <span style="color: #000040;">|</span><span style="color: #000080;">=</span> UPDATE_GRAPH_CHANGED;</pre>
</li>
<li>以下のコードを<b>GetNGraphPreview_OnUpdateGraph</b> 関数にコピーします。
<pre class="oc" style="font-family:monospace;">string strGraph <span style="color: #000080;">=</span> trGetN.<span style="color: #000000;">gp</span>.<span style="color: #000000;">strVal</span>;
GraphPage gpSource<span style="color: #000000;">(</span>strGraph<span style="color: #000000;">)</span>;
GraphPage gpDest<span style="color: #000000;">(</span>pgTemp<span style="color: #000000;">)</span>;	
page_clone<span style="color: #000000;">(</span>gpSource, gpDest<span style="color: #000000;">)</span>;</pre></li>
<li><a  class="image"><img alt="Ocguide XF Compile Button.PNG" src="../images/Adding_Custom_Button_on_Dialog/Ocguide_XF_Compile_Button.PNG" width="92"  /></a>ボタンをクリックします。コマンドウィンドウで<i>PreviewButtons -d</i> を実行しダイアログを開きます。</li>
<li>ダイアログでグラフ名をグラフコントロールに入力するか、<a  class="image"><img alt="OCguide xf 3dots button.png" src="../images/Adding_Custom_Button_on_Dialog/OCguide_xf_3dots_button.png" width="17"  /></a>ボタンをクリックして開くグラフブラウザダイアログでグラフを1つ選択します。自動プレビューチェックボックスにチェックを付けるか、プレビューボタンをクリックします。すると、指定したグラフがプレビューパネルに表示されます。以下の画像を確認してください。
<div style="text-aligh:center"><a  class="image"><img alt="OCguide xf graph preview dlg.png" src="../images/Adding_Custom_Button_on_Dialog/OCguide_xf_graph_preview_dlg.png" width="495"  /></a></div>
</li>
<ol></ol>
</ol>







    