<h1 class="firstheading">Layer::MakeLineProfile</h1>

  <p><span class="OIndex" style="display:none">MakeLineProfile</span></p>

  <div id="toc" class="toc">
    <div id="toctitle">
      <h2>Contents</h2>
    </div>

    <ul>
      <li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>

      <li class="toclevel-1 tocsection-2"><a href="#Syntax"><span class="tocnumber">2</span> <span class="toctext">Syntax</span></a></li>

      <li class="toclevel-1 tocsection-3"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>

      <li class="toclevel-1 tocsection-4"><a href="#Return"><span class="tocnumber">4</span> <span class="toctext">Return</span></a></li>

      <li class="toclevel-1 tocsection-5"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a></li>

      <li class="toclevel-1 tocsection-6"><a href="#Remark"><span class="tocnumber">6</span> <span class="toctext">Remark</span></a></li>

      <li class="toclevel-1 tocsection-7"><a href="#See_Also"><span class="tocnumber">7</span> <span class="toctext">See Also</span></a></li>

      <li class="toclevel-1 tocsection-8"><a href="#header_to_Include"><span class="tocnumber">8</span> <span class="toctext">header to Include</span></a></li>
    </ul>
  </div>

  <h2><a name="Description"></a><span class="mw-headline">Description</span></h2>

  <p>It computes profile of the image or matrix, including, possibly, averaging over a moving window around a point, and the standard deviation withing the window.</p>

  <h2><a name="Syntax"></a><span class="mw-headline">Syntax</span></h2>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">int</span> MakeLineProfile<span style="color: #000000;">(</span> vector<span style="color: #000080;">&lt;</span><span style="color: #0000ff;">int</span><span style="color: #000080;">&gt;</span> <span style="color: #000040;">&amp;</span> vnRows, vector<span style="color: #000080;">&lt;</span><span style="color: #0000ff;">int</span><span style="color: #000080;">&gt;</span> <span style="color: #000040;">&amp;</span> vnCols, OImageMakeLineProfileParams <span style="color: #000040;">*</span> pstParams, matrix <span style="color: #000040;">&amp;</span> matOut, matrix <span style="color: #000040;">&amp;</span> matOutAux <span style="color: #000080;">=</span> <span style="color: #0000ff;">NULL</span> <span style="color: #000000;">)</span>
</pre>

  <h2><a name="Parameters"></a><span class="mw-headline">Parameters</span></h2>

  <dl>
    <dt>vnRows</dt>

    <dd>[input] the row indices of the points within the image where the profile is to be computed.</dd>

    <dt>vnCols</dt>

    <dd>[input] the column indices of the points within the image where the profile is to be computed. It must be of the same size as vnRows.</dd>

    <dt>pstParams</dt>

    <dd>[input] additional information about how the profile determination ought to proceed:</dd>
  </dl>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">struct</span> OImageMakeLineProfileParams
<span style="color: #000000;">{</span>
 <span style="color: #008000;">//They are used only if the line of points is horizontal or vertical.</span>
 <span style="color: #008000;">//They are the number of points BEFORE(Behind) or AFTER(Ahead) the current point in the same direction </span>
 <span style="color: #008000;">//as other points, which should be averaged over to produce the final result. </span>
 <span style="color: #008000;">//For example, if vnRows and vnCols produce a vertical line(which means all the values in vnCols are the same)</span>
 <span style="color: #008000;">//then this variable determines how many rows before and after the current point's row are averaged over.</span>
 <span style="color: #0000ff;">int</span> nPtsBehind;
 <span style="color: #0000ff;">int</span> nPtsAhead;
                
 <span style="color: #008000;">//They are used only if the line of points is horizontal or vertical.</span>
 <span style="color: #008000;">//They are the number of points BEFORE or AFTER the current point</span>
 <span style="color: #008000;">//n the perpendicular direction of all other points which should be </span>
 <span style="color: #008000;">//averaged over to produce the final result. For example, if vnRows </span>
 <span style="color: #008000;">//and vnCols produce a vertical line(which means all the values in vnCols are the same)</span>
 <span style="color: #008000;">//then this variable determines how many columns before and after </span>
 <span style="color: #008000;">//the all point's column are averaged over.      </span>
                                                                                                                                                
 <span style="color: #008000;">//These are used ONLY for lines of points that are vetical (all the </span>
 <span style="color: #008000;">//values in vnCols are the same) or horizontal (all the values in vnRows are the same),</span>
 <span style="color: #008000;">//otherwise they are not used, i.e. there is no averaging and the </span>
 <span style="color: #008000;">//value of the profile at the current point equals the value of the pixel at that position.      </span>
 <span style="color: #0000ff;">int</span> nPtsSideBefore;
 <span style="color: #0000ff;">int</span> nPtsSideAfter;

 <span style="color: #008000;">//Used if the line of points is neither horizontal nor vertical - </span>
 <span style="color: #008000;">//it represents the radius around the current point to determine </span>
 <span style="color: #008000;">//which neighboring points ought to be included in averaging. </span>
 <span style="color: #008000;">//If 0, only the input point is put into the output.                     </span>
 <span style="color: #0000ff;">double</span> radius;
<span style="color: #000000;">}</span>
</pre>

  <dl>
    <dt>matOut</dt>

    <dd>[output] the profile: the number of of rows equals the number of points in the arrays vnRows, vnCols; the number of columns equals the number of frames in the image.</dd>

    <dt>matOutAux</dt>

    <dd>[output] the standard deviation over the averaging window if there is any averaging (see pstParams above) for every point. If no avearging, it will contain missing values. The meaning of rows and columns is the same as for matOut.</dd>
  </dl>

  <h2><a name="Return"></a><span class="mw-headline">Return</span></h2>

  <p>0 if success, otherwise FALSE.</p>

  <h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>

  <p><b>EX1</b></p>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">void</span>        test_arbitrary_line_profile<span style="color: #000000;">(</span><span style="color: #0000ff;">int</span> nFixedPos <span style="color: #000080;">=</span> <span style="color: #0000dd;">10</span>, <span style="color: #0000ff;">int</span> nWidth<span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>, <span style="color: #0000ff;">int</span> bVertical <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
        ImageLayer imglayer <span style="color: #000080;">=</span> Project.<span style="color: #000000;">ActiveLayer</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
        <span style="color: #0000ff;">if</span> <span style="color: #000000;">(</span><span style="color: #000040;">!</span>imglayer.<span style="color: #000000;">IsValid</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>
        <span style="color: #000000;">{</span>
                out_str<span style="color: #000000;">(</span><span style="color: #ff00ff;">"Inavlid Active Window!"</span><span style="color: #000000;">)</span>;
                <span style="color: #0000ff;">return</span>;
        <span style="color: #000000;">}</span>
        <span style="color: #0000ff;">int</span> nW <span style="color: #000080;">=</span> imglayer.<span style="color: #000000;">GetProp</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"Width"</span><span style="color: #000000;">)</span>;
        <span style="color: #0000ff;">int</span> nH <span style="color: #000080;">=</span> imglayer.<span style="color: #000000;">GetProp</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"Height"</span><span style="color: #000000;">)</span>;
        <span style="color: #0000ff;">int</span> nCount <span style="color: #000080;">=</span> nH;
        <span style="color: #0000ff;">if</span><span style="color: #000000;">(</span>bVertical<span style="color: #000080;">==</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span>
                nCount <span style="color: #000080;">=</span> nW;
        vector<span style="color: #000080;">&lt;</span><span style="color: #0000ff;">int</span><span style="color: #000080;">&gt;</span>                vnRows;
        vector<span style="color: #000080;">&lt;</span><span style="color: #0000ff;">int</span><span style="color: #000080;">&gt;</span>                vnCols;
        vnRows.<span style="color: #000000;">Data</span><span style="color: #000000;">(</span><span style="color: #0000dd;">0</span>, nCount <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #000000;">)</span>;
        vnCols.<span style="color: #000000;">Data</span><span style="color: #000000;">(</span><span style="color: #0000dd;">0</span>, nCount <span style="color: #000040;">-</span> <span style="color: #0000dd;">1</span><span style="color: #000000;">)</span>;
        
        OImageMakeLineProfileParams     params;
        params.<span style="color: #000000;">nPtsBehind</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">2</span>;
        params.<span style="color: #000000;">nPtsAhead</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
        params.<span style="color: #000000;">nPtsSideBefore</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span>;
        params.<span style="color: #000000;">nPtsSideAfter</span> <span style="color: #000080;">=</span> nWidth;
        params.<span style="color: #000000;">radius</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">4</span>;
        matrix matOut, matOutAux;
        <span style="color: #0000ff;">int</span> nRet <span style="color: #000080;">=</span> imglayer.<span style="color: #000000;">MakeLineProfile</span><span style="color: #000000;">(</span>vnRows, vnCols, <span style="color: #000040;">&amp;</span>params, matOut, matOutAux<span style="color: #000000;">)</span>;
        
        MatrixPage mp;
        mp.<span style="color: #000000;">Create</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"Origin"</span><span style="color: #000000;">)</span>;
        Matrix matA;
        matA.<span style="color: #000000;">Attach</span><span style="color: #000000;">(</span>mp.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>; 
        matA <span style="color: #000080;">=</span> matOut;
    
        MatrixPage mp2;
        mp2.<span style="color: #000000;">Create</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"Origin"</span><span style="color: #000000;">)</span>;
        Matrix matB;
        matB.<span style="color: #000000;">Attach</span><span style="color: #000000;">(</span>mp2.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>; 
        matB <span style="color: #000080;">=</span> matOutAux;
    
        <span style="color: #0000ff;">return</span>;
<span style="color: #000000;">}</span>
</pre>

  <h2><a name="Remark"></a><span class="mw-headline">Remark</span></h2>

  <h2><a name="See_Also"></a><span class="mw-headline">See Also</span></h2>

  <p><a href="../../OriginC/OriginC/Layer-MakePixelProfile.html" title="OriginC:Layer-MakePixelProfile">Layer::MakePixelProfile</a></p>

  <h2><a name="header_to_Include"></a><span class="mw-headline">header to Include</span></h2>

  <p>origin.h</p>
