<h1 class="firstheading">matrixbase::CumulativeSum</h1>

  <p><span class="OIndex" style="display:none">CumulativeSum</span></p>

  <div id="toc" class="toc">
    <div id="toctitle">
      <h2>Contents</h2>
    </div>

    <ul>
      <li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>

      <li class="toclevel-1 tocsection-2"><a href="#Syntax"><span class="tocnumber">2</span> <span class="toctext">Syntax</span></a></li>

      <li class="toclevel-1 tocsection-3"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>

      <li class="toclevel-1 tocsection-4"><a href="#Return"><span class="tocnumber">4</span> <span class="toctext">Return</span></a></li>

      <li class="toclevel-1 tocsection-5"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a></li>

      <li class="toclevel-1 tocsection-6"><a href="#Remark"><span class="tocnumber">6</span> <span class="toctext">Remark</span></a></li>

      <li class="toclevel-1 tocsection-7"><a href="#See_Also"><span class="tocnumber">7</span> <span class="toctext">See Also</span></a></li>

      <li class="toclevel-1 tocsection-8"><a href="#header_to_Include"><span class="tocnumber">8</span> <span class="toctext">header to Include</span></a></li>
    </ul>
  </div>

  <h2><a name="Description"></a><span class="mw-headline">Description</span></h2>

  <p>Compute the cumulative sum of this matrix</p>

  <h2><a name="Syntax"></a><span class="mw-headline">Syntax</span></h2>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">int</span> CumulativeSum<span style="color: #000000;">(</span> matrixbase <span style="color: #000040;">&amp;</span> mbSum, <span style="color: #0000ff;">int</span> nDim <span style="color: #000080;">=</span> <span style="color: #0000dd;">1</span> <span style="color: #000000;">)</span>
</pre>

  <h2><a name="Parameters"></a><span class="mw-headline">Parameters</span></h2>

  <dl>
    <dt>mbSum</dt>

    <dd>[output] The result matrix containing the cumulative sum</dd>

    <dt>nDim</dt>

    <dd>[input] The CumulativeSum function can operate row wise (relative to the first dimension when nDim=1) or column wise (relative to the second dimension when nDim=2)</dd>
  </dl>

  <h2><a name="Return"></a><span class="mw-headline">Return</span></h2>

  <p>Returns 0 on success and a non-zero error code on failure.</p>

  <h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>

  <p><b>EX1</b></p>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">void</span> matrixbase_CumulativeSum_ex1<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
    matrix<span style="color: #000080;">&lt;</span><span style="color: #0000ff;">double</span><span style="color: #000080;">&gt;</span> mat1 <span style="color: #000080;">=</span> <span style="color: #000000;">{</span> 
        <span style="color: #000000;">{</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">1</span><span style="color: #000000;">}</span>,
        <span style="color: #000000;">{</span><span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">2</span><span style="color: #000000;">}</span>,
        <span style="color: #000000;">{</span><span style="color: #0000dd;">3</span>, <span style="color: #0000dd;">3</span>, <span style="color: #0000dd;">3</span><span style="color: #000000;">}</span>
    <span style="color: #000000;">}</span>;
    <span style="color: #0000ff;">int</span> rc <span style="color: #000080;">=</span> mat1.<span style="color: #000000;">CumulativeSum</span><span style="color: #000000;">(</span>mat1<span style="color: #000000;">)</span>;
    <span style="color: #0000ff;">if</span><span style="color: #000000;">(</span>rc<span style="color: #000040;">!</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span> 
        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"Error: CumulativeProduct failed. rc=%d<span style="color: #666666; font-weight: bold;">\n</span>"</span>, rc<span style="color: #000000;">)</span>;
    <span style="color: #0000ff;">else</span><span style="color: #000000;">{</span>
        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"The matrix is:<span style="color: #666666; font-weight: bold;">\n</span>"</span><span style="color: #000000;">)</span>;
        <span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span> ii<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>; ii<span style="color: #000080;">&lt;</span> mat1.<span style="color: #000000;">GetNumRows</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>; ii<span style="color: #000040;">++</span><span style="color: #000000;">)</span><span style="color: #000000;">{</span>
                        <span style="color: #0000ff;">for</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span> jj<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>; jj<span style="color: #000080;">&lt;</span> mat1.<span style="color: #000000;">GetNumCols</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>; jj<span style="color: #000040;">++</span><span style="color: #000000;">)</span> 
                                <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"%g  "</span>, mat1<span style="color: #000000;">[</span>ii<span style="color: #000000;">]</span><span style="color: #000000;">[</span>jj<span style="color: #000000;">]</span><span style="color: #000000;">)</span>;
                        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"<span style="color: #666666; font-weight: bold;">\r</span><span style="color: #666666; font-weight: bold;">\n</span>"</span><span style="color: #000000;">)</span>;
        <span style="color: #000000;">}</span>
    <span style="color: #000000;">}</span>
<span style="color: #000000;">}</span>
</pre>

  <p><b>EX2</b></p>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #008000;">// Cumulative sum of a matrix</span>
<span style="color: #0000ff;">void</span> matrixbase_CumulativeSum_ex2<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
    <span style="color: #0000ff;">int</span> rc, rc2;
    
    matrix<span style="color: #000080;">&lt;</span><span style="color: #0000ff;">double</span><span style="color: #000080;">&gt;</span> mat1 <span style="color: #000080;">=</span> <span style="color: #000000;">{</span> 
        <span style="color: #000000;">{</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">1</span><span style="color: #000000;">}</span>,
        <span style="color: #000000;">{</span><span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">2</span><span style="color: #000000;">}</span>,
        <span style="color: #000000;">{</span><span style="color: #0000dd;">3</span>, <span style="color: #0000dd;">3</span>, <span style="color: #0000dd;">3</span><span style="color: #000000;">}</span>
    <span style="color: #000000;">}</span>;

    matrix<span style="color: #000080;">&lt;</span><span style="color: #0000ff;">double</span><span style="color: #000080;">&gt;</span> mat2; <span style="color: #008000;">// result matrix</span>
    matrix<span style="color: #000080;">&lt;</span><span style="color: #0000ff;">double</span><span style="color: #000080;">&gt;</span> mat3; <span style="color: #008000;">// result matrix</span>

    <span style="color: #008000;">// Comutative sum of mat1 (row-wise):</span>
    <span style="color: #008000;">//   {1,  1,  1}</span>
    <span style="color: #008000;">//   {3,  3,  3}</span>
    <span style="color: #008000;">//   (6,  6,  6}</span>
    <span style="color: #008000;">// that is, each column is:</span>
    <span style="color: #008000;">//   {1    }</span>
    <span style="color: #008000;">//   {1+2  }</span>
    <span style="color: #008000;">//   {1+2+3}</span>
    <span style="color: #008000;">//</span>
    <span style="color: #008000;">// Comutative Sum of mat1 (column-wise):</span>
    <span style="color: #008000;">//   {1,  2,  3}</span>
    <span style="color: #008000;">//   {2,  4,  6}</span>
    <span style="color: #008000;">//   {3,  6,  9}</span>
    <span style="color: #008000;">// that is,</span>
    <span style="color: #008000;">//   {1,  1*2, 1*3}</span>
    <span style="color: #008000;">//   {2,  2*2, 2*3}</span>
    <span style="color: #008000;">//   {3,  3*2, 3*3}</span>
    
    MatrixPage MatPg1;
    MatPg1.<span style="color: #000000;">Create</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"Origin"</span><span style="color: #000000;">)</span>;
    MatrixLayer MatLy1 <span style="color: #000080;">=</span> MatPg1.<span style="color: #000000;">Layers</span><span style="color: #000000;">(</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span>;
    Matrix Mat1<span style="color: #000000;">(</span>MatLy1<span style="color: #000000;">)</span>;
    Mat1 <span style="color: #000080;">=</span> mat1;
    
    MatrixPage MatPg2;
    MatPg2.<span style="color: #000000;">Create</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"Origin"</span><span style="color: #000000;">)</span>;
    MatrixLayer MatLy2 <span style="color: #000080;">=</span> MatPg2.<span style="color: #000000;">Layers</span><span style="color: #000000;">(</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span>;
    Matrix Mat2<span style="color: #000000;">(</span>MatLy2<span style="color: #000000;">)</span>;
    
    MatrixPage MatPg3;
    MatPg3.<span style="color: #000000;">Create</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"Origin"</span><span style="color: #000000;">)</span>;
    MatrixLayer MatLy3 <span style="color: #000080;">=</span> MatPg3.<span style="color: #000000;">Layers</span><span style="color: #000000;">(</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span>;
    Matrix Mat3<span style="color: #000000;">(</span>MatLy3<span style="color: #000000;">)</span>;

    rc<span style="color: #000080;">=</span>mat1.<span style="color: #000000;">CumulativeSum</span><span style="color: #000000;">(</span>mat2<span style="color: #000000;">)</span>;  <span style="color: #008000;">// Assign the row-wise cumulative sum of mat1 to mat2</span>
    <span style="color: #0000ff;">if</span><span style="color: #000000;">(</span>rc<span style="color: #000040;">!</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span> 
        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"  Error: ComutativeSum(row-wise) on %s by %s failed. rc=%d<span style="color: #666666; font-weight: bold;">\n</span>"</span>,
          Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>,Mat2.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>,rc<span style="color: #000000;">)</span>;
    <span style="color: #0000ff;">else</span>
    <span style="color: #000000;">{</span>
        Mat2 <span style="color: #000080;">=</span> mat2;
        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"  Comutative Sum(row wise) of %s = %s<span style="color: #666666; font-weight: bold;">\n</span>"</span>,
          Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>, Mat2.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>;
    <span style="color: #000000;">}</span>
    
    rc2<span style="color: #000080;">=</span>mat1.<span style="color: #000000;">CumulativeSum</span><span style="color: #000000;">(</span>mat3,<span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>;  <span style="color: #008000;">// Assign the column-wise sum sum of mat1 to mat3</span>
    <span style="color: #0000ff;">if</span><span style="color: #000000;">(</span>rc2<span style="color: #000040;">!</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span> 
        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"  Error: ComutativeSum(column-wise) on %s by %s failed. rc=%d<span style="color: #666666; font-weight: bold;">\n</span>"</span>,
          Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>,Mat3.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>,rc<span style="color: #000000;">)</span>;
    <span style="color: #0000ff;">else</span>
    <span style="color: #000000;">{</span>
        Mat3 <span style="color: #000080;">=</span> mat3;
        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"  ComutativeSum(column wise) of %s = %s<span style="color: #666666; font-weight: bold;">\n</span>"</span>,
          Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>, Mat3.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>;
    <span style="color: #000000;">}</span>
<span style="color: #000000;">}</span>
</pre>

  <p><b>EX3</b></p>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">#define</span> MAKEMAT<span style="color: #000000;">(</span>X<span style="color: #000000;">)</span> MatrixLayer MatLy##X;MatLy##X.<span style="color: #000000;">Create</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>;Matrix Mat##X<span style="color: #000000;">(</span>MatLy##X<span style="color: #000000;">)</span>

<span style="color: #0000ff;">void</span> matrixbase_CumulativeProduct_ex3<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
    matrix mat1 <span style="color: #000080;">=</span> <span style="color: #000000;">{</span>
        <span style="color: #000000;">{</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">3</span><span style="color: #000000;">}</span>,
        <span style="color: #000000;">{</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">3</span><span style="color: #000000;">}</span>,
        <span style="color: #000000;">{</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">3</span><span style="color: #000000;">}</span>
    <span style="color: #000000;">}</span>;
    matrix mat2 <span style="color: #000080;">=</span> <span style="color: #000000;">{</span>
        <span style="color: #000000;">{</span><span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">3</span>, <span style="color: #0000dd;">4</span><span style="color: #000000;">}</span>,
        <span style="color: #000000;">{</span><span style="color: #0000dd;">3</span>, <span style="color: #0000dd;">4</span>, <span style="color: #0000dd;">5</span><span style="color: #000000;">}</span>,
        <span style="color: #000000;">{</span><span style="color: #0000dd;">4</span>, <span style="color: #0000dd;">5</span>, <span style="color: #0000dd;">6</span><span style="color: #000000;">}</span>
    <span style="color: #000000;">}</span>;

    MAKEMAT<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span>; MAKEMAT<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>; MAKEMAT<span style="color: #000000;">(</span><span style="color: #0000dd;">3</span><span style="color: #000000;">)</span>; 
    MAKEMAT<span style="color: #000000;">(</span><span style="color: #0000dd;">4</span><span style="color: #000000;">)</span>; MAKEMAT<span style="color: #000000;">(</span><span style="color: #0000dd;">5</span><span style="color: #000000;">)</span>; MAKEMAT<span style="color: #000000;">(</span><span style="color: #0000dd;">6</span><span style="color: #000000;">)</span>;

    Mat1<span style="color: #000080;">=</span>mat1; Mat2<span style="color: #000080;">=</span>mat2;

    Mat3<span style="color: #000080;">=</span>mat1<span style="color: #000040;">+</span>mat2;
    <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"%s = %s + %s &lt;== Element-wise addition of 2 matrices<span style="color: #666666; font-weight: bold;">\n</span>"</span>,Mat3.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>,Mat2.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>;

    Mat4<span style="color: #000080;">=</span>mat1<span style="color: #000040;">+</span><span style="color: #0000dd;">10</span>;
    <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"%s = %s + 10 &lt;== Scaler addition of a matrix<span style="color: #666666; font-weight: bold;">\n</span>"</span>,Mat4.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>;

    vector vec1;
    Mat1.<span style="color: #000000;">SumColumns</span><span style="color: #000000;">(</span>vec1<span style="color: #000000;">)</span>;
    Mat5.<span style="color: #000000;">SetSize</span><span style="color: #000000;">(</span><span style="color: #0000dd;">1</span>,vec1.<span style="color: #000000;">GetSize</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>;
    Mat5.<span style="color: #000000;">SetRow</span><span style="color: #000000;">(</span>vec1, <span style="color: #0000dd;">0</span><span style="color: #000000;">)</span>;
    <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"%s = SumColumns(%s) &lt;== column summation of a matrix<span style="color: #666666; font-weight: bold;">\n</span>"</span>,Mat5.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>;

    mat1.<span style="color: #000000;">CumulativeSum</span><span style="color: #000000;">(</span>Mat6<span style="color: #000000;">)</span>;
    <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"%s = CumulativeSum(%s) &lt;== cumulative sum of a matrix<span style="color: #666666; font-weight: bold;">\n</span>"</span>,Mat6.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>,Mat1.<span style="color: #000000;">GetName</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>;
<span style="color: #000000;">}</span>
</pre>

  <h2><a name="Remark"></a><span class="mw-headline">Remark</span></h2>

  <p>Compute the cumulative sum of this matrix. The underlying base type of this matrix must be less than or equal to the underlying base type of the result matrix. Currently only the double and complex types are supported for the result matrix.</p>

  <p> </p>

  <p>Note</p>

  <p>The following is a summary of various matrix operations:</p>

  <p>1) Multiplication:</p>

  <p>1-1) * ... Proper multiplication of 2 matrices (mat1*mat2)</p>

  <p>1-2) * ... Scaler multiplication of a matrix (mat1*A or A*mat1)</p>

  <p>1-3) DotMultiply ... Element-wise multiplication of 2 matrices</p>

  <p>1-4) Cross ... Cross product of 2 matrices</p>

  <p>1-5) CumulativeProduct ... cumulative product of a matrix</p>

  <p>2) Division:</p>

  <p>2-1) / ... Not defined for 2 matrices. For proper division, multiply Inverse(mat1)</p>

  <p>2-2) / ... Scaler division of a matrix (mat1/A)</p>

  <p>2-3) DotDivide ... Element-wise division of 2 matrices</p>

  <p>3) Addition:</p>

  <p>3-1) + ... Element-wise addition of 2 matrices</p>

  <p>3-2) + ... Scaler addition of a matrix (mat1+A or A+mat1)</p>

  <p>3-3) SumColumns ... Summation of each column in a matrix</p>

  <p>3-4) CumulativeSum ... Cumulative product of a matrix</p>

  <p>4) Subtraction:</p>

  <p>4-1) - ... Element-wise subtraction of 2 matrices</p>

  <p>4-2) - ... Scaler subtraction of a matrix (mat1-A or A-mat1)</p>

  <p>4-3) Difference ... Difference of adjacent 2 rows in a matrix (1st order differential)</p>

  <p>5) Power:</p>

  <p>5-1) ^ (or pow) ... Not defined as element-wise power of 2 matrices</p>

  <p>5-2) ^ (or pow) ... Not defined as scaler power of a matrix</p>

  <p>5-3) DotPower ... Element-wise power of 2 matrices</p>

  <p>To depict the differences of above additions, try EX2.</p>

  <h2><a name="See_Also"></a><span class="mw-headline">See Also</span></h2>

  <p><a href="../../OriginC/OriginC/Matrixbase-CumulativeProduct.html" title="OriginC:Matrixbase-CumulativeProduct">matrixbase::CumulativeProduct</a></p>

  <h2><a name="header_to_Include"></a><span class="mw-headline">header to Include</span></h2>

  <p>origin.h</p>
