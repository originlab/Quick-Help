<h1 class="firstheading">ocmath_erode_matrix_with_strel</h1>

  <p>&#160;</p>

  <div id="toc" class="toc">
    <div id="toctitle">
      <h2>Contents</h2>
    </div>

    <ul>
      <li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>

      <li class="toclevel-1 tocsection-2"><a href="#Syntax"><span class="tocnumber">2</span> <span class="toctext">Syntax</span></a></li>

      <li class="toclevel-1 tocsection-3"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>

      <li class="toclevel-1 tocsection-4"><a href="#Return"><span class="tocnumber">4</span> <span class="toctext">Return</span></a></li>

      <li class="toclevel-1 tocsection-5"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a></li>

      <li class="toclevel-1 tocsection-6"><a href="#Remark"><span class="tocnumber">6</span> <span class="toctext">Remark</span></a></li>

      <li class="toclevel-1 tocsection-7"><a href="#See_Also"><span class="tocnumber">7</span> <span class="toctext">See Also</span></a></li>

      <li class="toclevel-1 tocsection-8"><a href="#header_to_Include"><span class="tocnumber">8</span> <span class="toctext">header to Include</span></a></li>

      <li class="toclevel-1 tocsection-9"><a href="#Reference"><span class="tocnumber">9</span> <span class="toctext">Reference</span></a></li>
    </ul>
  </div>

  <h2><a name="Description"></a><span class="mw-headline">Description</span></h2>

  <p>Erodes grayscale and binary image.</p>

  <h2><a name="Syntax"></a><span class="mw-headline">Syntax</span></h2>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">int</span> ocmath_erode_matrix_with_strel<span style="color: #000000;">(</span> <span style="color: #0000ff;">int</span> nRows, <span style="color: #0000ff;">int</span> nCols, <span style="color: #0000ff;">double</span> <span style="color: #000040;">*</span> pMat, StrelResult <span style="color: #000040;">*</span> pStrel <span style="color: #000000;">)</span>
</pre>

  <h2><a name="Parameters"></a><span class="mw-headline">Parameters</span></h2>

  <dl>
    <dt>nRows</dt>

    <dd>[input] row number of the matrix</dd>

    <dt>nCols</dt>

    <dd>[input] column number of the matrix</dd>

    <dt>pMat</dt>

    <dd>[modify] on input, pointer to the matrix that will be dilated; on output, pointer to the matrix after dilated.</dd>

    <dt>pStrel</dt>

    <dd>[input] pointer to the object of structure StrelResult. StrelResult defines a morphological structuring element.</dd>

    <dd>It has 4 elements:</dd>

    <dd>pNHoodMat: pointer to neighborhood matrix. The neighborhood matrix specifies the neighborhood.</dd>

    <dd>pHeightMat: pointer to height matrix. The height matrix must be real and finite valued and same size as the neighborhood matrix. When it is NULL or all cells of it equals 0, se is flat structuring element, or else nonflat.</dd>

    <dd>nRows: the row number of matrix;</dd>

    <dd>nCols: the column number of matrix;</dd>
  </dl>

  <h2><a name="Return"></a><span class="mw-headline">Return</span></h2>

  <p>Returns 0 on success and a non-zero error code on failure.</p>

  <h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>

  <p><b>EX1</b></p>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">void</span> matrixbase_ImDilate_ex2<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
    matrix matData <span style="color: #000080;">=</span> <span style="color: #000000;">{</span><span style="color: #000000;">{</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">}</span>,
                      <span style="color: #000000;">{</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span>,<span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">}</span>,
                      <span style="color: #000000;">{</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">2</span>,<span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">4</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">}</span>,
                      <span style="color: #000000;">{</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">4</span>,<span style="color: #0000dd;">5</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">}</span>,
                      <span style="color: #000000;">{</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">}</span><span style="color: #000000;">}</span>;
    <span style="color: #008000;">//see the definition of StrelParams in ocmath.h</span>
    matrix matHood <span style="color: #000080;">=</span>  <span style="color: #000000;">{</span><span style="color: #000000;">{</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">}</span>,<span style="color: #000000;">{</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span>,<span style="color: #0000dd;">1</span><span style="color: #000000;">}</span>,<span style="color: #000000;">{</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">0</span><span style="color: #000000;">}</span><span style="color: #000000;">}</span>;
    matrix matHeight;
    matHeight <span style="color: #000080;">=</span> matHood;
    StrelParams sp;
    sp.<span style="color: #000000;">nRows</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
    sp.<span style="color: #000000;">nCols</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
    sp.<span style="color: #000000;">pNHood</span> <span style="color: #000080;">=</span> matHood;
    sp.<span style="color: #000000;">pHeight</span> <span style="color: #000080;">=</span> matHeight;
        
    matrix mNHood, mHeight;
    mNHood.<span style="color: #000000;">SetSize</span><span style="color: #000000;">(</span><span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">3</span><span style="color: #000000;">)</span>;
    mHeight.<span style="color: #000000;">SetSize</span><span style="color: #000000;">(</span><span style="color: #0000dd;">3</span>,<span style="color: #0000dd;">3</span><span style="color: #000000;">)</span>;
    StrelResult se;
    se.<span style="color: #000000;">nRows</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
    se.<span style="color: #000000;">nCols</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
    se.<span style="color: #000000;">pNHoodMat</span> <span style="color: #000080;">=</span> mNHood;
    se.<span style="color: #000000;">pHeightMat</span> <span style="color: #000080;">=</span> mHeight;
    <span style="color: #0000ff;">int</span> nRet <span style="color: #000080;">=</span> ocmath_make_strel<span style="color: #000000;">(</span><span style="color: #000040;">&amp;</span>se, <span style="color: #000040;">&amp;</span>sp, ARBITRARY_SHAPE<span style="color: #000000;">)</span>;
    <span style="color: #0000ff;">if</span><span style="color: #000000;">(</span>nRet <span style="color: #000040;">!</span><span style="color: #000080;">=</span> OE_NOERROR<span style="color: #000000;">)</span>
    <span style="color: #000000;">{</span>
        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"  Error: Make strel failed. Error Code=%d<span style="color: #666666; font-weight: bold;">\n</span>"</span>, nRet<span style="color: #000000;">)</span>;
        <span style="color: #0000ff;">return</span>;
    <span style="color: #000000;">}</span>
        
    nRet <span style="color: #000080;">=</span> ocmath_erode_matrix_with_strel<span style="color: #000000;">(</span><span style="color: #0000dd;">5</span>, <span style="color: #0000dd;">5</span>, matData, <span style="color: #000040;">&amp;</span>se<span style="color: #000000;">)</span>;
    <span style="color: #0000ff;">if</span><span style="color: #000000;">(</span>nRet <span style="color: #000040;">!</span><span style="color: #000080;">=</span> OE_NOERROR<span style="color: #000000;">)</span>
        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"  Error: ocmath_erode_matrix_with_strel failed. Error Code=%d<span style="color: #666666; font-weight: bold;">\n</span>"</span>, nRet<span style="color: #000000;">)</span>;
<span style="color: #000000;">}</span>
</pre>

  <h2><a name="Remark"></a><span class="mw-headline">Remark</span></h2>

  <h2><a name="See_Also"></a><span class="mw-headline">See Also</span></h2>

  <p><a href="../../OriginC/OriginC/Ocmath_dilate_matrix_with_strel_(global_function).html" title="OriginC:Ocmath dilate matrix with strel (global function)">ocmath_dilate_matrix_with_strel</a>, <a href="../../OriginC/OriginC/Ocmath_make_strel_(global_function).html" title="OriginC:Ocmath make strel (global function)">ocmath_make_strel</a></p>

  <h2><a name="header_to_Include"></a><span class="mw-headline">header to Include</span></h2>

  <p>origin.h</p>

  <h2><a name="Reference"></a><span class="mw-headline">Reference</span></h2>
