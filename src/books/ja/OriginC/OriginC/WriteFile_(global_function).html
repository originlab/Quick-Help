<h1 class="firstheading">WriteFile</h1>

  <p>&#160;</p>

  <div id="toc" class="toc">
    <div id="toctitle">
      <h2>Contents</h2>
    </div>

    <ul>
      <li class="toclevel-1 tocsection-1"><a href="#Description"><span class="tocnumber">1</span> <span class="toctext">Description</span></a></li>

      <li class="toclevel-1 tocsection-2"><a href="#Syntax"><span class="tocnumber">2</span> <span class="toctext">Syntax</span></a></li>

      <li class="toclevel-1 tocsection-3"><a href="#Parameters"><span class="tocnumber">3</span> <span class="toctext">Parameters</span></a></li>

      <li class="toclevel-1 tocsection-4"><a href="#Return"><span class="tocnumber">4</span> <span class="toctext">Return</span></a></li>

      <li class="toclevel-1 tocsection-5"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a></li>

      <li class="toclevel-1 tocsection-6"><a href="#Remark"><span class="tocnumber">6</span> <span class="toctext">Remark</span></a></li>

      <li class="toclevel-1 tocsection-7"><a href="#See_Also"><span class="tocnumber">7</span> <span class="toctext">See Also</span></a></li>

      <li class="toclevel-1 tocsection-8"><a href="#header_to_Include"><span class="tocnumber">8</span> <span class="toctext">header to Include</span></a></li>

      <li class="toclevel-1 tocsection-9"><a href="#Reference"><span class="tocnumber">9</span> <span class="toctext">Reference</span></a></li>
    </ul>
  </div>

  <h2><a name="Description"></a><span class="mw-headline">Description</span></h2>

  <p>This function writes data to a file. WriteFile starts writing data to the file at the position indicated by the file pointer. After the write operation has been completed, the file pointer is adjusted by the number of bytes actually written.</p>

  <h2><a name="Syntax"></a><span class="mw-headline">Syntax</span></h2>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">BOOL</span> WriteFile<span style="color: #000000;">(</span> HANDLE hFile, LPVOID lpBuffer, DWORD nNumberOfBytesToWrite, DWORD <span style="color: #000040;">*</span> lpNumberOfBytesWritten, OVERLAPPED <span style="color: #000040;">*</span> lpOverlapped <span style="color: #000080;">=</span> <span style="color: #0000ff;">NULL</span> <span style="color: #000000;">)</span>
</pre>

  <h2><a name="Parameters"></a><span class="mw-headline">Parameters</span></h2>

  <dl>
    <dt>hFile</dt>

    <dd>[input] Handle to the file to be written to. The file handle must have been created with GENERIC_WRITE access to the file.</dd>

    <dt>lpBuffer</dt>

    <dd>[input] Pointer to the buffer containing the data to be written to the file.</dd>

    <dt>nNumberOfBytesToWrite</dt>

    <dd>[input] Number of bytes to write to the file. A value of zero specifies a null write operation.</dd>

    <dd>A null write operation does not write any bytes but does cause the time stamp to change.</dd>

    <dt>lpNumberOfBytesWritten</dt>

    <dd>[output] Pointer to the number of bytes written by this function call. WriteFile sets this value to zero before doing any work or error checking.</dd>

    <dt>lpOverlapped</dt>

    <dd>[input] Unsupported; set to NULL.</dd>
  </dl>

  <h2><a name="Return"></a><span class="mw-headline">Return</span></h2>

  <p>Nonzero indicates success. Zero indicates failure.</p>

  <h2><a name="Examples"></a><span class="mw-headline">Examples</span></h2>

  <p><b>EX1</b></p>
  <pre class="oc" style="font-family:monospace;">
<span style="color: #0000ff;">int</span> WriteFile_ex1<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
    string strNewFilePath <span style="color: #000080;">=</span> <span style="color: #ff00ff;">"c:<span style="color: #666666; font-weight: bold;">\\</span>temp.txt"</span>;
    <span style="color: #008000;">///Create new file or open an exist file.</span>
    HANDLE hFile;
    DWORD        dwBytesWritten;

    hFile <span style="color: #000080;">=</span> CreateFile<span style="color: #000000;">(</span> strNewFilePath,
                        GENERIC_WRITE,
                        FILE_SHARE_READ,
                        <span style="color: #0000ff;">NULL</span>,
                        CREATE_NEW <span style="color: #000040;">|</span> OPEN_EXISTING,
                        FILE_ATTRIBUTE_NORMAL,
                        <span style="color: #0000ff;">NULL</span><span style="color: #000000;">)</span>;
    <span style="color: #0000ff;">if</span> <span style="color: #000000;">(</span>hFile <span style="color: #000080;">==</span> INVALID_HANDLE_VALUE<span style="color: #000000;">)</span> 
    <span style="color: #000000;">{</span> 
        out_str<span style="color: #000000;">(</span><span style="color: #ff00ff;">"Could not Create file."</span><span style="color: #000000;">)</span>;   <span style="color: #008000;">// process error</span>
        <span style="color: #0000ff;">return</span> <span style="color: #000040;">-</span><span style="color: #0000dd;">1</span>;
    <span style="color: #000000;">}</span> 
    
    string strWrite <span style="color: #000080;">=</span> <span style="color: #ff00ff;">"Hello World"</span>;
    LPCSTR lpcszWrite <span style="color: #000080;">=</span> <span style="color: #000000;">(</span>LPCSTR<span style="color: #000000;">)</span>strWrite;
    <span style="color: #0000ff;">bool</span> bRet <span style="color: #000080;">=</span> WriteFile<span style="color: #000000;">(</span> hFile, <span style="color: #000040;">&amp;</span>lpcszWrite, strWrite.<span style="color: #000000;">GetLength</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>, <span style="color: #000040;">&amp;</span>dwBytesWritten,<span style="color: #0000ff;">NULL</span><span style="color: #000000;">)</span>;

    <span style="color: #008000;">// codes to read the file</span>
    CloseHandle<span style="color: #000000;">(</span>hFile<span style="color: #000000;">)</span>;<span style="color: #008000;">// must close file after reading</span>
    
    <span style="color: #0000ff;">return</span> <span style="color: #0000dd;">1</span>;            
<span style="color: #000000;">}</span>
</pre>

  <h2><a name="Remark"></a><span class="mw-headline">Remark</span></h2>

  <h2><a name="See_Also"></a><span class="mw-headline">See Also</span></h2>

  <p><a href="../../OriginC/OriginC/CreateFile_(global_function).html" title="OriginC:CreateFile (global function)">CreateFile</a></p>

  <h2><a name="header_to_Include"></a><span class="mw-headline">header to Include</span></h2>

  <p>origin.h</p>

  <h2><a name="Reference"></a><span class="mw-headline">Reference</span></h2>
