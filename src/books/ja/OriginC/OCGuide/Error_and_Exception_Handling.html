<h1 class="firstheading">エラーと例外処理</h1><p>Origin Cは、C++ の<b> try</b>, <b>catch</b>, <b>throw</b> ステートメントを使って、例外処理をサポートしています。 
</p><p>tryブロックは、<b>try </b>キーワードの後にブレースで囲んだ1つ以上のステートメントで構成されます。  tryブロックの直後は、catchハンドラーです。  Origin Cは、<i>整数</i> の引数を受け付けるcatchハンドラーを1つだけサポートします。  <b>catch </b>キーワードの後には、ブレースで囲まれた1つ以上のステートメントとなります。 
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">try</span>
<span style="color: #000000;">{</span>
    LPSTR lpdest <span style="color: #000080;">=</span> <span style="color: #0000ff;">NULL</span>;    <span style="color: #008000;">// NULLポインタ</span>
    <span style="color: #000000;">strcpy</span><span style="color: #000000;">(</span>lpdest, <span style="color: #ff00ff;">&quot;Test&quot;</span><span style="color: #000000;">)</span>; <span style="color: #008000;">// エラーを起こすためにNULLポインタにコピー</span>
<span style="color: #000000;">}</span>
<span style="color: #0000ff;">catch</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span> nErr<span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
    out_int<span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;Error = &quot;</span>, nErr<span style="color: #000000;">)</span>;
<span style="color: #000000;">}</span></pre>
<p>tryブロック内のステートメントを実行することでtry-catchが動作します。  エラーが発生すると、実行はcatchブロックにジャンプします。  エラーが発生しなければ、catchブロックは無視されます。 
</p><p>throwキーワードは任意で、エラーをトリガーにして、catchブロックへのジャンプを実行します。  
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">void</span> TryCatchThrowEx<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
    <span style="color: #0000ff;">try</span>
    <span style="color: #000000;">{</span>
        DoSomeWork<span style="color: #000000;">(</span><span style="color: #0000dd;">4</span><span style="color: #000000;">)</span>;  <span style="color: #008000;">// 成功を表示するために有効な数字を渡す</span>
        DoSomeWork<span style="color: #000000;">(</span><span style="color: #000040;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span>; <span style="color: #008000;">// エラーを引き起こすために無効な数字を渡す</span>
    <span style="color: #000000;">}</span>
    <span style="color: #0000ff;">catch</span><span style="color: #000000;">(</span><span style="color: #0000ff;">int</span> iErr<span style="color: #000000;">)</span>
    <span style="color: #000000;">{</span>
        <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;Error code =&nbsp;%d<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>, iErr<span style="color: #000000;">)</span>;
    <span style="color: #000000;">}</span>
<span style="color: #000000;">}</span> 
<span style="color: #0000ff;">void</span> DoSomeWork<span style="color: #000000;">(</span><span style="color: #0000ff;">double</span> num<span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
    <span style="color: #0000ff;">if</span><span style="color: #000000;">(</span> num <span style="color: #000080;">&lt;</span> <span style="color: #0000dd;">0</span> <span style="color: #000000;">)</span>
        <span style="color: #0000ff;">throw</span> <span style="color: #0000dd;">100</span>; <span style="color: #008000;">// 強制的にエラー</span>
    <span style="color: #0000ff;">if</span><span style="color: #000000;">(</span> <span style="color: #0000dd;">0</span> <span style="color: #000080;">==</span> num <span style="color: #000000;">)</span>
        <span style="color: #0000ff;">throw</span> <span style="color: #0000dd;">101</span>; <span style="color: #008000;">// 強制的にエラー</span>

    <span style="color: #0000ff;">double</span> result <span style="color: #000080;">=</span> <span style="color: #000000;">sqrt</span><span style="color: #000000;">(</span>num<span style="color: #000000;">)</span> <span style="color: #000040;">/</span> <span style="color: #000000;">log</span><span style="color: #000000;">(</span>num<span style="color: #000000;">)</span>;
    <span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;sqrt(%f) / log(%f) =&nbsp;%g<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>, num, num, result<span style="color: #000000;">)</span>; 
<span style="color: #000000;">}</span></pre>







    