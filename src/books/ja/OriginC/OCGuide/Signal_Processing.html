<h1 class="firstheading">信号処理</h1><p><br />
Origin Cは、<span class="OIndex">フーリエ変換</span><span class="OIndex HasShownIndex" style="display:none">FFT</span> (FFT), <span class="OIndex">短時間FFT</span><span class="OIndex HasShownIndex" style="display:none">STFT</span>(STFT), <span class="OIndex">コンボリューション</span>, <span class="OIndex">Correlation</span>, <span class="OIndex">FFTフィルタ</span>, <span class="OIndex">ウェーブレット</span>分析に対するグローバル関数とNAG関数のコレクションを提供しています。 
</p><p>Origin C関数は、Origin Cヘルプ -&gt; Origin Cリファレンス -&gt; グローバル関数 -&gt; 信号処理カテゴリーで確認できます。
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>目次</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Smoothing"><span class="tocnumber">1</span> <span class="toctext"><span class="OIndex">スムージング</span></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#FFT"><span class="tocnumber">2</span> <span class="toctext">FFT</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#FFT_2"><span class="tocnumber">2.1</span> <span class="toctext">FFT</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Frequency_Spectrum"><span class="tocnumber">2.2</span> <span class="toctext">周波数スペクトル</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#IFFT"><span class="tocnumber">2.3</span> <span class="toctext">IFFT</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#STFT"><span class="tocnumber">2.4</span> <span class="toctext">STFT</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#FFT_Filtering"><span class="tocnumber">3</span> <span class="toctext">FFTフィルタ</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Wavelet_Analysis"><span class="tocnumber">4</span> <span class="toctext">ウェーブレット分析</span></a></li>
</ul>
</div>

<h2><a name="Smoothing"></a><span class="mw-headline"><span class="OIndex">スムージング</span></span></h2>
<p><b><a href="../../OriginC/OriginC/Ocmath_smooth_(global_function).html" title="OriginC:Ocmath smooth (global function)">ocmath_smooth</a></b>関数は、メディアンフィルタ、Savitzky-Golayスムージング、隣接平均スムージング の3つの方法をサポートしています。
</p>
<pre class="oc" style="font-family:monospace;">vector vSmooth; <span style="color: #008000;">// 出力</span>
vSmooth.<span style="color: #000000;">SetSize</span><span style="color: #000000;">(</span>vSource.<span style="color: #000000;">GetSize</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>;

<span style="color: #008000;">//Savitzky-Golay スムージングを実行。Left=Right=7, quadratic</span>
<span style="color: #0000ff;">int</span> nLeftpts <span style="color: #000080;">=</span> nRightpts <span style="color: #000080;">=</span> <span style="color: #0000dd;">3</span>;
<span style="color: #0000ff;">int</span> nPolydeg <span style="color: #000080;">=</span> <span style="color: #0000dd;">2</span>;
<span style="color: #0000ff;">int</span> nRet <span style="color: #000080;">=</span> ocmath_smooth<span style="color: #000000;">(</span>vSource.<span style="color: #000000;">GetSize</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>, vSource, vSmooth, nLeftpts, SMOOTH_SG, 
	EDGEPAD_NONE, nRightpts, nPolydeg<span style="color: #000000;">)</span>;</pre>
<h2><a name="FFT"></a><span class="mw-headline">FFT</span></h2>
<p>fft_* 関数を使う前に、fft_utils.hをインクルードする必要があります。  
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>fft_utils.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span></pre>
<h3><a name="FFT_2"></a><span class="mw-headline">FFT</span></h3>
<p><b><a href="../../OriginC/OriginC/Fft_real_(global_function).html" title="OriginC:Fft real (global function)">fft_real</a></b> は、離散フーリエ変換(FFT_FORWARD)または逆フーリエ変換(FFT_BACKWARD)を実行します。  
</p>
<pre class="oc" style="font-family:monospace;">fft_real<span style="color: #000000;">(</span>vSig.<span style="color: #000000;">GetSize</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>, vSig, FFT_FORWARD<span style="color: #000000;">)</span>; <span style="color: #008000;">// エラーなしで0を返す</span></pre>
<h3><a name="Frequency_Spectrum"></a><span class="mw-headline">周波数スペクトル</span></h3>
<p><b><a href="../../OriginC/OriginC/Fft_one_side_spectrum_(global_function).html" title="OriginC:Fft one side spectrum (global function)">fft_one_side_spectrum</a></b>は、FFT結果の片側スペクトルを計算するのに使用します。 
</p>
<pre class="oc" style="font-family:monospace;">fft_one_side_spectrum<span style="color: #000000;">(</span>vSig.<span style="color: #000000;">GetSize</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>, vSig<span style="color: #000000;">)</span>; <span style="color: #008000;">// エラーなしで0を返す</span></pre>
<h3><a name="IFFT"></a><span class="mw-headline">IFFT</span></h3>
<pre class="oc" style="font-family:monospace;">fft_real<span style="color: #000000;">(</span>vSig.<span style="color: #000000;">GetSize</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>, vSig, FFT_BACKWARD<span style="color: #000000;">)</span>; <span style="color: #008000;">// エラーなしで0を返す</span></pre>
<h3><a name="STFT"></a><span class="mw-headline">STFT</span></h3>
<p><b><a href="../../OriginC/OriginC/Stft_real_(global_function).html" title="OriginC:Stft real (global function)">stft_real</a></b> 関数は、1Dの実数信号データに短時間FFTを実行するのに使用します。
<b><a href="../../OriginC/OriginC/Stft_complex_(global_function).html" title="OriginC:Stft complex (global function)">Stft_complex</a></b> 関数は、1Dの複素数信号データに短時間FFTを実行するのに使用します。
以下は、実数データに対するサンプルです。
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">int</span> nWinSize <span style="color: #000080;">=</span> <span style="color: #0000dd;">4</span>;
vector win<span style="color: #000000;">(</span>nWinSize<span style="color: #000000;">)</span>;
get_window_data<span style="color: #000000;">(</span>RECTANGLE_WIN, nWinSize, win<span style="color: #000000;">)</span>;

matrix stft;
<span style="color: #0000ff;">double</span> stime, sfreq;
vector sig <span style="color: #000080;">=</span> <span style="color: #000000;">{</span><span style="color: #0000dd;">0</span>, <span style="color: #0000dd;">0</span>, <span style="color: #0000dd;">0</span>, <span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">0</span>, <span style="color: #0000dd;">0</span>, <span style="color: #0000dd;">0</span><span style="color: #000000;">}</span>;
stft_real<span style="color: #000000;">(</span>sig, win, <span style="color: #0000dd;">0.1</span>, <span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">4</span>, stft, stime, sfreq<span style="color: #000000;">)</span>;

<span style="color: #0000ff;">for</span> <span style="color: #000000;">(</span><span style="color: #0000ff;">int</span> ii <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span>; ii <span style="color: #000080;">&lt;</span> stft.<span style="color: #000000;">GetNumRows</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>; ii<span style="color: #000040;">++</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
    <span style="color: #0000ff;">for</span> <span style="color: #000000;">(</span><span style="color: #0000ff;">int</span> jj <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span>; jj <span style="color: #000080;">&lt;</span> stft.<span style="color: #000000;">GetNumCols</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>; jj<span style="color: #000040;">++</span><span style="color: #000000;">)</span>
        <span style="color: #000000;">printf</span> <span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;%f<span style="color: #666666; font-weight: bold;">\t</span>&quot;</span>, stft<span style="color: #000000;">[</span>ii<span style="color: #000000;">]</span><span style="color: #000000;">[</span>jj<span style="color: #000000;">]</span><span style="color: #000000;">)</span>;
    <span style="color: #000000;">printf</span> <span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span><span style="color: #000000;">)</span>;
<span style="color: #000000;">}</span></pre>
<h2><a name="FFT_Filtering"></a><span class="mw-headline">FFTフィルタ</span></h2>
<p>Origin Cは、FFTフィルタを実行するのに、ローパス、ハイパス、バンドパス、バンドブロック、しきい値、ローパスパラボリックなど複数のフィルタタイプをサポートしています。  例えば、
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">double</span> dFc <span style="color: #000080;">=</span> <span style="color: #0000dd;">6.5</span>;    
<span style="color: #0000ff;">int</span> iRet <span style="color: #000080;">=</span> fft_lowpass<span style="color: #000000;">(</span>vecSignal, dFc, <span style="color: #000040;">&amp;</span>vecTime<span style="color: #000000;">)</span>;</pre>
<h2><a name="Wavelet_Analysis"></a><span class="mw-headline">ウェーブレット分析</span></h2>
<p>Origin Cで、NAG関数を呼び、ウェーブレット分析を実行できます。すべてのウェーブレット関数を見るには、Origin Cヘルプ -&gt; Origin C リファレンス -&gt; グローバル関数 -&gt; NAG関数 -&gt; NAG関数へのアクセスとヘルプ -&gt; ウェーブレットのカテゴリを参照してください。
関連のヘッダファイルをインクルードする必要があります。
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>..\OriginLab\wavelet_utils.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span></pre>
<p>以下は、実数型の1D連続ウェーブレットのサンプルです。 
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">int</span> n <span style="color: #000080;">=</span> vX.<span style="color: #000000;">GetSize</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
<span style="color: #0000ff;">int</span> ns <span style="color: #000080;">=</span> vScales.<span style="color: #000000;">GetSize</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
matrix mCoefs<span style="color: #000000;">(</span>ns, n<span style="color: #000000;">)</span>;

NagError fail;
nag_cwt_real<span style="color: #000000;">(</span>Nag_Morlet, <span style="color: #0000dd;">5</span>, n, vX, ns, vScales, mCoefs, <span style="color: #000040;">&amp;</span>fail<span style="color: #000000;">)</span>;</pre>







    