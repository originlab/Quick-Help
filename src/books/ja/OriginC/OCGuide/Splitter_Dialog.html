<h1 class="firstheading">Splitterダイアログ</h1><p>このサンプルは、ツリービューまたはグリッドビューを提供するSplitterダイアログを作成する方法を示します。
</p><p><a  class="image"><img alt="Ocguide splitter dialog.png" src="../images/Splitter_Dialog/Ocguide_splitter_dialog.png" width="464"  /></a>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>目次</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Prepare_Dialog_Resource"><span class="tocnumber">1</span> <span class="toctext">ダイアログリソースを準備 </span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Prepare_Source_File"><span class="tocnumber">2</span> <span class="toctext">ソースファイルを準備</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Including_header_Files"><span class="tocnumber">3</span> <span class="toctext">ヘッダファイルをインクルードする</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Adding_User_Defined_Splitter_Class"><span class="tocnumber">4</span> <span class="toctext">ユーザ定義Splitterクラスを追加する</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Adding_User_Defined_Splitter_Dialog_Class"><span class="tocnumber">5</span> <span class="toctext">ユーザ定義Splitterダイアログクラスを追加する</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Open_Dialog"><span class="tocnumber">6</span> <span class="toctext">ダイアログを開く</span></a></li>
</ul>
</div>
<h2><a name="Prepare_Dialog_Resource"></a><span class="mw-headline">ダイアログリソースを準備</span></h2>
<p>このダイアログを作成するには、最初にラベルと2つのボタンコントロールを持つダイアログリソースを準備する必要があります。ここで、このサンプルを簡単にするため組込の<i>OriginC\Originlab\ODlg8.dll</i> ファイルにある既存のリソースIDD_SAMPLE_SPLITTER_DLGを使います。
</p>
<h2><a name="Prepare_Source_File"></a><span class="mw-headline">ソースファイルを準備</span></h2>
<p>コードビルダで、新規ボタン<a  class="image"><img alt="Newfile button.png" src="../images/Splitter_Dialog/Newfile_button.png" width="23"  /></a> をクリックして、ファイル名を入力し、上述のダイアログリソースと同じパス（Originのインストールフォルダの<i>OriginC\Originlab</i> サブフォルダ）にセットします。
</p>
<h2><a name="Including_header_Files"></a><span class="mw-headline">ヘッダファイルをインクルードする</span></h2>
<p>次のヘッダファイルがサンプルで使われます。上記で作成した ソースファイルに次をコピーします。 
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>..\Originlab\DialogEx.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span>
<span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>..\Originlab\SplitterControl.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span>
<span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>..\Originlab\DynaSplitter.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span></pre>
<h2><a name="Adding_User_Defined_Splitter_Class"></a><span class="mw-headline">ユーザ定義Splitterクラスを追加する</span></h2>
<p><b>TreeDynaSplitter</b>からクラスを派生することができます。  ほとんどのダイアログの初期化と他のイベント関数のコードは、基底クラスにあり、splitterクラスを軽くします。
<span class="OIndex" style="display:none">メッセージマップ</span>
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">class</span> MySplitter <span style="color: #000000;">:</span> <span style="color: #0000ff;">public</span> TreeDynaSplitter
<span style="color: #000000;">{</span>
<span style="color: #0000ff;">public</span><span style="color: #000000;">:</span>
	MySplitter<span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">{</span><span style="color: #000000;">}</span>
	~MySplitter<span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">{</span><span style="color: #000000;">}</span>
	<span style="color: #008000;">//splitterコントロールを初期化</span>
	<span style="color: #0000ff;">int</span>	Init<span style="color: #000000;">(</span><span style="color: #0000ff;">int</span> nCtrlID, WndContainer<span style="color: #000040;">&amp;</span> wndParent, LPCSTR lpcszDlgName <span style="color: #000080;">=</span> <span style="color: #0000ff;">NULL</span><span style="color: #000000;">)</span>
	<span style="color: #000000;">{</span>
		TreeDynaSplitter<span style="color: #000000;">::</span><span style="color: #000000;">Init</span><span style="color: #000000;">(</span>nCtrlID, wndParent, <span style="color: #0000dd;">0</span>, lpcszDlgName<span style="color: #000000;">)</span>;
		<span style="color: #0000ff;">return</span> <span style="color: #0000dd;">0</span>;
	<span style="color: #000000;">}</span>
	<span style="color: #008000;">//現在の設定を出力</span>
	<span style="color: #0000ff;">void</span>	Output<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
	<span style="color: #000000;">{</span>
		out_tree<span style="color: #000000;">(</span>m_trSettings<span style="color: #000000;">)</span>;
	<span style="color: #000000;">}</span>
<span style="color: #0000ff;">protected</span><span style="color: #000000;">:</span>
	<span style="color: #008000;">// メッセージマップテーブルとメッセージハンドラを宣言</span>
	DECLARE_MESSAGE_MAP
	<span style="color: #0000ff;">BOOL</span>	OnInitSplitter<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">BOOL</span>	InitSettings<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">void</span>	OnRowChange<span style="color: #000000;">(</span>Control ctrl<span style="color: #000000;">)</span>;
	
<span style="color: #0000ff;">private</span><span style="color: #000000;">:</span>
	<span style="color: #0000ff;">BOOL</span>	constructSettings<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;	
	<span style="color: #0000ff;">BOOL</span>	initSystemInfo<span style="color: #000000;">(</span>TreeNode<span style="color: #000040;">&amp;</span> trSys<span style="color: #000000;">)</span>;<span style="color: #008000;">//システム情報を表示	</span>
	<span style="color: #0000ff;">BOOL</span>	initUserInfo<span style="color: #000000;">(</span>TreeNode<span style="color: #000040;">&amp;</span> trUser<span style="color: #000000;">)</span>;<span style="color: #008000;">//ユーザ設定を収集</span>
<span style="color: #0000ff;">private</span><span style="color: #000000;">:</span>	
	GridTreeControl	m_List; <span style="color: #008000;">//左パネルのグリッド表示	</span>
	Tree	m_trSettings;<span style="color: #008000;">//右パネルのsplitterツリー	</span>
	<span style="color: #0000ff;">bool</span>	m_bIsInit;<span style="color: #008000;">//初期化イベントからかどうかを示す</span>
	
<span style="color: #000000;">}</span>;
<span style="color: #008000;">//コントロールメッセージとイベントをマッピング</span>
BEGIN_MESSAGE_MAP_DERIV<span style="color: #000000;">(</span>MySplitter, TreeDynaSplitter<span style="color: #000000;">)</span>
	
	ON_INIT<span style="color: #000000;">(</span>OnInitSplitter<span style="color: #000000;">)</span> <span style="color: #008000;">//splitter設定初期化</span>
	<span style="color: #008000;">//破棄時にsplitterのサイズと位置を保存</span>
	<span style="color: #008000;">//これは基底クラスで行われる</span>
	ON_DESTROY<span style="color: #000000;">(</span>OnDestroy<span style="color: #000000;">)</span>
	ON_SIZE<span style="color: #000000;">(</span>OnCtrlResize<span style="color: #000000;">)</span>
	<span style="color: #008000;">//コントロールが準備できたら、splitterと位置をリサイズ</span>
	ON_USER_MSG<span style="color: #000000;">(</span>WM_USER_RESIZE_CONTROLS, OnInitPaneSizs<span style="color: #000000;">)</span>
	
	<span style="color: #008000;">//ユーザは左パネルの異なる行を選択</span>
	ON_GRID_ROW_COL_CHANGE<span style="color: #000000;">(</span>GetMainPaneID<span style="color: #000000;">(</span><span style="color: #000000;">)</span>, OnRowChange<span style="color: #000000;">)</span>
END_MESSAGE_MAP_DERIV
<span style="color: #0000ff;">BOOL</span>	MySplitter<span style="color: #000000;">::</span><span style="color: #000000;">OnInitSplitter</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	TreeDynaSplitter<span style="color: #000000;">::</span><span style="color: #000000;">OnInitSplitter</span><span style="color: #000000;">(</span><span style="color: #000040;">&amp;</span>m_List<span style="color: #000000;">)</span>;
	constructSettings<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;	<span style="color: #008000;">//ツリー設定を構築</span>
	InitSettings<span style="color: #000000;">(</span><span style="color: #000000;">)</span>; <span style="color: #008000;">//ツリー設定をsplitter GUIに</span>
	SetReady<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">TRUE</span>;
<span style="color: #000000;">}</span>
<span style="color: #008000;">//ユーザが異なる行を選択するとき、右パネルを更新</span>
<span style="color: #0000ff;">void</span>	MySplitter<span style="color: #000000;">::</span><span style="color: #000000;">OnRowChange</span><span style="color: #000000;">(</span>Control ctrl<span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	<span style="color: #0000ff;">if</span> <span style="color: #000000;">(</span> <span style="color: #000040;">!</span>m_bReady <span style="color: #000000;">)</span>
		<span style="color: #0000ff;">return</span>;
	<span style="color: #008000;">//現在のブランチのサブノードを表示</span>
	TreeNode trCurrent <span style="color: #000080;">=</span> ShowListContent<span style="color: #000000;">(</span><span style="color: #000040;">-</span><span style="color: #0000dd;">1</span>, <span style="color: #0000ff;">true</span>, m_bIsInit<span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">if</span> <span style="color: #000000;">(</span> trCurrent <span style="color: #000000;">)</span>
	<span style="color: #000000;">{</span>
		<span style="color: #008000;">//レジストリから設定をロード</span>
		string strTag <span style="color: #000080;">=</span> trCurrent.<span style="color: #000000;">tagName</span>;
		LoadBranchSetting<span style="color: #000000;">(</span>GetDlgName<span style="color: #000000;">(</span><span style="color: #000000;">)</span>, strTag<span style="color: #000000;">)</span>;
	<span style="color: #000000;">}</span>
	m_bIsInit <span style="color: #000080;">=</span> <span style="color: #0000ff;">false</span>;
	<span style="color: #0000ff;">return</span>;
<span style="color: #000000;">}</span>
<span style="color: #008000;">//splitter設定を初期化</span>
<span style="color: #0000ff;">BOOL</span>	MySplitter<span style="color: #000000;">::</span><span style="color: #000000;">InitSettings</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	m_bIsInit <span style="color: #000080;">=</span> <span style="color: #0000ff;">true</span>;
	<span style="color: #008000;">///GUIの問題を避けるため、準備状態がセットしない</span>
	m_bReady <span style="color: #000080;">=</span> <span style="color: #0000ff;">false</span>;
	<span style="color: #008000;">//表示のためのsplitter treeをセット</span>
	ShowList<span style="color: #000000;">(</span>m_trSettings, ATRN_STOP_LEVEL<span style="color: #000000;">)</span>;
	m_bReady <span style="color: #000080;">=</span> <span style="color: #0000ff;">true</span>; <span style="color: #008000;">//準備状態をリセット</span>
	SelectRow<span style="color: #000000;">(</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span>; <span style="color: #008000;">//最初の行を選択</span>
	<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">TRUE</span>;
<span style="color: #000000;">}</span>
<span style="color: #0000ff;">BOOL</span>	MySplitter<span style="color: #000000;">::</span><span style="color: #000000;">constructSettings</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	TreeNode trSys <span style="color: #000080;">=</span> m_trSettings.<span style="color: #000000;">AddNode</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;System&quot;</span><span style="color: #000000;">)</span>;
	trSys.<span style="color: #000000;">SetAttribute</span><span style="color: #000000;">(</span>STR_LABEL_ATTRIB, <span style="color: #ff00ff;">&quot;System Information&quot;</span><span style="color: #000000;">)</span>;
	initSystemInfo<span style="color: #000000;">(</span>trSys<span style="color: #000000;">)</span>;
	
	TreeNode trUser <span style="color: #000080;">=</span> m_trSettings.<span style="color: #000000;">AddNode</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;User&quot;</span><span style="color: #000000;">)</span>;
	trUser.<span style="color: #000000;">SetAttribute</span><span style="color: #000000;">(</span>STR_LABEL_ATTRIB, <span style="color: #ff00ff;">&quot;User Settings&quot;</span><span style="color: #000000;">)</span>;
	initUserInfo<span style="color: #000000;">(</span>trUser<span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">TRUE</span>;
<span style="color: #000000;">}</span>
<span style="color: #008000;">//Originの基本情報を表示</span>
<span style="color: #008000;">//OS関連の情報も表示可能</span>
<span style="color: #0000ff;">BOOL</span>	MySplitter<span style="color: #000000;">::</span><span style="color: #000000;">initSystemInfo</span><span style="color: #000000;">(</span>TreeNode<span style="color: #000040;">&amp;</span> trSys<span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	<span style="color: #0000ff;">if</span> <span style="color: #000000;">(</span> <span style="color: #000040;">!</span>trSys <span style="color: #000000;">)</span>
		<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">FALSE</span>;
	
	<span style="color: #0000ff;">char</span> szUser<span style="color: #000000;">[</span>LIC_USERINFO_NAME_COMPANY_MAXLEN<span style="color: #000000;">]</span>;
	<span style="color: #0000ff;">char</span> szCompany<span style="color: #000000;">[</span>LIC_USERINFO_NAME_COMPANY_MAXLEN<span style="color: #000000;">]</span>;
	<span style="color: #0000ff;">char</span> szSerial<span style="color: #000000;">[</span>LIC_OTHER_INFO_MAXLEN<span style="color: #000000;">]</span>;
	<span style="color: #0000ff;">char</span> szRegCode<span style="color: #000000;">[</span>LIC_OTHER_INFO_MAXLEN<span style="color: #000000;">]</span>;
	DWORD dwProd <span style="color: #000080;">=</span> GetLicenseInfo<span style="color: #000000;">(</span>szUser, szCompany, szSerial, szRegCode<span style="color: #000000;">)</span>;
	string strProduct;
	<span style="color: #0000ff;">switch</span><span style="color: #000000;">(</span> dwProd <span style="color: #000040;">&amp;</span> 0x000000FF <span style="color: #000000;">)</span>
	<span style="color: #000000;">{</span>
	<span style="color: #0000ff;">case</span> ORGPRODUCTTYPE_EVALUATION<span style="color: #000000;">:</span>
		strProduct <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;Evaluation&quot;</span>;
		<span style="color: #0000ff;">break</span>;
	<span style="color: #0000ff;">case</span> ORGPRODUCTTYPE_STUDENT<span style="color: #000000;">:</span>
		strProduct <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;Student&quot;</span>;
		<span style="color: #0000ff;">break</span>;
	<span style="color: #0000ff;">case</span> ORGPRODUCTTYPE_REGULAR<span style="color: #000000;">:</span>
		strProduct <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;Regular&quot;</span>;
		<span style="color: #0000ff;">break</span>;
	<span style="color: #0000ff;">case</span> ORGPRODUCTTYPE_PRO<span style="color: #000000;">:</span>
		strProduct <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;Professional&quot;</span>;
		<span style="color: #0000ff;">break</span>;
	<span style="color: #0000ff;">default</span><span style="color: #000000;">:</span>
		strProduct <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;Unknown&quot;</span>;
		<span style="color: #0000ff;">break</span>;
	<span style="color: #000000;">}</span>
	GETN_USE<span style="color: #000000;">(</span>trSys<span style="color: #000000;">)</span>
	GETN_STR<span style="color: #000000;">(</span>UserName, <span style="color: #ff00ff;">&quot;User Name&quot;</span>, szUser<span style="color: #000000;">)</span>
	GETN_READ_ONLY_EX<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>
	GETN_STR<span style="color: #000000;">(</span>Company, <span style="color: #ff00ff;">&quot;Company Name&quot;</span>, szCompany<span style="color: #000000;">)</span>
	GETN_READ_ONLY_EX<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>
	GETN_STR<span style="color: #000000;">(</span>SeriNum, <span style="color: #ff00ff;">&quot;Serial Number&quot;</span>, szSerial<span style="color: #000000;">)</span>
	GETN_READ_ONLY_EX<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>
	GETN_STR<span style="color: #000000;">(</span>RegCode, <span style="color: #ff00ff;">&quot;Register Code&quot;</span>, szRegCode<span style="color: #000000;">)</span>
	GETN_READ_ONLY_EX<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>
	GETN_STR<span style="color: #000000;">(</span>Product, <span style="color: #ff00ff;">&quot;Product Version&quot;</span>, strProduct<span style="color: #000000;">)</span>
	GETN_READ_ONLY_EX<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>
	<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">TRUE</span>;
<span style="color: #000000;">}</span>
<span style="color: #008000;">//ユーザ情報と設定を収集するコントロール</span>
<span style="color: #0000ff;">BOOL</span>	MySplitter<span style="color: #000000;">::</span><span style="color: #000000;">initUserInfo</span><span style="color: #000000;">(</span>TreeNode<span style="color: #000040;">&amp;</span> trUser<span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	<span style="color: #0000ff;">if</span> <span style="color: #000000;">(</span> <span style="color: #000040;">!</span>trUser <span style="color: #000000;">)</span>
		<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">FALSE</span>;
	GETN_USE<span style="color: #000000;">(</span>trUser<span style="color: #000000;">)</span>
	GETN_STRLIST<span style="color: #000000;">(</span>Language, <span style="color: #ff00ff;">&quot;Language&quot;</span>, <span style="color: #ff00ff;">&quot;English&quot;</span>, <span style="color: #ff00ff;">&quot;|English|German&quot;</span><span style="color: #000000;">)</span>
	GETN_STR<span style="color: #000000;">(</span>UserID, <span style="color: #ff00ff;">&quot;User ID&quot;</span>, <span style="color: #ff00ff;">&quot;&quot;</span><span style="color: #000000;">)</span>
	GETN_PASSWORD<span style="color: #000000;">(</span>Password, <span style="color: #ff00ff;">&quot;Password&quot;</span>, <span style="color: #ff00ff;">&quot;&quot;</span><span style="color: #000000;">)</span>
	GETN_STR<span style="color: #000000;">(</span>Email, <span style="color: #ff00ff;">&quot;Email&quot;</span>, <span style="color: #ff00ff;">&quot;user@originlab.com&quot;</span><span style="color: #000000;">)</span>
	
	<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">TRUE</span>;
<span style="color: #000000;">}</span></pre>
<h2><a name="Adding_User_Defined_Splitter_Dialog_Class"></a><span class="mw-headline">ユーザ定義Splitterダイアログクラスを追加する</span></h2>
<p>splitterダイアログは、splitterコントロールオブジェクトを含み、ダイアログはsplitterコントロールを初期化し、適切なイベントにメッセージを渡します。
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #008000;">//ダイアログ名は、レジストリに設定を保存するのに使用</span>
<span style="color: #0000ff;">#define</span>	STR_DLG_NAME	<span style="color: #ff00ff;">&quot;My Splitter Dialog&quot;</span>
<span style="color: #0000ff;">class</span> MySplitterDlg <span style="color: #000000;">:</span> <span style="color: #0000ff;">public</span> MultiPaneDlg
<span style="color: #000000;">{</span>
<span style="color: #0000ff;">public</span><span style="color: #000000;">:</span>
	<span style="color: #008000;">//リソースIDとそのDLLはダイアログリソースを含む</span>
	MySplitterDlg<span style="color: #000000;">(</span><span style="color: #000000;">)</span> <span style="color: #000000;">:</span> MultiPaneDlg<span style="color: #000000;">(</span>IDD_SAMPLE_SPLITTER_DLG, <span style="color: #ff00ff;">&quot;ODlg8&quot;</span><span style="color: #000000;">)</span>
	<span style="color: #000000;">{</span>
	<span style="color: #000000;">}</span>
	~MySplitterDlg<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
	<span style="color: #000000;">{</span>
	<span style="color: #000000;">}</span>
	<span style="color: #008000;">//ユーザが閉じるまでダイアログを開く</span>
	<span style="color: #0000ff;">int</span>	DoModalEx<span style="color: #000000;">(</span>HWND hParent <span style="color: #000080;">=</span> <span style="color: #0000ff;">NULL</span><span style="color: #000000;">)</span>
	<span style="color: #000000;">{</span>
		<span style="color: #008000;">//メッセージマップをセット</span>
		InitMsgMap<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
		<span style="color: #0000ff;">return</span> DoModal<span style="color: #000000;">(</span>hParent, DLG_NO_DEFAULT_REPOSITION<span style="color: #000000;">)</span>;
	<span style="color: #000000;">}</span>
	<span style="color: #008000;">//ダイアログを開く前にコントロールと他の設定を初期化</span>
	<span style="color: #0000ff;">BOOL</span>	OnInitDialog<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
	<span style="color: #008000;">//ダイアログ初期化が完了したとき</span>
	<span style="color: #0000ff;">BOOL</span>	OnReady<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
	<span style="color: #008000;">//ユーザが&apos;Output&apos;ボタンをクリックしたとき
</span>
	<span style="color: #0000ff;">BOOL</span>	OnOutput<span style="color: #000000;">(</span>Control ctrl<span style="color: #000000;">)</span>;
<span style="color: #0000ff;">protected</span><span style="color: #000000;">:</span>
	DECLARE_MESSAGE_MAP
<span style="color: #0000ff;">private</span><span style="color: #000000;">:</span>
	MySplitter	m_Splitter;
	
<span style="color: #000000;">}</span>;
<span style="color: #008000;">//マップダイアログメッセージ</span>
BEGIN_MESSAGE_MAP<span style="color: #000000;">(</span>MySplitterDlg<span style="color: #000000;">)</span>
	ON_INIT<span style="color: #000000;">(</span>OnInitDialog<span style="color: #000000;">)</span>
	ON_READY<span style="color: #000000;">(</span>OnReady<span style="color: #000000;">)</span>
	ON_BN_CLICKED<span style="color: #000000;">(</span>IDC_LOAD, OnOutput<span style="color: #000000;">)</span>
END_MESSAGE_MAP
<span style="color: #0000ff;">BOOL</span>	MySplitterDlg<span style="color: #000000;">::</span><span style="color: #000000;">OnInitDialog</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	<span style="color: #008000;">//ボタンのテキストを意味のあるテキストに変更</span>
	GetDlgItem<span style="color: #000000;">(</span>IDC_LOAD<span style="color: #000000;">)</span>.<span style="color: #000000;">Text</span> <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;Output&quot;</span>;
	GetDlgItem<span style="color: #000000;">(</span>IDCANCEL<span style="color: #000000;">)</span>.<span style="color: #000000;">Text</span> <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;Close&quot;</span>;
	m_Splitter.<span style="color: #000000;">Init</span><span style="color: #000000;">(</span>IDC_FB_BOX, <span style="color: #000040;">*</span><span style="color: #0000ff;">this</span>, STR_DLG_NAME<span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">TRUE</span>;
<span style="color: #000000;">}</span>
<span style="color: #0000ff;">BOOL</span>	MySplitterDlg<span style="color: #000000;">::</span><span style="color: #000000;">OnReady</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	<span style="color: #008000;">//ダイアログを更新</span>
	UpdateDlgShow<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
	SetInitReady<span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
	<span style="color: #008000;">//準備状態を位置とサイズを初期化</span>
	m_Splitter.<span style="color: #000000;">OnReady</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">TRUE</span>;
<span style="color: #000000;">}</span>
<span style="color: #0000ff;">BOOL</span>	MySplitterDlg<span style="color: #000000;">::</span><span style="color: #000000;">OnOutput</span><span style="color: #000000;">(</span>Control ctrl<span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	<span style="color: #008000;">//現在のユーザ設定を出力</span>
	m_Splitter.<span style="color: #000000;">Output</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">return</span> <span style="color: #0000ff;">TRUE</span>;
<span style="color: #000000;">}</span></pre>
<h2><a name="Open_Dialog"></a><span class="mw-headline">ダイアログを開く</span></h2>
<p>上記のステップの後、すべてのコードを保存し、ビルドし、次の関数を実行して、スプリッターダイアログを実行します。
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">void</span>	test_MySplitterDlg<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	MySplitterDlg dlg;
	dlg.<span style="color: #000000;">DoModalEx</span><span style="color: #000000;">(</span>GetWindow<span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>;
<span style="color: #000000;">}</span></pre>


    