<h1 class="firstheading">微分</h1><p class='urlname' style='display: none'>微分</p>
<h2><a name="Finding_the_DerivativeCalculusDifferentiation"></a><span class="mw-headline">微分を見つける</span></h2>
<p>次のサンプルは、データセットの微分を計算する方法を示しています。  <b><a class="external text" href="../../XFunction/X-Function/Differentiate.html">differentiate</a></b> Xファンクションが使われ、高次<span class="OIndex">微分</span>を行うこともできます。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// データをインポート</span>
newbook; 
fname<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;\Samples\Spectroscopy\HiddenPeaks.dat&quot;</span>;
impasc;
&nbsp;
<span style="color: #008000;">// 列2のデータの一階微分および二階微分を計算:</span> 

<span style="color: #008000;">// 出力はデフォルトで次に利用可能な列、列3</span>
differentiate iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Col<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>;      
<span style="color: #008000;">// 出力はデフォルトで列4に       </span>
differentiate iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Col<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> order<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>;    
&nbsp;
<span style="color: #008000;">// 元データと結果をプロット</span>
&nbsp;
<span style="color: #008000;">// 各プロットはx値として列1を使用</span>
plotstack iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">(</span><span style="color: #000000;">(</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>, <span style="color: #000000;">(</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">3</span><span style="color: #000000;">)</span>, <span style="color: #000000;">(</span><span style="color: #0000dd;">1</span>,<span style="color: #0000dd;">4</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span> order<span style="color: #000000;">:</span><span style="color: #000080;">=</span>top;</pre>
<h2><a name="Finding_the_Derivative_with_Smoothing"></a><span class="mw-headline">スムージングで微分を検索</span></h2>
<p><b><a class="external text" href="../../XFunction/X-Function/Differentiate.html">differentiate</a></b> Xファンクションは、Savitsky-Golay <span class="OIndex">スムージング</span>を使って微分を計算できます。この機能を使う場合、<b>smooth</b> 変数を1にセットします。そして、多項式の次数やSavitzky-Golayスムージング法で使われるウィンドウのポイントを指定して、スムージングをカスタマイズできます。  以下はこの例です。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// ノイズ付きでサンプルデータをインポート</span>
newbook;
fpath<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> <span style="color: #ff00ff;">&quot;\Samples\Signal Processing\fftfilter1.DAT&quot;</span>; 
fname<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> fpath<span style="color: #000080;">$</span>;
impasc;
bkname<span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #000080;">%</span>h;
&nbsp;
<span style="color: #008000;">// Savitsky-Golayスムージングを使って微分</span>
differentiate iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span>col<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> smooth<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> poly<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> npts<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">30</span>;
&nbsp;
<span style="color: #008000;">// 元データと結果をプロット</span>
newpanel row<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>;
plotxy iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>bkname<span style="color: #000080;">$</span><span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span><span style="color: #0000dd;">2</span> plot<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">200</span> ogl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;	
plotxy iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>bkname<span style="color: #000080;">$</span><span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span><span style="color: #0000dd;">3</span> plot<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">200</span> ogl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>;</pre>







    