<h1 class="firstheading">レイヤを管理する</h1><p class='urlname' style='display: none'>Managing-Layers</p>
<div id="toc" class="toc"><div id="toctitle"><h2>内容</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Creating_a_panel_plotManage_Layer"><span class="tocnumber">1</span> <span class="toctext">区分プロットを作成する</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Creating_a_6_panel_graph"><span class="tocnumber">1.1</span> <span class="toctext">6区分グラフを作成します。</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Creating_and_plotting_into_a_6_panel_graph"><span class="tocnumber">1.2</span> <span class="toctext">6区分グラフを作成しプロットする</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Adding_Layers_to_a_Graph_WindowAdd_Layer"><span class="tocnumber">2</span> <span class="toctext">グラフウィンドウにレイヤを追加する</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Arranging_the_layersArrange_LayerLayer_Arrangement"><span class="tocnumber">3</span> <span class="toctext">レイヤを配置する</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Moving_a_layerMove_layerLayer.2C_Move"><span class="tocnumber">4</span> <span class="toctext">レイヤを移動する</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Swap_two_layersSwap_LayersLayer.2C_Swap"><span class="tocnumber">5</span> <span class="toctext">2つのレイヤを入れ替える</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Aligning_layersAlign_LayerLayer_Alignment"><span class="tocnumber">6</span> <span class="toctext">レイヤを整理する</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Linking_LayersLink_LayersLayer.2C_Linking"><span class="tocnumber">7</span> <span class="toctext">レイヤをリンクする</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Setting_Layer_Unit"><span class="tocnumber">8</span> <span class="toctext">レイヤ単位をセットする</span></a></li>
</ul>
</div>

<h2><a name="Creating_a_panel_plotManage_Layer"></a><span class="mw-headline">区分プロットを作成する</span></h2>
<p><b><a class="external text" href="../../XFunction/X-Function/Newpanel.html">newpanel</a></b> Xファンクションは、n x mの<span class="OIndex">レイヤ</span>配置を持つ新しいグラフを作成します。
</p>
<h3><a name="Creating_a_6_panel_graph"></a><span class="mw-headline">6区分グラフを作成します。</span></h3>
<p>次のサンプルは、2列3行で配置した6つのレイヤを持つ新しいグラフを作成します。  この関数は、どのウィンドウがアクティブかに関係なく実行できます。  
</p>
<pre class="lt" style="font-family:monospace;">newpanel col<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> row<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>;</pre>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Managing_Layers/Tip_icon.png" width="57"  border="0" /></td><td><p>Xファンクションを使うとき、値の割り当てに変数名を使う必要はありませんが、col:= と row:= で明示的に指定するとコードが読みやすくなります。  入力する字数を減らすため、上記のコードではなく、次のように入力することもできます。
</p></td></tr></table> 
<pre class="lt" style="font-family:monospace;">newpanel <span style="color: #0000dd;">2</span> <span style="color: #0000dd;">3</span>;</pre> 
<h3><a name="Creating_and_plotting_into_a_6_panel_graph"></a><span class="mw-headline">6区分グラフを作成しプロットする</span></h3>
<p>次のサンプルは、新しいワークブックにいくつかデータをインポートし、6つのレイヤを持つ新しいグラフウィンドウを作成し、2列3行で配置し、各レイヤ(区分)をループして、インポートしたデータをプロットします。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// 新しいワークブックを作成</span>
newbook;	
&nbsp;
<span style="color: #008000;">// ファイルをインポート</span>
path<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Graphing\&quot;</span>;
fname<span style="color: #000080;">$</span> <span style="color: #000080;">=</span> path<span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;waterfall2.dat&quot;</span>;
impasc;
&nbsp;
<span style="color: #008000;">// 新しいパネルが%Hを変更するのでワークブック名を保存</span>
string bkname<span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #000080;">%</span>H;
&nbsp;
<span style="color: #008000;">// 2*3 区分グラフを作成</span>
newpanel <span style="color: #0000dd;">2</span> <span style="color: #0000dd;">3</span>;
&nbsp;
<span style="color: #008000;">// データをプロット</span>
for <span style="color: #000000;">(</span>ii<span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>; ii<span style="color: #000080;">&lt;</span><span style="color: #0000dd;">8</span>; ii<span style="color: #000080;">++</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	plotxy iy<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>bkname<span style="color: #000080;">$</span><span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span>wcol<span style="color: #000000;">(</span>ii<span style="color: #000000;">)</span> plot<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">200</span> ogl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000080;">$</span><span style="color: #000000;">(</span>ii<span style="color: #000080;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span>;
<span style="color: #000000;">}</span></pre>
<h2><a name="Adding_Layers_to_a_Graph_WindowAdd_Layer"></a><span class="mw-headline">グラフウィンドウにレイヤを追加する</span></h2>
<p><b><a class="external text" href="../../XFunction/X-Function/Layadd.html">layadd</a></b> Xファンクションは、グラフウィンドウに新しい<span class="OIndex">レイヤ</span> を作成/追加します。  この関数は、<b>挿入:新規レイヤ(軸) メニューに相当します。New Layer(Axes) menu</b>.
</p>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Managing_Layers/Tip_icon.png" width="57"  border="0" /></td><td><p>プログラムで、グラフにレイヤを追加することは一般的ではありません。  事前にグラフテンプレートを作成し、<b><a class="external text" href="../../XFunction/X-Function/Plotxy.html">plotxy</a></b> Xファンクションを使って、グラフテンプレートにプロットすることをお勧めします。
</p></td></tr></table>
<p>次のサンプルは、独立した右Y軸スケールを追加します。  右Y軸のみを表示する新しいレイヤを追加します。  これは寸法がリンクされ、レイヤが追加された時に、X軸が現在のアクティブレイヤにリンクされます。  新しく追加したレイヤがアクティブレイヤになります。
</p>
<pre class="lt" style="font-family:monospace;">layadd type<span style="color: #000000;">:</span><span style="color: #000080;">=</span>rightY;</pre>
<h2><a name="Arranging_the_layersArrange_LayerLayer_Arrangement"></a><span class="mw-headline">レイヤを配置する</span></h2>
<p><b><a class="external text" href="../../XFunction/X-Function/Layarrange.html">layarrange</a></b> Xファンクションは、グラフページ上のレイヤを配置するのに使います。
</p>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Managing_Layers/Tip_icon.png" width="57"  border="0" /></td><td><p>プログラムで、グラフレイヤを配置することは一般的ではありません。  事前にグラフテンプレートを作成し、<b><a class="external text" href="../../XFunction/X-Function/Plotxy.html">plotxy</a></b> Xファンクションを使って、グラフテンプレートにプロットすることをお勧めします。
</p></td></tr></table>
<p>次のサンプルは、アクティブグラフに既存レイヤを2行3列で配置します。  アクティブグラフに6つのレイヤが無くても、新しいレイヤは追加されません。  存在しているレイヤのみが配置されます。  
</p>
<pre class="lt" style="font-family:monospace;">layarrange row<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> col<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">3</span>;</pre>
<h2><a name="Moving_a_layerMove_layerLayer.2C_Move"></a><span class="mw-headline">レイヤを移動する</span></h2>
<p><b><a class="external text" href="../../XFunction/X-Function/Laysetpos.html">laysetpos</a></b> Xファンクションは、ページの相対位置で、グラフ内の1つ以上のレイヤの位置をセットするのに使われます。
</p><p>次のサンプルは、アクティブグラフウィンドウのすべてのレイヤを左に整列し、ページの左側から15%の位置にセットします。
</p>
<pre class="lt" style="font-family:monospace;">laysetpos layer<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;1:0&quot;</span> left<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">15</span>;</pre>
<h2><a name="Swap_two_layersSwap_LayersLayer.2C_Swap"></a><span class="mw-headline">2つのレイヤを入れ替える</span></h2>
<p><b><a class="external text" href="../../XFunction/X-Function/Layswap.html">layswap</a></b> Xファンクションは、2つのグラフレイヤの位置と場所を入れ替えます。  名前と番号でレイヤを参照できます。
</p><p>次のサンプルは、レイヤ1と2のページの位置をインデックス番号を使って入れ替えます。
</p>
<pre class="lt" style="font-family:monospace;">layswap igl1<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> igl2<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>;</pre>
<p>次のサンプルは、Layer1およびLayer2という名前のレイヤの位置を名前を入れ替えます。
</p>
<pre class="lt" style="font-family:monospace;">layswap igl1<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Layer1 igl2<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Layer2;</pre>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Managing_Layers/Tip_icon.png" width="57"  border="0" /></td><td><p>レイヤは、レイヤ管理ツールだけでなく、作図の詳細ダイアログでも名前を変更することができます。  レイヤ管理ツールでは、レイヤ選択リストにある名前をダブルクリックして、名前を変更します。  作図の詳細ダイアログの左側のパネルで、レイヤを2回クリックして、名前を変更します。
</p><p>LabTalkから名前を変更するには、layer<i>n</i>.name$を使います。<i>n</i> はレイヤのインデックスです。  例えば、以下のようにしてレイヤ1の名前をPowerに変更します。  layer1.name$=&quot;Power&quot;; 
</p></td></tr></table>
<h2><a name="Aligning_layersAlign_LayerLayer_Alignment"></a><span class="mw-headline">レイヤを整理する</span></h2>
<p><b><a class="external text" href="../../XFunction/X-Function/Layalign.html">layalign</a></b> Xファンクションは、元のレイヤ/参照レイヤに対して1つ以上のレイヤを整列するのに使います。
</p><p>次のサンプルは、アクティブグラフレイヤのレイヤ1とレイヤ2を下辺に合わせて整列します。
</p>
<pre class="lt" style="font-family:monospace;">layalign igl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> destlayer<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> direction<span style="color: #000000;">:</span><span style="color: #000080;">=</span>bottom;</pre>
<p>次のサンプルは、アクティブグラフレイヤのレイヤ1とレイヤ2, 3, 4を左辺に合わせて整列します。
</p>
<pre class="lt" style="font-family:monospace;">layalign igl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> destlayer<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span><span style="color: #000000;">:</span><span style="color: #0000dd;">4</span> direction<span style="color: #000000;">:</span><span style="color: #000080;">=</span>left;</pre>
<p>次のサンプルは、レイヤ1に関して、グラフ3のすべてのレイヤを左辺に合わせて整列します。  2:0という表記は、グラフ内のレイヤ2から最後のレイヤまでのすべてのレイヤという意味です。  
</p>
<pre class="lt" style="font-family:monospace;">layalign igp<span style="color: #000000;">:</span><span style="color: #000080;">=</span>graph3 igl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> destlayer<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span><span style="color: #000000;">:</span><span style="color: #0000dd;">0</span> direction<span style="color: #000000;">:</span><span style="color: #000080;">=</span>left;</pre>
<h2><a name="Linking_LayersLink_LayersLayer.2C_Linking"></a><span class="mw-headline">レイヤをリンクする</span></h2>
<p><b><a class="external text" href="../../XFunction/X-Function/Laylink.html">laylink</a></b> Xファンクションは、お互いのレイヤをリンクするのに使用します。  レイヤ領域/位置だけでなく、軸スケールもリンクします。
</p><p>次のサンプルは、アクティブグラフのすべてのレイヤのX軸をレイヤ1のX軸にリンクします。  単位は、リンクしたレイヤの%にセットされます。
</p>
<pre class="lt" style="font-family:monospace;">laylink igl<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> destlayers<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span><span style="color: #000000;">:</span><span style="color: #0000dd;">0</span> XAxis<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;</pre>
<h2><a name="Setting_Layer_Unit"></a><span class="mw-headline">レイヤ単位をセットする</span></h2>
<p><b><a class="external text" href="../../XFunction/X-Function/Laysetunit.html">laysetunit</a></b> Xファンクションは、複数のレイヤのレイヤ領域の単位をセットします。
</p>


    