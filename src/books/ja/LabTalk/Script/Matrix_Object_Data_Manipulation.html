<h1 class="firstheading">行列オブジェクトのデータ操作</h1><p><a href="../../LabTalk/LabTalk/Matrix_(command).html" title="LabTalk:Matrix (コマンド)">matrix</a> コマンドに加え、Originは行列オブジェクトデータの特定の操作を実行するXファンクションを提供します。このセクションでは、行列オブジェクトデータを操作するのに使用される利用可能なXファンクションのサンプルを紹介します。
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>内容</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Set_Values_in_Matrix_Object"><span class="tocnumber">1</span> <span class="toctext">行列オブジェクトの値を設定する</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Copy_Matrix_DataCopy_Matrix"><span class="tocnumber">2</span> <span class="toctext">行列データのコピー</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Conversion_between_Matrix_Object_and_Vector"><span class="tocnumber">3</span> <span class="toctext">行列オブジェクトとベクターを変換する</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Conversion_between_Numeric_Data_and_Image_Data"><span class="tocnumber">4</span> <span class="toctext">数値データとイメージデータ間で変換する</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Manipulate_Matrix_Object_with_Complex_Values"><span class="tocnumber">5</span> <span class="toctext">複素数値を持つ行列を操作する</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Transform_Matrix_Object_Data"><span class="tocnumber">6</span> <span class="toctext">行列オブジェクトデータを変換する</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Crop_or_extract_from_Data_or_Image_Matrix"><span class="tocnumber">6.1</span> <span class="toctext">データまたはイメージの行列からコピーまたは抽出する</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Expand_Data_Matrix"><span class="tocnumber">6.2</span> <span class="toctext">データ行列を拡張する</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Flip_Data_or_Image_Matrix"><span class="tocnumber">6.3</span> <span class="toctext">データまたはイメージの行列を反転する</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Rotate_Data_or_Image_Matrix"><span class="tocnumber">6.4</span> <span class="toctext">データまたはイメージの行列を回転する</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Shrink_Data_Matrix"><span class="tocnumber">6.5</span> <span class="toctext">データの行列を縮小する</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Transpose_Data_Matrix"><span class="tocnumber">6.6</span> <span class="toctext">データの行列を転置する</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Split_RGB_Image_into_Separate_Channels"><span class="tocnumber">7</span> <span class="toctext">RGBのイメージをチャンネルに分割する</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Use_Temporary_Matrix_Object_as_Intermediate_Analysis_Result"><span class="tocnumber">8</span> <span class="toctext">中間解析結果として一時的な行列オブジェクトを使用</span></a></li>
</ul>
</div>

<h2><a name="Set_Values_in_Matrix_Object"></a><span class="mw-headline">行列オブジェクトの値を設定する</span></h2>
<p>行列のセルの値は、<a class="external text" href="../../LabTalk/LabTalk/Matrix_(command).html#-v.3B_Fill_the_matrix_with_values_from_the_expression">matrix -v</a> コマンドまたは <a class="external text" href="../../XFunction/X-Function/Msetvalue.html">msetvalue</a> Xファンクションのどちらかを使ってセットできます。matrix -v コマンドはアクティブな行列オブジェクトのみを操作しますが、Xファンクションはどの行列シートの値でも設定できます。
</p><p>このサンプルは行列の値をセットして、行列ウィンドウにイメージサムネールを表示する方法を示します。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// 行列ブックを作成</span>
mat<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>; 
int nmats <span style="color: #000080;">=</span> <span style="color: #0000dd;">10</span>; 
range msheet<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span>;
<span style="color: #008000;">// 行列オブジェクトの値をセット</span>
msheet.<span style="color: #000080;">Nmats</span> <span style="color: #000080;">=</span> nmats;
<span style="color: #008000;">// 最初の行列オブジェクトに値をセット  </span>
matrix <span style="color: #000080;">-</span>v x<span style="color: #000080;">+</span>y;
range mm<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>; mm.<span style="color: #000080;">label</span><span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;x+y&quot;</span>; 
double ff<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>; 
<span style="color: #008000;">// 他のオブジェクトをループ</span>
loop<span style="color: #000000;">(</span>i, <span style="color: #0000dd;">2</span>, nmats<span style="color: #000080;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span> <span style="color: #000000;">{</span> 
	msheet.<span style="color: #000080;">active</span> <span style="color: #000080;">=</span> i; 
	ff <span style="color: #000080;">=</span> <span style="color: #000000;">(</span>i<span style="color: #000080;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span><span style="color: #000080;">/</span><span style="color: #000000;">(</span>nmats<span style="color: #000080;">-</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span>;
	<span style="color: #008000;">// 値をセット</span>
	matrix <span style="color: #000080;">-</span>v <span style="color: #000000;">(</span><span style="color: #0000dd;">5</span><span style="color: #000080;">/</span>ff<span style="color: #000000;">)</span><span style="color: #000080;">*</span>sin<span style="color: #000000;">(</span>x<span style="color: #000000;">)</span> <span style="color: #000080;">+</span> ff<span style="color: #000080;">*</span><span style="color: #0000dd;">20</span><span style="color: #000080;">*</span>cos<span style="color: #000000;">(</span>y<span style="color: #000000;">)</span>; 
	<span style="color: #008000;">// ロングネームをセット </span>
	ange aa<span style="color: #000080;">=</span><span style="color: #000080;">$</span><span style="color: #000000;">(</span>i<span style="color: #000000;">)</span>; 
	aa.<span style="color: #000080;">label</span><span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;$(5/ff,*3)*sin(x) + $(ff*20)*cos(y)&quot;</span>; 
<span style="color: #000000;">}</span>
<span style="color: #008000;">// 乱数の値で最後の1つを入力</span>
msheet.<span style="color: #000080;">active</span> <span style="color: #000080;">=</span> nmats; 
matrix <span style="color: #000080;">-</span>v rnd<span style="color: #000000;">(</span><span style="color: #000000;">)</span>; 
range mm<span style="color: #000080;">=</span><span style="color: #000080;">$</span><span style="color: #000000;">(</span>nmats<span style="color: #000000;">)</span>; mm.<span style="color: #000080;">label</span><span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;random&quot;</span>;
<span style="color: #008000;">// ウィンドウにサムネールを表示</span>
matrix <span style="color: #000080;">-</span>it;</pre>
<h2><a name="Copy_Matrix_DataCopy_Matrix"></a><span class="mw-headline">行列データのコピー</span></h2>
<p><a class="external text" href="../../XFunction/X-Function/Mcopy.html">mcopy</a> Xファンクションは行列データを <span class="OIndex">コピー</span> する時に使用します。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// mbook1から別の行列 mbook2にデータをコピー</span>
mcopy im<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mbook1 om<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mbook2; <span style="color: #008000;">// このコマンドはコピー先の次数を自動設定</span></pre>
<h2><a name="Conversion_between_Matrix_Object_and_Vector"></a><span class="mw-headline">行列オブジェクトとベクターを変換する</span></h2>
<p>2つのXファンクション、 <a class="external text" href="../../XFunction/X-Function/M2v.html">m2v</a> と <a class="external text" href="../../XFunction/X-Function/V2m.html">v2m</a>は、それぞれ行列データをベクターに、ベクターデータを行列に変換する時に利用できます。Originは、行列を保存するために行を主とした順番を使いますが、どちらの関数も列を主とした順番を指定することができます。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// 行列全体を列ごとにワークシート列にコピー</span>
m2v method<span style="color: #000000;">:</span><span style="color: #000080;">=</span>m2v direction<span style="color: #000000;">:</span><span style="color: #000080;">=</span>col;
<span style="color: #008000;">// col(1) からデータを指定した行列オブジェクトにコピー</span>
v2m ix<span style="color: #000000;">:</span><span style="color: #000080;">=</span>col<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span> method<span style="color: #000000;">:</span><span style="color: #000080;">=</span>v2row om<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>Mbook1<span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span><span style="color: #0000dd;">1</span>;</pre>
<h2><a name="Conversion_between_Numeric_Data_and_Image_Data"></a><span class="mw-headline">数値データとイメージデータ間を変換する</span></h2>
<p>Originでは、行列はイメージデータ(RGBなど)または数値データ(整数値など)を含むことができます。次の関数は2つのフォーマット間を変換する際に利用できます。 
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// グレースケール画像を数値データに変換</span>
img2m img<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span> om<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> type<span style="color: #000000;">:</span><span style="color: #000080;">=</span>byte; 
<span style="color: #008000;">// 数値行列をグレースケール画像に変換</span>
m2img bits<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">16</span>;</pre>
<h2><a name="Manipulate_Matrix_Object_with_Complex_Values"></a><span class="mw-headline">複素数値を持つ行列を操作する</span></h2>
<p>複素数値を持つ行列を操作するXファンクションには <a class="external text" href="../../XFunction/X-Function/Map2c.html">map2c</a>, <a class="external text" href="../../XFunction/X-Function/Mc2ap.html">mc2ap</a>, <a class="external text" href="../../XFunction/X-Function/Mri2c.html">mri2c</a>, <a class="external text" href="../../XFunction/X-Function/Mc2ri.html">mc2ri</a>があります。これらのXファンクションは、2つの行列(振幅と位相や実数と虚数)を1つの複素行列に統合したり、1つの複素行列を振幅/位相や実数/虚数成分に分けます。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// 振幅と位相を複素データに組合せる</span>
map2c am<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span> pm<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> cm<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">3</span><span style="color: #000000;">)</span>; 
<span style="color: #008000;">// 異なる行列の実数と虚数を新しい行列の複素データに組合せる</span>
mri2c rm<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>MBook1<span style="color: #000000;">]</span>MSheet1<span style="color: #000080;">!</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span> im<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>MBook2<span style="color: #000000;">]</span>MSheet1<span style="color: #000080;">!</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span> cm<span style="color: #000000;">:</span><span style="color: #000080;">=&lt;</span>new<span style="color: #000080;">&gt;</span>;
<span style="color: #008000;">// 複素数を振幅と位相を持つ2つの新しい行列に変換</span>
mc2ap cm<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span> am<span style="color: #000000;">:</span><span style="color: #000080;">=&lt;</span>new<span style="color: #000080;">&gt;</span> pm<span style="color: #000000;">:</span><span style="color: #000080;">=&lt;</span>new<span style="color: #000080;">&gt;</span>; 
<span style="color: #008000;">// 複素数を実数部と虚数部の2つの行列オブジェクトに変換</span>
mc2ri cm<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>MBook1<span style="color: #000000;">]</span>MSheet1<span style="color: #000080;">!</span>Complex rm<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>Split<span style="color: #000000;">]</span>Real im<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>Split<span style="color: #000000;">]</span>Imaginary;</pre>
<h2><a name="Transform_Matrix_Object_Data"></a><span class="mw-headline">行列オブジェクトデータを変換する</span></h2>
<p>次のXファンクションを使って、物理的に行列の次数または内容を変更します。以下の変換では、行列オブジェクトの反転を除き、行列シートの次数が変更し、同一行列ブック内の他のマトリックスオブジェクトにも変更が加えられます。
</p>
<h3><a name="Crop_or_extract_from_Data_or_Image_Matrix"></a><span class="mw-headline">データまたはイメージの行列からコピーまたは抽出する</span></h3>
<p>行列が行列内にイメージを含む場合、Xファンクション <a class="external text" href="../../XFunction/X-Function/MCrop.html">mcrop</a> は、行列の矩形領域を抽出またはコピーするのに使うことができます。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// 左から10ピクセル、上から20ピクセルの位置から開始し</span>
<span style="color: #008000;">// 50×25のイメージ行列をコピー</span>
mcrop x<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">10</span> y<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">20</span> w<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">50</span> h<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">25</span> im<span style="color: #000000;">:</span><span style="color: #000080;">=&lt;</span>active<span style="color: #000080;">&gt;</span> om<span style="color: #000000;">:</span><span style="color: #000080;">=&lt;</span>input<span style="color: #000080;">&gt;</span>; <span style="color: #008000;">// &lt;input&gt; はコピー</span>
<span style="color: #008000;">// 行列の中央部を新しい行列に抽出</span>
<span style="color: #008000;">// 行列ウィンドウがアクティブであること</span>
matrix <span style="color: #000080;">-</span>pg DIM px py;
dx <span style="color: #000080;">=</span> nint<span style="color: #000000;">(</span>px<span style="color: #000080;">/</span><span style="color: #0000dd;">3</span><span style="color: #000000;">)</span>;
dy <span style="color: #000080;">=</span> nint<span style="color: #000000;">(</span>py<span style="color: #000080;">/</span><span style="color: #0000dd;">3</span><span style="color: #000000;">)</span>;
mcrop x<span style="color: #000000;">:</span><span style="color: #000080;">=</span>dx y<span style="color: #000000;">:</span><span style="color: #000080;">=</span>dy h<span style="color: #000000;">:</span><span style="color: #000080;">=</span>dy w<span style="color: #000000;">:</span><span style="color: #000080;">=</span>dx om<span style="color: #000000;">:</span><span style="color: #000080;">=&lt;</span>new<span style="color: #000080;">&gt;</span>; <span style="color: #008000;">// &lt;new&gt; は抽出</span></pre>
<h3><a name="Expand_Data_Matrix"></a><span class="mw-headline">データ行列を拡張する</span></h3>
<p>Xファンクション <a class="external text" href="../../XFunction/X-Function/Mexpand.html">mexpand</a> は、指定した列と行の係数を使って、データ行列を拡張できます。複二次補間を使って、新しいセルの値を計算します。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// アクティブ行列を係数2で拡張</span>
mexpand cols<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> rows<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span>;</pre>
<h3><a name="Flip_Data_or_Image_Matrix"></a><span class="mw-headline">データまたはイメージの行列を反転する</span></h3>
<p>Xファンクション <a class="external text" href="../../XFunction/X-Function/Mflip.html">mflip</a> は行列を水平方向または垂直方向に反転し、その行列の対称な行列を作成します。 
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// 行列を垂直に反転</span>
mflip flip<span style="color: #000000;">:</span><span style="color: #000080;">=</span>vertical;
&nbsp;
<span style="color: #008000;">// &quot;matrix&quot; コマンドも使用可能</span>
matrix <span style="color: #000080;">-</span>c h;  <span style="color: #008000;">// 水平に</span>
matrix <span style="color: #000080;">-</span>c v;  <span style="color: #008000;">// 垂直に</span></pre>
<h3><a name="Rotate_Data_or_Image_Matrix"></a><span class="mw-headline">データまたはイメージの行列を反転する</span></h3>
<p>Xファンクション <a class="external text" href="../../XFunction/X-Function/Mrotate90.html">mrotate90</a>を使って、行列を90/180度時計回りまたは反時計回りに回転できます。 
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// 行列を 90 度時計回りに回転</span>
mrotate90 degree<span style="color: #000000;">:</span><span style="color: #000080;">=</span>cw90;
&nbsp;
<span style="color: #008000;">//  &quot;matrix&quot; コマンドでも90度回転可能</span>
matrix <span style="color: #000080;">-</span>c r;</pre>
<h3><a name="Shrink_Data_Matrix"></a><span class="mw-headline">データ行列を縮小する</span></h3>
<p>Xファンクション <a class="external text" href="../../XFunction/X-Function/Mshrink.html">mshrink</a> は、指定した列と行の係数を使って、データ行列を縮小できます。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// アクティブな行列を列の係数2、行の係数1で縮小</span>
mshrink cols<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">2</span> rows<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;</pre>
<h3><a name="Transpose_Data_Matrix"></a><span class="mw-headline">データ行列を転置する</span></h3>
<p>Xファンクション <a class="external text" href="../../XFunction/X-Function/Mtranspose.html">mtranspose</a> は行列を転置するのに使用することができます。 
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// [MBook1]MSheet1!の2番目の行列オブジェクトを転置</span>
mtranspose im<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span>MBook1<span style="color: #000000;">]</span>MSheet1<span style="color: #000080;">!</span><span style="color: #0000dd;">2</span>;
&nbsp;
<span style="color: #008000;">// &quot;matrix&quot; コマンドを使って行列転置も可能</span>
matrix <span style="color: #000080;">-</span>t;</pre>
<h2><a name="Split_RGB_Image_into_Separate_Channels"></a><span class="mw-headline">RGBのイメージをチャンネルに分割する</span></h2>
<p><a class="external text" href="../../XFunction/X-Function/ImgRGBsplit.html">imgRGBsplit</a> Xファンクションはカラー画像を別々のR, G, B チャンネルに分割します。例えば:
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">// チャンネルを分割して、赤、緑、青の別々の行列を作成</span>
imgRGBsplit img<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span> r<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> g<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">3</span><span style="color: #000000;">)</span> b<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">4</span><span style="color: #000000;">)</span> colorize<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>;
<span style="color: #008000;">// チャンネルを分割して、赤、緑、青のパレットを結果行列に適用</span>
imgRGBsplit img<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span> r<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> g<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">3</span><span style="color: #000000;">)</span> b<span style="color: #000000;">:</span><span style="color: #000080;">=</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">4</span><span style="color: #000000;">)</span> colorize<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;</pre>
<p>イメージの取扱いについての詳細は、<a href="../../LabTalk/Script/LabTalk-Supported_X-Functions.html#Image" title="スクリプト：LabTalkがサポートするX-FUnction">イメージ処理のXファンクション</a> をご覧ください。
</p>
<h2><a name="Use_Temporary_Matrix_Object_as_Intermediate_Analysis_Result"></a><span class="mw-headline">中間解析結果として一時的な行列オブジェクトを使用</span></h2>
<p>行列の中間解析操作を実行するたびに、Xファンクションの出力のために新しい行列ブックを作成したくない場合があります。中間出力のために非表示の行列ブックに一時的な行列を作成し、不要になったときは次の操作で行列ブックを削除できます。
</p>
<ul><li> サンプル 1</li></ul>
<p>この例では、画像の中間操作の結果を一時的な行列ブックに保存し、削除する方法を示します。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">//画像を行列ブックにインポート</span>
string fn<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Image Processing and Analysis\white camellia.jpg&quot;</span>; 
impImage fname<span style="color: #000000;">:</span><span style="color: #000080;">=</span>fn<span style="color: #000080;">$</span>;
<span style="color: #008000;">//非表示行列ブックを作製</span>
newbook hidden<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> mat<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;
<span style="color: #000080;">%</span>A <span style="color: #000080;">=</span> bkname<span style="color: #000080;">$</span>;
<span style="color: #008000;">//自動レベル操作を実行し、非表示の行列ブックに出力を保存</span>
imgAutoLevel oimg<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span><span style="color: #000080;">%</span>A<span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span> cl<span style="color: #000000;">:</span><span style="color: #000080;">=&lt;</span>optional<span style="color: #000080;">&gt;</span>;
<span style="color: #008000;">//自動レベル操作の画像に中央値フィルタを適用</span>
imgMedian d<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">3</span> img<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span><span style="color: #000080;">%</span>A<span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span> oimg<span style="color: #000000;">:</span><span style="color: #000080;">=&lt;</span>new<span style="color: #000080;">&gt;</span>;
<span style="color: #008000;">//中間行列を削除</span>
win <span style="color: #000080;">-</span>cd <span style="color: #000080;">%</span>A;</pre>
<ul><li> サンプル 2</li></ul>
<p>この例では、メディアンフィルタが行列に適用され、最小値が差し引かれた後に体積が計算されます。すべての中間行列の結果は非表示の一時的な行列ブックに保存され、行列ブックが不要になった時点で削除されます。
</p>
<pre class="lt" style="font-family:monospace;"><span style="color: #008000;">//サンプルの行列ブックを開く</span>
string fn<span style="color: #000080;">$</span><span style="color: #000080;">=</span>system.<span style="color: #000080;">path</span>.<span style="color: #000080;">program</span><span style="color: #000080;">$</span> <span style="color: #000080;">+</span> <span style="color: #ff00ff;">&quot;Samples\Matrix Conversion and Gridding\2D Gaussian.ogm&quot;</span>;
doc <span style="color: #000080;">-</span>o <span style="color: #000080;">%</span><span style="color: #000000;">(</span>fn<span style="color: #000080;">$</span><span style="color: #000000;">)</span>;
<span style="color: #008000;">//一時的な非表示の行列ブックを作製</span>
newbook hidden<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span> mat<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>;
<span style="color: #000080;">%</span>A <span style="color: #000080;">=</span> bkname<span style="color: #000080;">$</span>;
range rm <span style="color: #000080;">=</span> <span style="color: #000000;">[</span><span style="color: #000080;">%</span>A<span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span>;
<span style="color: #008000;">//2つの中間行列結果を受け取るために2つの行列オブジェクトを追加</span>
rm.<span style="color: #000080;">nmats</span> <span style="color: #000080;">=</span> <span style="color: #0000dd;">2</span>;
<span style="color: #008000;">//行列にメディアンフィルタを適用</span>
medianflt2 n<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #0000dd;">3</span> po<span style="color: #000000;">:</span><span style="color: #000080;">=</span>RepeatPadding om<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span><span style="color: #000080;">%</span>A<span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span>;
<span style="color: #008000;">//最小値を減算</span>
msetvalue im<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span><span style="color: #000080;">%</span>A<span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> formula<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;mat(1)-z0&quot;</span> script<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;double z0; mstats im:=mat(1) min:=z0;&quot;</span>;
<span style="color: #008000;">//行列を積分</span>
double dv;
integ2 im<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #000000;">[</span><span style="color: #000080;">%</span>A<span style="color: #000000;">]</span><span style="color: #0000dd;">1</span><span style="color: #000080;">!</span>mat<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000000;">)</span> integral<span style="color: #000000;">:</span><span style="color: #000080;">=</span>dv;
win <span style="color: #000080;">-</span>cd <span style="color: #000080;">%</span>A;</pre>







    