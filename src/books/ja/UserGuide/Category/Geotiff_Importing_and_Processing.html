<h1 class="firstheading">GeoTIFFファイルのインポートと処理</h1><p class='urlname' style='display: none'>GeoTIFF-Importing-Processing</p>
<p>GeoTIFFは、標準の.tifまたは画像ファイル形式であり、.tifファイルにタグとして埋め込まれた追加の空間（ジオリファレンス）情報が含まれています。2022b以降、OriginではGeoTIFFファイルを簡単に処理できるようになりました。
</p>
<dl><dd><a  class="image"><img alt="Multiple Geotiff in Image Window.gif" src="../images/Geotiff_Importing_and_Processing/500px-Multiple_Geotiff_in_Image_Window.gif" width="500"   /></a></dd></dl>
<div id="toc" class="toc"><div id="toctitle"><h2>目次</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Import_Geotiff"><span class="tocnumber">1</span> <span class="toctext">Geotiffファイルをインポートする</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Import_as_Images"><span class="tocnumber">1.1</span> <span class="toctext">画像としてインポート</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Import_as_Matrix"><span class="tocnumber">1.2</span> <span class="toctext">行列としてインポート</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Export_GeoTiFF"><span class="tocnumber">2</span> <span class="toctext">GeoTiFFにエクスポートする</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Export_Images_as_GeoTiFF"><span class="tocnumber">2.1</span> <span class="toctext">画像をGeoTiFFとしてエクスポート</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Export_Matrix_as_GeoTiFF"><span class="tocnumber">2.2</span> <span class="toctext">行列をGeoTiFFとしてエクスポート</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Visualize_and_Processing"><span class="tocnumber">3</span> <span class="toctext">視覚化と処理</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Extract_the_interested_area_of_GeoTIFF"><span class="tocnumber">3.1</span> <span class="toctext">GeoTIFFの関心領域を抽出</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Apply_Different_Palette"><span class="tocnumber">3.2</span> <span class="toctext">べつのパレットを適用</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Apply_Color_Palette"><span class="tocnumber">3.2.1</span> <span class="toctext">カラーパレットを適用</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Reverse_Palette"><span class="tocnumber">3.2.2</span> <span class="toctext">パレットを反転</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Set_Gray_Scale_Display_Range"><span class="tocnumber">3.3</span> <span class="toctext">グレースケール表示範囲の設定</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#1._Determine_the_gray_scale_display_range"><span class="tocnumber">3.3.1</span> <span class="toctext">1.グレースケール表示範囲の決定</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#2._Setting_gray_scale_display_range"><span class="tocnumber">3.3.2</span> <span class="toctext">2.グレースケール表示範囲の設定</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#Resize_the_GeoTIFF_Image"><span class="tocnumber">3.4</span> <span class="toctext">GeoTIFF画像のサイズ変更</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Graphing"><span class="tocnumber">4</span> <span class="toctext">グラフ作成</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Plot_Raster_Data_as_Contour.2C_Surface"><span class="tocnumber">4.1</span> <span class="toctext">ラスターデータを等高線図、曲面図として作図</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Set_GeoTIFF_as_Backgound_of_Graph"><span class="tocnumber">4.2</span> <span class="toctext">GeoTIFFをグラフの背景として設定</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Analysis"><span class="tocnumber">5</span> <span class="toctext">解析</span></a></li>
</ul>
</div>
<h2><a name="Import_Geotiff"></a><span class="mw-headline">Geotiffファイルをインポートする</span></h2>
<h3><a name="Import_as_Images"></a><span class="mw-headline">画像としてインポート</span></h3>
<ul><li>GeoTIFFファイルをインポートする方法</li></ul>
<p><b>ファイル: 新規作成: イメージ: 画像/動画</b>メニューを選択してGeoTIFFを画像としてOrigin内に開きます。
</p>
<ul><li>複数のGeoTIFFファイルをインポートする方法</li></ul>
<p><b>ファイル: 新規作成: イメージ: 複数画像ファイル</b>メニューを選択して、複数のGeoTIFFを画像としてOrigin内に開きます。
</p><p><br />
</p>
<h3><a name="Import_as_Matrix"></a><span class="mw-headline">行列としてインポート</span></h3>
<ol><li> 行列をアクティブにして、<b>データ: ファイルからインポート: イメージファイルを行列へインポート</b>メニューを選択し、ファイルを選択します。</li>
<li> <a class="external text" href="../../XFunction/X-Function/ImpImage.html"><b>イメージファイルを行列へインポート</b></a>ダイアログで、<b>グレースケールGeoTIFFをデータとしてインポートに</b>チェックを付けます。</li></ol>
<dl><dd><a  class="image"><img alt="Import GeoTIFF to Matrix.png" src="../images/Geotiff_Importing_and_Processing/Import_GeoTIFF_to_Matrix.png" width="598"  /></a></dd></dl>
<p><br />
</p>
<h2><a name="Export_GeoTiFF"></a><span class="mw-headline">GeoTiFFにエクスポート</span></h2>
<p>画像や行列をGeoTiFFとしてエクスポートするとき、<b>グレースケールGeoTIFFとしてエクスポート</b>にチェックを付けます。これにより、これらのダイアログに<b>GeoTIFFオプション</b>が追加されます。
</p>
<dl><dd><dl><dd><a  class="image"><img alt="OH export as GS GeoTIFF.png" src="../images/Geotiff_Importing_and_Processing/OH_export_as_GS_GeoTIFF.png" width="439"  /></a></dd></dl></dd></dl>
<ul><li> 必要に応じて、<b>GTモデル</b>、<b>EPSG</b>、<b>線形単位</b>、<b>垂直の単位</b>、を指定します。</li>
<li> GeoTIFFで定義済みの設定は淡色表示（グレーアウト）され、編集できません。</li></ul>
<h3><a name="Export_Images_as_GeoTiFF"></a><span class="mw-headline">画像をGeoTiFFとしてエクスポート</span></h3>
<ol><li> <b>ファイル：イメージのエクスポート</b>メニューを選択して<b>イメージ</b>ダイアログを開きます（X-ファンクション = <b>cvExport</b>）。</li>
<li> <b>グレースケールGeoTIFFをデータとしてエクスポート</b>にチェックを付けます。</li>
<li> GeoTIFFファイルのオプションである<b>GTモデル</b><b>EPSG</b>、<b>単位</b>といったオプションを利用できます。</li></ol>
<table class="note">
<tr>
<td><b>Note:</b> Originの画像がGeoTiFFファイルからのものである場合、GeoTiFFに再度エクスポートすると、デフォルトデータの<b>GTモデル</b>、<b>EPSG</b>、および<b>単位</b>が含まれます。
</td></tr></table>
<p><br />
</p>
<h3><a name="Export_Matrix_as_GeoTiFF"></a><span class="mw-headline">行列をGeoTiFFとしてエクスポート</span></h3>
<ol><li> <b>ファイル：エクスポート：イメージ</b>メニューを選択して<b>イメージ</b>ダイアログを開きます（X-ファンクション = <b>expImage</b>）。</li>
<li> <b>グレースケールGeoTIFFをデータとしてエクスポート</b>にチェックを付けます。</li>
<li> GeoTIFFファイルのオプションである<b>GTモデル</b><b>EPSG</b>、<b>単位</b>といったオプションを利用できます。</li></ol>
<h2><a name="Visualize_and_Processing"></a><span class="mw-headline">視覚化と処理</span></h2>
<h3><a name="Extract_the_interested_area_of_GeoTIFF"></a><span class="mw-headline">GeoTIFFの関心領域を抽出</span></h3>
<ul><li>行列の場合、<b>矩形/円形/多角形/領域</b>ツール<a  class="image"><img alt="ROI Rectangle Button.png" src="../images/Geotiff_Importing_and_Processing/ROI_Rectangle_Button.png" width="22"  /></a>を用いて領域を関心領域（ROI）として選択し、そこから情報を抽出することができます。</li></ul>
<p>NetCDFのROIに関する行列データのプロファイリングの詳細については、<a href="../../UserGuide/UserGuide/NetCDF_Manipulating.html#Profiling_Matrix_Data_on_ROI" title="ユーザガイド:NetCDFファイルの操作">このページ</a>を参照してください。
</p>
<ul><li>イメージの場合も行列からの抽出と同様に関心領域を抽出できます。</li></ul>
<p>ROIを右クリックして、ショートカットメニューからオプションを選択します。 
</p>
<dl><dd><a  class="image"><img alt="Image ROI shortcut menu.png" src="../images/Geotiff_Importing_and_Processing/Image_ROI_shortcut_menu.png" width="163"  /></a></dd></dl>
<p><br />
</p>
<h3><a name="Apply_Different_Palette"></a><span class="mw-headline">別のパレットを適用</span></h3>
<h4><a name="Apply_Color_Palette"></a><span class="mw-headline">カラーパレットを適用</span></h4>
<p>イメージがアクティブなとき、<b>パレット</b>ボタン<a  class="image"><img alt="Button Palette.png" src="../images/Geotiff_Importing_and_Processing/Button_Palette.png" width="23"  /></a>と<b>欠損値の色</b>ボタン<a  class="image"><img alt="Popup Background Color.png" src="../images/Geotiff_Importing_and_Processing/Popup_Background_Color.png" width="24"  /></a>（ミニツールバー）を使用して、行列ウィンドウの色を編集できます。
</p>
<dl><dd><a  class="image"><img alt="GeoTIFFs In Differenct palletes.png" src="../images/Geotiff_Importing_and_Processing/500px-GeoTIFFs_In_Differenct_palletes.png" width="500"   /></a></dd></dl>
<p>カラーパレットをクリアしたい場合、以下のスクリプトをスクリプトウィンドウで実行します。
</p>
<pre class="lt" style="font-family:monospace;">img.<span style="color: #000080;">Palette</span><span style="color: #000080;">$</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;&quot;</span>;</pre>
<h4><a name="Reverse_Palette"></a><span class="mw-headline">パレット反転</span></h4>
<p>イメージウィンドウでパレットを適用すると、ミニツールバーの<b>パレット反転</b><a  class="image"><img alt="Popup Revise Palette.png" src="../images/Geotiff_Importing_and_Processing/Popup_Revise_Palette.png" width="20"  /></a>ボタンをつかって、パレットの色を反転できます。
</p><p><br />
</p>
<h3><a name="Set_Gray_Scale_Display_Range"></a><span class="mw-headline">グレースケール表示範囲の設定</span></h3>
<p>デフォルトのグレースケール表示が十分でない、あるいは見分けずらい場合があります。その場合、グレースケールの表示範囲を設定することで修正できます。
</p>
<h4><a name="1._Determine_the_gray_scale_display_range"></a><span class="mw-headline">1.グレースケール表示範囲の決定</span></h4>
<p>イメージウィンドウをアクティブにします。
</p>
<ul><li>  メニューから<b>イメージ：グレースケールヒストグラム</b>を選択して<a class="external text" href="../../XFunction/X-Function/Cvhistogram.html"><b>cvhistogram</b></a>ダイアログを開きます。これにより、ピクセル強度分布が出力され、そこから主な分布を簡単に確認できます。</li></ul>
<p><i>または</i>
</p><p>画像データの種類によっては<b>グレースケールヒストグラム</b>ツールが利用できないことがあります。 
</p>
<ul><li> メニューから<b>イメージ：列に変換</b>を選択して<a class="external text" href="../../XFunction/X-Function/Cv2col.html"><b>cv2col</b></a>ダイアログを開きます。これにより各ポイントのピクセル値を出力します。ピクセル値に対して度数表の機能を実行して主な分布を決定します。</li></ul>
<h4><a name="2._Setting_gray_scale_display_range"></a><span class="mw-headline">2.グレースケール表示範囲の設定</span></h4>
<p>イメージウィンドウをアクティブにします。 
</p>
<ul><li> <b>イメージ：グレースケール表示範囲</b>を設定を選択します。 </li></ul>
<p><i>または</i> 
</p>
<ul><li> イメージウィンドウ内の境界上でクリックしてミニツールバーを表示し、<a  class="image"><img alt="Popup Set Grayscale Range.png" src="../images/Geotiff_Importing_and_Processing/Popup_Set_Grayscale_Range.png" width="19"  /></a>ボタンをクリックします。 </li></ul>
<p>これにより、 <a class="external text" href="../../XFunction/X-Function/Cvgraymax.html"><b>cvgraymax</b></a>ダイアログが開きます。前の操作で決定した主な分布から<b>最小</b>と<b>最大</b>のピクセル値を設定します。
</p>
<table class="noborder">
	<tr>
	<td style="vertical-align:top" width="60"><img src="../images/Geotiff_Importing_and_Processing/Tutorial_icon.png" width="57"  border="0" />
	</td>
	<td><ol><li> イメージウィンドウをアクティブにして、<b>イメージ：グレースケールヒストグラム</b>メニューを選択します。新しいワークシートにピクセル強度分布を出力します。</li>
<li> 出力ワークシートデータを確認して<b>ピクセル値</b>の主な分布を確認します。</li>
<li> イメージウィンドウをアクティブにして、<b>イメージ：グレースケール表示範囲を設定</b>メニューを選択します。前述の操作で得られた<b>最小</b>と<b>最大</b>のピクセル値に変更します。</li></ol>
<dl><dd><a  class="image"><img alt="Set Gray Scale Display Range.png" src="../images/Geotiff_Importing_and_Processing/800px-Set_Gray_Scale_Display_Range.png" width="800"   /></a></dd></dl>
</td></tr></table>
<p><br />
<i>または</i>、よりシンプルでインタラクティブな方法もあります。
</p>
<ol><li> イメージウィンドウ内の境界上でクリックしてミニツールバーを表示します。<b>グレースケールスライダ</b>ボタン<a  class="image"><img alt="Popup Grayscale Slider.png" src="../images/Geotiff_Importing_and_Processing/Popup_Grayscale_Slider.png" width="20"  /></a>をクリックします。 </li>
<li> 開いた<b>表示範囲調整</b>ダイアログで、<b>最小</b>と<b>最大</b>のピクセル値をそれぞれ変更できます。前の手順で決定した主な配信範囲に合わせて、<b>スライダの開始点</b>および<b>スライダの終了点</b>を変更し、スライダをドラッグして「ちょうどいい」表示範囲を見つけます。</li></ol>
<dl><dd><a  class="image"><img alt="Set Gray Scale Display Range slider.gif" src="../images/Geotiff_Importing_and_Processing/Set_Gray_Scale_Display_Range_slider.gif" width="686"  /></a></dd></dl>
<h3><a name="Resize_the_GeoTIFF_Image"></a><span class="mw-headline">GeoTIFF画像のサイズ変更</span></h3>
<p>GeoTIFF画像のサイズを変更するには、<b>イメージ：サイズ変更</b>を選択して<a class="external text" href="../../XFunction/X-Function/CvResize.html"><b>cvResize</b></a>を開き、補間方法を選択して画像サイズを設定します。
</p><p><br />
</p>
<h2><a name="Graphing"></a><span class="mw-headline">グラフ作成</span></h2>
<h3><a name="Plot_Raster_Data_as_Contour.2C_Surface"></a><span class="mw-headline">ラスターデータを等高線図、曲面図として作図</span></h3>
<p>GeoTIFFファイルをイメージウィンドウにインポート後、<a href="../../UserGuide/Category/Geotiff_Importing_and_Processing.html#Extract_the_interested_area_of_GeoTIFF" title="カテゴリ:Geotiffファイルのインポートと処理">関心領域を抽出</a>できます。次に、<b>イメージ：行列に変換</b>を選択し、行列データを使用して等高線図や曲面図などを作成します。
</p>
<dl><dd><a  class="image"><img alt="3D Surface Map from DEM.png" src="../images/Geotiff_Importing_and_Processing/3D_Surface_Map_from_DEM.png" width="745"  /></a></dd></dl>
<p><br />
</p>
<h3><a name="Set_GeoTIFF_as_Backgound_of_Graph"></a><span class="mw-headline">GeoTIFFをグラフの背景として設定</span></h3>
<ol><li> GeoTIFF画像をイメージウィンドウにインポートします。 </li>
<li> イメージを挿入したい円、棒、バブルプロットといったグラフウィンドウをアクティブにします。<b>挿入：イメージウィンドウからの画像</b>を選択して、画像を背景として挿入します。 </li></ol>
<dl><dd><a  class="image"><img alt="GeoTIFF as Background.png" src="../images/Geotiff_Importing_and_Processing/700px-GeoTIFF_as_Background.png" width="700"   /></a></dd></dl>
<h2><a name="Analysis"></a><span class="mw-headline">解析</span></h2>
<p>GeoTIFFファイルをOriginにスタック行列としてインポートすると、NetCDFファイルと同様にOrigin解析ツールを使用できます。
</p>
<ul><li><a href="../../UserGuide/UserGuide/NetCDF_Manipulating.html#Linear_Fit_on_Matrix_Stack" title="ユーザガイド:NetCDFファイルの操作">線形フィット</a></li>
<li><a href="../../UserGuide/UserGuide/NetCDF_Manipulating.html#Descriptive_Statistics_on_Matrix" title="ユーザガイド:NetCDFファイルの操作">統計</a></li>
<li><a href="../../UserGuide/UserGuide/NetCDF_Manipulating.html#Subtraction" title="ユーザガイド:NetCDFファイルの操作">行列間の操作</a></li>
<li><a href="../../UserGuide/UserGuide/NetCDF_Manipulating.html#Pixel_Extraction" title="ユーザガイド:NetCDFファイルの操作">ピクセル抽出</a></li>
<li><a href="../../UserGuide/UserGuide/NetCDF_Manipulating.html#Intensity_Profile" title="ユーザガイド:NetCDFファイルの操作">関心領域の平均、最小、最大の値を検索</a></li></ul>


    