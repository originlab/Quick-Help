<h1 class="firstheading">フィット関数ビルダで新しいフィット関数を作成する方法を示す簡単なサンプル</h1>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>内容</h2>
</div>
<ol>
<li class="toclevel-1"><a href="#Summary"><span class="tocnumber">1</span> <span class="toctext">サマリー</span></a></li>
<li class="toclevel-1"><a href="#What_you_will_learn"><span class="tocnumber">2</span> <span class="toctext">学習する項目</span></a></li>
<li class="toclevel-1"><a href="#Steps"><span class="tocnumber">3</span> <span class="toctext">ステップ</span></a></li>
<li class="toclevel-1"><a href="#Where_to_Access_the_User-defined_Function"><span class="tocnumber">4</span> <span class="toctext">ユーザ定義関数にアクセスするには</span></a></li>
</ol>
</td>
</tr>
</table>
<a name="Summary" id="Summary"></a>
<h2><span class="mw-headline">サマリー</span></h2>
<p>このチュートルアルは、<b>フィット関数ビルダ</b>でフィット関数を作成する方法を示します。</p>
<p>必要なOriginのバージョン:<b>Origin 8.5 SR0</b></p>
<a name="What_you_will_learn" id="What_you_will_learn"></a>
<h2><span class="mw-headline">学習する項目</span></h2>
<ul>
<li>ピークフィット関数を定義する方法</li>
<li>関数本体の書き方</li>
<li>初期化コードの書き方</li>
<li>パラメータの境界のセットの仕方</li>
</ul>
<a name="Steps" id="Steps"></a>
<h2><span class="mw-headline">ステップ</span></h2>
<ol>
<li>Originのメニューで、<b>ツール</b>から<b>フィット関数ビルダ</b>を選び、ツールを開きます。最初(<b>処理のゴール</b>)ページで<b>新しい関数の作成</b>をクリックして、<b>進む</b>ボタンをクリックして<b>関数名と関数形式</b>ページを開きます。</li>
<li><b style="font-weight: bold;">関数名と関数形式</b>ページでは新しいフィット関数のためにカテゴリを作成する事も可能です。今回はUser Definedのカテゴリで関数の名前と関数の種類を選択します。
<ul>
<li><b style="font-weight: bold;">作成</b>をクリックして、<b>カテゴリー名</b>ダイアログを開き、新しいカテゴリー名として<b>MyPeakFitting</b> を入力します。</li>
<li><b style="font-weight: bold;">関数名</b>編集ボックスに<b>AsymmetricGauss</b>と入力します。</li>
<li><b style="font-weight: bold;">関数形式</b>のリストから<b>OriginC</b>を選びます。これに応じて左側パネルの<b>ヒント</b>が更新されるのが分かります。</li>
<li><b style="font-weight: bold;">進む</b>をクリックし、<b>変数とパラメータ</b>ページに移動します。</li>
</ul>
</li>
<li><b style="font-weight: bold;">変数とパラメータ</b>ページで、以下を行います。
<ul>
<li>独立変数および従属変数として <b>x</b> と <b>Y</b> を入力します。</li>
<li>パラメータ編集ボックスに<b>y0, xc, sig1, sig2, A</b> を入力します。</li>
<li><b style="font-weight: bold;">ピーク関数</b>ボックスを有効にすると、<b>NLFit</b> ツールまたは<b>ピークアナライザ</b>のピークフィットでこの関数をフィットの複製に使うことができます。(<b>Note:</b><b>ピークアナライザ</b>でこれを使う前に、<b>フィット関数オーガナイザ</b>の<b>PFW</b>カテゴリーでこの関数を共有する必要があります。)</li>
<li>「<b>進む</b>」をクリックし、<b>関数の内容</b>ページに移動します。</li>
</ul>
</li>
<li><b style="font-weight: bold;">関数の内容</b>ページで、関数を入力し、各パラメータのピークの属性を選択します。
<ul>
<li><b style="font-weight: bold;">ピーク属性列</b>のセルをクリックし、<b>パラメータ</b>タブの<b>xc</b>行をクリックします。ピーク属性として<b>X中心</b>を選択します。そして、パラメータ<b>sig1</b> と <b>A</b>に対して <b>X幅</b> と <b>振幅/面積</b> を選びます。</li>
<li><b style="font-weight: bold;">初期値</b> および<b>意味</b> 列に初期値およびパラメータの意味を入力します。</li>
<li><b style="font-weight: bold;">関数の内容</b>編集ボックスに次の行すべてをコピー＆ペーストします。</li>
</ul>
<dl>
<dd>
<dl>
<dd>
<dl>
<dd>
<dl>
<dd><i style="font-style: italic;">double B,sig;</i></dd>
<dd><i style="font-style: italic;">B=A/(0.5*(sig1+sig2)*sqrt(2*pi));</i></dd>
<dd><i style="font-style: italic;">sig = x&lt;xc&#160;? sig1:sig2;</i></dd>
<dd><i style="font-style: italic;">y = y0 + B * exp(-0.5 *((x-xc)/sig)^2);</i></dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<ul>
<li>独立変数に値の入力したら、<b>評価</b>ボタン<img alt="Image:ffb_evaluate.png" src="../images/A_Simple_Example_to_Show_You_How_to_Create_A_New_Fitting_Function_with_The_Fitting_Function_Builder/Ffb_evaluate.png" width="23" height="23" border="0" />をクリックすれば簡単にフィット関数をチェックできます。</li>
</ul>
<dl>
<dd><img alt="Image:Ffb tutorial 5.png" src="../images/A_Simple_Example_to_Show_You_How_to_Create_A_New_Fitting_Function_with_The_Fitting_Function_Builder/Ffb_tutorial_5.png" width="919" height="431" border="0" /></dd>
</dl>
</li>
<li><b style="font-weight: bold;">進む</b>をクリックし、<b>パラメータ初期化ルーチンコード</b>ページに行き、<b>初期化コード</b>編集ボックスに次のコードを入力します。
<dl>
<dd>
<dl>
<dd>
<dl>
<dd>
<dl>
<dd><i style="font-style: italic;">double cent;</i></dd>
<dd><i style="font-style: italic;">double sig;</i></dd>
<dd><i style="font-style: italic;">xc = peak_pos(x_y_curve, &amp;sig, &amp;y0, NULL, &amp;A, &amp;cent);</i></dd>
<dd><i style="font-style: italic;">sig1 = 0.42466 * (sig - 2 * (cent-xc));</i></dd>
<dd><i style="font-style: italic;">sig2 = 0.42466 * (sig + 2 * (cent-xc));</i></dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd>
<dd><img alt="Image:Ffb tutorial 7.png" src="../images/A_Simple_Example_to_Show_You_How_to_Create_A_New_Fitting_Function_with_The_Fitting_Function_Builder/Ffb_tutorial_7.png" width="919" height="431" border="0" /></dd>
</dl>
</li>
<li><b style="font-weight: bold;">進む</b>をクリックし、<b>境界条件と一般線形制約</b>ページに行き、ダイアログを以下の図のようにセットします。
<dl>
<dd><img alt="Image:Ffb tutorial 6.png" src="../images/A_Simple_Example_to_Show_You_How_to_Create_A_New_Fitting_Function_with_The_Fitting_Function_Builder/Ffb_tutorial_6.png" width="918" height="431" border="0" /></dd>
</dl>
</li>
<li><b style="font-weight: bold;">完了</b>ボタンをクリックします。</li>
</ol>
<table class="note">
<tr>
<td><b style="font-weight: bold;">NOTE:</b><a href="../UserGuide/Quick_Peaks_Gadget.html" title="UserGuide:Quick Peaks Gadget">クィックピークガジェット</a>または<a href="../UserGuide/Fitting_Multiple_Peaks_with_the_Multiple_Peak_Fit_Tool.html" title="UserGuide:Fitting Multiple Peaks with the Multiple Peak Fit Tool">複数ピークフィットツール</a>で利用可能なピーク関数を定義するには、ユーザ定義ピーク関数は<b>ピーク関数</b>のカテゴリに存在している必要があります。</td>
</tr>
</table>
<a name="Where_to_Access_the_User-defined_Function" id="Where_to_Access_the_User-defined_Function"></a>
<h2><span class="mw-headline">ユーザ定義関数にアクセスするには</span></h2>
<ol>
<li>ユーザ定義関数を使って、<b>非線形フィット機構</b>で曲線フィットを実行します。<b>非線形フィット機構</b>についての詳細は、<a href="../Category/Nonlinear_Curve_Fitting.html" title="Category:Nonlinear Curve Fitting">非線形曲線フィット</a>を参照してください。
<dl>
<dd><img alt="Image:Ffb tutorial 8.png" src="../images/A_Simple_Example_to_Show_You_How_to_Create_A_New_Fitting_Function_with_The_Fitting_Function_Builder/Ffb_tutorial_8.png" width="769" height="353" border="0" /></dd>
</dl>
</li>
<li><b style="font-weight: bold;">フィット関数オーガナイザ</b>で関数を検索します。<b>フィット関数オーガナイザ</b>についての詳細は、<a href="../Category/Origin_Fitting_Functions%2C_the_Fitting_Function_Organizer_and_the_Fitting_Function_Builder.html" title="Category:Origin Fitting Functions, the Fitting Function Organizer and the Fitting Function Builder">フィット関数オーガナイザ</a>を参照してください。
<dl>
<dd><img alt="Image:Ffb tutorial 9.png" src="../images/A_Simple_Example_to_Show_You_How_to_Create_A_New_Fitting_Function_with_The_Fitting_Function_Builder/Ffb_tutorial_9.png" width="800" height="502" border="0" /></dd>
</dl>
</li>
<li><b style="font-weight: bold;">フィット関数オーガナイザ</b>で、この関数を右クリックして、<b>共有先</b>を選択し、<b>PFW</b> カテゴリにこの関数を共有します。そして、この関数を使って、<b><a href="../Category/Peak_Analyzer.html" title="Category:Peak Analyzer">ピークアナライザ</a></b>でピークフィットを実行できます。
<dl>
<dd><img alt="Image:Ffb pafit.png" src="../images/A_Simple_Example_to_Show_You_How_to_Create_A_New_Fitting_Function_with_The_Fitting_Function_Builder/Ffb_pafit.png" width="721" height="267" border="0" /></dd>
</dl>
</li>
</ol>
<p><br /></p>
