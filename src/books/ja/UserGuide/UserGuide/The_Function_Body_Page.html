<h1 class="firstheading">式形式の関数ページ</h1><p><br />
</p>
<p class='urlname' style='display: none'>FitFuncBuilder-FuncBody</p>
<p>このページでは、関数の内容を入力でき、パラメータの初期値や定数の指定ができます。  これらのパラメータの設定はNLFitダイアログで変更できます。   もしフィットに積分を含む場合、このページを使って被積分関数の要素としてフィット変数とパラメータを設定できます。
</p>
<h2><a name="Dialog_Box_Controls"></a><span class="mw-headline">ダイアログボックス内のオプション</span></h2>
<dl><dd><a  class="image"><img alt="FFB Function Body tabs.png" src="../images/The_Function_Body_Page/FFB_Function_Body_tabs.png" width="414"  /></a></dd></dl>
<table class="dialogcontroltable">
<tr>
<th> 「パラメータ」タブ
</th>
<td>このタブは初期パラメータの値を設定するための列を複数有しています。  ずべての設定はNLFitダイアログで変更できます。
<ul><li><b>パラメータ</b>
<dl><dd> これは読み取り専用で、パラメータ名を表示します。</dd></dl></li>
<li><b>単位</b>
<dl><dd> パタメータの単位を指定します。</dd></dl></li>
<li><b>意味</b>
<dl><dd> パタメータの意味を指定します。</dd></dl></li>
<li><b>固定</b>
<dl><dd> パラメータを固定します。</dd></dl></li>
<li><b>初期値</b>
<dl><dd>パラメータの初期値をセットします。</dd></dl></li>
<li>有効桁数
<dl><dd></dd></dl></li>
<li><b>ピーク属性</b>
<dl><dd>これは<a href="../../UserGuide/UserGuide/The_Variables_and_Parameters_Page.html" title="ユーザガイド:変数とパラメータページ"><b>変数とパラメータページ</b></a>で<b>ピーク関数</b>のチェックボックスが選択されている場合のみ有効です。ピーク関数に関しては、最初のピーク属性がパラメータ<b>y0</b>で、<b>オフセット/基線</b>にセットする必要があります。また、ピーク属性として、中心、幅、振幅/面積を最低3つの他のパラメータに指定しないといけません。</dd></dl></li></ul>
</td></tr></table>
<table class="dialogcontroltable">
<tr>
<th> 定数タブ
</th>
<td> 定数は、関数式またはパラメータ初期化コードで使用できる固定の値です。前のページで定義している場合、<b>値</b>列に定数の値を入力します。定数はPython関数ボックスで定義されると想定なので、Python関数では非表示です
</td></tr></table>
<table class="dialogcontroltable">
<tr>
<th> 積分タブ
</th>
<td> これは、 <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="ユーザガイド:関数名と関数形式ページ"><b>関数名と関数形式ページ</b></a>で<b>フィット中に積分を実行</b>が選択されているときに利用できます。このタブでは、下限、上限、および積分の引数を含む、被積分変数とパラメータを被積分関数の要素で指定できます。フィット変数をマッピングしたあと、積分の対応をする関数式はこのタブの上部に表示されます。  <b>挿入</b>ボタンをクリックして、この数式を関数内容テキストボックスに挿入します。
</td></tr></table>
<p><br />
</p>
<dl><dd><a  class="image"><img alt="FFB Function Body middle notPy.png" src="../images/The_Function_Body_Page/FFB_Function_Body_middle_notPy.png" width="621"  /></a></dd>
<dd><a  class="image"><img alt="FFB Function Body middle Py.png" src="../images/The_Function_Body_Page/FFB_Function_Body_middle_Py.png" width="621"  /></a></dd></dl>
<p><br />
</p>
<table class="dialogcontroltable">
<tr>
<th> Python関数
</th>
<td> このボックスでPython関数を定義します。サポートパッケージ、独立変数、パラメータなどを含む、必要なすべてのPythonコードをここで定義する必要があります。速度の理由から、ベクトルPythonフィット関数を使用することをお勧めします。
<ul><li> <a href="../../UserGuide/UserGuide/The_Variables_and_Parameters_Page.html" title="ユーザガイド:変数とパラメータページ"><b>変数とパラメータ</b></a>ページで入力された独立変数は、Pythonのlistとして渡されます。</li>
<li> <a href="../../UserGuide/UserGuide/The_Variables_and_Parameters_Page.html" title="ユーザガイド:変数とパラメータページ"><b>変数とパラメータ</b></a>ページで入力されたパラメータは、 Pythonのfloatとして渡されます。</li>
<li> オプションの数値リテラルは、Pythonのfloatとして渡されます。</li></ul>
<p>引数は任意の順序で表示できます。関数呼び出しにおけるすべてのPython関数は、独立変数を表す入力Pythonリストのサイズと同じサイズのPythonリストを返す必要があります。 
</p><p>方程式に複数の依存関係がある場合、リストのタプルを返すPython関数の呼び出しを含む方程式を1つ持つこともできます（独立変数ごとに1つ）。このようにして、すべての従属変数の計算に対してPython呼び出し一度だけ行われます。返されるタプル内のすべてのリストは、(a) 同じサイズで、 (b) 独立変数の入力リストと同じサイズである必要があります。関数本体（次を参照）は次の形式になります。
</p>
<pre class="python" style="font-family:monospace;"><span style="color: #000;">(</span>dep1<span style="color: #000;">,</span> dep2<span style="color: #000;">,</span> ...<span style="color: #000;">)</span><span style="color: #000;">=</span> pyfuncname<span style="color: #000;">(</span>indep1<span style="color: #000;">,</span> indep2<span style="color: #000;">,</span> ...<span style="color: #000;">,</span> param1<span style="color: #000;">,</span> param2<span style="color: #000;">,</span> ...<span style="color: #000;">,</span> numericliteral1<span style="color: #000;">,</span> numericliteral2<span style="color: #000;">,</span>...<span style="color: #000;">)</span><span style="color: #000;">;</span></pre>
<p>関数値の取得にLabTalkは使用されないので注意してください。代わりに、直接Pythonへの呼び出しが行われます。
</p>
</td></tr>
<tr>
<th> 関数内容
</th>
<td> <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="ユーザガイド:関数名と関数形式ページ"><b>関数名と関数形式ページ</b></a>は、独自の関数記述形式を持つ7つの関数タイプを一覧表示します。  フィット関数が正しい形式で記述されていることを確実にするため、左側パネルにヒントに従うか、関数名と関数形式ページでの操作を読みます。関数モデルが陰関数の場合、関数の式を0=g(x,y)ではなく、f=g(x,y) として書く必要があります。fは推定値です。
</td></tr>
<tr>
<th>すべての数値を倍精度として扱う
</th>
<td>このチェックボックスは <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="ユーザガイド:関数名と関数形式ページ"><b>関数名と関数形式ページ</b></a>で<b>OriginC</b>が選択されているときに利用できます。<b>すべての数値を倍精度として扱う</b>が選択されていると、すべての数値は倍精度のデータ型で扱われます。  例えば、この項目が選択されていると、「1/2」を入力すると「0.5」を返してきます。  選択されていない場合、「1/2」を入力すると「0」を返してきます。
</td></tr>
<tr>
<th>微分係数を使う
</th>
<td>これは <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="ユーザガイド:関数名と関数形式ページ"><b>関数名と関数形式ページ</b></a>で<b>OriginC</b>が選択されているときのみ利用できます。  これを選択すると、すべてのパラメータに対して微分係数を選択できます。  微分係数式を指定すると、フィットのスピードが速くなります。<b>d_VarName</b> を使い、微分変数を表します。<br />
<p>参考：<a href="../../UserGuide/UserGuide/Partial_Derivative_Parameters.html" title="ユーザガイド: パラメータの偏微分">パラメータの偏微分を指定</a>
</p>
</td></tr>
<tr>
<th>コードビルダを開くボタン <a  class="image"><img alt="Ffb open codebuilder.png" src="../images/The_Function_Body_Page/Ffb_open_codebuilder.png" width="23"  /></a>
</th>
<td> これは <a href="../../UserGuide/UserGuide/The_Name_and_Type_Page.html" title="ユーザガイド:関数名と関数形式ページ"><b>関数名と関数形式ページ</b></a>で<b>OriginC</b>が選択されているときのみ利用できます。  このボタンをクリックして、コードビルダで関数の内容を編集します。  詳細は、<a href="../../UserGuide/UserGuide/User-Defined_Fitting_Functions.html#Editing_the_Function_in_Code_Builder" title="ユーザガイド:ユーザ定義フィット関数">コードビルダ内の関数を編集する</a>を参照してください。
</td></tr></table>
<table class="dialogcontroltable">
<tr>
<th>クィックチェック
</th>
<td>関数の有効性をチェックするために、<b>クイックチェック</b>を使用してください。  テーブル内の初期値列にパラメータ値を入力します。そして、編集ボックスに独立変数の値を入力します。  <a  class="image"><img alt="Ffb evaluate.png" src="../images/The_Function_Body_Page/Ffb_evaluate.png" width="23"  /></a>ボタンを押し、従属変数の出力値を見ます。
<p>関数の内容にエラーがあったり、パラメータや変数に不適切な入力値を与えると、出力ボックスは欠損値を表示し、エラーメッセージを返します。
</p>
</td></tr></table>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/The_Function_Body_Page/Tip_icon.png" width="57"  border="0" /></td><td><p><b>素早くパラメータや定数を編集する</b>
<p>パラメータタブ/定数タブの表ボックス内部を右クリックしてコンテキストメニューを開きます。
</p>
</p>
<ul><li><b>追加</b>：表に新しい行を追加します。</li>
<li><b>名前の変更</b>：マウスのカーソルが特定の行に合わさっている時のみ使用可能です。（パラメータタブ内の）<b>パラメータの名前変更</b>または(定数タブ内の)<b>定数の名前変更</b>ダイアログが開き、目的のパラメータ/定数の名前を変更します。</li>
<li><b>削除</b>：表の行を削除します。<b>パラメータ</b>タブのこのオプションは1つのパラメータしかない場合は使用できません。</li></ul>
</td></tr></table>


    