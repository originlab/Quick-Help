<h1 class="firstheading">カスタムフィルタ</h1>
<h2><a name="Description" id="Description"></a><span class="mw-headline">説明</span></h2>
<p><a class="external text" href="../../XFunction/X-Function/Filter2.html">filter2</a> Xファンクションは、元の行列に正方形のフィルタを適用します。フィルタ行列は、元の行列の各セルの中央にフィルタを配置します。</p>
<p>この機能を使用するには、</p>
<ol>
<li>2つの行列データを作成します。一方はソース行列で、もう一方はフィルタ行列です。</li>
<li>ソース行列をアクティブにします。</li>
<li>メニューから、<b>解析</b>：<b>数学：カスタムフィルタ</b> を選び、<b>filter2</b>ダイアログを開きます。</li>
</ol>
<h2><a name="Dialog_Options" id="Dialog_Options"></a><span class="mw-headline">ダイアログオプション</span></h2>
<table class="dialogcontroltable">
<tr>
<th><b style="font-weight: bold;">再計算</b></th>
<td>
<p>分析結果の再計算を制御します。</p>
<ul>
<li><b style="font-weight: bold;">なし</b></li>
<li><b style="font-weight: bold;">自動</b></li>
<li><b style="font-weight: bold;">手動</b></li>
</ul>
<p>詳細は、以下をご覧下さい。<a class="external text" href="../../UserGuide/UserGuide/Recalculating_Analysis_Results.html">分析結果の再計算</a></p>
</td>
</tr>
<tr>
<th>入力行列</th>
<td>
<p>入力行列オブジェクト</p>
<p>範囲制御についてはこちらを確認してください：<a class="external text" href="../../UserGuide/UserGuide/Specifying_Your_Input_Data.html">入力データを指定する</a></p>
</td>
</tr>
<tr>
<th>フィルタ行列</th>
<td>
<p>フィルタ行列オブジェクト</p>
</td>
</tr>
<tr>
<th>パディングオプション</th>
<td>
<p>ソース行列の端では、行列フィルタは境界を外てしまう可能性があります。パディングオプションを選択します。</p>
<ul>
<li><b style="font-weight: bold;">ZeroPadding</b>
<dl>
<dd>ゼロで詰めます。</dd>
</dl>
</li>
<li><b style="font-weight: bold;">MapPadding</b>
<dl>
<dd>対応する内側のセル値を外側までマッピングします。</dd>
</dl>
</li>
<li><b style="font-weight: bold;">RepeatPadding</b>
<dl>
<dd>端の値を繰り返す。</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr>
<th>規格化</th>
<td>
<p>チェックをつけるとフィルタの重みで置き換えた値を規格化します。</p>
</td>
</tr>
<tr>
<th>出力行列</th>
<td>
<p>出力行列オブジェクトの指定</p>
<p>範囲制御についてはこちらを確認してください：<a class="external text" href="../../UserGuide/UserGuide/Output_Results.html">結果の出力</a></p>
</td>
</tr>
</table>
<h2><a name="Algorithm" id="Algorithm"></a><span class="mw-headline">アルゴリズム</span></h2>
<p>この機能は、<img src="../images/Custom_Filter/math-6d3fb1243abbe7c6cb01ba1a09e68ae8.png" title="N\!" alt="N\!" class="tex" border="0" /> × <img src="../images/Custom_Filter/math-6d3fb1243abbe7c6cb01ba1a09e68ae8.png" title="N\!" alt="N\!" class="tex" border="0" /> のフィルタ行列をとり、元の行列の各セルにフィルタを適用します。フィルタの各セルに対して、元の行列を重ねてフィルタ要素の積を計算し、すべての積を合計し、(指定すれば)フィルタの重みを規格化して、重み付けした平均で元の画像のピクセルを置き換えます。</p>
<p>例えば、</p>
<p><img src="../images/Custom_Filter/math-8d35f1a8663106d2e452a182bad4f2b3.png" title="\begin{pmatrix}2 &amp; 3&amp; 4 &amp;5\\3 &amp; 4 &amp;5 &amp;6\\4 &amp; 5 &amp;6 &amp;7\\5 &amp; 6 &amp; 7 &amp;8 \end{pmatrix}+\begin{pmatrix}1&amp; 1&amp; 1\\1&amp; 2&amp;1 \\1 &amp; 1 &amp;1 \end{pmatrix}=\begin{pmatrix}1.4&amp; 2.4&amp; 3.1 &amp;2.5\\2.4 &amp; 4 &amp;5 &amp;3.9\\3.1 &amp; 5 &amp;6 &amp;4.6\\2.5 &amp; 3.9 &amp; 4.6 &amp;3.6 \end{pmatrix}" alt="\begin{pmatrix}2 &amp; 3&amp; 4 &amp;5\\3 &amp; 4 &amp;5 &amp;6\\4 &amp; 5 &amp;6 &amp;7\\5 &amp; 6 &amp; 7 &amp;8 \end{pmatrix}+\begin{pmatrix}1&amp; 1&amp; 1\\1&amp; 2&amp;1 \\1 &amp; 1 &amp;1 \end{pmatrix}=\begin{pmatrix}1.4&amp; 2.4&amp; 3.1 &amp;2.5\\2.4 &amp; 4 &amp;5 &amp;3.9\\3.1 &amp; 5 &amp;6 &amp;4.6\\2.5 &amp; 3.9 &amp; 4.6 &amp;3.6 \end{pmatrix}" class="tex" border="0" /></p>
<p>出力行列でcell(2,2) の値は次のようになります。</p>
<p><img src="../images/Custom_Filter/math-901c5a790cf8fc9ee5274c77d41e82b9.png" title="Cell(2,2)=\frac{2\times 1+3\times 1+4\times 1+3\times 1+4\times 2+5\times 1+4\times 1+5\times 1+6\times 1}{1+1+1+1+2+1+1+1+1}=4" alt="Cell(2,2)=\frac{2\times 1+3\times 1+4\times 1+3\times 1+4\times 2+5\times 1+4\times 1+5\times 1+6\times 1}{1+1+1+1+2+1+1+1+1}=4" class="tex" border="0" /></p>
<p><b style="font-weight: bold;">Normalize</b> チェックボックスのチェックを付けると、重ね合わせたセルの積は、フィルタの対応するセルの重みで正規化されます。</p>
<p>ソース行列の端にフィルタを適用すると、境界より外側にフィルタの一部がかかってしまう可能性があります。このような場合、ソース行列の外側を0で埋めたり(ゼロパティング)、内側のセル値を反射させたり(マッピング)、端の値を繰り返す(繰り返しパディング)ことで値を割り当てることができます。</p>
