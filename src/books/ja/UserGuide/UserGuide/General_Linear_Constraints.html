<h1 class="firstheading">一般線形制約条件</h1>
<div style="text-align: left; direction: ltr; margin-left: 1em;">
<p><img alt="Image:Video_Image.png" src="../images/General_Linear_Constraints/Video_Image.png" width="33" height="33" border="0" /> 関連する動画は<a href="http://www.youtube.com/user/LightstoneCorp/videos?view=0" target="_blank">こちら</a></p>
</div>
<p>NLFitダイアログの<a href="../UserGuide/Code_Tab_Upper_Panel.html" title="UserGuide:『コード』タブ (上側パネル)"><b>コード</b>タブ</a>にある<b>線形制約を使う</b>チェックボックスにチェックが付いているとき、一般線形制約条件を使って、パラメータを強制的に制約を付けることができます。線形制約は、同じタブの<b>制約</b>ボックスまたは<a href="../UserGuide/The_Fitting_Function_Organizer_Dialog_Box.html" title="UserGuide:フィット関数オーガナイザダイアログボックス">フィット関数オーガナイザ</a>ダイアログ内で定義することができます。</p>
<dl>
<dd><img alt="Image:General_Linear_Constraints.png" src="../images/General_Linear_Constraints/General_Linear_Constraints.png" width="771" height="353" border="0" /></dd>
</dl>
<table class="note">
<tr>
<td><b style="font-weight: bold;">Note:</b>一般線形制約条件は明確なフィット関数でのみ、利用できます。</td>
</tr>
</table>
<table id="toc" class="toc" summary="Contents">
<tr>
<td>
<div id="toctitle">
<h2>内容</h2>
</div>
<ol>
<li class="toclevel-1"><a href="#General_Notation"><span class="tocnumber">1</span> <span class="toctext">一般的な表記</span></a></li>
<li class="toclevel-1"><a href="#Extended_Notation"><span class="tocnumber">2</span> <span class="toctext">拡張表記</span></a>
<ol>
<li class="toclevel-2"><a href="#Notation_for_Initial_Values_of_Parameters"><span class="tocnumber">2.1</span> <span class="toctext">パラメータの初期値の表記</span></a></li>
<li class="toclevel-2"><a href="#Notation_for_Parameter_Family"><span class="tocnumber">2.2</span> <span class="toctext">パラメータグループの表記</span></a></li>
<li class="toclevel-2"><a href="#Notation_for_All_Parameters_except_a_Specific_One"><span class="tocnumber">2.3</span> <span class="toctext">特定の1つを除く、すべてのパラメータの表記</span></a></li>
<li class="toclevel-2"><a href="#Combination_of_Special_Characters"><span class="tocnumber">2.4</span> <span class="toctext">組合せて利用する</span></a></li>
<li class="toclevel-2"><a href="#Using_replica.2Fset_index"><span class="tocnumber">2.5</span> <span class="toctext">複製の使用/インデックスのセット</span></a></li>
</ol>
</li>
</ol>
</td>
</tr>
</table>
<a name="General_Notation" id="General_Notation"></a>
<h2><span class="mw-headline">一般的な表記</span></h2>
<p>線形制約を作成するには、パラメータ名、算術演算子、関係演算子を使います。5つの関係演算子( =, &lt;, &lt;=, &gt;, &gt;=)がサポートされています。曲線フィットは、"&lt;" と "&lt;=" を同じものとして扱います。同様に、"&gt;" と "=&gt;" も違いがありません。</p>
<p>以下は、線形制約のいくつか簡単なサンプルです。(<i>a</i>, <i>b</i>, <i>c</i>, <i>d</i> はパラメータです。):</p>
<ul>
<li><code style="font-family: monospace;">a &gt; b;</code></li>
<li><code style="font-family: monospace;">a + 2 * b &gt;= c * 2 ? d;</code></li>
<li><code style="font-family: monospace;">a &lt; b &lt; c;</code></li>
<li><code style="font-family: monospace;">a / 3 &lt; 9;</code></li>
</ul>
<p><a href="../UserGuide/Fitting_Multiple_Peaks_with_Replicas.html" title="ユーザガイド:複製を持つ複数ピークをフィットする">複製フィット</a>が使われている場合、曲線フィットが入力データの複数ピークに実行されます。このような場合、線形制約を定義するとき、"<i>ParaName</i>__<i>n</i>" 表記(アンダスコア2つ)を使って、<i>n</i>番目のピークの<i>ParaName</i> という名前のパラメータを参照します。例えば、"w__1"と"w__2"は、それぞれ1番目と2番目の <i>w</i> パラメータを参照します。2番目のピークの幅が1番目のピークの幅より大きいという制約を付けるには、次のような線形制約を書きます。</p>
<p><code style="font-family: monospace;">w__1 &gt; w__2;</code></p>
<p><a href="../UserGuide/Global_fitting_with_parameter_sharing.html" title="ユーザガイド:パラメータ共有でのグローバルフィット">グローバルフィット</a>を実行するとき、"<i>ParaName</i>_<i>n</i>" 表記(アンダスコア1つ)を使って、<i>n</i>番目のデータセットの<i>ParaName</i> という名前のパラメータを参照します。</p>
<p>線形制約の定義が複数行のとき、行をセミコロンで区切ります。次のように1つの制約条件に複数の演算子を使うことができます。例えば</p>
<p><code style="font-family: monospace;">4 &lt; a &lt; b &lt; 6;</code></p>
<p>これは、次と同じです。</p>
<p><code style="font-family: monospace;">4 &lt; a; a &lt; b; b &lt; 6;</code></p>
<p>線形制約で数値に割り当てる変数を使うこともできます。例えば、関数に2つのパラメータ <i>P1</i> と <i>P2</i> がある場合、次のように制約を定義することができます。</p>
<p><code style="font-family: monospace;">P1+qw*P2,</code></p>
<p>そして、前もって <b>qw</b> を2.5のような数値にセットすることができます。</p>
<p>非線形の制約はサポートしていません。そのため、次のような非線形の制約は動作しません。</p>
<ul>
<li><code style="font-family: monospace;">a^2 &gt; c;</code></li>
<li><code style="font-family: monospace;">a * b &gt; 3;</code></li>
<li><code style="font-family: monospace;">1 / b &gt; c + 3;</code></li>
<li><code style="font-family: monospace;">sin(a) &lt; c;</code></li>
</ul>
<p>境界は、フィットパラメータの値に制限を設定することができます。境界と線形制約の両方を使用するとき、線形制約の優先順位が高くなります。</p>
<a name="Extended_Notation" id="Extended_Notation"></a>
<h2><span class="mw-headline">拡張表記</span></h2>
<p>一般線形制約条件の表記は、Origin 8.1 SR3で拡張され、特殊なケースをサポートするようになりました。これらの表記は、パラメータ「family」を表すことができるため、複製フィットで役に立ちます。</p>
<a name="Notation_for_Initial_Values_of_Parameters" id="Notation_for_Initial_Values_of_Parameters"></a>
<h3><span class="mw-headline">パラメータの初期値の表記</span></h3>
<p><b style="font-weight: bold;">(i)</b> を使って、パラメータの初期値を参照できます。例えば、xc__2(i) は、パラメータ xc__2の初期値ということです。そのため、xc__2のパラメータ値に初期値から0.3以上派生しないように制限を付けるには、次の制約条件を使います。</p>
<pre class="lt">
xc__2<span style="color: #000000;">(</span>i<span style="color: #000000;">)</span><span style="color: #000080;">-</span>xc__2 <span style="color: #000080;">&lt;=</span> <span style="color: #0000dd;">0.3</span>;
xc__2<span style="color: #000080;">-</span>xc__2<span style="color: #000000;">(</span>i<span style="color: #000000;">)</span> <span style="color: #000080;">&lt;=</span> <span style="color: #0000dd;">0.3</span>;
</pre>
<a name="Notation_for_Parameter_Family" id="Notation_for_Parameter_Family"></a>
<h3><span class="mw-headline">パラメータグループの表記</span></h3>
<p><b style="font-weight: bold;">(a)</b> を使って、グループのすべてのパラメータを示すことができます。すべての振幅パラメータ(A)を1より小さくしたければ、次の制約を使います。</p>
<pre class="lt">
A<span style="color: #000000;">(</span>a<span style="color: #000000;">)</span> <span style="color: #000080;">&lt;</span> <span style="color: #0000dd;">1</span>;
</pre>
<a name="Notation_for_All_Parameters_except_a_Specific_One" id="Notation_for_All_Parameters_except_a_Specific_One"></a>
<h3><span class="mw-headline">特定の1つを除く、すべてのパラメータの表記</span></h3>
<p><b style="font-weight: bold;">(e)</b>を使うと、(e)が付いているパラメータを除いてグループのすべてのパラメータを示します。以下のサンプルは、振幅A__3は、少なくとも他のすべての振幅パラメータの2倍の大きさがあるということを指定します。</p>
<pre class="lt">
A__3 <span style="color: #000080;">&gt;=</span> <span style="color: #0000dd;">2</span><span style="color: #000080;">*</span>A__3<span style="color: #000000;">(</span>e<span style="color: #000000;">)</span>;
</pre>
<p>1つの制約の中では、1つの(e)しか使うことができません。また、1つの一般線形制約ダイアログで、 (a) と (e)の両方を使うことはできません。</p>
<a name="Combination_of_Special_Characters" id="Combination_of_Special_Characters"></a>
<h3><span class="mw-headline">組合せて利用する</span></h3>
<p>(e)と(a)のシンタックスは、 (i)シンタックスで使うことができます。次の制約はピークの中心がその初期値より0.2以上離れないように指定しています。</p>
<pre class="lt">
xc<span style="color: #000000;">(</span>ia<span style="color: #000000;">)</span> <span style="color: #000080;">-</span> xc<span style="color: #000000;">(</span>a<span style="color: #000000;">)</span> <span style="color: #000080;">&lt;=</span> <span style="color: #0000dd;">0.2</span>;
xc<span style="color: #000000;">(</span>a<span style="color: #000000;">)</span> <span style="color: #000080;">-</span> xc<span style="color: #000000;">(</span>ia<span style="color: #000000;">)</span> <span style="color: #000080;">&lt;=</span> <span style="color: #0000dd;">0.2</span>;
</pre>
<a name="Using_replica.2Fset_index" id="Using_replica.2Fset_index"></a>
<h3><span class="mw-headline">複製の使用/インデックスのセット</span></h3>
<p><b style="font-weight: bold;">(n)</b> を使って、パラメータファミリーの順序を表します。例えば、以下の条件を付けたい場合：</p>
<pre class="lt">
w <span style="color: #000080;">&gt;</span> w__2;
w__2 <span style="color: #000080;">&gt;</span> w__3;
w__3 <span style="color: #000080;">&gt;</span> w__4;
w__4 <span style="color: #000080;">&gt;</span> w__5;
</pre>
<p>次の制約を使うことができます。</p>
<pre class="lt">
w<span style="color: #000000;">(</span>n<span style="color: #000000;">)</span> <span style="color: #000080;">&gt;</span> w<span style="color: #000000;">(</span>n<span style="color: #0000dd;">+1</span><span style="color: #000000;">)</span>, n<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>..<span style="color: #0000dd;">5</span>;
</pre>
<p>また、次のような例もあります。</p>
<pre class="lt">
w<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000080;">*</span>n<span style="color: #0000dd;">-1</span><span style="color: #000000;">)</span> <span style="color: #000080;">&lt;</span> w<span style="color: #000000;">(</span><span style="color: #0000dd;">2</span><span style="color: #000080;">*</span>n<span style="color: #000000;">)</span>, n<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>..<span style="color: #0000dd;">10</span>;
</pre>
<p>これは、次と同じです。</p>
<pre class="lt">
w <span style="color: #000080;">&lt;</span> w__2; w__3 <span style="color: #000080;">&lt;</span> w__4; w__5 <span style="color: #000080;">&lt;</span> w__6; w__7 <span style="color: #000080;">&lt;</span> w__8; w__9 <span style="color: #000080;">&lt;</span> w__10;
</pre>
