<h1 class="firstheading">クラスタープロット</h1><p><br />
</p>
<p class='urlname' style='display: none'>クラスタープロット</p>
<p><a class="image"><img alt="Cluster plot 01.png" src="../images/Plot_by_Group/Cluster_plot_01.png" width="557"  /></a>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>目次</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Data_Requirements"><span class="tocnumber">1</span> <span class="toctext">要求されるデータ</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Creating_the_Graph"><span class="tocnumber">2</span> <span class="toctext">グラフ作成</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Quick_Examples"><span class="tocnumber">2.1</span><span class="toctext">クイックサンプル</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Example_1:_create_a_cluster_plot"><span class="tocnumber">2.1.1</span><span class="toctext">サンプル1: クラスタープロット作成</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Example_2:_cluster_plot_updates_automatically_when_the_group_column_changes"><span class="tocnumber">2.1.2</span><span class="toctext">サンプル2: グループ情報変更時に自動でクラスタープロットを更新</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Example_3:_create_a_one-panel_cluster_plot"><span class="tocnumber">2.1.3</span><span class="toctext">サンプル3: パネル1つのクラスタープロットを作図</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Example_4:_re-order_panels_by_changing_categorical_order"><span class="tocnumber">2.1.4</span> <span class="toctext">サンプル 4: カテゴリーの順番を変更して、パネルを並び替える</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Template"><span class="tocnumber">3</span> <span class="toctext">テンプレート</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Notes"><span class="tocnumber">4</span> <span class="toctext">ノート</span></a></li>
</ul>
</div>
<h2><a name="Data_Requirements"></a><span class="mw-headline">要求されるデータ</span></h2>
<p>理想的には、少なくとも2つのY列を入力データとして持つ必要があり、そのうちの1つはグループ情報を提供します。必要に応じて、プロットの色/シンボルの形状/シンボルのサイズをマッピングするための列を追加できます。 
</p>
<h2><a name="Creating_the_Graph"></a><span class="mw-headline">グラフ作成</span></h2>
<p><b>plot_bygroup</b>ダイアログは次の2つの方法のうちの1つで開きます。 
</p>
<ul><li>メニューの<b>作図&gt; カテゴリカル： クラスタープロット</b>を選択</li>
<li><b>2Dグラフギャラリー</b>ツールバーの<a class="image"><img alt="Cluster plot button.png" src="../images/Plot_by_Group/Cluster_plot_button.png" width="23"  /></a>ボタンをクリックします。
<dl><dd><a class="image"><img alt="Cluster plot 02.png" src="../images/Plot_by_Group/Cluster_plot_02.png" width="352"  /></a></dd></dl></li></ul>
<p>開いたダイアログでは以下の操作ができます。
</p>
<ul><li>入力データ範囲を選択、1つ以上のグループ列を追加</li>
<li>プロットタイプを指定</li>
<li>プロットの色またはシンボルの形状/サイズをマッピングするか指定</li>
<li>レイヤのリンク方法を決定</li>
<li>パネルの配置を決定</li></ul>
<p><a class="image"><img alt="Cluster plot 03.png" src="../images/Plot_by_Group/Cluster_plot_03.png" width="771"  /></a>
</p><p>ダイアログ設定の詳細は<a class="external text" href="../../XFunction/X-Function/Plot_bygroup.html">このページ</a>を参照してください。
</p><p>クラスタープロットが生成されたら、グラフ上の緑色の錠前ボタンをクリックして、<b>レイヤを表示/非表示</b>を選んで、グループ要素のフィルタリングができます。
</p><p><a class="image"><img alt="Cluster plot 14.png" src="../images/Plot_by_Group/Cluster_plot_14.png" width="251"  /></a>
</p>
<h3><a name="Quick_Examples"></a><span class="mw-headline">クイックサンプル</span></h3>
<h4><a name="Example_1:_create_a_cluster_plot"></a><span class="mw-headline">サンプル1: クラスタープロット作成</span></h4>
<p>以下のサンプルは、デフォルト設定でインポートされた(<b>Data: インポート: 単一ASCII</b>)<i>&lt;Origin exe folder&gt;/Samples/Statistics/body.dat</i>のデータを使用しています。データセットにはグループデータの2列、年齢(col(B)) と 性別(Col(C))が含まれています。性別でパネルを分け、年齢で色分けした身長対体重の散布図を作成します。
</p>
<ol>
<li>D列を右クリックして、<b>列XY属性の設定: X列</b>を選択してX列に設定します。</li>
<li>列DとEを選択して、<b>作図&gt; 2D: グループ化プロット: クラスタープロット</b>を選択します。開いたダイアログで、以下のように設定します。<br />
<a class="image"><img alt="Cluster plot 04.png" src="../images/Plot_by_Group/Cluster_plot_04.png" width="612"  /></a>
<br /><b>OK</b>をクリックしてクラスタープロットを作成します。
<br /><a class="image"><img alt="Cluster plot 05.png" src="../images/Plot_by_Group/Cluster_plot_05.png" width="513"  /></a></li>
</ol>
<h4><a name="Example_2:_cluster_plot_updates_automatically_when_the_group_column_changes"></a><span class="mw-headline">サンプル2: グループ情報変更時に自動でクラスタープロットを更新</span></h4>
<p>以下のサンプルは、デフォルト設定でインポートされた(<b>ファイル: インポート: 単一ASCII</b>)<i>&lt;Origin フォルダ&gt;/Samples/Statistics/body.dat</i>のデータを使用しています。このデータセットには2列のグループデータ、性別(Col(C))と転職(Col(D))があります。これら2つのグループ情報でクラスタープロットを作図します。グループ情報にフィルタをかけると、クラスタープロットは自動で更新されます。
</p>
<ol>
<li>A、B列を選択して、<b>作図&gt; 2D: グループ化プロット: クラスタープロット</b>を選択します。開いたダイアログで、以下のように設定します。<br />
<ul><li><b>グラフタイプ</b> = 散布図 </li>
<li><b>レイヤを分ける変数 &gt; 水平</b> = col(C):Gender、<b>垂直</b> = col(D):Career_Change </li>
<li><b>軸の設定 &gt; Xスケールをそろえる</b>にチェック </li>
<li><b>軸フレームの表示</b>にチェック</li></ul>
<b>OK</b>をクリックしてクラスタープロットを作成します。
<br /><a class="image"><img alt="Cluster plot 07.png" src="../images/Plot_by_Group/Cluster_plot_07.png" width="448"  /></a>
</li>
<li>グループ変数にフィルタをかけて年齢に対する収入の分布の変化をダイナミックに表示します。グラフの左上にある緑の鍵のアイコンをクリックして<b>レイヤの表示/非表示</b>を選択します。
<br />
<table class="simple">
<tr>
<th>
</th>
<th> 転職する人々の収入の分布に性別変数がどのように影響するかを見たい場合
</th>
<th> 転職を繰り返すこと女性の給与分布にどのように影響するかを見たい場合
</th></tr>
<tr>
<th> フィルタ条件
</th>
<td> <a class="image"><img alt="Cluster plot 08.png" src="../images/Plot_by_Group/Cluster_plot_08.png" width="233"  /></a>
</td>
<td> <a class="image"><img alt="Cluster plot 09.png" src="../images/Plot_by_Group/Cluster_plot_09.png" width="233"  /></a>
</td></tr>
<tr>
<th> クラスタープロット
</th>
<td> <a class="image"><img alt="Cluster plot 10.png" src="../images/Plot_by_Group/Cluster_plot_10.png" width="372"  /></a>
</td>
<td> <a class="image"><img alt="Cluster plot 11.png" src="../images/Plot_by_Group/Cluster_plot_11.png" width="368"  /></a>
</td></tr></table>
</li>
</ol>
<p><br /><br />
<b>Note</b>: ソースワークシートにフィルタを追加できます。フィルタ条件を変更するとそれに対応してクラスタープロットが更新されます。
</p>
<h4><a name="Example_3:_create_a_one-panel_cluster_plot"></a><span class="mw-headline">サンプル3: パネル1つのクラスタープロットを作図</span></h4>
<p>次のサンプルは、<a href="../../UserGuide/UserGuide/Startup_Dialog.html" title="ユーザガイド:開始時のダイアログ">ラーニングセンター</a>の<i>Trellis Plots - Overlap Panels with Multiple Categories Combination.opju</i>にあるデータセットを使用します。複数グループそれぞれにY軸がある、1つのパネルのグラフとしてプロットします。 
</p>
<ol>
<li><b>ヘルプ: ラーニングセンター</b>を選択します。 
<li>左側の<b>グラフサンプル</b>タブを選択して、<b>トレリスプロット</b>を選択します。 
<li><i>Trellis Plots - Overlap Panels with Multiple Categories Combination.opju</i>をダブルクリックします。ワークブック<i>Book8</i>をアクティブにします。データセット<i>Adults</i> vs. <i>Foals</i>が、場所(col(F))と治療(col(G))により4つのグループに分けられています。この4グループが重なりあったクラスタープロットを作成します。
<li>C列を選択して、<b>作図&gt; 2D: グループ化プロット: クラスタープロット</b>を選択します。開いたダイアログで、以下のように設定します。<br />
<ul><li><b>グラフタイプ</b> = 線+シンボル </li>
<li><b>レイヤを分ける変数 &gt; 水平</b> = col(F):Location および col(G):Treatmente  </li>
<li><b>レイヤの整列</b> = 全レイヤを重ねる</li>
<li><b>Y軸タイトルにグループ情報を表示する</b>にチェックします。 </li>
<li><b>軸フレームの表示</b>にチェック</li></ul>
<b>OK</b>をクリックしてクラスタープロットを作成します。
<br /><a class="image"><img alt="Cluster plot 13.png" src="../images/Plot_by_Group/Cluster_plot_13.png" width="479"  /></a>
</li>
</ol>
<table class="noborder"><tr>
	<td style="vertical-align:top" width="60"><img src="../images/Plot_by_Group/Tip_icon.png" width="57"  border="0" /></td><td><ol><li><a href="../../UserGuide/UserGuide/Trellis.html" title="ユーザガイド：トレリスプロット">トレリスプロット</a>とクラスタープロット双方とも異なるグループを1つのパネルにプロットできます。トレリスプロットは同じXYスケールを共有しなければなりませんが、クラスタープロットはより柔軟な軸スケールオプションを提供します。グループを別々のレイヤにプロットするので、XY軸のスケールをすべてのレイヤにリンクするか、または各レイヤ独自の軸スケールを割り当てるかを選択できます。これは、Y値がグループごとに大きく異なる場合に便利です。</li>
<li>Y 軸の色をグラフの色に対応させるには、<b>軸</b>ダイアログの<a href="../../UserGuide/UserGuide/Line_and_Ticks_2.html#Color" title="ユーザガイド：軸と軸目盛">軸と軸目盛タブ</a>で<b>色</b>を<b>自動</b>を選択します。</li></ol>
</td></tr></table>
<h4><a name="Example_4:_re-order_panels_by_changing_categorical_order"></a><span class="mw-headline">サンプル 4: カテゴリーの順番を変更して、パネルを並び替える</span></h4>
<p>デフォルトでは、クラスタープロットはパネルはグループ列の要素の順番に並べられます。トレリスプロットを使用すると、グループ列がカテゴリーに設定されます。カテゴリー列を並び替えることで、パネルの順番を変更します。 
</p><p>以下のサンプルは、デフォルト設定でインポートされた(Data: インポート: 単一ASCII)&lt;Origin exe folder&gt;/Samples/Statistics/automobile_categorical.dat.datのデータを使用しています。&quot;0~60 mph&quot;と&quot;Engine Displacement&quot;を国ごとにグループ化してプロットし、カテゴリー順をカスタムして、パネルの並び順を変更します。
</p>
<ol>
<li>どの列の選択せずに、<b>作図&gt; 2D: 複数区分: クラスタープロット</b>を選択します。開いたダイアログで、以下のように設定します。<br />
<ul><li><b>入力&gt; 範囲1&gt; X</b> = col(D):0~60 mph, <b>Y</b> = col(G):Engine Displacement</li>
<li><b>プロットタイプ</b> = 線+シンボル </li>
<li><b>レイヤを分ける変数 &gt; 水平</b> = col(H):Country  </li>
<li><b>軸の設定 &gt; 同一Xスケール</b>にチェック </li>
<li><b>軸フレームの表示</b>にチェック</li></ul>
<b>OK</b>をクリックしてクラスタープロットを作成します。
<br /><a class="image"><img alt="Cluster plot 12.png" src="../images/Plot_by_Group/Cluster_plot_12.png" width="402"  /></a>
</li>
<li>ここから、国名を降順にして、パネルを同じようにに並び替えます。元データのワークシートをアクティブにします。Col(H)の<b>カテゴリー</b>ラベルをダブルクリックします。<b>カテゴリー</b>ダイアログが開きます。
<li><b>カテゴリーの編集(追加、削除、任意の順)</b>にチェックして、カテゴリのヘッダーを2回クリックします。これで、国名を降順に変更されます。
<br /><a class="image"><img alt="Cluster plot 15.png" src="../images/Plot_by_Group/Cluster_plot_15.png" width="500"  /></a>
<br />グラフ内のパネルも同様に変更されます。
</ol>
<h2><a name="Template"></a><span class="mw-headline">テンプレート</span></h2>
<p>groupedplot.otpu (EXEフォルダにインストールされています。)
</p>
<h2><a name="Notes"></a><span class="mw-headline">ノート</span></h2>
<ul><li><b>クラスタープロット</b>に加え、Originにはグループデータを作図する複数のツールがあります。<a href="../../UserGuide/UserGuide/Plotting_Data_by_Groups.html" title="ユーザガイド:グループ別にデータを作図する">このページ</a>を参照して、グループプロットの作成と編集の詳細を確認できます。</li>
<li>デフォルトでは、パネルはグループ列の要素の順番に並べられます。パネル順をカスタマイズする場合、グループ列をカテゴリーとして設定し、<a href="../../UserGuide/UserGuide/The_(Column_Properties)_Categories_Tab.html" title="ユーザガイド: (列プロパティ) カテゴリータブ"><b>カテゴリー</b>タブ</a>で順序を修正します。</li>
<li>デフォルトでは、50以上のパネルの計算を行うと、Originの挙動が遅くなり<b>グループプロット</b>ダイアログのプレビューが利用できなくなることがあります。この制限は、<a class="external text" href="../../LabTalk/LabTalk/System_Variable_List.html">システム変数 @nop</a>で制御されます。</li></ul>

    