<h1 class="firstheading">複数ファイルをOPXとしてパックする</h1><p class='urlname' style='display: none'>FileShare-Pack-OPX</p>
<p>Originのワークファイルを他のユーザと共有したい場合、Originのパッケージマネージャの使用がお勧めです。
Zipファイルと同様、パッケージマネージャは必要なすべてのファイルを単一のファイルとしてパッケージし、ほかのユーザに送ることができます。しかし、パッケージマネージャには他にも利点があります。  パッケージマネージャを使うことの大きな利点は、受け取った相手がパッケージをOriginのワークスペースにドラッグ＆ドロップするだけて、パッケージ内の複数のファイルをインストールできる点です。  パッケージは、また、<a href="../../UserGuide/UserGuide/Apps.html" title="ユーザガイド：アプリ">アプリ</a>ボタングループとツールバーをセットし、インストールの前または後でLabTalkを実行することができます。  パッケージは、<b>パッケージマネージャ</b>ダイアログで簡単にアンインストールできます。
</p><p>パッケージ・マネージャは、<b>ツール</b>メニューの<b>パッケージ・マネージャ</b>を選択すると開けます。
</p>
<dl><dd><a  class="image"><img alt="Packaging Multiple Files as an OPX File-1.png" src="../images/Packaging_Multiple_Files_as_OPX/Packaging_Multiple_Files_as_an_OPX_File-1.png" width="702"  /></a></dd></dl>
<div id="toc" class="toc"><div id="toctitle"><h2>目次</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Dialog_box"><span class="tocnumber">1</span> <span class="toctext">ダイアログボックス</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Menu"><span class="tocnumber">1.1</span> <span class="toctext">メニュー</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Tree_View"><span class="tocnumber">1.2</span> <span class="toctext">ツリービュー</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Buttons"><span class="tocnumber">1.3</span> <span class="toctext">ボタン</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#File_List"><span class="tocnumber">1.4</span> <span class="toctext">ファイルリスト</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Creating_A_New_Package"><span class="tocnumber">2</span> <span class="toctext">新しいパッケージを作成する</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Creating_a_New_App"><span class="tocnumber">3</span><span class="toctext">新しいアプリを作成する</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Extracting_Files_From_A_Package"><span class="tocnumber">4</span> <span class="toctext">パッケージからファイルを抽出する</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Installing_A_Package"><span class="tocnumber">5</span> <span class="toctext">パッケージのインストール</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Uninstall_a_package"><span class="tocnumber">6</span> <span class="toctext">パッケージのアンインストール</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#OriginC"><span class="tocnumber">7</span> <span class="toctext">OriginC</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#Updating_Origin_C_Files"><span class="tocnumber">8</span> <span class="toctext">Origin Cファイルを更新する</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Command_to_create_OPX_file"><span class="tocnumber">9</span> <span class="toctext">OPXファイル作成のコマンド</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Origin_C"><span class="tocnumber">9.1</span> <span class="toctext">Origin C</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#LabTalk"><span class="tocnumber">9.2</span> <span class="toctext">LabTalk</span></a></li>
</ul>
</li>
</ul>
</div>
<h2><a name="Dialog_box"></a><span class="mw-headline">ダイアログボックス</span></h2>
<h3><a name="Menu"></a><span class="mw-headline">メニュー</span></h3>
<p><b>パッケージマネージャ</b>ダイアログには、<b>ファイル</b>メニューと<b>ツール</b>メニューがあります。
</p><p><b>ファイル</b>メニューには以下の項目があります。
</p>
<table class="dialogcontroltable">
<tr>
<th> 新規作成
</th>
<td>
<p>新しいパッケージを作成します。現在のパッケージが開いている場合は閉じられます。現在のパッケージが変更され、保存されていない場合、変更を保存または破棄するか、新しいパッケージの作成をキャンセルするように求められます。
</p>
</td></tr>
<tr>
<th> 開く
</th>
<td>
<p>既存のパッケージファイルを開きます。現在のパッケージが開いている場合は閉じられます。現在のパッケージが変更され、保存されていない場合、変更を保存または破棄するか、パッケージを開く処理をキャンセルするように求められます。
</p>
</td></tr>
<tr>
<th> 保存
</th>
<td>
<p>現在のパッケージを現在のファイル名で上書き保存します。パッケージが新しく、未保存の場合、ファイル名を入力するように求められます。
</p>
</td></tr>
<tr>
<th> 名前を付けて保存...
</th>
<td>
<p>現在のパッケージに新しい名前を付けて保存します。
</p>
</td></tr>
<tr>
<th> 閉じる
</th>
<td>
<p>ダイアログを閉じます。現在のパッケージが変更され、保存されていない場合、変更を保存または破棄するか、終了処理をキャンセルするように求められます。
</p>
</td></tr></table>
<p><b>ツール</b>メニューには以下の項目があります。
</p>
<table class="dialogcontroltable">
<tr>
<th> インストール済みパッケージの閲覧...
</th>
<td>
<p>このメニューを選択すると、<b>インストールされたパッケージ</b>ダイアログが開き、現在インストールされている全パッケージのリストが表示されます。名前、バージョン、説明などのパッケージについての情報を表示でき、選択したパッケージを開く/アンインストールすることもできます。
</p>
</td></tr>
<tr>
<th> パッケージの抽出...
</th>
<td>
<p>パッケージの抽出は、パッケージのインストールとは異なります。パッケージの抽出は、パッケージからファイルだけ取得する場合に使用されます。前後のスクリプトは実行されません。また、任意のフォルダであるターゲットフォルダを選択するよう求められます。  ターゲットフォルダは、Originのユーザーまたはシステムフォルダである必要はありません。
</p>
</td></tr>
<tr>
<th> パッケージのインストール...
</th>
<td>
<p>ダイアログが開き、パッケージファイルを選択します。パッケージファイルを選択後、<b>開く</b>ボタンをクリックして、パッケージをインストールします。
</p>
</td></tr>
<tr>
<th> パッケージのアンインストール
</th>
<td>
<p>このメニューを選択すると、「インストールされたパッケージ」ダイアログが開きます。アンインストールしたいパッケージを選択し、<b><b>アンインストール</b></b>ボタンをクリックします。
</p>
</td></tr></table>
<h3><a name="Tree_View"></a><span class="mw-headline">ツリービュー</span></h3>
<p>ツリービューではパッケージの設定を編集できます。 
</p>
<table class="dialogcontroltable">
<tr>
<th>パッケージ
</th>
<td>
<ul><li>名前
<dl><dd>モジュールの名前。バージョンが変わっても名前は同じにしてください。</dd>
<dd>インストール中に、すでにインストールされているパッケージの名前とモジュール名が比較されます。一致するパッケージが見つかった場合、パッケージが既にインストールされていると、ユーザーに通知されます。  インストールを続けるかキャンセルするかを選択します。</dd></dl></li>
<li>説明
<dl><dd>モジュールまたはパッケージの説明です。</dd></dl></li>
<li>バージョン
<dl><dd>パッケージに含まれるモジュールのバージョンです。</dd></dl></li>
<li>著者
<dl><dd>パッケージに含まれるモジュールの作成者です。</dd></dl></li></ul>
</td></tr>
<tr>
<th>必要なOriginバージョン
</th>
<td>
<p>パッケージに含まれるモジュールを使用するのに必要なOriginのバージョンです。バージョンはサービスリリースバージョンまで指定できます。たとえば、「9.32」と入力するとパッケージはV2016 SR2以降が必要であることを示します。
</p>
</td></tr>
<tr>
<th>Origin Pro必須
</th>
<td>
<p>パッケージに含まれるモジュールがOriginProでの利用に制限できます。
</p>
</td></tr>
<tr>
<th>アプリ
</th>
<td>
<ul><li>アイコン
<dl><dd><a href="../../UserGuide/UserGuide/Apps.html#The_Apps_Gallery" title="ユーザガイド：アプリ">アプリギャラリー</a>でアイコンとして使用するbmp画像です。</dd></dl></li>
<li>ツールバー
<dl><dd>アプリツールバーで使用するbmp画像です。 </dd></dl></li>
<li>スクリプトを実行
<dl><dd>アプリを起動するときに実行するLabTalkスクリプト</dd></dl></li>
<li>ウィンドウで可能
<dl><dd> 指定したテンプレートから作成されたウィンドウがアクティブになった時、または指定したウィンドウタイプがアクティブになった時に、どのボタンを利用できるようにするかを指定することができます。</dd></dl></li>
<li>LabTalk式で有効にする
<dl><dd> 指定した変数の値によって、どのボタンを利用できるようにするかを指定することもできます。詳細は、<a href="../../UserGuide/UserGuide/The_Button_Settings_Dialog_Box.html#The_Context_Group" title="ユーザガイド：ボタン設定ダイアログボックス">こちら</a>をご覧下さい </dd></dl></li></ul>
</td></tr>
<tr>
<th>ツールバー
</th>
<td>
<ul><li>ボタングループファイル
<dl><dd>パッケージにボタングループファイルが含まれ、パッケージのインストール中にボタングループをOriginのユーザー定義ボタングループに追加する場合は、ボタングループファイルをここで指定します。</dd>
<dd>このフィールドを簡単に設定するには、最初にボタングループファイルをパッケージに追加します。追加したら、ファイルのリストでそれを選択し、「ツールバーの設定」ボタンをクリックします。</dd></dl></li>
<li>ツールバーを作成
<dl><dd>これは、パッケージのインストール中に、ボタングループからツールバーを作成するかどうかを決定します。</dd>
<dd>チェックを付けるとツールバーを作成します。</dd></dl></li></ul>
</td></tr>
<tr>
<th>LabTalkスクリプト
</th>
<td>
<ul><li>インストール前
<dl><dd>ここに入力されたLabTalkコードは、パッケージがインストールされる前に実行されます。LabTalkコマンドエラーが発生すると、インストールはキャンセルされます。スクリプトコードが何らかのチェックを行い、インストールを続行しないと決定した場合、「break 1;」でコマンドエラーを強制することができます。あるいは、OPXERRをゼロ以外の値に設定します。</dd></dl></li>
<li>インストール後
<dl><dd>ここに入力されたLabTalkコードは、パッケージがインストールされた後に実行されます。</dd></dl></li>
<li>アンインストールの前
<dl><dd>ここに入力されたLabTalkコードは、ファイルがアンインストール/削除される前に実行されます。これを使用して、インストール前またはインストール後のスクリプトで行った変更を元に戻します。  スクリプトコードが何らかのチェックを行い、アンインストールを続行しないと決定した場合、「break 1;」でコマンドエラーを強制することができます。あるいは、OPXERRをゼロ以外の値に設定します。</dd></dl></li></ul>
</td></tr>
<tr>
<th>CおよびCPPファイルの暗号化
</th>
<td>
<p>必要に応じてチェックをつけると、このパッケージ内のCおよびCPPファイルの暗号化を行います。
</p>
</td></tr>
<tr>
<th>ソースパス
</th>
<td>
<p>このフィールドには、すべてのパックファイルのソースパスが表示されます。パッケージに追加されるすべてのファイルは、同じソースパスにある必要があります。ソースパスは、最初のフォルダーまたはファイルを追加するときに設定されます。
</p>
<dl><dd><ul><li>最初のフォルダまたはファイルがアプリフォルダまたはそのサブフォルダからのものであれば、ソースパスはOriginのプログラムフォルダにセットします。</li>
<li>最初のフォルダまたはファイルがユーザファイルフォルダまたはそのサブフォルダからのものであれば、ソースパスはユーザファイルフォルダにセットします。</li>
<li>最初のフォルダまたはファイルがアプリフォルダでもユーザファイルフォルダからのものでもなければ、ソースパスは追加するフォルダの上位のフォルダパスまたは追加するファイルを含むフォルダのパスにセットします。</li></ul></dd>
<dd>ファイルの場所が変更された場合は、ソースパスを手動で編集できます。ソースパスの設定を新しい位置に変更すると、パッケージ内の変更したファイルを更新するため、<b>ファイルの再パック</b>ボタンが使えるようになります。  ソースパスを変更できると、他のコンピューターで作成されたパッケージを再パックすることもできます。</dd></dl>
</td></tr></table>
<h3><a name="Buttons"></a><span class="mw-headline">ボタン</span></h3>
<p>ツリービューの下には6つのボタンがあります。
</p>
<table class="dialogcontroltable">
<tr>
<th>ファイルの再パック
</th>
<td>
<p>このボタンをクリックすると、パッケージに追加された全ファイルを再パックします。ファイルを変更したときに、このファイルをパッケージに含めたいときにこのボタンが便利です。ファイルを削除して再度追加することなく、このボタンをクリックするだけでファイルへの変更がパッケージにパックされます。
</p><p>パッケージに少なくとも1つのファイルがないと、このボタンは有効になりません。
</p>
</td></tr>
<tr>
<th>ツールバーの設定
</th>
<td>
<p>このボタンをクリックして、ツリービューのツールバーブランチにあるボタングループファイルを設定します。
</p><p>このボタンは、ファイルリストで1つファイルを選択しないと有効になりません。
</p>
</td></tr>
<tr>
<th>フォルダの追加...
</th>
<td>
<p>このボタンをクリックして、選択したフォルダに含まれるフォルダとすべてのファイルとサブフォルダを追加します。
</p><p>パッケージに最初のフォルダまたはファイルが追加されると、ツリービューにあるソースパスのフィールドが設定されます。  詳細は、ソースパスをご覧ください。
</p>
</td></tr>
<tr>
<th>ファイルの追加...
</th>
<td>
<p>このボタンをクリックして、パッケージにファイルを追加します。  「ファイルをパッケージに追加」ダイアログが表示されます。
</p><p>パッケージに最初のフォルダまたはファイルが追加されると、ツリービューにあるソースパスのフィールドが設定されます。  詳細は、ソースパスをご覧ください。
</p>
</td></tr>
<tr>
<th>ファイルの削除
</th>
<td>
<p>選択した全てのファイルをパッケージから削除するにはこのボタンをクリックします。
</p><p>このボタンは、ファイルリストで1つ以上のファイルをファイルリストから選択しないと有効になりません。
</p>
</td></tr></table>
<p>一番右にあるボタンをクリックすると、ファイルリストを表示/表示できます。
</p>
<h3><a name="File_List"></a><span class="mw-headline">ファイルリスト</span></h3>
<p>ファイルリストは、現在パッケージにある全ファイルを表示します。上の6つのボタンの左にリスト内のファイルの合計数が表示されます。リスト内のファイルの数と選択されたファイルの数により、上述のボタンのステータスが変わります。
</p>
<h2><a name="Creating_A_New_Package"></a><span class="mw-headline">新しいパッケージを作成する</span></h2>
<p><b>ファイルを追加して新しいパッケージを作成</b>
</p>
<ol><li><b>パッケージ</b>の項目にモジュールの情報を入力します。</li>
<li><b>ファイルの追加</b> ボタンをクリックして、<b>ファイルをパッケージに追加</b> ダイアログを開きます。</li>
<li>ファイルを選択して、<b>開く</b>ボタンをクリックするか<b>Enter</b>キーを押します。</li>
<li><b>ファイル</b>メニューの<b>保存</b>か<b>名前を付けて保存</b>を選択して、パッケージをOPXファイルに書き込みます。</li></ol>
<p><b>フォルダを追加して新しいパッケージを作成</b>
</p><p>パッケージに入れるファイルがすべて同じフォルダにある場合は、<b>フォルダの追加</b>ボタンを使用すると便利です。  これにより、フォルダとその中のサブフォルダを含むすべてがパッケージに追加されます。  フォルダー構造はパッケージに記憶され、パッケージが別のユーザーによってインストールされるときに再作成されます。
</p>
<ol><li><b>パッケージ</b>の項目にモジュールの情報を入力します。</li>
<li><b>フォルダの追加</b>ボタンをクリックし、<b>フォルダを選択</b>ダイアログボックスを開きます。</li>
<li>フォルダを選択して<b>開く</b>ボタンをクリックします。</li>
<li><b>ファイル</b>メニューの<b>保存</b>か<b>名前を付けて保存</b>を選択して、パッケージをOPXファイルに書き込みます。</li></ol>
<table class="note">
<tr>
<td><b>Note:</b>
<p>ボタングループでは、すべてのサポートファイルがOriginフォルダまたはOriginフォルダのサブフォルダーにある必要があります。
インストールしたときにパッケージ内のファイルがアプリフォルダやユーザフォルダで散乱しないように、すべてのファイルをサブフォルダに収めておくことをお薦めします。
</p>
</td></tr></table>
<h2><a name="Creating_a_New_App"></a><span class="mw-headline">新しいアプリを作成する</span></h2>
<p><a href="../../UserGuide/UserGuide/Apps.html" title="ユーザガイド：アプリ">アプリ</a>のために新しいパッケージを作成する方法は、<a class="external text" href="../../Tutorial/Tutorial/The_Code_Builder_Workspace.html#Create_an_App_Using_Apps_folder_in_Workspace">このチュートリアル</a>で紹介しています。
</p>
<h2><a name="Extracting_Files_From_A_Package"></a><span class="mw-headline">パッケージからファイルを抽出する</span></h2>
<p><b>パッケージマネージャ</b>を使用して既存のパッケージからファイルを抽出できます。
</p>
<ol><li><b>ツール</b>メニューの<b>パッケージ</b>の抽出を選択します。</li>
<li><b>開く</b>ダイアログでOPXファイルを選択し、<b>開く</b>ボタンをクリックします。</li>
<li><b>ターゲットフォルダを選択</b>ダイアログで、ターゲットフォルダを選択し、<b>OK</b>ボタンをクリックします。</li></ol>
<p>ターゲットフォルダに全てのファイルが抽出されます。  パッケージにサブフォルダがある場合、全てのサブフォルダが作成され、抽出されたファイルはパッケージに追加されたときと同じサブフォルダ内に配置されます。
</p>
<table class="note">
<tr>
<td><b>Note:</b>
<p>パッケージから抽出されたファイルはインストールパッケージのものと同じではありません。パッケージからファイルが抽出されるとき、ボタングループとツールバーは作成されず、LabTalkスクリプトは抽出されません。ツールバー情報とLabTalkスクリプトは、パッケージがインストールまたはアンインストールされるときのみ使用されます。
</p>
</td></tr></table>
<h2><a name="Installing_A_Package"></a><span class="mw-headline">パッケージのインストール...</span></h2>
<p><b>パッケージマネージャを使用してパッケージをインストール</b>
</p>
<ol><li><b>ツール</b>メニューの<b>パッケージのインストール...</b>を選択します。</li>
<li><b>開く</b>ダイアログでOPXファイルを選択し、<b>開く</b>ボタンをクリックするか<b>Enter</b>キーを押します。</li></ol>
<p>パッケージがインストールされます。
</p><p><br />
<b>ドラッグ＆ドロップでパッケージをインストール</b>
</p>
<ol><li>OPXファイルをOriginのワークスペースにドラッグ＆ドロップします。</li></ol>
<p>パッケージがインストールされます。
</p><p><br />
<b>グループフォルダを使用してパッケージをインストール</b>
</p><p>同時ネットワークを使用している場合、パッケージをグループフォルダに置くことで、すべてのクライアントにパッケージをインストールできます。
</p><p>詳細は、<a href="../../UserGuide/UserGuide/Group_Folder_Manager.html" title="ユーザガイド: グループフォルダマネージャ">グループフォルダマネージャー</a>を確認してください。
</p><p><br />
<b>サイレントインストール</b>
</p><p>サイレントインストールとは、ユーザ介入の操作を最小限にして自動的にインストールを実行することです。インストール手順に非常に多くのロールアウトメッセージが含まれている場合、すべてのメッセージに応答するとインストールに時間がかかる場合に非常に便利です。
</p><p>サイレントインストールできるOPXを作成するには、次の設定が必要です。
</p>
<ul><li><b>LabTalkスクリプト&gt;インストール前</b>の設定を空白に設定するか、ユーザープロンプトを表示しないスクリプトを設定します。</li>
<li><b>LabTalkスクリプト&gt;インストール後</b>で、ユーザープロンプトを表示しないスクリプトに設定し、次の2つの追加コマンドを実行します。</li></ul>
<pre class="lt" style="font-family:monospace;">doc <span style="color: #000080;">-</span>s; 
exit;</pre>
<p>OPXへ必要な変更を行い、Originを起動し、OPXをインストールし、人による操作無しでOriginを終了します。  次のコマンドラインは、OPXのサイレントインストールを実行する方法を示しています。
</p>
<pre class="lt" style="font-family:monospace;">Origin64.<span style="color: #000080;">exe</span> <span style="color: #000080;">-</span>h <span style="color: #000080;">-</span>R <span style="color: #ff00ff;">&quot;instOPX OPXFileName.opx&quot;</span></pre>
<p>上記のコマンドラインを、自分のOPXのファイル名に変更して使用してください。
</p>
<table class="note">
<tr>
<td><b>Note:</b>
<ol><li>パッケージのインストールは、パッケージからファイルを抽出することとは異なります。パッケージをインストールすると、ツールバーとLabTalkスクリプトのフィールドが指定されている場合、ボタングループとツールバーが作成され、LabTalkスクリプトが実行されます。パッケージからファイルを抽出する場合、ツールバー情報とLabTalkスクリプトは無視されます。</li>
<li>パッケージをインストールする際、Originはまず、そのパッケージが既にインストールされているかどうかを確認します。  既にインストールされている場合、Originはユーザーにパッケージが既にインストールされていることを通知し、インストールを続行するかどうかを尋ねます。  ユーザーがインストールを続行すると選択すると、既存のパッケージをアンインストールしてから、現在のパッケージのインストールを続行します。</li>
<li>Appをインストールする際、このパッケージに含まれているすべてのテンプレート(*.otw,*otm,*otp,etc) とフィッティング関数ファイル(*.FDF）がインストールされています。それらはこのアプリフォルダにコピーされます。このアプリをアンインストールすると、これらも同様にアンインストールされます。</li></ol>
<dl><dd>インストールされるパッケージごとに、Originはパッケージファイルをパッケージリストファイルにコピーします。  パッケージリストファイルは、OPXList.xmlで、アプリフォルダに保存されています。</dd></dl>
</td></tr></table>
<h2><a name="Uninstall_a_package"></a><span class="mw-headline">パッケージのアンインストール</span></h2>
<p><b>パッケージマネージャ</b>を使用して、既にインストールされているパッケージをアンインストールできます。
</p>
<ol><li><b>ツール</b>メニューの<b>パッケージのアンインストール</b>または<b>インストール済みのパッケージの閲覧</b>を選択します。</li>
<li><b>インストールされたパッケージ</b>ダイアログでOPXファイルを選択し、<b>アンインストール</b>ボタンをクリックします。</li></ol>
<p>パッケージがアンインストールされます。
</p>
<h2><a name="OriginC"></a><span class="mw-headline">OriginC</span></h2>
<p><b>パッケージマネージャ</b>は、OriginC\OriginLab\XMLPackage.cにあるOriginCコードで処理されます。
</p><p>XMLPackage.cファイルは、パッケージを操作するためにエクスポートされた関数のコレクションを呼び出します。次の関数はoUtils.hで宣言され、OriginのokUtil80.dllからエクスポートされます。
</p>
<ul><li> okutil_create_package_tree</li>
<li> okutil_create_package_file</li>
<li> okutil_install_package_file</li>
<li> okutil_uninstall_package_file</li>
<li> okutil_get_installed_package_names</li>
<li> okutil_add_folder_to_package</li>
<li> okutil_add_files_to_package</li>
<li> okutil_remove_files_from_package</li>
<li> okutil_get_packed_file_names</li>
<li> okutil_repack_files</li></ul>
<p>関数の戻り型および各関数が受け入れる引数についてはOriginCのUtils.hをご覧下さい。
</p>
<h2><a name="Updating_Origin_C_Files"></a><span class="mw-headline">Origin Cファイルを更新する</span></h2>
<p>すべてのOrigin Cファイルは、コンパイルされると、対応する.OCBファイルをユーザーファイルフォルダに生成します。.OCBファイルは、実行されるたびにOrigin Cソースコードを再コンパイルする必要性をなくします。
Originパッケージを使用してOrigin Cファイルを配布する場合、ユーザが更新されたパッケージをインストールするときに、変更されたOrigin Cファイルが確実に再コンパイルされるようにする必要があります。
つまり、ユーザが古いバージョンのパッケージをインストールしたときにユーザのコンピューターで作成された.OCBファイルを削除する必要があります。
パッケージの<b>インストール後</b>スクリプトのOCBオプションを指定したLabTalkのDeleteコマンドを使用して、.OCBファイルを削除できます。
</p><p>詳細な説明は、<a class="external text" href="../../LabTalk/LabTalk/Updating_an_Existing_Origin_C_File.html">既存のOrigin Cファイルの更新</a>を確認してください。
</p>
<h2><a name="Command_to_create_OPX_file"></a><span class="mw-headline">OPXファイル作成のコマンド</span></h2>
<p>パッケージマネージャを使用せず、ini設定からOPXファイルを作成します。これは、コマンドラインまたはWindowsのBATファイルからOriginを実行するユーザにとっては便利な方法です。
</p>
<h3><a name="Origin_C"></a><span class="mw-headline">Origin C</span></h3>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>Origin.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span>
<span style="color: #0000ff;">#include</span> <span style="color: #000080;">&lt;</span>..<span style="color: #000040;">/</span>OriginLab<span style="color: #000040;">/</span>OPXFile.<span style="color: #000000;">h</span><span style="color: #000080;">&gt;</span>
<span style="color: #0000ff;">int</span> test_ini_to_opx<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	OPXFile opx;
	<span style="color: #0000ff;">int</span> err <span style="color: #000080;">=</span> opx.<span style="color: #000000;">InitFromIni</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;opx_IEVer.ini&quot;</span><span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">if</span><span style="color: #000000;">(</span> err <span style="color: #000080;">==</span> <span style="color: #0000dd;">0</span> <span style="color: #000000;">)</span>
	<span style="color: #000000;">{</span>
		<span style="color: #0000ff;">if</span><span style="color: #000000;">(</span> <span style="color: #000040;">!</span>opx.<span style="color: #000000;">Save</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span> <span style="color: #000000;">)</span>
			<span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;Failed saving.<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span><span style="color: #000000;">)</span>;
	<span style="color: #000000;">}</span>
	<span style="color: #0000ff;">else</span>
		<span style="color: #000000;">printf</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;InitFromIni error&nbsp;%d<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span>, err<span style="color: #000000;">)</span>;
	<span style="color: #0000ff;">return</span> <span style="color: #0000dd;">0</span>;
<span style="color: #000000;">}</span></pre>
<h3><a name="LabTalk"></a><span class="mw-headline">LabTalk</span></h3>
<pre class="lt" style="font-family:monospace;">mkOPX ini<span style="color: #000000;">:</span><span style="color: #000080;">=</span><span style="color: #ff00ff;">&quot;C:\Users\jacqueline\Documents\OriginLab\User Files\opx_IEVer.ini&quot;</span> app<span style="color: #000000;">:</span><span style="color: #000080;">=</span>Custom_IEVer opx<span style="color: #000000;">:</span><span style="color: #000080;">=</span>H<span style="color: #000000;">:</span>\CustomIEVer.<span style="color: #000080;">opx</span>;</pre>
<table class="note">
<tr>
<td><b>Note:</b>
<p>この方法には、パッケージマネージャダイアログのすべての設定を含むソースiniファイルが必要です。
例として、以下のopx_IEVer.iniを参照してください。
</p>
</td></tr></table>
<pre class="lt" style="font-family:monospace;"><span style="color: #000000;">[</span>Package<span style="color: #000000;">]</span>
Name<span style="color: #000080;">=</span>IEVer
Description<span style="color: #000080;">=</span>Show IE version detected by Origin
Version<span style="color: #000080;">=</span><span style="color: #0000dd;">1.0</span>
Author<span style="color: #000080;">=</span>OriginLab
<span style="color: #000000;">[</span>Origin<span style="color: #000000;">]</span>
Version<span style="color: #000080;">=</span><span style="color: #0000dd;">9.4</span>
Pro<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>
<span style="color: #000000;">[</span>App<span style="color: #000000;">]</span>
Icon<span style="color: #000080;">=</span>AppIcon.<span style="color: #000080;">png</span>
ToolbarIcon<span style="color: #000080;">=</span>
LaunchScript<span style="color: #000080;">=</span>run.<span style="color: #000080;">section</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;%@AIEVer\IEVer.ogs&quot;</span>,main<span style="color: #000000;">)</span>;
<span style="color: #000000;">[</span>AppEnable<span style="color: #000000;">]</span>
Always<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>
Graph<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>
Workbook<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>
Matrixbook<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>
Image<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>
Excel<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>
Layout<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>
LabTalkExp<span style="color: #000080;">=</span>
<span style="color: #000000;">[</span>Toolbar<span style="color: #000000;">]</span>
ButtonGroupFile<span style="color: #000080;">=</span>
Create<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>
<span style="color: #000000;">[</span>LabTalk<span style="color: #000000;">]</span>
BeforeInstall<span style="color: #000080;">=</span>
AfterInstall<span style="color: #000080;">=</span>
BeforeUninstall<span style="color: #000080;">=</span>
<span style="color: #000000;">[</span>Files<span style="color: #000000;">]</span>
EncryptC<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span>
SourcePath<span style="color: #000080;">=</span>C<span style="color: #000000;">:</span>\Users\eparent\AppData\Local\OriginLab\Apps\IEVer\
OPXFile<span style="color: #000080;">=</span>IEVer1.<span style="color: #000080;">opx</span></pre>




    