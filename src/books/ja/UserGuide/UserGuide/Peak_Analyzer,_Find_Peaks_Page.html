<h1 class="firstheading">ピークアナライザ－ピークの検出ページ</h1><p class='urlname' style='display: none'>PeakAnalyzer-FindPeaks</p>
<p>このページは<a href="../../UserGuide/UserGuide/Peak_Analyzer,_Start_Page.html#Goal_Page_Controls" title="ユーザガイド：ピークアナライザ, スタートページ"><b>処理</b> が <b>ピークの積分</b>、<b>ピークの検索</b> または <b>ピークフィット</b></a>の時に利用出来ます。 
</p>
<dl><dd><a  class="image"><img alt="PA FindPeaks Page.png" src="../images/Peak_Analyzer,_Find_Peaks_Page/700px-PA_FindPeaks_Page.png" width="700"   /></a>
<ul><li><i>メニューの</i> <b>解析</b>: <b>ピークと基線</b>: <b>ピークアナライザー</b>: <b>ダイアログを開く</b>を選択します。</li>
<li><i>ウィンドウタイプ</i>: ワークブック、グラフ</li></ul></dd></dl>
<div id="toc" class="toc"><div id="toctitle"><h2>目次</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Dialog_Theme"><span class="tocnumber">1</span><span class="toctext">ダイアログテーマ</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Find_Peaks_Controls"><span class="tocnumber">2</span> <span class="toctext">ピーク検索タブ</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#The_Peak_Finding_Settings_Group"><span class="tocnumber">2.1</span><span class="toctext">ピーク検索設定グループ</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#The_Peak_Filtering_Group"><span class="tocnumber">2.2</span><span class="toctext">ピークのフィルタリンググループ</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#The_Labels_and_Markers_Group"><span class="tocnumber">2.3</span><span class="toctext">ラベルとマーカーグループ</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#The_Output_Baseline_Subtracted_Peaks_check_box"><span class="tocnumber">2.4</span> <span class="toctext">ピークを基線で減算し出力チェックボックス</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#The_Peak_Fitting_Bounds_Group"><span class="tocnumber">2.5</span><span class="toctext">ピークフィット境界グループ</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><a name="Dialog_Theme"></a><span class="mw-headline">ダイアログテーマ</span></h2>
<table class="dialogcontroltable">

<tr>
<th>ダイアログテーマ
</th>
<td> <a href="../../UserGuide/UserGuide/The_peak_analyzer_themes.html" title="ユーザガイド：ピークアナライザーテーマ">ピークアナライザーテーマ</a>を参照してください。
</td></tr>
</table>
<h2><a name="Find_Peaks_Controls"></a><span class="mw-headline">ピーク検索タブ</span></h2>
<table class="dialogcontroltable">

<tr>
<th> 現在のピークの数
</th>
<td>
<p>これは表示だけのオプションです。ピークの数を表示します。
</p>
</td></tr>
<tr>
<th> 自動検索
</th>
<td>
<p><b>ピークアナライザ</b>を使ったピークの自動検索を行うか否かを選択します。このチェックボックスが選択されていると、<b><b>追加</b></b>、<b>変更/削除</b>、<b><b>全てクリア</b></b>、<b>ロード</b>のボタンは使用できません。
</p>
</td></tr>
<tr>
<th> 検索
</th>
<td>
<p>このボタンをクリックすると、<b><b>ピーク検索設定</b></b>と<b><b>ピークのフィルタリング</b></b>グループの設定を使用してOriginがピークを検索します。
</p>
</td></tr>
<tr>
<th> 追加
</th>
<td>
<p>このボタンは、<b>自動検索</b>チェックボックスが選択されていないときのみ利用できます。このボタンをクリックすると、プレビューグラフをダブルクリックして手動でピークを追加できます。マウスでクリックした座標は、<a href="../../UserGuide/UserGuide/The_Data_Display_Tool.html" title="ユーザガイド：座標データ表示ツール">座標データ表示ウィンドウ</a>に表示されます。
</p>
</td></tr>
<tr>
<th> 変更/削除
</th>
<td>
<p>このボタンは、<b>自動検索をオン</b>チェックボックスが選択されていないときのみ利用できます。このボタンをクリックして、プレビューグラフ上のピークを修正したり、削除することができます。選択したアンカーポイントは、<a href="../../UserGuide/UserGuide/The_Data_Display_Tool.html" title="ユーザガイド：座標データ表示ツール">座標データ表示ウィンドウ</a>に表示されます。
</p>
</td></tr>
<tr>
<th> 全てをクリア
</th>
<td>
<p>このボタンは、<b>自動検索をオン</b>チェックボックスが選択されていないときのみ利用できます。クリックすると、すべてのピークが削除されます。 
</p>
</td></tr>
<tr>
<th> 保存
</th>
<td>
<p>現在のピークがdatファイルに保存されます。
</p>
</td></tr>
<tr>
<th> ロード
</th>
<td>
<p>このボタンは、<b>自動検索をオン</b>チェックボックスが選択されていないときのみ利用できます。このボタンをクリックして、ファイルからピーク情報をロードします。
</p>
</td></tr>
<tr>
<th> ピーク情報
</th>
<td>
<p>このボタンをクリックすると、<b>ピーク情報</b>ダイアログが開き、ピークの情報(中心と高さ)を表示します。<b>自動検索をオン</b>にチェックが付いていない場合、ダイアログ内で、ピークの追加・削除、そのピーク情報の変更をすることが可能です。「コピー/貼り付け」ボタンで、ピーク情報をコピーしたり、指定した中心/高さの値をピークに貼り付けたりすることもできます。
</p><p><b>ピーク情報</b>ダイアログボタングループ<br /> <a  class="image"><img alt="Sort Anchor Points Button.png" src="../images/Peak_Analyzer,_Find_Peaks_Page/Sort_Anchor_Points_Button.png" width="25"  /></a> - ピークアンカーポイントをピーク中心の昇順に並べます。<br />
<a  class="image"><img alt="Copy Anchor Points Button.png" src="../images/Peak_Analyzer,_Find_Peaks_Page/Copy_Anchor_Points_Button.png" width="25"  /></a> アンカーポイントリストから選択したアンカーポイントをコピーします。<br />
<a  class="image"><img alt="Paste Anchor Points Button.png" src="../images/Peak_Analyzer,_Find_Peaks_Page/Paste_Anchor_Points_Button.png" width="25"  /></a> <b>ピーク情報</b>ダイアログにあるピークアンカーポイントリストに、クリップボードにコピーしたピークアンカーポイントを貼り付けます。<br />
<a  class="image"><img alt="Add Anchor Points Button.png" src="../images/Peak_Analyzer,_Find_Peaks_Page/Add_Anchor_Points_Button.png" width="25"  /></a> ピークアンカーポイントリストの最後にアンカーポイントを追加します。<br />
<a  class="image"><img alt="Delete Anchor Points Button.png" src="../images/Peak_Analyzer,_Find_Peaks_Page/Delete_Anchor_Points_Button.png" width="25"  /></a> アンカーポイントリストから選択したピークアンカーポイントを削除します。<br />
</p>
</td></tr>
<tr>
<th> スペクトルにスナップする
</th>
<td>
<p>このチェックボックスは、<b>自動検索をオン</b>チェックボックスが選択されていないときのみ利用できます。これを使って、ピーク中央のアンカーポイントをスペクトルデータに合わせるかどうかを指定します。これが選択されていると、ピーク中央のアンカーポイントを追加または移動したときにスペクトル上に配置されます。
</p>
</td></tr></table>
<h3><a name="The_Peak_Finding_Settings_Group"></a><span class="mw-headline">ピーク検索設定グループ</span></h3>
<table class="dialogcontroltable">

<tr>
<th> 二次微分を表示
</th>
<td>
<p>このチェックボックスを使って、プレビューグラフのスペクトルデータの二階微分とそのスムージングデータ(赤で表示)をプロットするパネルの表示/非表示を切り替えます。二次微分は、スペクトルデータ内のピーク(隠れたピークを含む)を探すのに役立ちます。
</p>
</td></tr>
<tr>
<th> スムージングウィンドウのサイズ
</th>
<td>
<p>Savitzky-Golayスムージングは、ピーク検索前にスペクトルデータに実行することができます。スムージングを実行したい場合、Savitzky-Golayスムージングの移動ウィンドウのウィンドウサイズ(正の整数)を入力します。あるいは、テキストボックスに0を入力します。右側に<b>自動</b>チェックボックスがあります。これが選択されていると、スムージングポイントが<b>ピークアナライザ</b>によって自動的に決められます。スムージングポイントを指定する場合、このチェックボックスのチェックを外します。
</p>
</td></tr>
<tr>
<th> 手法
</th>
<td>
<p>このドロップダウンリストを使って、ピークを検索する手法を選択します。
</p>
<ul><li><b>局所最大法</b>を使って、スペクトル内のピークを探します。</li>
<li><b>ウィンドウサーチ法</b>を使って、スペクトル内のピークを探します。</li>
<li><b>一次微分法</b>を使って、スペクトル内のピークを探します。</li>
<li><b>二次微分法（隠れたピークの検索）</b>を使って、スペクトル内のピークを探します。この方法は、データ内の隠れたピークを検出することができます。</li>
<li><b>１次微分後の</b><b><b>残差（隠れたピークの検索）</b></b>を使って、スペクトル内のピークを探します。この方法は、データ内の隠れたピークを検出することができます。</li>
<li><b>フーリエセルフデコンボリューション(Pro)</b>：フーリエセルデコンボリューションのアルゴリズムを使用して、スペクトル内のピークの重なりを検出します。Note: 各ピークの位置および統合された領域は、デコンボリューションされたスペクトル内に保存されます。</li></ul>
</td></tr>
<tr>
<th> 方向
</th>
<td>
<p>このドロップダウンリストを使って、指定した方向のピークのみを検索します。
</p>
<ul><li><b>正</b>：正のピークのみを探します。</li>
<li>負のピークのみを探します。</li>
<li><b>両方</b>：正負両方のピークを探します。</li></ul>
</td></tr>
<tr>
<th> ローカルポイント
</th>
<td>
<p>これは<b>手法</b>のドロップダウンリストで<b>局所最大</b>またはフーリエセルフデコンボリューション(Pro)が選択されている場合のみ利用できます。局所的な領域でのポイント数を指定します。これは局所最大またはフーリエセルフデコンボリューション(Pro)でピークを検索するのみ使用します。
</p>
</td></tr>
<tr>
<th> サイズオプション
</th>
<td>
<p>これは<b>手法</b>のドロップダウンリストで<b>ウィンドウサーチ法</b>が選択されている場合のみ利用できます。このドロップダウンリストは、<b>高さ</b>と<b>幅</b>の値(下記参照)をどのように解釈するかを指定します。 
</p>
<ul><li>値は元データのサイズとして解釈されます。</li>
<li>値は、スペクトルデータの合計の幅または最大高さのパーセントとして解釈されます。</li></ul>
</td></tr>
<tr>
<th> 高さ
</th>
<td>
<p>これは<b>手法</b>のドロップダウンリストで<b>ウィンドウサーチ法</b>が選択されている場合のみ利用できます。これは矩形の高さを指定します。これはピークを検出するのに使用されます。右側に「<b>自動</b>」チェックボックスがあります。これが選択されていると、<b>ピークアナライザ</b>は自動的に値を決定します。値を編集する場合、このチェックボックスのチェックを外して下さい。
</p>
</td></tr>
<tr>
<th> 幅
</th>
<td>
<p>これは<b>手法</b>のドロップダウンリストで<b>ウィンドウサーチ法</b>が選択されている場合のみ利用できます。これは矩形の幅を指定します。これはピークを検索するのに使用されます。右側に「<b>自動</b>」チェックボックスがあります。これが選択されていると、<b>ピークアナライザ</b>は自動的に値を決定します。値を編集する場合、このチェックボックスのチェックを外して下さい。
</p>
</td></tr>
<tr>
<th> 微分スムージング
</th>
<td>
<p>これは、<b>手法</b>ドロップダウンリストで、<b>一次微分</b>、<b>二次微分(隠れたピークの検索)</b>、<b>一次微分後の残差 (隠れたピークを探す)</b>が選択されている場合のみ利用できます。手法を選択して、スペクトルデータの微分をスムージングします。
</p>
<dl><dd><b>手法</b>
<dl><dd>スムージングの方法を指定します。
<ul><li><b>なし</b>：どのスムージング法も使いません。</li>
<li><b>FFTフィルタ</b>：微分スムージングに<b>FFTフィルタ</b>による方法を指定します。</li>
<li><b>隣接平均法</b>：微分スムージングに<b>隣接平均法</b>を指定します。</li>
<li><b>Savitsky-Golay</b>:微分スムージングに<b>Savitsky-Golay法</b>を指定します。 </li>
<li><b>2次Savitsky-Golay</b>：微分スムージングに<b>2次Savitsky-Golay法</b>を指定します。 </li></ul></dd></dl></dd>
<dd><b>カットオフ周波数</b>
<dl><dd><b>微分スムージング</b>ドロップダウンリストで<b>FFTフィルタ</b>が選択されているときのみ利用できます。カットオフ周波数を指定します。</dd></dl></dd>
<dd><b>ウィンドウのポイント</b>
<dl><dd><b>微分スムージング</b>ドロップダウンリストで、<b>隣接平均法</b>、<b>Savitsky-Golay</b>、<b>2次Savitsky-Golay</b>が選択されているときのみ利用できます。この値が大きくなると、スムージングの次数が大きくなります。このパラメータの値をゼロにすると、データはスムージングされません。 </dd></dl></dd>
<dd><b>多項式次数</b>
<dl><dd>微分スムージングドロップダウンリストで、<b>Savitsky-Golay</b>、<b>二次Savitsky-Golay</b>が選択されているときのみ利用できます。多項式の次数を指定します。</dd></dl></dd></dl>
</td></tr>
<tr>
<th> Gamma
</th>
<td>これは<b>手法</b>のドロップダウンリストで<b>フーリエセルフデコンボリューション(Pro)</b>が選択されている場合のみ利用できます。
<p>線の形状の幅を指定します。<b>Gamma</b>にはデフォルトの値が与えられています。<b>自動</b>のチェックボックスを外すとカスタムの値を指定できます。線の形状は、スペクトルのデコンボリューションに使用されます。一般にガンマが大きいほど、デコンボリューションされたピークが狭くなります。
</p>
</td></tr>
<tr>
<th> スムージング因子(0-1)
</th>
<td>
<p>これは<b>手法</b>のドロップダウンリストで<b>フーリエセルフデコンボリューション(Pro)</b>が選択されている場合のみ利用できます。
</p><p>デコンボリューションされたスペクトルをスムージングするために、スムージング因子を指定します。スムージング因子は、0から1の間でなければなりません。因子が大きいほど、デコンボリューションされたスペクトルはより滑らかになり、デコンボリューションされたピークはより広くなります。
</p>
</td></tr></table>
<h3><a name="The_Peak_Filtering_Group"></a><span class="mw-headline">ピークのフィルタリンググループ</span></h3>
<table class="dialogcontroltable">

<tr>
<th> 手法
</th>
<td>
<p>このドロップダウンリストを使って、見つけるピークの数またはピークの高さを制限するかどうかを指定します。
</p>
<ul><li><b>なし</b>: 見つけるピークの数またはピークの高さを制限しない場合、このオプションを選択します。</li>
<li><b>値の高さ(%)まで</b>：このオプションを選択して、<b>しきい値の高さ(%)</b>テキストボックスで値を指定すると、「<b>検索</b>」ボタンをクリックしたときに、ピークの高さがしきい値より小さいピークは検索しません。右側に「<b>自動</b>」チェックボックスがあります。これが選択されていると、スムージングポイントが<b>ピークアナライザ</b>によって自動的に決められます。スムージングポイントを指定する場合、このチェックボックスのチェックを外します。</li>
<li><b>ピークの数</b>：このオプションを選択して、<b>ピークの数</b>テキストボックスで値を指定すると、「<b>検索</b>」ボタンをクリックしたときに、検索するピークの数に制限を付けることができます。右側に「<b>自動</b>」チェックボックスがあります。これが選択されていると、スムージングポイントが<b>ピークアナライザ</b>によって自動的に決められます。ピークの数を指定する場合、このチェックボックスのチェックを外します。</li>
<li><b>値の高さ</b>：このオプションを選択して、<b>しきい値の高さ(%)</b>テキストボックスで値を指定すると、「<b>検索</b>」ボタンをクリックしたときに、ピークの高さがしきい値より小さいピークは検索しません。右側に「<b>自動</b>」チェックボックスがあります。これが選択されていると、スムージングポイントが<b>ピークアナライザ</b>によって自動的に決められます。スムージングポイントを指定する場合、このチェックボックスのチェックを外します。</li>
<li><b>カスタム</b>: このオプションを選択すると、カスタム条件を指定して複数のフィルタリング条件を組み合わせてピークの検索ができます。</li></ul>
</td></tr>
<tr>
<th> しきい値高さ(%)
</th>
<td>
<p>このテキストボックスは、<b>フィルタリングの手法</b>ドロップダウンリストで<b>高さに基づく(%)</b>が選択されているときのみ利用できます。これを使用して検索するピークの最小高さを指定することができます。これは、次のように定義される参照値のパーセントです： 
</p><p>最初に、スペクトルデータの最小値と最大値を取得します(基線が現在されている場合、減算後のスペクトルデータが使われます)。そして、最小値と最大値の絶対値を比較します。大きい方が、<b>しきい値高さ</b>の参照値と見なされます。
</p>
</td></tr>
<tr>
<th> <b>ピークの数</b>
</th>
<td>
<p>このテキストボックスは、<b>フィルタリング手法</b>ドロップダウンリストで<b>個数に基づく</b>が選択されているときのみ利用できます。これを使って検索するピークの最大数を指定することができます。
</p>
</td></tr>
<tr>
<th> しきい値高さ
</th>
<td>
<p>このテキストボックスは、<b>フィルタリングの手法</b>ドロップダウンリストで<b>高さに基づく</b>が選択されているときのみ利用できます。これを使用して検索するピークの最小高さを指定することができます。これは実際の値の高さであり、<b>しきい値の高さ(%)</b>とは異なります。
</p>
</td></tr>
<tr>
<th> フィルタ条件
</th>
<td>
<p>このテキストボックスは、<b>フィルタリング手法</b>ドロップダウンリストで<b>カスタム</b>が選択されているときのみ利用できます。ピークをフィルタリングするために条件を組み合わせることができます。例えば、&quot;n&lt;=3 AND hp&gt;=0.2&quot;とすると、ピーク数3以下かつ高さパーセントが20%以上、という条件になります。
ここでは、4つの事前定義されたキーワード（<i>hp</i>=高さのパーセント、<i>h</i>=高さの値、<i>n</i>=ピーク数、<i>x</i>=ピークのX値）を使用できます。
</p><p>自然言語の論理演算子 &quot;AND&quot;、&quot;OR&quot;、&quot;NOT&quot;および &quot;LIKE&quot;を使用することも、それらと等価の記号演算子を使用することもできます（<a class="external text" href="../../LabTalk/LabTalk/Operators.html#Logical_and_Relational_Operators">論理演算子と関係演算子</a>を参照）。
</p>
</td></tr></table>
<h3><a name="The_Labels_and_Markers_Group"></a><span class="mw-headline">ラベルとマーカーグループ</span></h3>
<table class="dialogcontroltable">

<tr>
<th> 中心位置ラベルの表示
</th>
<td>
<p>このチェックボックスを使って、各ピークの中心にラベルを表示するかどうかを指定します。
</p>
</td></tr>
<tr>
<th> 中心位置ラベル
</th>
<td>
<p>中心のラベルの種類を選択します。
</p>
<ul><li><b>ピークのX</b>: 中心のラベルとして、ピーク中心のX座標を使います。</li>
<li><b>ピークのY</b>: 中心のラベルとして、ピーク中心のX座標を使います。</li>
<li><b>インデックス</b>: 中心のラベルとして、ピークのインデックスを使います。</li>
<li><b>ピークの(X,Y)</b>: 中心のラベルとして、ピーク中心のX座標を使います。</li></ul>
</td></tr>
<tr>
<th> 中心位置ラベルの回転
</th>
<td>
<p>このチェックボックスを使って、中心のラベルを回転するかどうかを指定します。
</p>
</td></tr></table>
<h3><a name="The_Output_Baseline_Subtracted_Peaks_check_box"></a><span class="mw-headline">ピークを基線で減算し出力チェックボックス</span></h3>
<p>Origin2019bから、このチェックボックスは、<a href="../../UserGuide/UserGuide/Peak_Analyzer,_Start_Page.html#Goal_Page_Controls" title="ユーザガイド：ピークアナライザ, スタートページ"><b>ゴール</b> が<b>ピークフィット</b>に設定されている</a>場合のみ利用できます。
</p><p>入力した曲線のピークを見つけるために基線を指定したら、基線なしでピーク検出結果を出力する必要がある場合があります。このチェックボックスをオンにして、ピークの高さからベースラインを引きます。出力結果は以下のようになります。
</p>
<dl><dd><a  class="image"><img alt="Subtract baseline results.png" src="../images/Peak_Analyzer,_Find_Peaks_Page/Subtract_baseline_results.png" width="632"  /></a></dd></dl>
<p>基線モードが<b>なし</b>、または<b>最小か最大</b>に設定されている場合、このチェックボックスは使用できません。
</p>
<h3><a name="The_Peak_Fitting_Bounds_Group"></a><span class="mw-headline">ピークフィット境界グループ</span></h3>
<p>このグループは、<b>ゴール</b>が<b>ピークフィット</b>に設定されている場合のみ利用できます。
</p>
<table class="dialogcontroltable">

<tr>
<th> 境界を事前設定
</th>
<td>
<p>ドロップダウンリストを使って、どのように境界を設定してフィッティングの際にピークを見つけたいかを、指定します。
</p>
<ul><li><b>なし</b>：ピークの中央、幅、高さの境界を事前に設定したくない場合、このオプションを選択します。</li>
<li>中央と上限/下限境界の間の差に基づいて、境界を指定します。このオプションを選択して、<b>中央</b>、<b>幅</b>、<b>高さ（面積）</b>の値を指定する場合は、ピークフィットを行う範囲は、設定した中央、幅、高さ/面積境界に限定されます。 </li>
<li>中央と上限/下限境界の間の差の割合に基づいて、境界を指定します。このオプションを選択して、<b>中央(%)</b>、<b>幅(%)</b>、<b>高さ（面積）(%)</b>の値を指定する場合は、ピークフィットを行う範囲は、設定した中央、幅、高さ/面積境界に限定されます。 </li></ul>
</td></tr>
<tr>
<th>中央
</th>
<td>このオプションは、 境界の事前設定に、差によるが選択されているときのみ利用できます。チェックボックスにチェックを入れて、ピーク中央の上限と下限境界を指定します。
</td></tr>
<tr>
<th>太さ
</th>
<td>このオプションは、 境界の事前設定に、差によるが選択されているときのみ利用できます。チェックボックスにチェックを入れて、ピーク幅の上限と下限境界を指定します。
</td></tr>
<tr>
<th>高さ（面積）
</th>
<td>このオプションは、 <b>境界を事前設定</b>に、<b>差による</b>が選択されているときのみ利用できます。チェックボックスにチェックを入れて、ピーク高さ/面積の上限と下限境界を指定します。
</td></tr>
<tr>
<th>中央(%)
</th>
<td>このオプションは、 境界の事前設定に、割合に基づくが選択されているときのみ利用できます。チェックボックスにチェックを入れて、ピーク中央の割合で、上限と下限境界を指定します。
</td></tr>
<tr>
<th>幅(%)
</th>
<td>このオプションは、 境界の事前設定に、割合に基づくが選択されているときのみ利用できます。チェックボックスにチェックを入れて、ピーク幅の割合で、上限と下限境界を指定します。
</td></tr>
<tr>
<th>高さ（面積）(%)
</th>
<td>このオプションは、 境界の事前設定に、割合に基づくが選択されているときのみ利用できます。チェックボックスにチェックを入れて、ピーク高さ/面積の割合で上限と下限境界を指定します。
</td></tr></table>







    