<h1 class="firstheading">Rserveの設定</h1><p class='urlname' style='display: none'>Setup-R-Server</p>
<p>Rserveは、クライアント側にRソフトウェアがない場合に、サーバコンピュータのRソフトウェアにアクセスできるようにします。
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>目次</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Configuration_on_Server_Side"><span class="tocnumber">1</span> <span class="toctext">サーバ側の構成</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Install_R_and_Rserve_Package"><span class="tocnumber">1.1</span> <span class="toctext">RとRserveパッケージのインストール</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Create_an_account"><span class="tocnumber">1.2</span> <span class="toctext">アカウントの作成</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Add_system_path"><span class="tocnumber">1.3</span> <span class="toctext">システムパスの追加</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Configure_Origin_on_Client_Side"><span class="tocnumber">2</span> <span class="toctext">クライアント側Originの構成</span></a></li>
</ul>
</div>
<h2><a name="Configuration_on_Server_Side"></a><span class="mw-headline">サーバ側の構成</span></h2>
<h3><a name="Install_R_and_Rserve_Package"></a><span class="mw-headline">RとRserveパッケージのインストール</span></h3>
<ol>
<li><b>R</b>を<a class="external text" href="http://cran.r-project.org/mirrors.html" target="_blank">CRAN</a>からダウンロードします。以下の手順は、<b>R 3.2.0</b>に基づいています。
<li><b>R 3.2.0</b>をインストールして、立ち上げます。Rコンソールでスクリプトを実行して、Rライブラリパスを取得してから、パスを開きます。
<pre class="lt" style="font-family:monospace;">install.<span style="color: #000080;">packages</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;Rserve&quot;</span><span style="color: #000000;">)</span></pre>
<li>ポップアップダイアログで、ダウンロードチャンネルを選択して、<b>OK</b>ボタンをクリックして、パッケージをダウンロードします。ダウンロード後に、パッケージが自動で開き、インストールされます。
</ol>
<h3><a name="Create_an_account"></a><span class="mw-headline">アカウントの作成</span></h3>
<ol>
<li><b>R</b>コンソールでスクリプトを実行して、<b>R</b>ライブラリパスを取得してから、パスを開きます。
<pre class="python" style="font-family:monospace;">.<span style="color: #000;">libPaths</span><span style="color: #000;">(</span><span style="color: #000;">)</span><span style="color: #000;">[</span><span style="color: #000;">1</span><span style="color: #000;">]</span> <span style="color: #d00; font-style: italic;">#output could be [1] &quot;C:/Program Files/R/R-3.2.0/library&quot;</span></pre>
<li>このパスを<b>Windowsエクスプローラ</b>に入力して、このパス内の<i>Rserve/lib/x64/</i>サブフォルダを見つけます。<b>RserveAuth.txt</b>という名前のテキストファイルを作成して、ユーザ名とパスワードをファイルに書きます。例えば、
<p><b>Admin 123456</b></p>
<li><b>Rserv.txt</b>という名前の別のファイルを作成して、以下の内容をファイルに書きます。
<p><b>pwdfile RserveAuth.txt</b><br />
<b>remote enable</b><br />
<b>auth required</b><br />
<b>plaintext enable</b><br />
</p>
<li><b>Rserv.txt</b>のファイルの拡張子を、<i>conf</i>に変更して、<b>Rserv.conf</b>として保存します。
</ol>
<h3><a name="Add_system_path"></a><span class="mw-headline">システムパスの追加</span></h3>
<ol>
<li>Windowsの<b>スタート</b>ボタンをクリックして、<b>コントロールパネル:システム</b>を選択します。開いたページで<b>システムの詳細設定</b>を選択して、<b>システムのプロパティ</b>ダイアログを開きます。 
<li><b>詳細設定</b>タブの<b>環境変数...</b>ボタンをクリックして、 <b>環境変数</b>グループの<i>パス</i>を見つけます。<b>編集...</b>ボタンをクリックして、<b>システム変数の編集</b>ダイアログを開きます。
<li><b>変数の値</b>編集ボックスに、R.dllファイルを含むパスを入力します。例えば、「C:\Program Files\R\R-3.2.0\bin\x64」<b>OK</b>ボタンをクリックして、ボックスを閉じます。
<br />
<dl><dd><dl><dd><a class="image"><img alt="Systempath.png" src="../images/Setup_R_Server/Systempath.png" width="703"  /></a></dd></dl></dd></dl>
<li>Windowsの<b>スタート</b>メニューをクリックして、<b>すべてのプログラム:アクセサリ：コマンドプロンプト</b>を選択して、コマンドプロンプトウィンドウを立ち上げ、次のように入力します。 
<pre class="oc" style="font-family:monospace;">cd C<span style="color: #000000;">:</span>\Program Files\R\R<span style="color: #000040;">-</span>3.2.0\library\Rserve\libs\x64</pre>
<p>Rserve.dllがある場所でなければ、「Enter」を押して、パスを置き換えることができます。設定を適用して、以下のコマンドを実行するために、コンピュータを再起動する必要があります。
</p>
<li>コマンドウィンドウに以下の内容を入力して、「Enter」をクリックします。
<pre class="oc" style="font-family:monospace;">Rserve.<span style="color: #000000;">exe</span> <span style="color: #000040;">--</span>RS<span style="color: #000040;">-</span>conf Rserv.<span style="color: #000000;">conf</span> <span style="color: #000040;">--</span>RS<span style="color: #000040;">-</span>port <span style="color: #0000dd;">12306</span></pre>
<p>次のメッセージが現れます。<i><b>Rserve:Ok, ready to answer queries.</b></i>
</p>
<li>コマンドプロンプトの新しいセッションの開始と実行： 
<pre class="oc" style="font-family:monospace;">ipconfig</pre>
<p>Rserve PC IP：192.168.18.75
</p>
</ol>
<h2><a name="Configure_Origin_on_Client_Side"></a><span class="mw-headline">クライアント側Originの構成</span></h2>
<ol>
<li>ORserve9.dllとORserve9_64.dllが、Origin EXEフォルダ内（例えば、<i>C:\Program Files\OriginLab\Origin2016</i>）にあることを確認してください。また、PCファイアウォールをオフにして、Rserve接続がブロックされないようにします。
<li>セッションのコマンドウィンドウが以下のように開かれていることを確認してください。
<dl><dd><dl><dd><a class="image"><img alt="RServeConnectionCommandSession.png" src="../images/Setup_R_Server/RServeConnectionCommandSession.png" width="677"  /></a></dd></dl></dd></dl>
<li>Origin 2016を開始して、<b>ツール:Rserveコンソール</b>を選択して、<b>接続</b>ダイアログを開きます。
<li><b>サーバ</b>編集ボックス内のRserve.exeを実行しているマシンのIPを入力します。（このIPは、192.168.18.75といったように、RserveのPCから得られます。）<b>ポート</b>は、<i>12306</i>です。
<li><b>ユーザ名とパスワードでログイン</b>チェックボックスにチェックを入れて、<b>ユーザ名</b>と<b>パスワード</b>を入力します。例えば、これらは、<i>Admin</i>と<i>123456</i>で、それぞれ、RserveAuth.txtに保存されます。
<dl><dd><dl><dd><a class="image"><img alt="RserveConnectionDialog.png" src="../images/Setup_R_Server/RserveConnectionDialog.png" width="438"  /></a></dd></dl></dd></dl>
<li><b><b>OK</b></b>ボタンをクリックします。<b>RServe</b>コンソールの開始を確認することができます。
<dl><dd><dl><dd><a class="image"><img alt="RServeDialog.png" src="../images/Setup_R_Server/RServeDialog.png" width="624"  /></a></dd></dl></dd></dl>
</ol>


    