<h1 class="firstHeading">Algorithmen (ROC-Kurve)</h1>

  <p class='urlname' style='display: none'>ROCCurve-Algorithm</p>

  <div id="toc" class="toc">
    <div id="toctitle">
      <h2>Inhalt</h2>
    </div>

    <ul>
      <li class="toclevel-1 tocsection-1"><a href="#ROC_Values"><span class="tocnumber">1</span> <span class="toctext">ROC-Werte</span></a></li>

      <li class="toclevel-1 tocsection-2"><a href="#The_area_under_the_ROC_curve"><span class="tocnumber">2</span> <span class="toctext">Der Bereich unter der ROC-Kurve</span></a></li>

      <li class="toclevel-1 tocsection-3"><a href="#The_SE_of_the_area_under_the_ROC_curve_statistic"><span class="tocnumber">3</span> <span class="toctext">Der SE des Bereichs unter der Statistik der ROC-Kurve</span></a></li>

      <li class="toclevel-1 tocsection-4"><a href="#The_asymptotic_confidence_interval_of_the_area_under_the_ROC_curve"><span class="tocnumber">4</span> <span class="toctext">Das asymptotische Konfidenzintervall des Bereichs unter der ROC-Kurve</span></a></li>

      <li class="toclevel-1 tocsection-5"><a href="#The_asymptotic_P-value_under_the_null_hypothesis_that_vs._the_alternative_hypothesis_that"><span class="tocnumber">5</span> <span class="toctext">Der asymptotische P-Wert unter der Nullhypothese, dass , vs. die Alternativhypothese, dass</span></a></li>

      <li class="toclevel-1 tocsection-6"><a href="#Optimal_Cut-Point_Value"><span class="tocnumber">6</span> <span class="toctext">Optimaler Grenzpunktwert</span></a></li>
    </ul>
  </div>

  <p>In diesen Teil werden die folgenden Schreibweisen verwendet.</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-d2583020b138319a535bc3c88278ab33.png" title="x_i\,\!" alt="x_i\,\!" class="tex">: Testergebnis Score für Fall</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-d750fff2ef5c4d25bcff29719305177a.png" title="n_{TP}\,\!" alt="n_{TP}\,\!" class="tex">: Anzahl der wahren positiven Entscheidungen</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-254cedc4e5a3c839360558b23ca648c2.png" title="n_{FN}\,\!" alt="n_{FN}\,\!" class="tex">: Anzahl der falschen negativen Entscheidungen</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-12495e96208687e2494a1d6350363ce4.png" title="n_{TN}\,\!" alt="n_{TN}\,\!" class="tex">: Anzahl der wahren negativen Entscheidungen</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-4dd508cc11a3900faec0a3ce7e098751.png" title="n_{FP}\,\!" alt="n_{FP}\,\!" class="tex">: Anzahl der falschen positiven Entscheidungen</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-a3b41b80fce655f49856414c7f15b33e.png" title="n_{-}\,\!" alt="n_{-}\,\!" class="tex">: Anzahl der Fälle mit negativem tatsächlichen Zustand</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-79621c4d3dee617c6ee30941cff7dd5a.png" title="n_{+}\,\!" alt="n_{+}\,\!" class="tex">: Anzahl der Fälle mit positivem tatsächlichen Zustand</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-482fbd5c0104c0420e4348e592886424.png" title="n_{-=j}\,\!" alt="n_{-=j}\,\!" class="tex">: Anzahl der wahren negativen Fälle mit Testergebnissen, die gleich sind mit</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-5663bbf004c70b4058e4c35f50e38375.png" title="n_{+&gt;j}\,\!" alt="n_{+&gt;j}\,\!" class="tex">:&#160;: Anzahl der wahren positiven Fälle mit Testergebnissen größer als</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-b821d677c6db926aa8b8a3208114b77b.png" title="n_{+=j}\,\!" alt="n_{+=j}\,\!" class="tex">:&#160;: Anzahl der wahren positiven Fälle mit Testergebnissen, die gleich sind mit</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-962c20beac8eb76e37067599eefebfda.png" title="n_{-&lt;j}\,\!" alt="n_{-&lt;j}\,\!" class="tex">:&#160;: Anzahl der wahren negativen Fälle mit Testergebnissen kleiner als</p>

  <p>&#160;</p>

  <h4><a name="ROC_Values"></a><span class="mw-headline">ROC-Werte</span></h4>

  <p>1- Spezifizität (X): <img src="../images/Algorithm_(ROCCurve)/math-0c5a60aa9d534a69c504fac187790c07.png" title="1-\frac{n_{TN}}{n_{TN}+n_{FP}}\,\!" alt="1-\frac{n_{TN}}{n_{TN}+n_{FP}}\,\!" class="tex"></p>

  <p>Sensitivität (Y): <img src="../images/Algorithm_(ROCCurve)/math-0760bde0cf79e5793835075ee3d2bcdd.png" title="\frac{n_{TP}}{n_{TP}+n_{FN}}\,\!" alt="\frac{n_{TP}}{n_{TP}+n_{FN}}\,\!" class="tex"></p>

  <h4><a name="The_area_under_the_ROC_curve"></a><span class="mw-headline">Der Bereich unter der ROC-Kurve</span></h4>

  <p>Angenommen, <img src="../images/Algorithm_(ROCCurve)/math-6373accf16c083723e8abae2f5401af2.png" title="x\,\!" alt="x\,\!" class="tex"> ist die Skalierung der Testergebnisvariable. Bezeichnen Sie <img src="../images/Algorithm_(ROCCurve)/math-2d4dd525bc7143c51992574674cba150.png" title="x_{-}\,\!" alt="x_{-}\,\!" class="tex"> mit den Werten <img src="../images/Algorithm_(ROCCurve)/math-6373accf16c083723e8abae2f5401af2.png" title="x\,\!" alt="x\,\!" class="tex"> für Fälle mit negativem tatsächlichen Zustand und mit den Werten <img src="../images/Algorithm_(ROCCurve)/math-2c52673b83cb8d0bac1cb71c716fb95b.png" title="x_{+}\,\!" alt="x_{+}\,\!" class="tex"> für Fälle mit positivem tatsächlichen Zustand. Die nichtparametrische Approximation der "wahren” Fläche unter der ROC-Kurve <img src="../images/Algorithm_(ROCCurve)/math-0a5000fe8b6b5570dd5a1ce00b828ef6.png" title="\theta \,\!" alt="\theta \,\!" class="tex"> ist</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-5f79866cf3c0dc05169d11fdd67fd6d7.png" title=" A_Z=\frac 1{n_{+}n_{-}}" alt=" A_Z=\frac 1{n_{+}n_{-}}" class="tex"><img src="../images/Algorithm_(ROCCurve)/math-569223521931231c409785c91f0084b2.png" title="\sum_{j=1}^{n_{-}}\sum _{i=1}^{n_{+}}\Psi (x_{+},x_{-})" alt="\sum_{j=1}^{n_{-}}\sum _{i=1}^{n_{+}}\Psi (x_{+},x_{-})" class="tex"></p>

  <p>wobei <img src="../images/Algorithm_(ROCCurve)/math-79621c4d3dee617c6ee30941cff7dd5a.png" title="n_{+}\,\!" alt="n_{+}\,\!" class="tex"> der Stichprobenumfang von <img src="../images/Algorithm_(ROCCurve)/math-a7c6c783c5d03fc91d0594b217f56580.png" title="D\,\!" alt="D\,\!" class="tex">+ ist, <img src="../images/Algorithm_(ROCCurve)/math-79621c4d3dee617c6ee30941cff7dd5a.png" title="n_{+}\,\!" alt="n_{+}\,\!" class="tex"> der Stichprobenumfang von <img src="../images/Algorithm_(ROCCurve)/math-a7c6c783c5d03fc91d0594b217f56580.png" title="D\,\!" alt="D\,\!" class="tex">- ist und</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-0889c138e945599aafd7573b2404ee0e.png" title="\Psi (x_{+},x_{-})=\,\!" alt="\Psi (x_{+},x_{-})=\,\!" class="tex"> <img src="../images/Algorithm_(ROCCurve)/math-3fd91dcf034941370a5ed5d855390a84.png" title="\begin{cases} 1, &amp; \mbox{if }x_{+}&gt;x_{-} \\ 0.5, &amp; \mbox{if }x_{+}=x_{-} \\ 0, &amp; \mbox{if }x_{+}&lt;x_{-} \end{cases}" alt="\begin{cases} 1, &amp; \mbox{if }x_{+}&gt;x_{-} \\ 0.5, &amp; \mbox{if }x_{+}=x_{-} \\ 0, &amp; \mbox{if }x_{+}&lt;x_{-} \end{cases}" class="tex"></p>

  <p>Beachten Sie, dass <img src="../images/Algorithm_(ROCCurve)/math-695617aa4d2b4e1c93f4ffa59c529d83.png" title="A_z\,\!" alt="A_z\,\!" class="tex"> der beobachtete Bereich unter der ROC-Kurve ist, der aufeinander folgende Punte mit einer geraden Linie verbindet. d.h. durch die Trapezregel.</p>

  <p>Eine alternative Berechnungsmöglichkeit für <img src="../images/Algorithm_(ROCCurve)/math-695617aa4d2b4e1c93f4ffa59c529d83.png" title="A_z\,\!" alt="A_z\,\!" class="tex"> ist folgende:</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-1ea8d817ad6b5f332af7ec49c30dc22d.png" title="A_Z=\frac 1{n_{+}+n_{-}}\sum \left\{ n_{-=j}n_{+&gt;j}+\frac{n_{-=j}n_{+=j}}2\right\} " alt="A_Z=\frac 1{n_{+}+n_{-}}\sum \left\{ n_{-=j}n_{+&gt;j}+\frac{n_{-=j}n_{+=j}}2\right\} " class="tex"></p>

  <h4><a name="The_SE_of_the_area_under_the_ROC_curve_statistic"></a><span class="mw-headline">Der SE des Bereichs unter der Statistik der ROC-Kurve</span></h4>

  <p>Die Standardabweichung von <img src="../images/Algorithm_(ROCCurve)/math-695617aa4d2b4e1c93f4ffa59c529d83.png" title="A_z\,\!" alt="A_z\,\!" class="tex"> wird geschätzt mit:</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-fde8eb47f42d8792fdc2e76131a46863.png" title="SE(A_Z)=\sqrt{\frac{A_Z(1-A_Z)+(n_{+}-1)(Q_1-A_Z^2)+(n_{-}-1)(Q_2-A_Z^2)}{n_{+}n_{-}}} \,\!" alt="SE(A_Z)=\sqrt{\frac{A_Z(1-A_Z)+(n_{+}-1)(Q_1-A_Z^2)+(n_{-}-1)(Q_2-A_Z^2)}{n_{+}n_{-}}} \,\!" class="tex"></p>

  <p>wobei</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-99adafc3fccb24a1cf7264ad44e4e60a.png" title="Q_{1=\frac 1{n_{-}n_{+}^2}}\sum n\__{=j}[n_{+&gt;j}^2+n_{+&gt;j}n_{+=j}+\frac{n_{+&gt;j}^2}3] \,\!" alt="Q_{1=\frac 1{n_{-}n_{+}^2}}\sum n\__{=j}[n_{+&gt;j}^2+n_{+&gt;j}n_{+=j}+\frac{n_{+&gt;j}^2}3] \,\!" class="tex"></p>

  <p>und</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-aafdd6330c76e9cd18c4af812cd53052.png" title="Q_{2=\frac 1{n_{-}^2n_{+}}}\sum n_{+=j}[n_{-&gt;j}^2+n_{-&gt;j}n_{-=j}+\frac{n_{-=j}^2}3] \,\!" alt="Q_{2=\frac 1{n_{-}^2n_{+}}}\sum n_{+=j}[n_{-&gt;j}^2+n_{-&gt;j}n_{-=j}+\frac{n_{-=j}^2}3] \,\!" class="tex"></p>

  <h4><a name="The_asymptotic_confidence_interval_of_the_area_under_the_ROC_curve"></a><span class="mw-headline">Das asymptotische Konfidenzintervall des Bereichs unter der ROC-Kurve</span></h4>

  <p>Ein 2-seitiges asymptotisches <img src="../images/Algorithm_(ROCCurve)/math-76c3dffd80c7fb9b863984e4f4d30b71.png" title="c\%=(100-\alpha )\%\,\!" alt="c\%=(100-\alpha )\%\,\!" class="tex"> Konfidenzintervall für den wahren Bereich unter der ROC-Kurve ist</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-235de6eb21ed53705c7979a6ce5fb929.png" title="A_Z\pm SE(A_Z)\,\!" alt="A_Z\pm SE(A_Z)\,\!" class="tex"></p>

  <h4><a name="The_asymptotic_P-value_under_the_null_hypothesis_that_vs._the_alternative_hypothesis_that"></a><span class="mw-headline">Der asymptotische P-Wert unter der Nullhypothese, dass <b><img src="../images/Algorithm_(ROCCurve)/math-da8f6f3f8ae6e03c2be19875f1fb8083.png" title=" \theta=0,5\ \,\!" alt=" \theta=0,5\ \,\!" class="tex"></b>, vs. die Alternativhypothese, dass <img src="../images/Algorithm_(ROCCurve)/math-8d97b516153b32dc87de1d6354170e6f.png" title=" \theta \neq 0,5\ \,\!" alt=" \theta \neq 0,5\ \,\!" class="tex"></span></h4>

  <p>Da <img src="../images/Algorithm_(ROCCurve)/math-695617aa4d2b4e1c93f4ffa59c529d83.png" title="A_z\,\!" alt="A_z\,\!" class="tex"> asymptotisch normal unter der Nullhypothese ist, dass <img src="../images/Algorithm_(ROCCurve)/math-da8f6f3f8ae6e03c2be19875f1fb8083.png" title=" \theta=0,5\ \,\!" alt=" \theta=0,5\ \,\!" class="tex">, können wir den asymptotischen P-Wert unter der Nullhypothese berechnen, dass <img src="../images/Algorithm_(ROCCurve)/math-da8f6f3f8ae6e03c2be19875f1fb8083.png" title=" \theta=0,5\ \,\!" alt=" \theta=0,5\ \,\!" class="tex"> vs. die Alternativhypothese, dass <img src="../images/Algorithm_(ROCCurve)/math-8d97b516153b32dc87de1d6354170e6f.png" title=" \theta \neq 0,5\ \,\!" alt=" \theta \neq 0,5\ \,\!" class="tex"></p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-d39e6085797aa9607fe719b7472fb2e7.png" title="P\left( \left| Z\right| &gt;\left| \frac{A_Z-0,5}{SD(A_Z)|_{\theta =0,5}}\right| \right) =2P\left( Z&gt;\left| \frac{A_Z-0,5}{SD(A_Z)\mid _{\theta =0,5}}\right| \right) " alt="P\left( \left| Z\right| &gt;\left| \frac{A_Z-0,5}{SD(A_Z)|_{\theta =0,5}}\right| \right) =2P\left( Z&gt;\left| \frac{A_Z-0,5}{SD(A_Z)\mid _{\theta =0,5}}\right| \right) " class="tex"></p>

  <p>Im nichtparametrischen Fall</p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-72938a409015c7ed5745f164b9c6bd99.png" title="SD(A_Z)|_{\theta =0,5}=\sqrt{\frac{\theta (1-\theta )+(n_{+}-1)(Q_1-\theta ^2)+(n_{-}-1)(Q_2-\theta ^2)}{n_{+}n_{-}}}|_{\theta =0,5}\,\!" alt="SD(A_Z)|_{\theta =0,5}=\sqrt{\frac{\theta (1-\theta )+(n_{+}-1)(Q_1-\theta ^2)+(n_{-}-1)(Q_2-\theta ^2)}{n_{+}n_{-}}}|_{\theta =0,5}\,\!" class="tex"></p>

  <p><img src="../images/Algorithm_(ROCCurve)/math-bc5a5645b9c414917dd8c39d32c961c6.png" title="=\sqrt{\frac{0,5(1-0,5)+(n_{+}-1)(\frac 13-0,5^2)+(n_{-}-1)(\frac 13-0,5^2)}{n_{+}n_{-}}} " alt="=\sqrt{\frac{0,5(1-0,5)+(n_{+}-1)(\frac 13-0,5^2)+(n_{-}-1)(\frac 13-0,5^2)}{n_{+}n_{-}}} " class="tex"></p>

  <h4><a name="Optimal_Cut-Point_Value"></a><span class="mw-headline">Optimaler Grenzpunktwert</span></h4>

  <p>Der Grenzpunktwert wird durch die Gleichheitsmaximierung dieser zwei Größen (SpEqualSe) definiert. Das ist min( abs(1-x-y) ) für die ROC-Kurve.</p>
