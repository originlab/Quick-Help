<h1 class="firstHeading">Packdateien verwalten</h1>

  <p class='urlname' style='display: none'>FileShare-PackageManager</p>

  <p>Das Hilfsmittel <b>Packdateien verwalten</b> ist Origins neuer Ersatz für OPK-Dateien. Die alten OPK-Dateien sind binäre Dateien und eingeschränkt hinsichtlich der Verwendung zur Modulinstallation. Die neuen OPX-Dateien sind XML und wurden mit dem Ziel entwickelt, Modulinstallation für den Anwender einfacher zu machen. Sie können auf den Dialog <b>Packdateien verwalten</b> vom Menü <b>Hilfsmittel</b> aus zugreifen.</p>

  <div id="toc" class="toc">
    <div id="toctitle">
      <h2>Inhalt</h2>
    </div>

    <ul>
      <li class="toclevel-1 tocsection-1"><a href="#Dialog:_File_Menu"><span class="tocnumber">1</span> <span class="toctext">Dialog: Menü Datei</span></a></li>

      <li class="toclevel-1 tocsection-2"><a href="#Dialog:_Tree_View"><span class="tocnumber">2</span> <span class="toctext">Dialog: Baumansicht</span></a></li>

      <li class="toclevel-1 tocsection-3"><a href="#Dialog:_Buttons"><span class="tocnumber">3</span> <span class="toctext">Dialog: Schaltflächen</span></a></li>

      <li class="toclevel-1 tocsection-4"><a href="#Dialog:_File_List"><span class="tocnumber">4</span> <span class="toctext">Dialog: Dateiliste</span></a></li>

      <li class="toclevel-1 tocsection-5"><a href="#OriginC"><span class="tocnumber">5</span> <span class="toctext">Origin C</span></a></li>

      <li class="toclevel-1 tocsection-6"><a href="#Internal_Behavior"><span class="tocnumber">6</span> <span class="toctext">Internes Verhalten</span></a></li>

      <li class="toclevel-1 tocsection-7"><a href="#Silent_Install"><span class="tocnumber">7</span> <span class="toctext">Stille Installation</span></a></li>
    </ul>
  </div>

  <h2><a name="Dialog:_File_Menu"></a><span class="mw-headline">Dialog: Menü Datei</span></h2>

  <p>Der Dialog Packdateien verwalten hat ein Menü Datei. Dieses Menü enthält die folgenden Elemente:</p>

  <table class="dialogcontroltable">
    <tr>
      <th>Neu</th>

      <td>
        <p>Erstellt ein neues Paket. Dadurch wird ein aktuelles Paket, sollte es offen sein, geschlossen. Wenn das aktuelle Paket geändert, aber nicht gespeichert wurde, werden Sie aufgefordert, die Änderungen zu speichern oder zu verwerfen oder das Erstellen eines neuen Pakets abzubrechen.</p>
      </td>
    </tr>

    <tr>
      <th>Öffnen...</th>

      <td>
        <p>Öffnet eine vorhandene Packdatei. Dadurch wird ein aktuelles Paket, sollte es offen sein, geschlossen. Wenn das aktuelle Paket geändert, aber nicht gespeichert wurde, werden Sie aufgefordert, die Änderungen zu speichern oder zu verwerfen oder das Erstellen eines neuen Pakets abzubrechen.</p>
      </td>
    </tr>

    <tr>
      <th>Speichern</th>

      <td>
        <p>Speichert das aktuelle Paket mit dem aktuellen Dateinamen. Wenn das Paket neu ist und noch keinen Dateinamen hat, werden Sie aufgefordert, einen Dateinamen zu vergeben.</p>
      </td>
    </tr>

    <tr>
      <th>Speichern unter...</th>

      <td>
        <p>Speichern Sie das aktuelle Paket mit Hilfe eines neuen Dateinamens.</p>
      </td>
    </tr>

    <tr>
      <th>Ein Paket installieren...</th>

      <td>
        <p>Ein Dialog fordert Sie auf, eine Packdatei auszuwählen. Nachdem Sie eine Packdatei gewählt und auf Öffnen geklickt haben, wird das Paket installiert.</p>
      </td>
    </tr>

    <tr>
      <th>Ein Paket deinstallieren...</th>

      <td>
        <p>Dieses Element zeigt Ihnen den Dialog "Installierte Pakete". Dieser Dialog führt alle aktuell installierten Pakete auf. Wählen Sie einfach die Pakete aus, die Sie deinstallieren möchten, und klicken Sie auf die Schaltfläche Deinstallieren.</p>
      </td>
    </tr>

    <tr>
      <th>Ein Paket extrahieren</th>

      <td>
        <p>Das Extrahieren eines Pakets unterscheidet sich von der Installation eines Pakets. Das Extrahieren eines Pakets wird verwendet, wenn Sie nur die Dateien aus dem Paket haben möchten. Die Vorher- und Nachher-Skripts werden nicht ausgeführt. Sie werden auch aufgefordert, den Zielordner zu wählen. Dies kann jeder beliebige Ordner sein. Der Zielordner muss kein Anwender- oder Systemordner von Origin sein.</p>
      </td>
    </tr>

    <tr>
      <th>Schließen</th>

      <td>
        <p>Der Dialog wird geschlossen. Wenn Änderungen am aktuellen Paket vorgenommen und nicht gespeichert wurden, werden Sie aufgefordert.</p>
      </td>
    </tr>
  </table>

  <h2><a name="Dialog:_Tree_View"></a><span class="mw-headline">Dialog: Baumansicht</span></h2>

  <p>In der Baumansicht können die Paketeinstellungen bearbeitet werden. Im Folgenden werden die Einstellungen beschrieben.</p>

  <table class="dialogcontroltable">
    <tr>
      <th>Paket</th>

      <td>
        <ul>
          <li>Modulname

            <dl>
              <dd>Der Name des Moduls Der Name sollte für jede herausgebrachte *Version der gleiche bleiben.</dd>

              <dd>Während der Installation wird der Modulname mit den Namen der bereits installierten Pakete verglichen. Wenn eine Übereinstimmung gefunden wurde, werden die Versionsfelder verglichen und der Anwender darüber informiert, dass eine ältere, neuere oder die gleiche Version des Pakets bereits installiert ist. Der Anwender hat die Option, fortzufahren oder die Installation abzubrechen.</dd>
            </dl>
          </li>

          <li>Beschreibung

            <dl>
              <dd>Eine Beschreibung des Moduls oder Paketinhalts</dd>
            </dl>
          </li>

          <li>Version

            <dl>
              <dd>Die Version des Moduls in dem Paket</dd>

              <dd>Während der Installation wird der Modulname mit den Namen der bereits installierten Pakete verglichen. Wenn eine Übereinstimmung gefunden wurde, werden die Versionsfelder verglichen und der Anwender darüber informiert, dass eine ältere, neuere oder die gleiche Version des Pakets bereits installiert ist.</dd>
            </dl>
          </li>

          <li>Autor

            <dl>
              <dd>Ersteller des Moduls in dem Paket</dd>
            </dl>
          </li>
        </ul>
      </td>
    </tr>

    <tr>
      <th>Apps</th>

      <td>
        <ul>
          <li>Symbol

            <dl>
              <dd>Das bmp-Bild, das als App-Symbol in der <a href="../../UserGuide/UserGuide/Apps.html#The_Apps_Gallery" title="UserGuide:Apps">Apps-Galerie</a> verwendet wird.</dd>
            </dl>
          </li>

          <li>Skript starten

            <dl>
              <dd>Das LabTalk-Skript, das beim Start der App ausgeführt wird</dd>
            </dl>
          </li>
        </ul>
      </td>
    </tr>

    <tr>
      <th>Erforderliche Origin-Version</th>

      <td>
        <p>Die erforderliche Version von Origin zum Verwenden des Moduls in dem Paket</p>
      </td>
    </tr>

    <tr>
      <th>Zielpfad</th>

      <td>
        <p>Der Zielpfad wird während der Installation verwendet und sagt dem Hilfsmittel Packdateien verwalten, wohin der Inhalt des Pakets installiert werden soll.</p>

        <ul>
          <li>Benutzer = Der Anwenderdateiordner</li>

          <li>System = Der Origin-Programmordner</li>

          <li>Auto = Überprüfen Sie den Schreibzugriff für die Anwender- und Systempfade. Wenn Sie nur auf einen der beiden Schreibzugriff haben, sollten Sie dort installieren. Wenn Sie auf beide Schreibzugriff haben, werden Sie aufgefordert, den Zielpfad auszuwählen.</li>
        </ul>
      </td>
    </tr>

    <tr>
      <th>Symbolleiste</th>

      <td>
        <ul>
          <li>Datei Schaltflächengruppe

            <dl>
              <dd>Wenn das Paket eine Schaltflächengruppendatei enthält und Sie die Schaltflächengruppe während der Paketinstallation zu Origins anwenderdefinierten Schaltflächengruppen hinzufügen möchten, geben Sie die Datei hier an.</dd>

              <dd>Der einfachste Weg, dieses Feld festzulegen, besteht darin, zuerst die Schaltflächengruppe zum Paket hinzuzufügen. Sobald sie hinzugefügt wurden, können Sie sie in der Liste der Dateien auswählen und dann auf die Schaltfläche "Symbolleiste setzen" klicken.</dd>
            </dl>
          </li>

          <li>Symbolleiste erzeugen

            <dl>
              <dd>Diese Option bestimmt, ob während der Paketinstallation aus der Schaltflächengruppe eine Symbolleiste erzeugt wird.</dd>

              <dd>Aktivieren Sie das Kontrollkästchen, um eine Symbolleiste zu erzeugen, oder deaktivieren Sie das Kontrollkästchen, um keine Symbolleiste zu erzeugen.</dd>
            </dl>
          </li>
        </ul>
      </td>
    </tr>

    <tr>
      <th>LabTalk-Skript</th>

      <td>
        <ul>
          <li>Vor der Installation

            <dl>
              <dd>Der hier eingegebene LabTalk-Code wird ausgeführt, bevor das Paket installiert ist. Wenn ein LabTalk-Befehlsfehler auftritt, wird die Installation abgebrochen. Wenn Ihr Skript-Code eine Prüfung durchgeführt hat mit dem Ergebnis, dass die Installation nicht fortgeführt werden sollte, können Sie einen Befehlsfehler mit 'break 1;' erzwingen oder OPXERR auf einen Wert setzen, der nicht Null ist.</dd>
            </dl>
          </li>

          <li>Nach der Installation

            <dl>
              <dd>Der hier eingegebene LabTalk-Code wird ausgeführt, nachdem das Paket installiert ist.</dd>
            </dl>
          </li>

          <li>Vor dem Deinstallieren

            <dl>
              <dd>Der hier eingegebene LabTalk-Code wird ausgeführt, bevor die Dateien, die installiert wurden, deinstalliert/entfernt werden. Verwenden Sie diese Option, um jegliche Änderungen, die Sie an den Skripten Vor der Installation und Nach der Installation vorgenommen haben, rückgängig zu machen. Wenn Ihr Skript-Code eine Prüfung durchgeführt hat mit dem Ergebnis, dass die Deinstallation nicht fortgeführt werden sollte, können Sie einen Befehlsfehler mit 'break 1;' erzwingen oder OPXERR auf einen Wert setzen, der nicht Null ist.</dd>
            </dl>
          </li>
        </ul>
      </td>
    </tr>

    <tr>
      <th>Quellpfad</th>

      <td>
        <p>Dieses Feld zeigt den Quellpfad für alle gepackten Dateien. Alle Dateien, die dem Paket hinzugefügt werden, müssen aus demselben Quellpfad stammen. Der Quellpfad wird festgelegt, wenn Sie Ihren ersten Ordner oder Ihre erste Datei hinzufügen.</p>

        <dl>
          <dd>
            <ul>
              <li>Wenn Ihr erster Ordner oder Ihre erste Datei aus dem Origin-Programmordner oder einem seiner Unterordner stammt, wird der Quellpfad im Origin-Programmpfad eingerichtet.</li>

              <li>Wenn Ihr erster Ordner oder die erste Datei aus dem Anwenderdateiordner oder einem seiner Unterordner stammt, wird der Quellpfad für den Anwenderdateiordner eingerichtet.</li>

              <li>Sollte Ihr erster Ordner oder Ihre erste Datei weder aus dem Origin-Programmordner noch dem Anwenderdateiordner stammen, dann wird der Quellpfad auf den Pfad des Ordners oben, auf den hinzugefügten Ordner oder auf den Pfad des Ordners, der die hinzugefügte Datei beinhaltet, gesetzt.</li>
            </ul>
          </dd>

          <dd>Sollte sich der Speicherort der Dateien ändern, können Sie den Quellpfad manuell bearbeiten. Sobald Sie die Einstellung des Quellpfads auf den neuen Speicherort hin ändern, können Sie die Schaltfläche zum erneuten Packen der Dateien verwenden, um geänderte Dateien in dem Paket zu aktualisieren. Durch die Möglichkeit, den Quellpfad zu ändern, können Sie auch Pakete neu packen, die auf anderen Computern erzeugt wurden.</dd>
        </dl>
      </td>
    </tr>
  </table>

  <h2><a name="Dialog:_Buttons"></a><span class="mw-headline">Dialog</span></h2>

  <p>Unter der Baumansicht befinden sich sechs Schaltflächen. Im Folgenden werden die Schaltflächen beschrieben.</p>

  <table class="dialogcontroltable">
    <tr>
      <th>Dateien neu packen</th>

      <td>
        <p>Klicken Sie auf diese Schaltfläche, um alle Dateien, die dem Paket hinzugefügt wurden, neu zu packen. Diese Schaltfläche ist nützlich, wenn Sie eine Datei ändern und die Dateiänderungen in dem Paket aufnehmen möchten. Anstatt die Datei zu entfernen und sie erneut hinzuzufügen, können Sie einfach auf diese Schaltfläche klicken und alle neuen Änderungen an Ihren Dateien werden in das Paket gepackt.</p>

        <p>Diese Schaltfläche ist deaktiviert, bis das Paket mindestens eine Datei enthält.</p>
      </td>
    </tr>

    <tr>
      <th>Symbolleiste festlegen</th>

      <td>
        <p>Klicken Sie auf diese Schaltfläche, um die Einstellung der Schaltfläche Gruppendatei im Zweig Symbolleiste der Baumansicht festzulegen.</p>

        <p>Diese Schaltfläche wird deaktiviert, bis eine einzelne Datei in der Dateiliste ausgewählt ist.</p>
      </td>
    </tr>

    <tr>
      <th>Ordner hinzufügen...</th>

      <td>
        <p>Klicken Sie auf diese Schaltfläche, um einen Ordner und alle Dateien und Unterordner, die sich in dem gewählten Ordner befinden, hinzuzufügen.</p>

        <p>Das Quellpfadfeld in der Baumansicht wird beim Hinzufügen des ersten Ordners oder der ersten Datei zu dem Paket festgelegt. Weitere Informationen finden Sie unter Quellpfad.</p>
      </td>
    </tr>

    <tr>
      <th>Dateien hinzufügen...</th>

      <td>
        <p>Klicken Sie auf diese Schaltfläche, um Dateien zum Paket hinzuzufügen. Ein Dialog zum "Hinzufügen von Dateien zum Paket" wird aufgerufen.</p>

        <p>Das Quellpfadfeld in der Baumansicht wird beim Hinzufügen des ersten Ordners oder der ersten Datei zu dem Paket festgelegt. Weitere Informationen finden Sie unter Quellpfad.</p>
      </td>
    </tr>

    <tr>
      <th>Dateien entfernen</th>

      <td>
        <p>Klicken Sie auf diese Schaltfläche, um alle ausgewählten Dateien aus dem Paket zu entfernen.</p>

        <p>Diese Schaltfläche wird deaktiviert, bis Sie eine oder mehrere Dateien in der Dateiliste ausgewählt haben.</p>
      </td>
    </tr>
  </table>

  <p>Die Schaltfläche rechts außen wird verwendet, um die Dateiliste zu zeigen und zu verbergen.</p>

  <h2><a name="Dialog:_File_List"></a><span class="mw-headline">Dialog: Dateiliste</span></h2>

  <p>Die Dateiliste zeigt alle Dateien, die aktuell im Paket sind. Die Anzahl der Dateien in der Liste und die Anzahl der ausgewählten Dateien ändern den Status der Schaltflächen wie oben beschrieben.</p>

  <h2><a name="OriginC"></a><span class="mw-headline">Origin C</span></h2>

  <p>Der Dialog Packdateien verwalten wird mit OriginC-Code in OriginC\OriginLab\XMLPackage.c gehandhabt.</p>

  <p>Die Datei XMLPackage.c ruft eine Sammlung von aus Origin exportierten Funktionen zum Arbeiten mit Paketen auf. Die folgenden Funktionen werden in oUtils.h deklariert und aus Origins okUtil80.dll exportiert:</p>

  <ul>
    <li>okutil_create_package_tree</li>

    <li>okutil_create_package_file</li>

    <li>okutil_install_package_file</li>

    <li>okutil_uninstall_package_file</li>

    <li>okutil_get_installed_package_names</li>

    <li>okutil_add_folder_to_package</li>

    <li>okutil_add_files_to_package</li>

    <li>okutil_remove_files_from_package</li>

    <li>okutil_get_packed_file_names</li>

    <li>okutil_repack_files</li>
  </ul>

  <p>Sie finden den Wiedergabetyp der Funktion und das Argument, das von jeder Funktion akzeptiert wird, in OriginCs oUtils.h.</p>

  <h2><a name="Internal_Behavior"></a><span class="mw-headline">Internes Verhalten</span></h2>

  <p>Bei der Installation eines Pakets prüft Origin zunächst, ob das Paket bereits installiert ist. Sollte es bereits installiert sein, informiert Origin den Anwender, dass das Paket installiert ist, und fragt, ob die Installation fortgesetzt werden soll. Wenn der Anwender mit der Installation fortfahren möchte, deinstalliert Origin zuerst die vorherige Installation und fährt dann mit der Installation des aktuellen Pakets fort.</p>

  <p>Für jedes Paket, das installiert wird, kopiert Origin das Paket ohne die gepackten Dateien, in eine Datei für die Paketliste. Die Paketlistendatei ist OPXList.xml und wird im Anwenderdateiordner gespeichert.</p>

  <h2><a name="Silent_Install"></a><span class="mw-headline">Stille Installation</span></h2>

  <p>Zum Erstellen einer OPX-Datei, die still installiert werden kann, müssen Sie die folgenden Einstellungen vornehmen:</p>

  <ul>
    <li>Setzen Sie die Einstellung <b>LabTalk-Skript &gt; Vor der Installation</b> auf leer oder auf ein beliebiges Skript, das keine Anwenderbefehlsaufforderung hervorruft.</li>

    <li>Setzen Sie die Einstellung <b>LabTalk-Skript &gt; Nach der Installation</b> auf ein beliebiges Skript, dass keine Anwenderbefehlsaufforderung hervorruft, gefolgt von zwei zusätzlichen Befehlen:</li>
  </ul>
  <pre class="lt" style="font-family:monospace;">
doc <span style="color: #000080;">-</span>s; exit;
</pre>

  <p>Nachdem die notwendigen Änderungen am OPX gemacht wurden, ist es jetzt möglich, Origin zu starten, das OPX zu installieren und Origin zu verlassen, ohne manuell eingreifen zu müssen. Die folgende Befehlszeile zeigt, wie die stille Installation des OPX durchgeführt wird.</p>
  <pre class="lt" style="font-family:monospace;">
Origin8.<span style="color: #000080;">exe</span> <span style="color: #000080;">-</span>h <span style="color: #000080;">-</span>R <span style="color: #ff00ff;">"instOPX OPXFileName.opx"</span>
</pre>

  <p>Die oben stehende Befehlszeile muss bearbeitet werden, um den Dateinamen Ihres OPX zu verwenden.</p>
