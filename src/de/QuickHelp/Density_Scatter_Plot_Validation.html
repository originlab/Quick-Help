<h1 class="firstHeading">FAQ-1032 Validierung des Dichtepunktdiagramms</h1>

  <p class='urlname' style='display: none'>density-dots-validation</p>

  <p class='faqID'>Letztes Update: 16.12.2019</p>

  <p>&#160;</p>

  <p>Dichtepunkte sind Punktdiagramme, die die Datendichte darstellen, wobei die Punkte farblich auf die Datendichte abgebildet werden. Die Dichte wird mit der Kerneldichteschätzung berechnet.</p>

  <p>Um die Kerneldichteschätzung zu berechnen, verwendet Origin einen schnellen Algorithmus, der eine eingeteilte 2D-Approximation und 2D-Interpolation nutzt. Zuerst wird eine 2D-Einteilung für die (X-, Y-) Punkte durchgeführt, um eine Matrix mit den Klassenanzahlen zu erhalten. Dann wird die 2D-Fast-Fourier-Transformation verwendet, um diskrete Faltungen zum Berechnen der Dichtewerte von jedem Gitternetz durchzuführen. Die 4. Wurzel der Dichtewerte wird berechnet, um die Dichteskala auf die Farbskala abzubilden.</p>

  <p>Origin kann ähnliche Ergebnisse wie R aus dem gleichen Datensatz erzeugen.</p>

  <h3><a name="Comparison_of_R_and_Origin_Results"></a><span class="mw-headline">Vergleich der Ergebnisse von R und Origin</span></h3>

  <dl>
    <dd><a class="image"><img alt="Density Plot Origin R Comparison.png" src="../images/Density_Scatter_Plot_Validation/800px-Density_Plot_Origin_R_Comparison.png" width="800"></a></dd>
  </dl>

  <h3><a name="Reference"></a><span class="mw-headline">Referenz</span></h3>

  <p><b>Daten</b>:<br>
  1 Antwortvariable (y), 1 Prädiktorvariable (x)<br>
  100000 Beobachtungen<br>
  Erzeugte Daten<br>
  <a class="external text" href="http://blog.originlab.com/ftp/graph_gallery/DP.csv" target="_blank"><b>Datendatei: DP.csv</b></a></p>

  <p><b>Origin-Projektdatei</b>: <a class="external text" href="http://blog.originlab.com/ftp/graph_gallery/density_dots_validation_sample.opju" target="_blank">density_dots_validation_sample.opju</a></p>

  <p><b>R-Codes zum Erzeugen des Diagramms</b></p>
  <pre class="lt" style="font-family:monospace;">
xx<span style="color: #000080;">=</span> read.<span style="color: #000080;">csv</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">"DP.csv"</span>,header<span style="color: #000080;">=</span>FALSE<span style="color: #000000;">)</span> as.<span style="color: #000080;">list</span><span style="color: #000000;">(</span>body<span style="color: #000000;">(</span>smoothScatter<span style="color: #000000;">)</span><span style="color: #000000;">)</span> trace<span style="color: #000000;">(</span><span style="color: #ff00ff;">"smoothScatter"</span>,quote<span style="color: #000000;">(</span>browser<span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>,at<span style="color: #000080;">=</span><span style="color: #0000dd;">19</span><span style="color: #000000;">)</span> w<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>c<span style="color: #000000;">(</span><span style="color: #0000dd;">0.056990976577602</span>, <span style="color: #0000dd;">0.13442535086237</span><span style="color: #000000;">)</span> smoothScatter<span style="color: #000000;">(</span>xx, nrpoints <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span>,nbin<span style="color: #000080;">=</span><span style="color: #0000dd;">151</span>,bandwidth<span style="color: #000080;">=</span>w<span style="color: #000000;">)</span> #Debug and run following script #Type <span style="color: #ff00ff;">"n"</span> to enter line <span style="color: #0000dd;">19</span> stopifnot<span style="color: #000000;">(</span><span style="color: #000000;">(</span>nx <span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span> length<span style="color: #000000;">(</span>xm<span style="color: #000000;">)</span><span style="color: #000000;">)</span> <span style="color: #000080;">==</span> nrow<span style="color: #000000;">(</span>dens<span style="color: #000000;">)</span>, <span style="color: #000000;">(</span>ny <span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span> length<span style="color: #000000;">(</span>ym<span style="color: #000000;">)</span><span style="color: #000000;">)</span> <span style="color: #000080;">==</span> ncol<span style="color: #000000;">(</span>dens<span style="color: #000000;">)</span><span style="color: #000000;">)</span> ixm <span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span> 1L <span style="color: #000080;">+</span> as.<span style="color: #000080;">integer</span><span style="color: #000000;">(</span><span style="color: #000000;">(</span>nx<span style="color: #000080;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span><span style="color: #000080;">*</span><span style="color: #000000;">(</span>x<span style="color: #000000;">[</span>,<span style="color: #0000dd;">1</span><span style="color: #000000;">]</span><span style="color: #000080;">-</span>xm<span style="color: #000000;">[</span><span style="color: #0000dd;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">)</span><span style="color: #000080;">/</span><span style="color: #000000;">(</span>xm<span style="color: #000000;">[</span>nx<span style="color: #000000;">]</span><span style="color: #000080;">-</span>xm<span style="color: #000000;">[</span><span style="color: #0000dd;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span> iym <span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span> 1L <span style="color: #000080;">+</span> as.<span style="color: #000080;">integer</span><span style="color: #000000;">(</span><span style="color: #000000;">(</span>ny<span style="color: #000080;">-</span><span style="color: #0000dd;">1</span><span style="color: #000000;">)</span><span style="color: #000080;">*</span><span style="color: #000000;">(</span>x<span style="color: #000000;">[</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">]</span><span style="color: #000080;">-</span>ym<span style="color: #000000;">[</span><span style="color: #0000dd;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">)</span><span style="color: #000080;">/</span><span style="color: #000000;">(</span>ym<span style="color: #000000;">[</span>ny<span style="color: #000000;">]</span><span style="color: #000080;">-</span>ym<span style="color: #000000;">[</span><span style="color: #0000dd;">1</span><span style="color: #000000;">]</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span> z<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>dens<span style="color: #000000;">[</span>cbind<span style="color: #000000;">(</span>ixm, iym<span style="color: #000000;">)</span><span style="color: #000000;">]</span> df<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>data.<span style="color: #000080;">frame</span><span style="color: #000000;">(</span>x<span style="color: #000080;">=</span>x<span style="color: #000000;">[</span>,<span style="color: #0000dd;">1</span><span style="color: #000000;">]</span>,y<span style="color: #000080;">=</span>x<span style="color: #000000;">[</span>,<span style="color: #0000dd;">2</span><span style="color: #000000;">]</span>,z<span style="color: #000080;">=</span>z<span style="color: #000000;">)</span> library<span style="color: #000000;">(</span>ggplot2<span style="color: #000000;">)</span> sp<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>ggplot<span style="color: #000000;">(</span>df, aes<span style="color: #000000;">(</span>x,y,colour<span style="color: #000080;">=</span>z<span style="color: #000000;">)</span><span style="color: #000000;">)</span> <span style="color: #000080;">+</span>  geom_point<span style="color: #000000;">(</span>shape<span style="color: #000080;">=</span><span style="color: #ff00ff;">"."</span><span style="color: #000000;">)</span> <span style="color: #000080;">+</span> theme<span style="color: #000000;">(</span>panel.<span style="color: #000080;">background</span> <span style="color: #000080;">=</span> element_rect<span style="color: #000000;">(</span>fill <span style="color: #000080;">=</span> <span style="color: #ff00ff;">'black'</span><span style="color: #000000;">)</span>, panel.<span style="color: #000080;">grid</span>.<span style="color: #000080;">major</span> <span style="color: #000080;">=</span> element_blank<span style="color: #000000;">(</span><span style="color: #000000;">)</span>, panel.<span style="color: #000080;">grid</span>.<span style="color: #000080;">minor</span> <span style="color: #000080;">=</span> element_blank<span style="color: #000000;">(</span><span style="color: #000000;">)</span>, panel.<span style="color: #000080;">border</span> <span style="color: #000080;">=</span> element_blank<span style="color: #000000;">(</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span> sp cval<span style="color: #000080;">&lt;</span><span style="color: #000080;">-</span>seq<span style="color: #000000;">(</span><span style="color: #0000dd;">0</span>,<span style="color: #0000dd;">1</span>,length.<span style="color: #000080;">out</span><span style="color: #000080;">=</span><span style="color: #0000dd;">6</span><span style="color: #000000;">)</span> sp<span style="color: #000080;">+</span>scale_color_gradientn<span style="color: #000000;">(</span>values <span style="color: #000080;">=</span> cval,colours <span style="color: #000080;">=</span> rainbow<span style="color: #000000;">(</span><span style="color: #0000dd;">20</span><span style="color: #000000;">)</span><span style="color: #000000;">)</span>
</pre>
  <hr class='keywordshr'>

  <p><span class='keywords'>Schlüsselwörter:</span><span class='keywordsInput'>Validierung, mit R vergleichen</span></p>
