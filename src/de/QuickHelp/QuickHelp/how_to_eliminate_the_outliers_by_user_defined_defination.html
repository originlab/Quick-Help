<h1 class="firstHeading">FAQ-878 Wie entferne ich Ausreißer mit einer benutzerdefinierten Definition?</h1>

  <p class='urlname' style='display: none'>Identify-and-Eliminate-User-Defined-Outliers</p>

  <p class='faqID'>Letztes Update: 04.07.2017</p>

  <p>Um die Ausreißerzellen in einem Arbeitsblatt durch eine benutzerdefinierte Ausreißerdefinition zu identifizieren, müssen Sie eine LabTalk-Funktion verwenden. In den folgenden Beispielcodes definieren wir einen Wert als "Ausreißer", wenn sein absoluter Z-Wert (=abs((x-<i>MeanOfColumn</i>)/<i>SDOfColumn</i>)) größer ist als ein bestimmter Schwellenwert:</p>
  <pre class="lt" style="font-family:monospace;">
function dataset remoutliers<span style="color: #000000;">(</span>dataset ds1, double zthresh<span style="color: #000000;">)</span> <span style="color: #000000;">{</span> dataset ds2; double ii; sum<span style="color: #000000;">(</span>ds1<span style="color: #000000;">)</span>;  <span style="color: #008000;">//collect stats of ds1</span> double summean<span style="color: #000080;">=</span>sum.<span style="color: #000080;">mean</span>;  <span style="color: #008000;">//store mean</span> double sumsd<span style="color: #000080;">=</span>sum.<span style="color: #000080;">SD</span>;      <span style="color: #008000;">//store SD</span> double nr<span style="color: #000080;">=</span>ds1.<span style="color: #000080;">getSize</span><span style="color: #000000;">(</span><span style="color: #000000;">)</span>;  <span style="color: #008000;">//number of rows</span> for<span style="color: #000000;">(</span>ii<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>; ii<span style="color: #000080;">&lt;=</span>nr; ii<span style="color: #000080;">++</span><span style="color: #000000;">)</span> <span style="color: #000000;">{</span> ds2<span style="color: #000000;">[</span>ii<span style="color: #000000;">]</span><span style="color: #000080;">=</span>abs<span style="color: #000000;">(</span>ds1<span style="color: #000000;">[</span>ii<span style="color: #000000;">]</span><span style="color: #000080;">-</span>summean<span style="color: #000000;">)</span><span style="color: #000080;">/</span>sumsd<span style="color: #000080;">&lt;=</span>zthresh?ds1<span style="color: #000000;">[</span>ii<span style="color: #000000;">]</span><span style="color: #000000;">:</span><span style="color: #0000dd;">0</span><span style="color: #000080;">/</span><span style="color: #0000dd;">0</span>; <span style="color: #008000;">//set missing if outlier</span> <span style="color: #000000;">}</span> return ds2; <span style="color: #000000;">}</span>
</pre>

  <p>Sie können dann die Funktion <i>remoutliers</i> verwenden, um das gesamten Arbeitsblatt zu durchsuchen. Zum Maskieren der Ausreißer im folgenden Arbeitsblatt:</p>

  <p><a class="image"><img alt="FAQ878 1.png" src="../images/How_to_eliminate_the_outliers_by_user_defined_defination/FAQ_878_1.png" width="397"></a></p>

  <p>Führen Sie die untenstehenden Skripte aus:</p>
  <pre class="lt" style="font-family:monospace;">
zthreshold<span style="color: #000080;">=</span><span style="color: #0000dd;">1.0</span>;  <span style="color: #008000;">//Set the threshold Z</span> nc<span style="color: #000080;">=</span>wks.<span style="color: #000080;">ncols</span>;  <span style="color: #008000;">//number of columns</span> nr<span style="color: #000080;">=</span>wks.<span style="color: #000080;">maxrows</span>;  <span style="color: #008000;">//number of rows</span> for<span style="color: #000000;">(</span>jj<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>; jj<span style="color: #000080;">&lt;=</span>nc; jj<span style="color: #000080;">++</span><span style="color: #000000;">)</span><span style="color: #000000;">{</span> dataset ds<span style="color: #000080;">=</span>wcol<span style="color: #000000;">(</span>jj<span style="color: #000000;">)</span>; range rc<span style="color: #000080;">=</span>wcol<span style="color: #000000;">(</span>jj<span style="color: #000000;">)</span>; wcol<span style="color: #000000;">(</span>jj<span style="color: #000000;">)</span><span style="color: #000080;">=</span>remoutliers<span style="color: #000000;">(</span>wcol<span style="color: #000000;">(</span>jj<span style="color: #000000;">)</span>,zthreshold<span style="color: #000000;">)</span>; for<span style="color: #000000;">(</span>ii<span style="color: #000080;">=</span><span style="color: #0000dd;">1</span>; ii<span style="color: #000080;">&lt;=</span>nr; ii<span style="color: #000080;">++</span><span style="color: #000000;">)</span> <span style="color: #000000;">{</span> if<span style="color: #000000;">(</span>rc<span style="color: #000000;">[</span>ii<span style="color: #000000;">]</span><span style="color: #000080;">==</span><span style="color: #0000dd;">0</span><span style="color: #000080;">/</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span> <span style="color: #000000;">{</span> rc<span style="color: #000000;">[</span>ii<span style="color: #000000;">]</span><span style="color: #000080;">=</span>ds<span style="color: #000000;">[</span>ii<span style="color: #000000;">]</span>; <span style="color: #008000;">//recover the data from original</span> rc<span style="color: #000080;">&lt;</span>ii<span style="color: #000080;">&gt;=</span><span style="color: #0000dd;">1</span>;      <span style="color: #008000;">//if cell is missing, mask it</span> <span style="color: #000000;">}</span> <span style="color: #000000;">}</span> <span style="color: #000000;">}</span>
</pre>

  <p>Am Ende erhalten Sie die folgenden Ergebnisse.</p>

  <p><a class="image"><img alt="FAQ878 2.png" src="../images/How_to_eliminate_the_outliers_by_user_defined_defination/FAQ_878_2.png" width="395"></a></p>

  <p><b>Hinweis</b>: Wenn Ihr Datensatz nach Zeilen angeordnet ist, müssen Sie die Arbeitsblattspalten zuerst transponieren.</p>
  <hr class='keywordshr'>

  <p><span class='keywords'>Schlüsselwörter:</span><span class='keywordsInput'>Ausreißer maskieren, Ausreißer entdecken</span></p>
