<h1 class="firstheading">FAQ-685 自身のOrigin C関数を実行するためにカスタムルーチンボタンを設定するには？</h1><p class='urlname' style='display: none'>run-OC-by-Custom-Routine-button</p>
<p class='faqID'>最終更新日：2021/7/9</p>
<p>Originの標準ツールバーにある<b>カスタムルーチン</b>ボタン<a  class="image"><img alt="Button Custom Routine.png" src="../images/How_to_configure_the_Custom_Routine_button_to_run_your_Origin_C_function/Button_Custom_Routine.png" width="23"  /></a>は、OriginフォルダにあるCustom.ogsファイルの [Main] セクションのLabTalkスクリプトを実行します。デフォルトでは、[Main] セクションのLabTalk スクリプトは type文で、メッセージボックスが開きます。このボタンからカスタムプログラムを開始するには、このtype文の代わりに関数を呼び出すLabTalkを入力する必要があります。
</p><p>コードビルダでCustom.ogsを開くには、CTRL+SHIFT ボタンを押しながら、<b>標準</b>ツールバーのカスタムルーチンボタンをクリックします。づると、コードビルダにスクリプトファイルが開きます。(あるいは、コードビルダの開くボタンをクリックして、<b>ファイルタイプ</b>を<i>LabTalkスクリプトファイル(*.OGS)</i> にしてCustom.ogsを開きます)
</p><p>コードビルダでスクリプトファイルを開いたら、次のLabTalk文を削除します。
</p>
<pre class="lt" style="font-family:monospace;">type <span style="color: #000080;">-</span>b <span style="color: #000080;">$</span>General.<span style="color: #000080;">Userbutton</span>;</pre>
<p>そしてソースファイルをコンパイル、リンク、呼び出すためのステートメントを書き込みます。変更後、Custom.ogs ファイルを保存します。これで、Originの<b>カスタムルーチンボタン</b>をクリックすることでカスタムプログラムを開始できます（キーボードショートカット：<b>ALT + F5</b>）。
</p><p>例えば、/OriginCサブフォルダに、以下の関数のプログラムをMyFile.cというソースファイルとして置いたとします。
</p>
<pre class="lt" style="font-family:monospace;">void test<span style="color: #000000;">(</span><span style="color: #000000;">)</span>
<span style="color: #000000;">{</span>
	printf<span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;Hello World\n&quot;</span><span style="color: #000000;">)</span>;
<span style="color: #000000;">}</span></pre>
<p>[Main] セクションに以下のLabTalkコードを入力して、関数のコンパイル、リンク、呼び出しをします。
</p>
<pre class="lt" style="font-family:monospace;">if <span style="color: #000000;">(</span>run.<span style="color: #000080;">LoadOC</span><span style="color: #000000;">(</span><span style="color: #ff00ff;">&quot;MyFile&quot;</span><span style="color: #000000;">)</span><span style="color: #000080;">!</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span><span style="color: #000000;">)</span>
	type <span style="color: #000080;">-</span>b <span style="color: #ff00ff;">&quot;Cannot load file&quot;</span>;
else
	test;</pre>
<p>コードを追加したら、スクリプトを保存します。
</p>
<hr class='keywordshr'><p><span class='keywords'>キーワード:</span><span class='keywordsInput'>LabTalk, Origin C</span></p>







    