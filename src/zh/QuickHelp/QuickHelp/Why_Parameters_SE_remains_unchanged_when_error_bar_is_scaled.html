<h1 class="firstHeading">3.135 FAQ-782 为什么误差棒有较大变化时，参数的标准误差仍保持不变？</h1><p class='urlname' style='display: none'>Chi-Se-Remain</p>
<p class='faqID'>Last Update: 8/14/2018</p>
<p>为了保持拟合参数的标准误差 (SE) ，以及相关的结果与其他软件兼容，在默认情况下会选中 <a class="external text" href="../../UserGuide/UserGuide/Settings_Tab_Upper_Panel.html#Advanced">the <b>Scale Error with sqrt(Reduced Chi-Sqr)</b> 框</a>。在选中此选项框时，即使误差棒发生很大变化，参数的 SE 也保持不变。 我们建议在选用 <a class="external text" href="../../UserGuide/UserGuide/Fitting_with_Errors_and_Weighting.html"><b>Instrumental, Arbitrary Dataset or Direct Weighting</b></a> 这些权重选项来拟合数据时，取消选中此选项，从而使参数的 SE 能反映权重的大小。
</p><p>你可以在以下对话框，找到 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b> 选项：
</p>
<dl><dd><ul><li>  <b>Nonlinear Fit</b> 对话框的 <a class="external text" href="../../UserGuide/UserGuide/Settings_Tab_Upper_Panel.html#Advanced">Advanced 选项卡: Fit Control</a>, 或者</li>
<li> <b>Linear Regression</b>  对话框的 <a class="external text" href="../../UserGuide/UserGuide/Linear_Regression_Dialog.html#Fit_Control">Fit Control 选项卡</a> . </li></ul></dd></dl>
<table class="note">

<tr>
<td><b>注意:</b>
<p>此选项仅会影响拟合参数的SE，并不会以任何方式影响拟合过程或参数值。
</p>
</td></tr></table>
<h2><a name=".E7.AE.80.E5.8D.95.E7.9A.84.E7.90.86.E8.AE.BA.E8.A7.A3.E9.87.8A"></a><span class="mw-headline">简单的理论解释</span></h2>
<p>我们在下面会讨是否选中 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b> 是如何改变第 <i>j</i> 个拟合参数 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-cb0e17d96e58d55d1eb06dc1b14b7a7b.png?v=0" title="\theta_j" alt="\theta_j" class="tex"/> 的SE值。为了简化问题，我们假设 误差棒 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-bf1c4cadc58df0f89c72d60e09326611.png?v=0" title="\sigma_{yi}" alt="\sigma_{yi}" class="tex"/> 是通过乘以常数 <i>k</i> 来缩放大小的。更详细的算法和解释，请参考  <a class="external text" href="../../UserGuide/Category/Theory_of_Nonlinear_Curve_Fitting.html#Parameter_Standard_Errors">非线性曲线拟合的理论</a>。
</p><p>默认情况下，当 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b> 选中时，对于参数<img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-3a69d07d2adf42061942779219a83d19.png?v=0" title="\hat \theta" alt="\hat \theta" class="tex"/> 的方差-协方差矩阵 (Variance-Convariance Matrix) <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-0d61f8370cad1d412f80b84d143e1257.png?v=0" title="C" alt="C" class="tex"/> 取决于<img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-a51470e10c536e93611fecd435c07013.png?v=0" title="F&#39;F" alt="F&#39;F" class="tex"/>和 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-10e16c6a764d367ca5077a54bf156f7e.png?v=0" title="\sigma^2" alt="\sigma^2" class="tex"/>。
</p>
<table class="formula">

<tr>
<th><img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-712b1e66b51431627b0566c6493c9d53.png?v=0" title="C=(F&#39;F)^{-1}\sigma^2" alt="C=(F&#39;F)^{-1}\sigma^2" class="tex"/>
</th>
<td>
<p>(1)
</p>
</td></tr></table>
<p>其中 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-800618943025315f869e4e1f09471012.png?v=0" title="F" alt="F" class="tex"/> 是偏导数矩阵，其在 <i>i</i> 行和  <i>j</i> 列中的元素是：
</p>
<table class="formula">

<tr>
<th><img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-fdcde880333e1fcb4143a0047bcb658d.png?v=0" title="F_{ij}=\frac{\partial f(X, \boldsymbol{\theta})}{\sigma _{yi}\partial \theta _j}" alt="F_{ij}=\frac{\partial f(X, \boldsymbol{\theta})}{\sigma _{yi}\partial \theta _j}" class="tex"/>
</th>
<td>
<p>(2)  
</p>
</td></tr></table>
<p>并且 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-10e16c6a764d367ca5077a54bf156f7e.png?v=0" title="\sigma^2" alt="\sigma^2" class="tex"/> 是误差方差， 它是根据 Reduced Chi-Sqr 估算得到的:
</p>
<table class="formula">

<tr>
<th><img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-b54f8fb4db112d83dc2ea2282d3ac805.png?v=0" title="\sigma^2 = \sum_{i=1}^n \frac{1}{{\sigma_{yi}}^2} \left[Y_i-f(X, \boldsymbol{\theta}) \right ]^2/df_{Error}" alt="\sigma^2 = \sum_{i=1}^n \frac{1}{{\sigma_{yi}}^2} \left[Y_i-f(X, \boldsymbol{\theta}) \right ]^2/df_{Error}" class="tex"/>
</th>
<td>
<p>(3)  
</p>
</td></tr></table>
<p><img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-cb0e17d96e58d55d1eb06dc1b14b7a7b.png?v=0" title="\theta_j" alt="\theta_j" class="tex"/> 的SE 是矩阵<img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-0d61f8370cad1d412f80b84d143e1257.png?v=0" title="C" alt="C" class="tex"/>的主对角线值的平方根。
</p>
<table class="formula">

<tr>
<th><img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-6b1dadac7ac34439ceb90c5f051afeab.png?v=0" title="\sigma_{\theta_j}=\sqrt{c_{jj}}\,\!" alt="\sigma_{\theta_j}=\sqrt{c_{jj}}\,\!" class="tex"/>
</th>
<td>
<p>(4)
</p>
</td></tr></table>
<p><br />
如果误差棒 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-bf1c4cadc58df0f89c72d60e09326611.png?v=0" title="\sigma_{yi}" alt="\sigma_{yi}" class="tex"/> 是随常数 <i>k</i> 而改变，那么 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-a51470e10c536e93611fecd435c07013.png?v=0" title="F&#39;F" alt="F&#39;F" class="tex"/> 和 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-98e76a752712c23c971df5a1d327a27a.png?v=0" title="sigma^2" alt="sigma^2" class="tex"/> 也将会随因子<img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-82095e9f7da27f5ee19fb1c82d1be1d3.png?v=0" title="1/k^2" alt="1/k^2" class="tex"/> 而改变，则 <i>k</i> 值将在 SE 的计算中相互抵消。 因此，当缩放误差时，SE 仍保持不变。
</p><p>如果取消选择 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b>，这意味着当计算方差-协方差矩阵时与 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-bf1c4cadc58df0f89c72d60e09326611.png?v=0" title="\sigma_{yi}" alt="\sigma_{yi}" class="tex"/> 无关，矩阵 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-0d61f8370cad1d412f80b84d143e1257.png?v=0" title="C" alt="C" class="tex"/> 仅取决于 <img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-de1cb387b7e4df1801ac403d6d695c4d.png?v=0" title="(F&#39;F)^{-1}" alt="(F&#39;F)^{-1}" class="tex"/>。
</p>
<table class="formula">

<tr>
<th><img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-da354fed6c7186ffd18d96073171c7ef.png?v=0" title="C=(F&#39;F)^{-1}" alt="C=(F&#39;F)^{-1}" class="tex"/>
</th>
<td>
<p>(5)
</p>
</td></tr></table>
<p>此时，SE 变为
</p>
<table class="formula">

<tr>
<th><img src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/math-b723811c7c0ffbc5194ecda68d218588.png?v=0" title="\sigma&#39;_{\theta_j}=\frac{\sigma_{\theta_j}}{\sigma}" alt="\sigma&#39;_{\theta_j}=\frac{\sigma_{\theta_j}}{\sigma}" class="tex"/>
</th>
<td>
<p>(6)
</p>
</td></tr></table>
<p>如果误差棒乘以<i>k</i>， 那么 SE 也将会是 <i>k</i> 倍。
</p><p><br />
在拟合模型之后，我们使用 reduced chi-sqr 来检查权重是否可以表示实际的 Y 误差。 简而言之，如果你发现选不选择 <b>Scale Error with sqrt(Reduced Chi-Sqr) </b>选项，会使参数的标准误有很大的变化，这意味着权重可能无法表示实际的 Y 误差。想了解有关详细信息，请参考<a class="external text" href="../../QuickHelp/QuickHelp/Why_is_my_Reduced_Chi-Sqr_value_very_different_from_1.html">此页</a>。
</p>
<h2><a name=".E7.AE.80.E5.8D.95.E7.A4.BA.E4.BE.8B"></a><span class="mw-headline">简单示例</span></h2>
<p>下面是一个简单的示例，可以验证 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b> 仅影响拟合参数的 SE。
</p>
<ol><li> 复制  <a href="#Sample_data">这个数据</a>，并粘贴到工作表中。</li>
<li> 右键单击 col(C)， 选择 <b>Set As: Y Error</b>。</li>
<li> 选中所有列，然后在菜单中选择 <b>Analysis: Fitting: Nonlinear Curve Fit</b>，打开 <b>Nonlinear Fit</b> 对话框。</li>
<li> 在 <b>Function</b> 下拉列表中选择 <b>Gauss</b>. 选择 <b>Advanced</b> 页面，展开 <b>Fit Control</b> 分支。确认选中 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b> 复选框。<br /><a  class="image"><img alt="Scale Error with sqrt 001.png" src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/Scale_Error_with_sqrt_001.png?v=5005" width="599"  /></a><br /> 点击 <b>Fit</b>，生成拟合报告，其中包含参数值和 SE 。<br /><a  class="image"><img alt="Scale Error with sqrt 002.png" src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/Scale_Error_with_sqrt_002.png?v=5006" width="479"  /></a></li>
<li> 点击绿色锁，选择  <b>Change Parameters</b>。在打开的 <b>Nonlinear Fit</b> 对话框中，取消选中 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b>。 <br /><a  class="image"><img alt="Scale Error with sqrt 003.png" src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/Scale_Error_with_sqrt_003.png?v=5007" width="576"  /></a><br /> 点击 <b>Fit</b>。参数的 SE 改变但拟合值不改变。<br /><a  class="image"><img alt="Scale Error with sqrt 004.png" src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/Scale_Error_with_sqrt_004.png?v=5008" width="479"  /></a></li>
<li> 现在我们将调整误差，并查看选不选择 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b> 选项是如何影响 SE 的。 通过 <b>Change Parameters</b>打开 <b>Nonlinear Fit</b>对话框。 选中 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b>，并将 <b>Recalculate</b> 更改为自动。</li>
<li> 将误差列 C 乘以10。报告表将会自动更新。你会看到参数的 SE 值保持不变 （对比步骤4的第二张图片）。 <br /><a  class="image"><img alt="Scale Error with sqrt 005.png" src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/Scale_Error_with_sqrt_005.png?v=5009" width="479"  /></a></li>
<li> 再次通过 <b>Change Parameters</b>  打开  <b>Nonlinear Fit</b> 对话框。 取消选中 <b>Scale Error with sqrt(Reduced Chi-Sqr)</b>。 点击 <b>Fit</b>。 你会看到此时，SE 的值乘以10。<br /><a  class="image"><img alt="Scale Error with sqrt 006.png" src="../images/Why_Parameters_SE_remains_unchanged_when_error_bar_is_scaled/Scale_Error_with_sqrt_006.png?v=5010" width="472"  /></a></li></ol>
<p><br />
</p>
<h5><a name="Sample_data"></a><span class="mw-headline">Sample data</span></h5>
<table class="simple" style="width:120px">
<tr>
<th> X
</th>
<th> Y
</th>
<th> Y Error
</th></tr>
<tr>
<td> 11
</td>
<td> 5
</td>
<td> 0.4472
</td></tr>
<tr>
<td> 13
</td>
<td> 10
</td>
<td> 0.6324
</td></tr>
<tr>
<td> 15
</td>
<td> 19
</td>
<td> 0.8718
</td></tr>
<tr>
<td> 17
</td>
<td> 27
</td>
<td> 1.0392
</td></tr>
<tr>
<td> 19
</td>
<td> 49
</td>
<td> 1.4
</td></tr>
<tr>
<td> 21
</td>
<td> 65
</td>
<td> 1.6124
</td></tr>
<tr>
<td> 23
</td>
<td> 77
</td>
<td> 1.755
</td></tr>
<tr>
<td> 25
</td>
<td> 80
</td>
<td> 1.7888
</td></tr>
<tr>
<td> 27
</td>
<td> 77
</td>
<td> 1.755
</td></tr>
<tr>
<td> 29
</td>
<td> 59
</td>
<td> 1.5362
</td></tr>
<tr>
<td> 31
</td>
<td> 44
</td>
<td> 1.3266
</td></tr>
<tr>
<td> 33
</td>
<td> 24
</td>
<td> 0.9798
</td></tr>
<tr>
<td> 35
</td>
<td> 11
</td>
<td> 0.6634
</td></tr>
<tr>
<td> 37
</td>
<td> 14
</td>
<td> 0.7484
</td></tr>
<tr>
<td> 39
</td>
<td> 4
</td>
<td> 0.4
</td></tr></table>
<hr class='keywordshr'><p><span class='keywords'>Keywords:</span><span class='keywordsInput'>Fitting, Standard Error, Reduced Chi-Sqr, Error Variance，拟合，标准误差，误差方差</span></p>






