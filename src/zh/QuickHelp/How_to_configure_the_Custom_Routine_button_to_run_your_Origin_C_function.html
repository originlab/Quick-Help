<h1 class="firstHeading">4.49 FAQ-685 如何配置 Custom Routine 按钮使其能运行自定义的 Origin C 函数？</h1><p class='urlname' style='display: none'>run-OC-by-Custom-Routine-button</p>
<p class='faqID'>Last Update: 11/12/2021</p>
<p>Origin 的 <b>Standard</b> 工具栏上的 <b>Custom Routine</b><a  class="image"><img alt="Button Custom Routine.png" src="../images/How_to_configure_the_Custom_Routine_button_to_run_your_Origin_C_function/Button_Custom_Routine.png?v=5034" width="23"  /></a> 按钮是用于执行位于 Origin 用户文件夹中 Custom.ogs 文件的 [Main] section 中的 LabTalk 脚本。默认情况下，[Main] 部分中的 LabTalk 脚本是一个 type 语句，它将弹出一个 Attention 对话框并在其中显示一条消息。如果您要用此按钮执行自定义程序，那么必须将这个 type 语句替换为用 LabTalk 调用您自己的函数的语句。
</p><p>您可以通过按住 <b>CTRL + SHIFT</b> 键的同时并点击在 <b>Standard</b> 工具栏上 <b>Custom Routine</b> 按钮从而在 <b>Code Builder</b> 中打开 Custom.ogs 文件，又或者在 <b>Code Builder</b> 中点击 <b>Oepn</b> 按钮并且在 <b>Files of Type</b> 的下列列表中选择 <i>LabTalk Script File (*.OGS)</i>，然后浏览找到 Custom.ogs 文件而将其打开。 
</p><p>一旦在 <b>Code Builder</b> 打开了这个脚本，将以下的 LabTalk 语句替换为编译，链接和调用您的源文件的语句：
</p>
<pre class="lt" style="font-family:monospace;">type <span style="color: #000080;">-</span>b <span style="color: #000080;">$</span>General.<span style="color: #000080;">Userbutton</span>;</pre>
<p>经过这一系列操作后，保存 Custom.ogs 文件。您就可以在 Origin 中使用 <b>Custom Routine</b> 按钮来执行您的自定义程序了（快捷键为：ALT + F5）。
</p><p>例如，如果您在保存于 /Origin C 子文件夹的 MyFile.c 源文件中编写了以下一段函数：
</p>
<pre class="oc" style="font-family:monospace;"><span style="color: #0000ff;">void</span> test<span style="color: #000000;">&#40;</span><span style="color: #000000;">&#41;</span>
<span style="color: #000000;">&#123;</span>
	<span style="color: #000000;">printf</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;Hello World<span style="color: #666666; font-weight: bold;">\n</span>&quot;</span><span style="color: #000000;">&#41;</span>;
<span style="color: #000000;">&#125;</span></pre>
<p>那么您可以在 [Main] section 中输入以下的 LabTalk 代码来编译，链接和调用您的函数:
</p>
<pre class="lt" style="font-family:monospace;">if <span style="color: #000000;">&#40;</span>run.<span style="color: #000080;">LoadOC</span><span style="color: #000000;">&#40;</span><span style="color: #ff00ff;">&quot;MyFile&quot;</span><span style="color: #000000;">&#41;</span><span style="color: #000080;">!</span><span style="color: #000080;">=</span><span style="color: #0000dd;">0</span><span style="color: #000000;">&#41;</span>
	type <span style="color: #000080;">-</span>b <span style="color: #ff00ff;">&quot;Cannot load file&quot;</span>;
else
	test;</pre>
<p>更改代码后保存文件。完成后当您点击 <b>Custom Routine</b> 按钮即可看到效果。
</p>
<hr class='keywordshr'><p><span class='keywords'>Keywords:</span><span class='keywordsInput'>LabTalk, Origin C</span></p>






